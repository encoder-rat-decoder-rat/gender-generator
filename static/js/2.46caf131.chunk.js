/*! For license information please see 2.46caf131.chunk.js.LICENSE.txt */
(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[2],[function(t,e,n){"use strict";n.d(e,"Sc",(function(){return rt.a})),n.d(e,"Tc",(function(){return rt.b})),n.d(e,"Fd",(function(){return te.a})),n.d(e,"Ld",(function(){return te.b})),n.d(e,"cd",(function(){return ee.a})),n.d(e,"fd",(function(){return ee.b})),n.d(e,"gd",(function(){return ee.c})),n.d(e,"hd",(function(){return ee.d})),n.d(e,"id",(function(){return ee.e})),n.d(e,"jd",(function(){return ee.f})),n.d(e,"ld",(function(){return ee.g})),n.d(e,"od",(function(){return ee.h})),n.d(e,"ud",(function(){return ee.k})),n.d(e,"xd",(function(){return ee.l})),n.d(e,"yd",(function(){return ee.m})),n.d(e,"zd",(function(){return ee.n})),n.d(e,"Ad",(function(){return ee.o})),n.d(e,"Cd",(function(){return ee.p})),n.d(e,"Dd",(function(){return ee.q})),n.d(e,"Ed",(function(){return ee.r})),n.d(e,"Gd",(function(){return ee.s})),n.d(e,"Hd",(function(){return ee.t})),n.d(e,"Id",(function(){return ee.u})),n.d(e,"Kd",(function(){return ee.v})),n.d(e,"Nd",(function(){return ee.w})),n.d(e,"qd",(function(){return ee.j})),n.d(e,"md",(function(){return ne.b})),n.d(e,"Jd",(function(){return ne.f})),n.d(e,"sd",(function(){return ne.d})),n.d(e,"pd",(function(){return ne.c})),n.d(e,"vd",(function(){return ne.e})),n.d(e,"wd",(function(){return Nt.d})),n.d(e,"nd",(function(){return h.b})),n.d(e,"ed",(function(){return a})),n.d(e,"rd",(function(){return r})),n.d(e,"Md",(function(){return $t})),n.d(e,"dd",(function(){return s})),n.d(e,"Bd",(function(){return i})),n.d(e,"kd",(function(){return We})),n.d(e,"td",(function(){return u})),n.d(e,"vb",(function(){return Xe.b})),n.d(e,"L",(function(){return Xe.a})),n.d(e,"a",(function(){return Ct.a})),n.d(e,"b",(function(){return Ct.b})),n.d(e,"c",(function(){return Ct.c})),n.d(e,"d",(function(){return Ct.d})),n.d(e,"e",(function(){return Ct.e})),n.d(e,"f",(function(){return Ct.f})),n.d(e,"g",(function(){return Ct.g})),n.d(e,"h",(function(){return Ct.h})),n.d(e,"i",(function(){return Ct.i})),n.d(e,"j",(function(){return Ct.j})),n.d(e,"k",(function(){return Ct.k})),n.d(e,"l",(function(){return Ct.l})),n.d(e,"n",(function(){return Ct.n})),n.d(e,"m",(function(){return Ct.m})),n.d(e,"o",(function(){return Ct.o})),n.d(e,"r",(function(){return Ct.r})),n.d(e,"p",(function(){return Ct.p})),n.d(e,"q",(function(){return Ct.q})),n.d(e,"s",(function(){return Ct.s})),n.d(e,"t",(function(){return Ct.t})),n.d(e,"u",(function(){return Ct.u})),n.d(e,"v",(function(){return Ct.v})),n.d(e,"w",(function(){return Ct.w})),n.d(e,"x",(function(){return Ct.x})),n.d(e,"y",(function(){return Ct.y})),n.d(e,"z",(function(){return Ct.z})),n.d(e,"A",(function(){return Ct.A})),n.d(e,"B",(function(){return Ct.B})),n.d(e,"C",(function(){return Ct.C})),n.d(e,"D",(function(){return Ct.D})),n.d(e,"E",(function(){return Ct.E})),n.d(e,"F",(function(){return Ct.F})),n.d(e,"G",(function(){return Ct.G})),n.d(e,"H",(function(){return Ct.H})),n.d(e,"I",(function(){return Ct.I})),n.d(e,"K",(function(){return Ct.K})),n.d(e,"J",(function(){return Ct.J})),n.d(e,"M",(function(){return Ct.L})),n.d(e,"N",(function(){return Ct.M})),n.d(e,"O",(function(){return Ct.N})),n.d(e,"P",(function(){return Ct.O})),n.d(e,"Q",(function(){return Ct.P})),n.d(e,"R",(function(){return Ct.Q})),n.d(e,"S",(function(){return Ct.R})),n.d(e,"U",(function(){return Ct.T})),n.d(e,"T",(function(){return Ct.S})),n.d(e,"jc",(function(){return Ct.hc})),n.d(e,"V",(function(){return Ct.U})),n.d(e,"W",(function(){return Ct.V})),n.d(e,"Y",(function(){return Ct.X})),n.d(e,"X",(function(){return Ct.W})),n.d(e,"Z",(function(){return Ct.Y})),n.d(e,"ab",(function(){return Ct.Z})),n.d(e,"bb",(function(){return Ct.ab})),n.d(e,"cb",(function(){return Ct.bb})),n.d(e,"db",(function(){return Ct.cb})),n.d(e,"eb",(function(){return Ct.db})),n.d(e,"fb",(function(){return Ct.eb})),n.d(e,"gb",(function(){return Ct.fb})),n.d(e,"ib",(function(){return Ct.hb})),n.d(e,"mb",(function(){return Ct.lb})),n.d(e,"lb",(function(){return Ct.kb})),n.d(e,"nb",(function(){return Ct.mb})),n.d(e,"ob",(function(){return Ct.nb})),n.d(e,"qb",(function(){return Ct.pb})),n.d(e,"pb",(function(){return Ct.ob})),n.d(e,"rb",(function(){return Ct.qb})),n.d(e,"sb",(function(){return Ct.rb})),n.d(e,"tb",(function(){return Ct.sb})),n.d(e,"ub",(function(){return Ct.tb})),n.d(e,"yb",(function(){return Ct.wb})),n.d(e,"zb",(function(){return Ct.xb})),n.d(e,"Ab",(function(){return Ct.yb})),n.d(e,"Bb",(function(){return Ct.zb})),n.d(e,"Cb",(function(){return Ct.Ab})),n.d(e,"Db",(function(){return Ct.Bb})),n.d(e,"Eb",(function(){return Ct.Cb})),n.d(e,"Fb",(function(){return Ct.Db})),n.d(e,"Gb",(function(){return Ct.Eb})),n.d(e,"wb",(function(){return Ct.ub})),n.d(e,"xb",(function(){return Ct.vb})),n.d(e,"Hb",(function(){return Ct.Fb})),n.d(e,"Nb",(function(){return Ct.Lb})),n.d(e,"Ib",(function(){return Ct.Gb})),n.d(e,"Lb",(function(){return Ct.Jb})),n.d(e,"Jb",(function(){return Ct.Hb})),n.d(e,"Kb",(function(){return Ct.Ib})),n.d(e,"Mb",(function(){return Ct.Kb})),n.d(e,"Ob",(function(){return Ct.Mb})),n.d(e,"Pb",(function(){return Ct.Nb})),n.d(e,"Qb",(function(){return Ct.Ob})),n.d(e,"Rb",(function(){return Ct.Pb})),n.d(e,"Sb",(function(){return Ct.Qb})),n.d(e,"Tb",(function(){return Ct.Rb})),n.d(e,"Ub",(function(){return Ct.Sb})),n.d(e,"Vb",(function(){return Ct.Tb})),n.d(e,"Zb",(function(){return Ct.Xb})),n.d(e,"Wb",(function(){return Ct.Ub})),n.d(e,"Xb",(function(){return Ct.Vb})),n.d(e,"Yb",(function(){return Ct.Wb})),n.d(e,"bc",(function(){return Ct.Zb})),n.d(e,"ac",(function(){return Ct.Yb})),n.d(e,"cc",(function(){return Ct.ac})),n.d(e,"dc",(function(){return Ct.bc})),n.d(e,"ec",(function(){return Ct.cc})),n.d(e,"fc",(function(){return Ct.dc})),n.d(e,"gc",(function(){return Ct.ec})),n.d(e,"hc",(function(){return Ct.fc})),n.d(e,"ic",(function(){return Ct.gc})),n.d(e,"kc",(function(){return Ct.ic})),n.d(e,"lc",(function(){return Ct.jc})),n.d(e,"nc",(function(){return Ct.lc})),n.d(e,"qc",(function(){return Ct.oc})),n.d(e,"rc",(function(){return Ct.pc})),n.d(e,"oc",(function(){return Ct.mc})),n.d(e,"pc",(function(){return Ct.nc})),n.d(e,"mc",(function(){return Ct.kc})),n.d(e,"sc",(function(){return Ct.qc})),n.d(e,"uc",(function(){return Ct.sc})),n.d(e,"vc",(function(){return Ct.tc})),n.d(e,"wc",(function(){return Ct.uc})),n.d(e,"xc",(function(){return Ct.vc})),n.d(e,"yc",(function(){return Ct.wc})),n.d(e,"Dc",(function(){return Ct.Bc})),n.d(e,"Bc",(function(){return Ct.zc})),n.d(e,"Cc",(function(){return Ct.Ac})),n.d(e,"Ac",(function(){return Ct.yc})),n.d(e,"zc",(function(){return Ct.xc})),n.d(e,"Fc",(function(){return Ct.Dc})),n.d(e,"Jc",(function(){return Ct.Hc})),n.d(e,"Pc",(function(){return Ct.Nc})),n.d(e,"Gc",(function(){return Ct.Ec})),n.d(e,"Ic",(function(){return Ct.Gc})),n.d(e,"Ec",(function(){return Ct.Cc})),n.d(e,"Lc",(function(){return Ct.Jc})),n.d(e,"Kc",(function(){return Ct.Ic})),n.d(e,"Oc",(function(){return Ct.Mc})),n.d(e,"Hc",(function(){return Ct.Fc})),n.d(e,"Nc",(function(){return Ct.Lc})),n.d(e,"Qc",(function(){return Ct.Oc})),n.d(e,"Rc",(function(){return Ct.Pc})),n.d(e,"Uc",(function(){return Ct.Qc})),n.d(e,"Vc",(function(){return Ct.Rc})),n.d(e,"Wc",(function(){return Ct.Sc})),n.d(e,"Xc",(function(){return Ct.Tc})),n.d(e,"Yc",(function(){return Ct.Uc})),n.d(e,"Zc",(function(){return Ct.Vc})),n.d(e,"ad",(function(){return Ct.Wc})),n.d(e,"Mc",(function(){return Ct.Kc})),n.d(e,"hb",(function(){return Ct.gb})),n.d(e,"tc",(function(){return Ct.rc})),n.d(e,"bd",(function(){return Ct.Xc})),n.d(e,"jb",(function(){return Ct.ib})),n.d(e,"kb",(function(){return Ct.jb}));var r={};n.r(r),n.d(r,"copyModel",(function(){return q})),n.d(r,"listModels",(function(){return G})),n.d(r,"moveModel",(function(){return Z})),n.d(r,"removeModel",(function(){return X})),n.d(r,"browserFiles",(function(){return ct})),n.d(r,"browserHTTPRequest",(function(){return _t})),n.d(r,"concatenateArrayBuffers",(function(){return b.d})),n.d(r,"decodeWeights",(function(){return b.e})),n.d(r,"encodeWeights",(function(){return b.f})),n.d(r,"fromMemory",(function(){return kt})),n.d(r,"getLoadHandlers",(function(){return w})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return b.g})),n.d(r,"getSaveHandlers",(function(){return O})),n.d(r,"http",(function(){return wt})),n.d(r,"isHTTPScheme",(function(){return xt})),n.d(r,"loadWeights",(function(){return mt})),n.d(r,"registerLoadRouter",(function(){return x})),n.d(r,"registerSaveRouter",(function(){return y})),n.d(r,"weightsLoaderFactory",(function(){return bt})),n.d(r,"withSaveHandler",(function(){return It}));var a={};n.r(a),n.d(a,"toPixels",(function(){return Mt})),n.d(a,"fromPixels",(function(){return Dt}));var i={};n.r(i),n.d(i,"assertParamsValid",(function(){return Ft})),n.d(i,"maskToAxes",(function(){return Lt})),n.d(i,"computeOutShape",(function(){return Bt})),n.d(i,"stridesWithElidedDims",(function(){return Ut})),n.d(i,"getNormalizedAxes",(function(){return Wt})),n.d(i,"startIndicesWithElidedDims",(function(){return Gt})),n.d(i,"stopIndicesWithElidedDims",(function(){return Ht})),n.d(i,"stridesForAxis",(function(){return Xt})),n.d(i,"startForAxis",(function(){return Yt})),n.d(i,"stopForAxis",(function(){return qt})),n.d(i,"isSliceContinous",(function(){return Kt})),n.d(i,"computeFlatOffset",(function(){return Zt})),n.d(i,"parseSliceParams",(function(){return Jt})),n.d(i,"sliceInfo",(function(){return Qt}));var o={};n.r(o),n.d(o,"segOpComputeOptimalWindowSize",(function(){return Le})),n.d(o,"computeOutShape",(function(){return Be})),n.d(o,"collectGatherOpShapeInfo",(function(){return Ue}));var s={};n.r(s),n.d(s,"axesAreInnerMostDims",(function(){return re.b})),n.d(s,"combineLocations",(function(){return re.c})),n.d(s,"computeOutAndReduceShapes",(function(){return re.d})),n.d(s,"expandShapeToKeepDim",(function(){return re.e})),n.d(s,"assertAxesAreInnerMostDims",(function(){return re.a})),n.d(s,"getAxesPermutation",(function(){return re.f})),n.d(s,"getUndoAxesPermutation",(function(){return re.h})),n.d(s,"getInnerMostAxes",(function(){return re.g})),n.d(s,"getBroadcastDims",(function(){return ae.b})),n.d(s,"getReductionAxes",(function(){return ae.c})),n.d(s,"assertAndGetBroadcastShape",(function(){return ae.a})),n.d(s,"assertParamsConsistent",(function(){return ie})),n.d(s,"computeOutShape",(function(){return oe})),n.d(s,"computeDilation2DInfo",(function(){return se.d})),n.d(s,"computePool2DInfo",(function(){return se.e})),n.d(s,"computePool3DInfo",(function(){return se.f})),n.d(s,"computeConv2DInfo",(function(){return se.a})),n.d(s,"computeConv3DInfo",(function(){return se.b})),n.d(s,"computeDefaultPad",(function(){return se.c})),n.d(s,"tupleValuesAreOne",(function(){return se.i})),n.d(s,"eitherStridesOrDilationsAreOne",(function(){return se.h})),n.d(s,"convertConv2DDataFormat",(function(){return se.g})),n.d(s,"getFusedDyActivation",(function(){return ue.c})),n.d(s,"getFusedBiasGradient",(function(){return ue.b})),n.d(s,"applyActivation",(function(){return ue.a})),n.d(s,"shouldFuse",(function(){return ue.d})),n.d(s,"PARALLELIZE_THRESHOLD",(function(){return ce})),n.d(s,"computeOptimalWindowSize",(function(){return de})),n.d(s,"slice_util",(function(){return i})),n.d(s,"upcastType",(function(){return te.b})),n.d(s,"getImageCenter",(function(){return le})),n.d(s,"getReshaped",(function(){return he})),n.d(s,"getPermuted",(function(){return pe})),n.d(s,"getReshapedPermuted",(function(){return fe})),n.d(s,"getSliceBeginCoords",(function(){return me})),n.d(s,"getSliceSize",(function(){return ve})),n.d(s,"prepareAndValidate",(function(){return be})),n.d(s,"validateUpdateShape",(function(){return ge.c})),n.d(s,"validateInput",(function(){return ge.b})),n.d(s,"calculateShapes",(function(){return ge.a})),n.d(s,"SELU_SCALEALPHA",(function(){return ye})),n.d(s,"SELU_SCALE",(function(){return xe})),n.d(s,"ERF_P",(function(){return Oe})),n.d(s,"ERF_A1",(function(){return we})),n.d(s,"ERF_A2",(function(){return _e})),n.d(s,"ERF_A3",(function(){return Te})),n.d(s,"ERF_A4",(function(){return Ee})),n.d(s,"ERF_A5",(function(){return ke})),n.d(s,"warn",(function(){return Ie})),n.d(s,"log",(function(){return Se})),n.d(s,"mergeRealAndImagArrays",(function(){return Ce})),n.d(s,"splitRealAndImagArrays",(function(){return Ne})),n.d(s,"complexWithEvenIndex",(function(){return je})),n.d(s,"complexWithOddIndex",(function(){return Ae})),n.d(s,"getComplexWithIndex",(function(){return Re})),n.d(s,"assignToTypedArray",(function(){return Me})),n.d(s,"exponents",(function(){return Pe})),n.d(s,"exponent",(function(){return De})),n.d(s,"prepareSplitSize",(function(){return Fe})),n.d(s,"segment_util",(function(){return o})),n.d(s,"fromUint8ToStringArray",(function(){return ze})),n.d(s,"fromStringArrayToUint8",(function(){return Ve}));var u={};n.r(u),n.d(u,"nonMaxSuppressionV3Impl",(function(){return Ge.a})),n.d(u,"nonMaxSuppressionV4Impl",(function(){return Ge.b})),n.d(u,"nonMaxSuppressionV5Impl",(function(){return Ge.c})),n.d(u,"whereImpl",(function(){return He.a}));var c=n(3),d=(n(105),n(7)),l=n(18),h=n(22),p=n(50),f=n(10),m=n.n(f),v=n(17),b=n(41),g=function(){function t(){Object(d.a)(this,t),this.saveRouters=[],this.loadRouters=[]}return Object(l.a)(t,null,[{key:"getInstance",value:function(){return null==t.instance&&(t.instance=new t),t.instance}},{key:"registerSaveRouter",value:function(e){t.getInstance().saveRouters.push(e)}},{key:"registerLoadRouter",value:function(e){t.getInstance().loadRouters.push(e)}},{key:"getSaveHandlers",value:function(e){return t.getHandlers(e,"save")}},{key:"getLoadHandlers",value:function(e,n){return t.getHandlers(e,"load",n)}},{key:"getHandlers",value:function(e,n,r){var a=[];return("load"===n?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach((function(t){var n=t(e,r);null!==n&&a.push(n)})),a}}]),t}(),y=function(t){return g.registerSaveRouter(t)},x=function(t){return g.registerLoadRouter(t)},O=function(t){return g.getSaveHandlers(t)},w=function(t,e){return g.getLoadHandlers(t,e)};function _(){if(!Object(h.b)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t="undefined"===typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function T(t){var e=t.result;e.createObjectStore("models_store",{keyPath:"modelPath"}),e.createObjectStore("model_info_store",{keyPath:"modelPath"})}var E=function(){function t(e){if(Object(d.a)(this,t),this.indexedDB=_(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return Object(l.a)(t,[{key:"save",value:function(){var t=Object(v.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.modelTopology instanceof ArrayBuffer)){t.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return t.abrupt("return",this.databaseAction(this.modelPath,e));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"load",value:function(){var t=Object(v.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"databaseAction",value:function(t,e){var n=this;return new Promise((function(t,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return T(a)},a.onsuccess=function(){var i=a.result;if(null==e){var o=i.transaction("models_store","readonly"),s=o.objectStore("models_store").get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));t(s.result.modelArtifacts)},s.onerror=function(t){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=Object(b.g)(e),d=i.transaction("model_info_store","readwrite"),l=d.objectStore("model_info_store"),h=l.put({modelPath:n.modelPath,modelArtifactsInfo:c});h.onsuccess=function(){var a=(u=i.transaction("models_store","readwrite")).objectStore("models_store").put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:c});a.onsuccess=function(){return t({modelArtifactsInfo:c})},a.onerror=function(t){var e=(l=d.objectStore("model_info_store")).delete(n.modelPath);e.onsuccess=function(){return i.close(),r(a.error)},e.onerror=function(t){return i.close(),r(a.error)}}},h.onerror=function(t){return i.close(),r(h.error)},d.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(t){return r(a.error)}}))}}]),t}();E.URL_SCHEME="indexeddb://";var k=function(t){return Object(h.b)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(E.URL_SCHEME)?(e=t.slice(E.URL_SCHEME.length),new E(e)):null;var e};g.registerSaveRouter(k),g.registerLoadRouter(k);var I=function(){function t(){Object(d.a)(this,t),this.indexedDB=_()}return Object(l.a)(t,[{key:"listModels",value:function(){var t=Object(v.a)(m.a.mark((function t(){var e=this;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return T(r)},r.onsuccess=function(){var e=r.result,a=e.transaction("model_info_store","readonly"),i=a.objectStore("model_info_store").getAll();i.onsuccess=function(){var e,n={},r=Object(p.a)(i.result);try{for(r.s();!(e=r.n()).done;){var a=e.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}t(n)},i.onerror=function(t){return e.close(),n(i.error)},a.oncomplete=function(){return e.close()}},r.onerror=function(t){return n(r.error)}})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"removeModel",value:function(){var t=Object(v.a)(m.a.mark((function t(e){var n=this;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(r=e).startsWith(E.URL_SCHEME)?r.slice(E.URL_SCHEME.length):r,t.abrupt("return",new Promise((function(t,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return T(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction("model_info_store","readwrite"),s=o.objectStore("model_info_store"),u=s.get(e);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));var a=s.delete(e),o=function(){var a=(n=i.transaction("models_store","readwrite")).objectStore("models_store").delete(e);a.onsuccess=function(){return t(u.result.modelArtifactsInfo)},a.onerror=function(t){return r(u.error)}};a.onsuccess=o,a.onerror=function(t){return o(),i.close(),r(u.error)}},u.onerror=function(t){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(t){return r(a.error)}})));case 2:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),S=n(9),C="tensorflowjs_models",N="info",j="model_topology",A="weight_specs",R="weight_data",M="model_metadata";function P(t){return{info:[C,t,N].join("/"),topology:[C,t,j].join("/"),weightSpecs:[C,t,A].join("/"),weightData:[C,t,R].join("/"),modelMetadata:[C,t,M].join("/")}}function D(t){var e=t.split("/");if(e.length<3)throw new Error("Invalid key format: ".concat(t));return e.slice(1,e.length-1).join("/")}var F=function(){function t(e){if(Object(d.a)(this,t),!Object(h.b)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=P(this.modelPath)}return Object(l.a)(t,[{key:"save",value:function(){var t=Object(v.a)(m.a.mark((function t(e){var n,r,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.modelTopology instanceof ArrayBuffer)){t.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=Object(b.g)(e),t.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Object(b.a)(e.weightData)),i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy},null!=e.signature&&(i.signature=e.signature),null!=e.userDefinedMetadata&&(i.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(i.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),t.abrupt("return",{modelArtifactsInfo:a});case 20:throw t.prev=20,t.t0=t.catch(7),this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 28:case"end":return t.stop()}}),t,this,[[7,20]])})));return function(e){return t.apply(this,arguments)}}()},{key:"load",value:function(){var t=Object(v.a)(m.a.mark((function t(){var e,n,r,a,i,o,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(e=JSON.parse(this.LS.getItem(this.keys.info)))){t.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===e.modelTopologyType){t.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){t.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){t.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer)),null!=(s=this.LS.getItem(this.keys.weightData))){t.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Object(b.b)(s),t.abrupt("return",n);case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();F.URL_SCHEME="localstorage://";var L=function(t){return Object(h.b)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(F.URL_SCHEME)?(e=t.slice(F.URL_SCHEME.length),new F(e)):null;var e};g.registerSaveRouter(L),g.registerLoadRouter(L);var B=function(){function t(){Object(d.a)(this,t),Object(S.b)(Object(h.b)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Object(S.b)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return Object(l.a)(t,[{key:"listModels",value:function(){var t=Object(v.a)(m.a.mark((function t(){var e,n,r,a,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e={},n=C+"/",r="/"+N,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=D(i),e[o]=JSON.parse(this.LS.getItem(i)));return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"removeModel",value:function(){var t=Object(v.a)(m.a.mark((function t(e){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(a=e).startsWith(F.URL_SCHEME)?a.slice(F.URL_SCHEME.length):a,n=P(e),null!=this.LS.getItem(n.info)){t.next=4;break}throw new Error("Cannot find model at path '".concat(e,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),t.abrupt("return",r);case 10:case"end":return t.stop()}var a}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),U=function(){function t(){Object(d.a)(this,t),this.managers={}}return Object(l.a)(t,null,[{key:"getInstance",value:function(){return null==t.instance&&(t.instance=new t),t.instance}},{key:"registerManager",value:function(e,n){Object(S.b)(null!=e,(function(){return"scheme must not be undefined or null."})),e.endsWith("://")&&(e=e.slice(0,e.indexOf("://"))),Object(S.b)(e.length>0,(function(){return"scheme must not be an empty string."}));var r=t.getInstance();Object(S.b)(null==r.managers[e],(function(){return"A model store manager is already registered for scheme '".concat(e,"'.")})),r.managers[e]=n}},{key:"getManager",value:function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return e}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),t}();function z(t){if(-1===t.indexOf("://"))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(U.getSchemes().join(",")));return{scheme:t.split("://")[0],path:t.split("://")[1]}}function V(t,e){return W.apply(this,arguments)}function W(){return(W=Object(v.a)(m.a.mark((function t(e,n){var r,a,i,o,s,u,c,d,l,h,p=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],Object(S.b)(e!==n,(function(){return"Old path and new path are the same: '".concat(e,"'")})),a=g.getLoadHandlers(e),Object(S.b)(a.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(e,".")})),Object(S.b)(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(e,".")})),i=a[0],o=g.getSaveHandlers(n),Object(S.b)(o.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Object(S.b)(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=z(e).scheme,c=z(e).path,d=u===z(e).scheme,t.next=15,i.load();case 15:if(l=t.sent,!r||!d){t.next=19;break}return t.next=19,U.getManager(u).removeModel(c);case 19:return t.next=21,s.save(l);case 21:if(h=t.sent,!r||d){t.next=25;break}return t.next=25,U.getManager(u).removeModel(c);case 25:return t.abrupt("return",h.modelArtifactsInfo);case 26:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(){return H.apply(this,arguments)}function H(){return(H=Object(v.a)(m.a.mark((function t(){var e,n,r,a,i,o,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=U.getSchemes(),n={},r=Object(p.a)(e),t.prev=3,r.s();case 5:if((a=r.n()).done){t.next=13;break}return i=a.value,t.next=9,U.getManager(i).listModels();case 9:for(s in o=t.sent)n[i+"://"+s]=o[s];case 11:t.next=5;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),r.e(t.t0);case 18:return t.prev=18,r.f(),t.finish(18);case 21:return t.abrupt("return",n);case 22:case"end":return t.stop()}}),t,null,[[3,15,18,21]])})))).apply(this,arguments)}function X(t){return Y.apply(this,arguments)}function Y(){return(Y=Object(v.a)(m.a.mark((function t(e){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=z(e),r=U.getManager(n.scheme),t.abrupt("return",r.removeModel(n.path));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(t,e){return K.apply(this,arguments)}function K(){return(K=Object(v.a)(m.a.mark((function t(e,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return!1,t.abrupt("return",V(e,n,!1));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(t,e){return J.apply(this,arguments)}function J(){return(J=Object(v.a)(m.a.mark((function t(e,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return!0,t.abrupt("return",V(e,n,!0));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Q=function(){function t(){Object(d.a)(this,t)}return Object(l.a)(t,[{key:"fetch",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return fetch(t,e)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got ".concat(e));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}},{key:"decode",value:function(t,e){return new TextDecoder(e).decode(t)}}]),t}();if(Object(h.b)().get("IS_BROWSER")){Object(h.b)().setPlatform("browser",new Q);try{U.registerManager(F.URL_SCHEME,new B)}catch(Ye){}try{U.registerManager(E.URL_SCHEME,new I)}catch(Ye){}}n(362);var $=n(57),tt=n(33),et=n(60),nt=n(120),rt=n(30);Object(c.b)();var at={buffer:$.a,cast:tt.a,clone:et.a,print:nt.a};Object(rt.e)(at);var it=n(19);function ot(t){return new Promise((function(t){return setTimeout(t)})).then(t)}var st=function(){function t(e){if(Object(d.a)(this,t),!Object(h.b)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelTopologyFileName=e+".json",this.weightDataFileName=e+".weights.bin"}return Object(l.a)(t,[{key:"save",value:function(){var t=Object(v.a)(m.a.mark((function t(e){var n,r,a,i,o,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof document){t.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer)){t.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},null!=e.signature&&(a.signature=e.signature),null!=e.userDefinedMetadata&&(a.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(a.modelInitializer=e.modelInitializer),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,t.next=18,ot((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 18:if(null==e.weightData){t.next=24;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,t.next=24,ot((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 24:return t.abrupt("return",{modelArtifactsInfo:Object(b.g)(e)});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();st.URL_SCHEME="downloads://";var ut=function(){function t(e){if(Object(d.a)(this,t),null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(e));this.files=e}return Object(l.a)(t,[{key:"load",value:function(){var t=Object(v.a)(m.a.mark((function t(){var e,n,r=this;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.files[0],n=this.files.slice(1),t.abrupt("return",new Promise((function(t,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===n.length&&t({modelTopology:s});var u=o.weightsManifest;if(null!=u){var c;try{c=r.checkManifestAndWeightFiles(u,n)}catch(Ye){return void a(Ye)}var d=[],l=[],h=[];u.forEach((function(t){t.paths.forEach((function(t){l.push(t),h.push(null)})),d.push.apply(d,Object(it.a)(t.weights))})),u.forEach((function(e){e.paths.forEach((function(e){var n=new FileReader;n.onload=function(n){var r=n.target.result,a=l.indexOf(e);if(h[a]=r,-1===h.indexOf(null)){var i={modelTopology:s,weightSpecs:d,weightData:Object(b.d)(h),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy};null!=o.signature&&(i.signature=o.signature),null!=o.userDefinedMetadata&&(i.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(i.modelInitializer=o.modelInitializer),t(i)}},n.onerror=function(t){return a("Failed to weights data from file of path '".concat(e,"'."))},n.readAsArrayBuffer(c[e])}))}))}else a(new Error("weightManifest field is missing from file ".concat(e.name)))}else a(new Error("modelTopology field is missing from file ".concat(e.name)))},i.onerror=function(t){return a("Failed to read model topology and weights manifest JSON "+"from file '".concat(e.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},i.readAsText(e)})));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkManifestAndWeightFiles",value:function(t,e){var n,r=[],a=e.map((function(t){return Object(b.c)(t.name)})),i={},o=Object(p.a)(t);try{for(o.s();!(n=o.n()).done;){n.value.paths.forEach((function(t){var n=Object(b.c)(t);if(-1!==r.indexOf(n))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(n,"'"));if(r.push(n),-1===a.indexOf(n))throw new Error("Weight file with basename '".concat(n,"' is not provided."));i[t]=e[a.indexOf(n)]}))}}catch(Ye){o.e(Ye)}finally{o.f()}if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(e.length,")."));return i}}]),t}();function ct(t){return new ut(t)}g.registerSaveRouter((function(t){return Object(h.b)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(st.URL_SCHEME)?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new st(t)}(t.slice(st.URL_SCHEME.length)):null}));var dt=n(6);function lt(t,e,n,r){!function(t){Object(S.b)(null!=t&&Array.isArray(t)&&t.length>0,(function(){return"promises must be a none empty array"}))}(t),function(t,e){Object(S.b)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(t)})),Object(S.b)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(e)})),Object(S.b)(e>=t,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(t," and endFraction ")+"".concat(e)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(t.map((function(i){return i.then((function(i){var o=n+ ++a/t.length*(r-n);return e(o),i})),i})))}var ht=n(114);function pt(t,e){return ft.apply(this,arguments)}function ft(){return(ft=Object(v.a)(m.a.mark((function t(e,n){var r,a,i,o,s,u,c,d,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Object(h.b)().platform.fetch:n.fetchFunc,a=e.map((function(t){return r(t,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){t.next=11;break}return t.next=8,Promise.all(a);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,lt(a,n.onProgress,i,o);case 13:t.t0=t.sent;case 14:if(s=t.t0,u=s.map((function(t){return t.arrayBuffer()})),c=.5,d=1,null!=n.onProgress){t.next=24;break}return t.next=21,Promise.all(u);case 21:t.t1=t.sent,t.next=27;break;case 24:return t.next=26,lt(u,n.onProgress,c,d);case 26:t.t1=t.sent;case 27:return l=t.t1,t.abrupt("return",l);case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(t){return vt.apply(this,arguments)}function vt(){return(vt=Object(v.a)(m.a.mark((function t(e){var n,r,a,i,o=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=bt((function(t){return pt(t,{requestInit:a})})),t.abrupt("return",i(e,n,r));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(t){return function(){var e=Object(v.a)(m.a.mark((function e(n){var r,a,i,o,s,u,c,d,l,h,p,f,v=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(t,e){var n=0;t.weights.forEach((function(t){var r="quantization"in t?t.quantization.dtype:t.dtype,c=ht.a[r]*S.O(t.shape),d=function(){i[e]=!0,null==o[e]&&(o[e]=[]),o[e].push({manifestEntry:t,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(e,n){e===t.name&&(d(),s[n]=!0)})):d(),u.push(t.name),n+=c}))})),s.every((function(t){return t}))){e.next=10;break}throw c=a.filter((function(t,e){return!s[e]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return d=i.reduce((function(t,e,n){return e&&t.push(n),t}),[]),l=[],d.forEach((function(t){n[t].paths.forEach((function(t){var e=r+(r.endsWith("/")?"":"/")+t;l.push(e)}))})),e.next=15,t(l);case 15:return h=e.sent,p={},f=0,d.forEach((function(t){for(var e=n[t].paths.length,r=0,a=0;a<e;a++)r+=h[f+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<e;c++){var d=new Uint8Array(h[f+c]);s.set(d,u),u+=d.byteLength}o[t].forEach((function(t){var e=i.slice(t.groupOffset,t.groupOffset+t.sizeBytes),n=Object(b.e)(e,[t.manifestEntry]);for(var r in n)p[r]=n[r]})),f+=e})),e.abrupt("return",p);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var gt=function(){function t(e,n){if(Object(d.a)(this,t),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Object(S.b)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Object(h.b)().platform.fetch,Object(S.b)(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&Object(S.b)(2===e.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,").")})),this.path=e,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return Object(l.a)(t,[{key:"save",value:function(){var t=Object(v.a)(m.a.mark((function t(e){var n,r,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.modelTopology instanceof ArrayBuffer)){t.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},null!=e.signature&&(a.signature=e.signature),null!=e.userDefinedMetadata&&(a.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(a.modelInitializer=e.modelInitializer),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=e.weightData&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),t.next=13,this.fetch(this.path,n);case 13:if(!(i=t.sent).ok){t.next=18;break}return t.abrupt("return",{modelArtifactsInfo:Object(b.g)(e),responses:[i]});case 18:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"load",value:function(){var t=Object(v.a)(m.a.mark((function t(){var e,n,r,a,i,o,s,u,c,d,l,h,p,f,v,b;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(this.path,this.requestInit);case 2:if((e=t.sent).ok){t.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return t.prev=5,t.next=8,e.json();case 8:n=t.sent,t.next=16;break;case 11:throw t.prev=11,t.t0=t.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,u=n.format,c=n.signature,d=n.userDefinedMetadata,null!=a||null!=i){t.next=25;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 25:if(null==i){t.next=32;break}return t.next=28,this.loadWeights(i);case 28:p=t.sent,f=Object(dt.a)(p,2),l=f[0],h=f[1];case 32:return v={modelTopology:a,weightSpecs:l,weightData:h,generatedBy:o,convertedBy:s,format:u},null!=c&&(v.signature=c),null!=d&&(v.userDefinedMetadata=d),(b=n.modelInitializer)&&(v.modelInitializer=b),t.abrupt("return",v);case 38:case"end":return t.stop()}}),t,this,[[5,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var t=Object(v.a)(m.a.mark((function t(e){var n,r,a,i,o,s,u,c,d,l,h,f,v,g,y,x,O,w,_;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=yt(n),a=Object(dt.a)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],c=Object(p.a)(e);try{for(c.s();!(d=c.n()).done;)l=d.value,u.push.apply(u,Object(it.a)(l.weights))}catch(Ye){c.e(Ye)}finally{c.f()}h=[],f=[],v=Object(p.a)(e);try{for(v.s();!(g=v.n()).done;){y=g.value,x=Object(p.a)(y.paths);try{for(x.s();!(O=x.n()).done;)w=O.value,null!=this.weightUrlConverter?f.push(this.weightUrlConverter(w)):h.push(s+w+o)}catch(Ye){x.e(Ye)}finally{x.f()}}}catch(Ye){v.e(Ye)}finally{v.f()}if(!this.weightUrlConverter){t.next=19;break}return t.t0=h.push,t.t1=h,t.t2=it.a,t.next=16,Promise.all(f);case 16:t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.t0.apply.call(t.t0,t.t1,t.t4);case 19:return t.next=21,pt(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return _=t.sent,t.abrupt("return",[u,Object(b.d)(_)]);case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function yt(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}function xt(t){return null!=t.match(gt.URL_SCHEME_REGEX)}gt.URL_SCHEME_REGEX=/^https?:\/\//;var Ot=function(t,e){if("undefined"===typeof fetch&&(null==e||null==e.fetchFunc))return null;return(Array.isArray(t)?t.every((function(t){return xt(t)})):xt(t))?wt(t,e):null};function wt(t,e){return new gt(t,e)}function _t(t,e){return wt(t,e)}g.registerSaveRouter(Ot),g.registerLoadRouter(Ot);var Tt=function(){function t(e){Object(d.a)(this,t),this.modelArtifacts=e}return Object(l.a)(t,[{key:"load",value:function(){var t=Object(v.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.modelArtifacts);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),Et=function(){function t(e){Object(d.a)(this,t),this.saveHandler=e}return Object(l.a)(t,[{key:"save",value:function(){var t=Object(v.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.saveHandler(e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();function kt(t,e,n,r){if(1===arguments.length){var a=null!=t.modelTopology||null!=t.weightSpecs;return a?new Tt(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Tt({modelTopology:t}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Tt({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r})}function It(t){return new Et(t)}var St,Ct=n(5),Nt=n(65),jt=n(2),At=n(4),Rt=n(143);function Mt(t,e){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(v.a)(m.a.mark((function t(e,n){var r,a,i,o,s,u,c,d,l,h,p,f,v,b,g,y,x;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(jt.a)(e,"img","toPixels"),e instanceof rt.a||(a=r,r=Object(tt.a)(a,"int32"),a.dispose()),2===r.rank||3===r.rank){t.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=Object(dt.a)(i,2),s=o[0],u=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){t.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){t.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return t.next=12,r.data();case 12:d=t.sent,l="float32"===r.dtype?255:1,h=new Uint8ClampedArray(u*s*4),p=0;case 16:if(!(p<s*u)){t.next=41;break}f=[0,0,0,255],v=0;case 19:if(!(v<c)){t.next=33;break}if(b=d[p*c+v],"float32"!==r.dtype){t.next=26;break}if(!(b<0||b>1)){t.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(b,"."));case 24:t.next=29;break;case 26:if("int32"!==r.dtype){t.next=29;break}if(!(b<0||b>255)){t.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(b,"."));case 29:1===c?(f[0]=b*l,f[1]=b*l,f[2]=b*l):f[v]=b*l;case 30:v++,t.next=19;break;case 33:h[(g=4*p)+0]=Math.round(f[0]),h[g+1]=Math.round(f[1]),h[g+2]=Math.round(f[2]),h[g+3]=Math.round(f[3]);case 38:++p,t.next=16;break;case 41:return null!=n&&(n.width=u,n.height=s,y=n.getContext("2d"),x=new ImageData(h,u,s),y.putImageData(x,0,0)),r!==e&&r.dispose(),t.abrupt("return",h);case 44:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Dt=Object(At.a)({fromPixels_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement)i=!0;else if(null!=t.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(t.constructor.name));s=!0}if(a){var u=2;if(a&&t.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var d=Object(Nt.b)(Ct.gb,c.a.backendName);if(null!=d){var l={pixels:t},h={numChannels:e};return c.a.runKernel(Ct.gb,l,h)}var p,f,m=a?[t.videoWidth,t.videoHeight]:[t.width,t.height],v=Object(dt.a)(m,2),b=v[0],g=v[1];if(o?p=t.getContext("2d").getImageData(0,0,b,g).data:r||n?p=t.data:(i||a||s)&&(null==St&&(St=document.createElement("canvas").getContext("2d")),St.canvas.width=b,St.canvas.height=g,St.drawImage(t,0,0,b,g),p=St.getImageData(0,0,b,g).data),4===e)f=new Int32Array(p);else{var y=b*g;f=new Int32Array(y*e);for(var x=0;x<y;x++)for(var O=0;O<e;++O)f[x*e+O]=p[4*x+O]}var w=[g,b,e];return Object(Rt.a)(f,w,"int32")}});function Ft(t,e,n){var r=t.shape.length;S.b(r===e.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(e," must ")+"match the rank of the array (".concat(r,").")})),S.b(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){S.b(e[a]+n[a]<=t.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(e[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(t.shape[a],")")}))},i=0;i<r;++i)a(i)}function Lt(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function Bt(t,e,n){for(var r=[],a=0;a<t.length;a++)r[a]=Math.ceil((e[a]-t[a])/n[a]);return r}function Ut(t,e,n,r){for(var a=Object(it.a)(t),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[e]=1:(a.splice(e,0,1),a.pop());return a}function zt(t,e,n){return n<=t?n:n-(e-1)}function Vt(t,e){for(var n=[],r=0;r<t;r++)n.push(e+r);return n}function Wt(t,e,n,r,a,i,o,s,u){var c=t.length,d=new Array(c),l=new Array(c),h=new Array(c);if(e.length&&n>0){var p=e[0],f=n+1;d=Gt(o,p,f,r,t),l=Ht(s,p,f,a,t),h=Ut(i,p,f,t)}else for(var m=0;m<c;m++)d[m]=Yt(o,r,i,t,m,u),l[m]=qt(s,a,i,t,m,u),h[m]=Xt(i,m,u);return{begin:d,end:l,strides:h}}function Gt(t,e,n,r,a){for(var i=Object(it.a)(a),o=Vt(n,e),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=zt(e,n,s),c=r[u];t&1<<u&&(c=0),i[s]=c}return i}function Ht(t,e,n,r,a){for(var i=Object(it.a)(a),o=Vt(n,e),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=zt(e,n,s),c=r[u];t&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[s]=c}for(var d=0;d<i.length;d++){var l=a[d];i[d]<0&&(i[d]+=l),i[d]=S.i(0,i[d],a[d])}return i}function Xt(t,e,n){var r=t[e];return(n&1<<e||null==r)&&(r=1),r}function Yt(t,e,n,r,a,i){var o=e[a],s=n[a]||1;(t&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=S.i(0,o,u-1)}function qt(t,e,n,r,a,i){var o=e[a],s=n[a]||1;(t&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=s>0?S.i(0,o,u):S.i(-1,o,u-1)}function Kt(t,e,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function Zt(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Jt(t,e,n){var r,a,i=t.shape.length;return(r="number"===typeof e?[e].concat(Object(it.a)(new Array(i-1).fill(0))):e.length<i?e.concat(new Array(i-e.length).fill(0)):e.slice()).forEach((function(t){S.b(-1!==t,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(Object(it.a)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(e,n){return e>=0?e:(S.b(-1===e,(function(){return"Negative size values should be exactly -1 but got "+"".concat(e," for the slice() size at index ").concat(n,".")})),t.shape[n]-r[n])})),[r,a]}function Qt(t,e,n,r,a,i,o,s,u){var c=e.slice(),d=n.slice(),l=r;null==r&&(l=new Array(c.length));var h=Lt(o);if(h.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==o&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==o&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var p=t.length-c.length,f=Lt(s),m=t.slice();f.forEach((function(t){c[t]=0,d[t]=1,m.splice(t,0,1)}));var v=Wt(m,h,p,c,d,l,a,i,o),b=v.begin,g=v.end,y=v.strides;c=b,d=g,l=y;var x=Lt(u);x.forEach((function(t){d[t]=c[t]+1,l[t]=1}));var O=Bt(c,d,l),w=O.filter((function(t,e){return-1===x.indexOf(e)}));return{nonStrided:l.every((function(t){return 1===t})),$begin:c,$end:d,$strides:l,size:O,newShape:m,outShape:w}}var $t=n(16),te=n(76),ee=n(234),ne=n(130),re=n(79),ae=n(31);function ie(t,e){var n=t[0].length;t.forEach((function(t,e){S.b(t.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(e,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),S.b(e>=0&&e<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=t[0];t.forEach((function(t,a){for(var i=0;i<n;i++)S.b(i===e||t[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(t,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function oe(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}var se=n(44),ue=n(47),ce=30;function de(t){return t<=ce?t:Object(S.G)(t,Math.floor(Math.sqrt(t)))}function le(t,e,n){return[n*("number"===typeof t?t:t[0]),e*("number"===typeof t?t:t[1])]}function he(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(e.slice(0))).push(t[0]/n),a=a.concat(t.slice(1));else{a=a.concat(t[0]);for(var i=e.length,o=0;o<i;++o)a=a.concat([t[o+1]/e[o],e[o]]);a=a.concat(t.slice(i+1))}return a}function pe(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(e);for(var a=e+1;a<t;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<t;++s)s>=2*e+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function fe(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(t[0]/n):a.push(t[0]*n);for(var i=1;i<t.length;++i)i<=e.length?r?a.push(e[i-1]*t[i]):a.push(t[i]/e[i-1]):a.push(t[i]);return a}function me(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function ve(t,e,n){for(var r=t.slice(0,1),a=0;a<n;++a)r.push(t[a+1]-e[a][0]-e[a][1]);return r}function be(t,e){var n=t.shape.length,r=e.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(e.shape[r-1]," vs. ").concat(n));if(0===Object(S.O)(t.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(t.shape,"."));for(var a=e.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=t.shape,c=a.slice();c.pop();for(var d=1,l=i;l<n;++l)d*=u[l],c.push(u[l]);var h=[].concat(Object(it.a)(Object(S.j)(t.shape).map((function(t){return t/d}))),[1]).slice(0,i);return[c,o,d,h]}var ge=n(92),ye=1.7580993408473768,xe=1.0507009873554805,Oe=.3275911,we=.254829592,_e=-.284496736,Te=1.421413741,Ee=-1.453152027,ke=1.061405429;function Ie(){var t;Object(h.b)().getBool("IS_TEST")||(t=console).warn.apply(t,arguments)}function Se(){var t;Object(h.b)().getBool("IS_TEST")||(t=console).log.apply(t,arguments)}function Ce(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(t.length,", imag: ").concat(e.length,"."));for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Ne(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function je(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),a=0;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function Ae(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),a=2;a<t.length;a+=4)n[Math.floor(a/4)]=t[a],r[Math.floor(a/4)]=t[a+1];return{real:n,imag:r}}function Re(t,e){return{real:t[2*e],imag:t[2*e+1]}}function Me(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Pe(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),a=0;a<Math.ceil(t/2);a++){var i=(e?2:-2)*Math.PI*(a/t);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function De(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function Fe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof e)Object(S.b)(t.shape[n]%e===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(e).fill(t.shape[n]/e);else{var a=e.reduce((function(t,e){return-1===e&&(t+=1),t}),0);Object(S.b)(a<=1,(function(){return"There should be only one negative value in split array."}));var i=e.indexOf(-1);if(-1!==i){var o=e.reduce((function(t,e){return e>0?t+e:t}));e[i]=t.shape[n]-o}Object(S.b)(t.shape[n]===e.reduce((function(t,e){return t+e})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=e}return r}function Le(t,e){var n,r=!1;for(t<=ce?(n=t,r=!0):n=Object(S.G)(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=Object(S.G)(t,n+1);return n}function Be(t,e,n){for(var r=[],a=t.length,i=0;i<a;i++)i!==e?r.push(t[i]):r.push(n);return r}function Ue(t,e,n,r){var a=e.shape.length,i=t.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(t.shape[o]!==e.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(t.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(e.shape[o],"."));for(var s=t.shape[n],u=[],c=1,d=1,l=1,h=0;h<r;++h)u.push(t.shape[h]),c*=t.shape[h];for(var p=r;p<n;p++)u.push(t.shape[p]),d*=t.shape[p];for(var f=r;f<a;f++)u.push(e.shape[f]);for(var m=n+1;m<i;m++)u.push(t.shape[m]),l*=t.shape[m];return{batchSize:c,sliceSize:l,outerSize:d,dimSize:s,outputShape:u}}function ze(t){try{return t.map((function(t){return Object($t.decodeString)(t)}))}catch(Ye){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Ye))}}function Ve(t){return t.map((function(t){return Object($t.encodeString)(t)}))}var We=n(119),Ge=n(66),He=n(144),Xe=n(106)},function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return h}));var r=n(6),a=n(0);function i(t,e,n,r,i){var s=e.inputParams[t];if(s&&void 0!==s.inputIndexStart){var u=s.inputIndexStart,c=0===s.inputIndexEnd?void 0:void 0===s.inputIndexEnd?u+1:s.inputIndexEnd;if("tensor"===s.type)return o(e.inputNames[s.inputIndexStart],n,r,i);if("tensors"===s.type)return e.inputNames.slice(u,c).map((function(t){return o(t,n,r,i)}));var d=o(e.inputNames.slice(u)[0],n,r,i),l=d.dataSync();return"number"===s.type?l[0]:a.Md.toNestedArray(d.shape,l)}var h=e.attrParams[t];return h&&h.value}function o(t,e,n,a){var i=d(t),o=Object(r.a)(i,2),s=o[0],u=o[1];if(null!=a){var l=a.getHashTableHandleByName(s);if(null!=l)return l}var h=n.currentContextIds.find((function(t){return!!e[c(s,t)]}));return void 0!==h?e[c(s,h)][u]:void 0}function s(t,e,n){return e[c(t,n.currentContextId)]}function u(t,e){var n=d(t),a=Object(r.a)(n,2),i=a[0],o=a[1];return[c(i,e&&e.currentContextId),o]}function c(t,e){return e?"".concat(t,"-").concat(e):t}function d(t){var e=t.split(":");return 1===e.length?[t,0]:[e[0],Number(e[e.length-1])]}function l(t,e,n){var r=i("pad",t,e,n);if("explicit"===r){r=i("explicitPaddings",t,e,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function h(t){return t.kept?t:Object(a.hd)(t)}},function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return l}));var r=n(3),a=n(22),i=n(30),o=n(9),s=n(16);function u(t,e){var n=t;if(Object(o.A)(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||Object(o.A)(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&Object(a.b)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],!Array.isArray(e)&&!Object(o.A)(e))return void Object(o.b)(0===n.length,(function(){return"Element arr[".concat(r.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(n[0]," elements")}));Object(o.b)(n.length>0,(function(){return"Element arr[".concat(r.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Object(o.b)(e.length===n[0],(function(){return"Element arr[".concat(r.join("]["),"] should have ").concat(n[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var a=n.slice(1),i=0;i<e.length;++i)t(e[i],a,r.concat(i))}(t,r,[]),r}function c(t,e,n,r){if("string_or_numeric"!==t){if(null==t)throw new Error("Expected dtype cannot be null.");if("numeric"!==t&&t!==e||"numeric"===t&&"string"===e)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(t," tensor, but got ").concat(e," tensor"))}}function d(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(t instanceof i.a)return c(a,t.dtype,e,n),t;var d=Object(o.r)(t);if("string"!==d&&["bool","int32","float32"].indexOf(a)>=0&&(d=a),c(a,d,e,n),null==t||!Object(o.A)(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t){var l=null==t?"null":t.constructor.name;throw new Error("Argument '".concat(e,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(l,"'"))}var h=u(t,d);Object(o.A)(t)||Array.isArray(t)||(t=[t]);var p=!0,f="string"!==d?Object(s.toTypedArray)(t,d):Object(o.m)(t,[],p);return r.a.makeTensor(f,h,d)}function l(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(t))throw new Error("Argument ".concat(e," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=t;return a.map((function(t,a){return d(t,"".concat(e,"[").concat(a,"]"),n,r)}))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return I})),n.d(e,"a",(function(){return S}));var r=n(50),a=n(19),i=n(10),o=n.n(i),s=n(17),u=n(7),c=n(18),d=n(106),l=n(22),h=n(90),p=n(5),f=n(65),m=n(16),v=n(9),b=function(){function t(e,n){Object(u.a)(this,t),this.backendTimer=e,this.logger=n,null==n&&(this.logger=new g)}return Object(c.a)(t,[{key:"profileKernel",value:function(t,e,n){var a,i,o=function(){a=n()},s=m.now();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();var u,c=Object(r.a)(a);try{for(c.s();!(u=c.n()).done;){u.value.dataSync()}}catch(p){c.e(p)}finally{c.f()}i=Promise.resolve({kernelMs:m.now()-s})}if(Object(l.b)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var d=function(e){var n=a[e];n.data().then((function(e){!function(t,e,n){if("float32"!==e)return!1;for(var r=0;r<t.length;r++){var a=t[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(e,n.dtype,t)}))},h=0;h<a.length;h++)d(h);return{kernelName:t,outputs:a,inputs:e,timeMs:i.then((function(t){return t.kernelMs})),extraInfo:i.then((function(t){return null!=t.getExtraProfileInfo?t.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(t){var e=this,n=t.kernelName,r=t.outputs,a=t.timeMs,i=t.inputs,o=t.extraInfo;r.forEach((function(t){Promise.all([t.data(),a,o]).then((function(r){e.logger.logKernelProfile(n,t,r[0],r[1],i,r[2])}))}))}}]),t}();var g=function(){function t(){Object(u.a)(this,t)}return Object(c.a)(t,[{key:"logKernelProfile",value:function(t,e,n,r,a,i){var o="number"===typeof r?v.L("".concat(r,"ms"),9):r.error,s=v.L(t,25),u=e.rank,c=e.size,d=v.L(e.shape.toString(),14),l="";for(var h in a){var p=a[h];if(null!=p){var f=p.shape||e.shape,m=f.length;l+="".concat(h,": ").concat(m,"D ").concat(m>0?f:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(d,"\t%c").concat(c,"\t%c").concat(l,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),t}();function y(t,e,n){for(var r={},a={},i=0;i<e.length;i++)r[e[i].id]=!0;for(var o=0;o<t.length;o++){var s=t[o],u=s.inputs;for(var c in u){for(var d=u[c],l=!1,h=0;h<e.length;h++)if(r[d.id]){s.outputs.forEach((function(t){return r[t.id]=!0})),l=!0,a[s.id]=!0;break}if(l)break}}var p={};p[n.id]=!0;for(var f={},m=t.length-1;m>=0;m--)for(var v=t[m],b=v.inputs,g=0;g<v.outputs.length;g++)if(p[v.outputs[g].id]){for(var y in b)p[b[y].id]=!0,f[v.id]=!0;break}for(var x=[],O=0;O<t.length;O++){var w=t[O];if(a[w.id]&&f[w.id]){var _={};for(var T in w.inputs){var E=w.inputs[T];r[E.id]&&(_[T]=E)}var k=Object.assign({},w);k.inputs=_,k.outputs=w.outputs,x.push(k)}}return x}function x(t,e,n,r){for(var a=function(a){var i=e[a],o=[];if(i.outputs.forEach((function(e){var n=t[e.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(e){if(!(e in s))throw new Error("Cannot backprop through input ".concat(e,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[e]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(e," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[e];if(!v.a(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(e,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==t[o.id])t[o.id]=a;else{var u=t[o.id];t[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=e.length-1;i>=0;i--)a(i)}var O=n(30),w=n(23);function _(t){return null!=t.kernelName}var T=function(){function t(){Object(u.a)(this,t),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(t){return t.name}))))}}}return Object(c.a)(t,[{key:"dispose",value:function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()}}]),t}(),E=function(){function t(e){Object(u.a)(this,t),this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new T}return Object(c.a)(t,[{key:"ready",value:function(){var t=Object(s.a)(o.a.mark((function t(){var e,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==this.pendingBackendInit){t.next=2;break}return t.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){t.next=4;break}return t.abrupt("return");case 4:e=this.getSortedBackends(),n=0;case 6:if(!(n<e.length)){t.next=18;break}return r=e[n],t.next=10,this.initializeBackend(r).success;case 10:if(!t.sent){t.next=15;break}return t.next=14,this.setBackend(r);case 14:return t.abrupt("return");case 15:n++,t.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;if(this.initializeBackend(t).asyncInit)return null}return this.registry[t]}},{key:"findBackendFactory",value:function(t){return t in this.registryFactory?this.registryFactory[t].factory:null}},{key:"registerBackend",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t in this.registryFactory?(console.warn("".concat(t," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}},{key:"setBackend",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.registryFactory[e]){t.next=2;break}throw new Error("Backend name '".concat(e,"' not found in registry"));case 2:if(this.backendName=e,null!=this.registry[e]){t.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,!n.asyncInit){t.next=12;break}return t.next=9,r;case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=r;case 13:if(t.t0){t.next=16;break}return t.abrupt("return",!1);case 16:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new b(this.backendInstance),t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var t=this;Object(f.c)(this.backendName).forEach((function(e){null!=e.setupFunc&&e.setupFunc(t.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(t){var e=this;Object(f.c)(t).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(e.registry[t])}))}},{key:"initializeBackend",value:function(t){var e=this,n=this.registryFactory[t];if(null==n)throw new Error("Cannot initialize backend ".concat(t,", no registration found."));try{var r=n.factory();if(!r||r instanceof d.b||"function"!==typeof r.then)return this.registry[t]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<e.pendingBackendInitId)&&(e.registry[t]=n,e.pendingBackendInit=null,!0)})).catch((function(n){return a<e.pendingBackendInitId||(e.pendingBackendInit=null,console.warn("Initialization of backend ".concat(t," failed")),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return console.warn("Initialization of backend ".concat(t," failed")),console.warn(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(t){if(!(t in this.registryFactory))throw new Error("".concat(t," backend not found in registry"));this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var t=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(e,n){return t.registryFactory[n].priority-t.registryFactory[e].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var n=t[e],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(t,e){var n=this.state.tensorInfo.get(e),r=n.backend,a=this.readSync(e),i=r.refCount(e);r.disposeData(e,!0),n.backend=t,t.move(e,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(t,e){var n,r=this,a=null;if(null==e){if("function"!==typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!==typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=t}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(t,e,n){t();try{var r=n();return e(),r}catch(a){throw e(),a}}},{key:"nextTensorId",value:function(){return t.nextTensorId++}},{key:"nextVariableId",value:function(){return t.nextVariableId++}},{key:"clone",value:function(t){var e=S.runKernel(p.pb,{x:t}),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[e],(function(t){return{x:function(){var e={x:t},n={dtype:"float32"};return S.runKernel(p.v,e,n)}}}),[],{}),e}},{key:"runKernel",value:function(t,e,n){if(!(null!=Object(f.b)(t,this.backendName)))throw new Error("Kernel '".concat(t,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:t,inputs:e,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(t,e,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(t){a+="complex64"===t.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-e-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(t,"'"))}},{key:"runKernelFunc",value:function(t){var e,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=_(t)?t.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(_(t)){var d=t.kernelName,l=t.inputs,h=t.attrs;null==this.backendName&&this.backend;var p=Object(f.b)(d,this.backendName);v.b(null!=p,(function(){return"Cannot find registered kernel '".concat(d,"' for backend '").concat(a.backendName,"'")})),n=function(){var t=a.backend.numDataIds();r=p.kernelFunc({inputs:l,attrs:h,backend:a.backend});var e=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(d,t,e);var n=e.map((function(t){if(null!=t.rank)return t;var e=t.dataId,n=t.shape,r=t.dtype;return a.makeTensorFromDataId(e,n,r)}));if(o){var s=a.getTensorsForGradient(d,l,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var m=t.forwardFunc,b=function(t){o&&(i=t.map((function(t){return a.keep(a.clone(t))})))};n=function(){var t=a.backend.numDataIds();r=a.tidy((function(){return m(a.backend,b)}));var e=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,t,e),e}}var g,y=t.inputs,x=t.attrs,O=_(t)?null:t.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(g=a.profiler.profileKernel(c,y,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(g),e=g.outputs):e=n()})),o&&this.addTapeNode(c,y,e,O,i,x),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(y).map((function(t){return null!=y[t]?y[t].shape:null})),outputShapes:e.map((function(t){return t.shape})),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(r)?e:e[0]}},{key:"saveTensorsForBackwardMode",value:function(t){var e=this;return t.map((function(t){return e.keep(e.clone(t))}))}},{key:"getTensorsForGradient",value:function(t,e,n){var r=Object(f.a)(t);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(v.b(Array.isArray(e),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(e).map((function(t){return e[t]}))):a=i.map((function(t){return e[t]}));var s=n.filter((function(t,e){return o[e]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=t;"string"===n&&v.z(t[0])&&(a=t.map((function(t){return m.encodeString(t)})));var i=r.write(a,e,n),o=new O.a(e,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=Object(v.f)(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(t,e,n,r){n=n||"float32";var a=new O.a(e,n,t,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));var a=new O.c(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(t,e){this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*v.g(t.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n})),t instanceof O.c||this.track(t)}},{key:"incRef",value:function(t,e){this.trackTensor(t,e),this.backend.incRef(t.dataId)}},{key:"removeDataId",value:function(t,e){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===e&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(t){if(this.state.tensorInfo.has(t.dataId)){var e=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,"string"===t.dtype&&(this.state.numStringTensors--,this.state.numBytes-=e.bytes),"complex64"!==t.dtype&&"string"!==t.dtype){var n=t.size*v.g(t.dtype);this.state.numBytes-=n}e.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,e.backend)}}},{key:"disposeVariables",value:function(){for(var t in this.state.registeredVariables){var e=this.state.registeredVariables[t];this.disposeVariable(e)}}},{key:"disposeVariable",value:function(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}},{key:"memory",value:function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}},{key:"profile",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,i,s,u,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,i=this.state.numTensors,this.state.activeProfile.kernels=[],t.next=6,e();case 6:this.state.activeProfile.result=t.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Object(a.a)(this.state.activeProfile.kernels.map((function(t){return t.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-i,s=Object(r.a)(this.state.activeProfile.kernels),t.prev=12,s.s();case 14:if((u=s.n()).done){t.next=24;break}return c=u.value,t.next=18,c.kernelTimeMs;case 18:return c.kernelTimeMs=t.sent,t.next=21,c.extraInfo;case 21:c.extraInfo=t.sent;case 22:t.next=14;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(12),s.e(t.t0);case 29:return t.prev=29,s.f(),t.finish(29);case 32:return t.abrupt("return",this.state.activeProfile);case 33:case"end":return t.stop()}}),t,this,[[12,26,29,32]])})));return function(e){return t.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(t,e,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:a},u=Object(f.a)(t);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(t){return t=t.map((function(t,e){if(null==t){var r=n[e],a=v.F(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return t})),r(t.length>1?t:t[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(t){return t.kept=!0,t}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}},{key:"endScope",value:function(t){for(var e=this,n=Object(w.a)(t),r=new Set(n.map((function(t){return t.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(t){t.kept||t.scopeId!==o.id||e.track(t)}))}},{key:"gradients",value:function(t,e,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(v.b(e.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",t)}));v.b(o instanceof O.a,(function(){return"The result y returned by f() must be a tensor."}));var s=y(this.state.activeTape,e,o);if(!i&&0===s.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var t={};t[o.id]=null==n?k(o.shape):n,x(t,s,(function(t){return a.tidy(t)}),C);var i=e.map((function(e){return t[e.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(t){var e,n=Object(r.a)(t.saved);try{for(n.s();!(e=n.n()).done;){e.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:o,grads:i}}))}},{key:"customGrad",value:function(t){var e=this;return v.b(v.u(t),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;v.b(r.every((function(t){return t instanceof O.a})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(t,e){o[e]=t}));var s=function(e,n){return i=t.apply(void 0,[].concat(r,[n])),v.b(i.value instanceof O.a,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),v.b(v.u(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(t,e){var n=i.gradFunc(t,e),a=Array.isArray(n)?n:[n];v.b(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),v.b(a.every((function(t){return t instanceof O.a})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(t,e){o[e]=function(){return t}})),o};return e.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(t){return this.state.tensorInfo.get(t).backend.readSync(t)}},{key:"read",value:function(t){return this.state.tensorInfo.get(t).backend.read(t)}},{key:"time",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(m.now)(),t.next=3,this.backend.time(e);case 3:return(r=t.sent).wallMs=Object(m.now)()-n,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"track",value:function(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}},{key:"reset",value:function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new T,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}}]),t}();function k(t){var e=Object(v.D)(Object(v.O)(t),"float32");return S.makeTensor(e,t,"float32")}function I(){var t=Object(h.b)();if(null==t._tfengine){var e=new l.a(t);t._tfengine=new E(e)}return Object(l.c)(t._tfengine.ENV),Object(O.f)((function(){return t._tfengine})),t._tfengine}E.nextTensorId=0,E.nextVariableId=0;var S=I();function C(t,e){var n={a:t,b:e};return S.runKernel(p.d,n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3),a=n(9);function i(t){var e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(e.length," keys."));var n=e[0],i=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var o=function(){r.a.startScope(n);try{var t=i.apply(void 0,arguments);return Object(a.x)(t)&&console.error("Cannot return a Promise inside of tidy."),r.a.endScope(t),t}catch(e){throw r.a.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return h})),n.d(e,"k",(function(){return p})),n.d(e,"l",(function(){return f})),n.d(e,"n",(function(){return m})),n.d(e,"m",(function(){return v})),n.d(e,"o",(function(){return b})),n.d(e,"r",(function(){return g})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return x})),n.d(e,"s",(function(){return O})),n.d(e,"t",(function(){return w})),n.d(e,"u",(function(){return _})),n.d(e,"v",(function(){return T})),n.d(e,"w",(function(){return E})),n.d(e,"x",(function(){return k})),n.d(e,"y",(function(){return I})),n.d(e,"z",(function(){return S})),n.d(e,"A",(function(){return C})),n.d(e,"B",(function(){return N})),n.d(e,"C",(function(){return j})),n.d(e,"D",(function(){return A})),n.d(e,"E",(function(){return R})),n.d(e,"F",(function(){return M})),n.d(e,"G",(function(){return P})),n.d(e,"H",(function(){return D})),n.d(e,"I",(function(){return F})),n.d(e,"K",(function(){return L})),n.d(e,"J",(function(){return B})),n.d(e,"L",(function(){return U})),n.d(e,"M",(function(){return z})),n.d(e,"N",(function(){return V})),n.d(e,"O",(function(){return W})),n.d(e,"P",(function(){return G})),n.d(e,"Q",(function(){return H})),n.d(e,"R",(function(){return X})),n.d(e,"T",(function(){return Y})),n.d(e,"S",(function(){return q})),n.d(e,"hc",(function(){return K})),n.d(e,"U",(function(){return Z})),n.d(e,"V",(function(){return J})),n.d(e,"X",(function(){return Q})),n.d(e,"W",(function(){return $})),n.d(e,"Y",(function(){return tt})),n.d(e,"Z",(function(){return et})),n.d(e,"ab",(function(){return nt})),n.d(e,"bb",(function(){return rt})),n.d(e,"cb",(function(){return at})),n.d(e,"db",(function(){return it})),n.d(e,"eb",(function(){return ot})),n.d(e,"fb",(function(){return st})),n.d(e,"hb",(function(){return ut})),n.d(e,"lb",(function(){return ct})),n.d(e,"kb",(function(){return dt})),n.d(e,"mb",(function(){return lt})),n.d(e,"nb",(function(){return ht})),n.d(e,"pb",(function(){return pt})),n.d(e,"ob",(function(){return ft})),n.d(e,"qb",(function(){return mt})),n.d(e,"rb",(function(){return vt})),n.d(e,"sb",(function(){return bt})),n.d(e,"tb",(function(){return gt})),n.d(e,"wb",(function(){return yt})),n.d(e,"xb",(function(){return xt})),n.d(e,"yb",(function(){return Ot})),n.d(e,"zb",(function(){return wt})),n.d(e,"Ab",(function(){return _t})),n.d(e,"Bb",(function(){return Tt})),n.d(e,"Cb",(function(){return Et})),n.d(e,"Db",(function(){return kt})),n.d(e,"Eb",(function(){return It})),n.d(e,"ub",(function(){return St})),n.d(e,"vb",(function(){return Ct})),n.d(e,"Fb",(function(){return Nt})),n.d(e,"Lb",(function(){return jt})),n.d(e,"Gb",(function(){return At})),n.d(e,"Jb",(function(){return Rt})),n.d(e,"Hb",(function(){return Mt})),n.d(e,"Ib",(function(){return Pt})),n.d(e,"Kb",(function(){return Dt})),n.d(e,"Mb",(function(){return Ft})),n.d(e,"Nb",(function(){return Lt})),n.d(e,"Ob",(function(){return Bt})),n.d(e,"Pb",(function(){return Ut})),n.d(e,"Qb",(function(){return zt})),n.d(e,"Rb",(function(){return Vt})),n.d(e,"Sb",(function(){return Wt})),n.d(e,"Tb",(function(){return Gt})),n.d(e,"Xb",(function(){return Ht})),n.d(e,"Ub",(function(){return Xt})),n.d(e,"Vb",(function(){return Yt})),n.d(e,"Wb",(function(){return qt})),n.d(e,"Zb",(function(){return Kt})),n.d(e,"Yb",(function(){return Zt})),n.d(e,"ac",(function(){return Jt})),n.d(e,"bc",(function(){return Qt})),n.d(e,"cc",(function(){return $t})),n.d(e,"dc",(function(){return te})),n.d(e,"ec",(function(){return ee})),n.d(e,"fc",(function(){return ne})),n.d(e,"gc",(function(){return re})),n.d(e,"ic",(function(){return ae})),n.d(e,"jc",(function(){return ie})),n.d(e,"lc",(function(){return oe})),n.d(e,"oc",(function(){return se})),n.d(e,"pc",(function(){return ue})),n.d(e,"mc",(function(){return ce})),n.d(e,"nc",(function(){return de})),n.d(e,"kc",(function(){return le})),n.d(e,"qc",(function(){return he})),n.d(e,"sc",(function(){return pe})),n.d(e,"tc",(function(){return fe})),n.d(e,"uc",(function(){return me})),n.d(e,"vc",(function(){return ve})),n.d(e,"wc",(function(){return be})),n.d(e,"Bc",(function(){return ge})),n.d(e,"zc",(function(){return ye})),n.d(e,"Ac",(function(){return xe})),n.d(e,"yc",(function(){return Oe})),n.d(e,"xc",(function(){return we})),n.d(e,"Dc",(function(){return _e})),n.d(e,"Hc",(function(){return Te})),n.d(e,"Nc",(function(){return Ee})),n.d(e,"Ec",(function(){return ke})),n.d(e,"Gc",(function(){return Ie})),n.d(e,"Cc",(function(){return Se})),n.d(e,"Jc",(function(){return Ce})),n.d(e,"Ic",(function(){return Ne})),n.d(e,"Mc",(function(){return je})),n.d(e,"Fc",(function(){return Ae})),n.d(e,"Lc",(function(){return Re})),n.d(e,"Oc",(function(){return Me})),n.d(e,"Pc",(function(){return Pe})),n.d(e,"Qc",(function(){return De})),n.d(e,"Rc",(function(){return Fe})),n.d(e,"Sc",(function(){return Le})),n.d(e,"Tc",(function(){return Be})),n.d(e,"Uc",(function(){return Ue})),n.d(e,"Vc",(function(){return ze})),n.d(e,"Wc",(function(){return Ve})),n.d(e,"Kc",(function(){return We})),n.d(e,"gb",(function(){return Ge})),n.d(e,"rc",(function(){return He})),n.d(e,"Xc",(function(){return Xe})),n.d(e,"ib",(function(){return Ye})),n.d(e,"jb",(function(){return qe}));var r="Abs",a="Acos",i="Acosh",o="Add",s="AddN",u="All",c="Any",d="ArgMax",l="ArgMin",h="Asin",p="Asinh",f="Atan",m="Atanh",v="Atan2",b="AvgPool",g="AvgPoolGrad",y="AvgPool3D",x="AvgPool3DGrad",O="BatchMatMul",w="BatchToSpaceND",_="Bincount",T="Cast",E="Ceil",k="ClipByValue",I="Complex",S="ComplexAbs",C="Concat",N="Conv2D",j="Conv2DBackpropFilter",A="Conv2DBackpropInput",R="Conv3D",M="Conv3DBackpropFilterV2",P="Conv3DBackpropInputV2",D="Cos",F="Cosh",L="Cumsum",B="CropAndResize",U="DenseBincount",z="DepthToSpace",V="DepthwiseConv2dNative",W="DepthwiseConv2dNativeBackpropFilter",G="DepthwiseConv2dNativeBackpropInput",H="Diag",X="Dilation2D",Y="Dilation2DBackpropInput",q="Dilation2DBackpropFilter",K="RealDiv",Z="Elu",J="EluGrad",Q="Erf",$="Equal",tt="Exp",et="ExpandDims",nt="Expm1",rt="FFT",at="Fill",it="FlipLeftRight",ot="Floor",st="FloorDiv",ut="FusedBatchNorm",ct="GatherV2",dt="GatherNd",lt="Greater",ht="GreaterEqual",pt="Identity",ft="IFFT",mt="Imag",vt="IsFinite",bt="IsInf",gt="IsNan",yt="LeakyRelu",xt="Less",Ot="LessEqual",wt="LinSpace",_t="Log",Tt="Log1p",Et="LogicalAnd",kt="LogicalNot",It="LogicalOr",St="LRN",Ct="LRNGrad",Nt="Max",jt="Maximum",At="MaxPool",Rt="MaxPoolGrad",Mt="MaxPool3D",Pt="MaxPool3DGrad",Dt="MaxPoolWithArgmax",Ft="Mean",Lt="Min",Bt="Minimum",Ut="MirrorPad",zt="Mod",Vt="Multinomial",Wt="Multiply",Gt="Neg",Ht="NotEqual",Xt="NonMaxSuppressionV3",Yt="NonMaxSuppressionV4",qt="NonMaxSuppressionV5",Kt="OnesLike",Zt="OneHot",Jt="Pack",Qt="PadV2",$t="Pow",te="Prelu",ee="Prod",ne="Range",re="Real",ae="Reciprocal",ie="Relu",oe="Reshape",se="ResizeNearestNeighbor",ue="ResizeNearestNeighborGrad",ce="ResizeBilinear",de="ResizeBilinearGrad",le="Relu6",he="Reverse",pe="Round",fe="Rsqrt",me="ScatterNd",ve="Select",be="Selu",ge="Slice",ye="Sin",xe="Sinh",Oe="Sign",we="Sigmoid",_e="Softplus",Te="Sqrt",Ee="Sum",ke="SpaceToBatchND",Ie="SplitV",Se="Softmax",Ce="SquaredDifference",Ne="Square",je="Sub",Ae="SparseToDense",Re="StridedSlice",Me="Tan",Pe="Tanh",De="Tile",Fe="TopK",Le="Transpose",Be="Unique",Ue="Unpack",ze="UnsortedSegmentSum",Ve="ZerosLike",We="Step",Ge="FromPixels",He="RotateWithOffset",Xe="_FusedMatMul",Ye="FusedConv2D",qe="FusedDepthwiseConv2D"},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(147);var a=n(81),i=n(148);function o(t,e){return Object(r.a)(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}(t,e)||Object(a.a)(t,e)||Object(i.a)()}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.r(e),n.d(e,"BaseTextureCache",(function(){return U})),n.d(e,"CanvasRenderTarget",(function(){return W})),n.d(e,"DATA_URI",(function(){return X})),n.d(e,"ProgramCache",(function(){return L})),n.d(e,"TextureCache",(function(){return B})),n.d(e,"clearTextureCache",(function(){return V})),n.d(e,"correctBlendMode",(function(){return O})),n.d(e,"createIndicesForQuads",(function(){return E})),n.d(e,"decomposeDataUri",(function(){return Y})),n.d(e,"deprecation",(function(){return F})),n.d(e,"destroyTextureCache",(function(){return z})),n.d(e,"determineCrossOrigin",(function(){return q})),n.d(e,"getBufferType",(function(){return k})),n.d(e,"getResolutionOfUrl",(function(){return K})),n.d(e,"hex2rgb",(function(){return v})),n.d(e,"hex2string",(function(){return b})),n.d(e,"interleaveTypedArrays",(function(){return S})),n.d(e,"isPow2",(function(){return N})),n.d(e,"isWebGLSupported",(function(){return m})),n.d(e,"log2",(function(){return j})),n.d(e,"nextPow2",(function(){return C})),n.d(e,"premultiplyBlendMode",(function(){return x})),n.d(e,"premultiplyRgba",(function(){return w})),n.d(e,"premultiplyTint",(function(){return _})),n.d(e,"premultiplyTintToRgba",(function(){return T})),n.d(e,"removeItems",(function(){return A})),n.d(e,"rgb2hex",(function(){return y})),n.d(e,"sayHello",(function(){return f})),n.d(e,"sign",(function(){return R})),n.d(e,"skipHello",(function(){return p})),n.d(e,"string2hex",(function(){return g})),n.d(e,"trimCanvas",(function(){return G})),n.d(e,"uid",(function(){return P}));var r=n(21);n.d(e,"isMobile",(function(){return r.a}));var a=n(160),i=n.n(a);n.d(e,"EventEmitter",(function(){return i.a}));var o=n(161),s=n.n(o);n.d(e,"earcut",(function(){return s.a}));var u=n(118),c=n.n(u);n.d(e,"url",(function(){return c.a}));var d=n(11);r.b.RETINA_PREFIX=/@([0-9\.]+)x/,r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var l,h=!1;function p(){h=!0}function f(t){var e;if(!h){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 5.3.3 - \u2730 "+t+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,n)}else window.console&&window.console.log("PixiJS 5.3.3 - "+t+" - http://www.pixijs.com/");h=!0}}function m(){return"undefined"===typeof l&&(l=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),a=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,a}catch(o){return!1}}()),l}function v(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function b(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function g(t){return"string"===typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function y(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var x=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[d.b.NORMAL_NPM]=d.b.NORMAL,t[d.b.ADD_NPM]=d.b.ADD,t[d.b.SCREEN_NPM]=d.b.SCREEN,e[d.b.NORMAL]=d.b.NORMAL_NPM,e[d.b.ADD]=d.b.ADD_NPM,e[d.b.SCREEN]=d.b.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function O(t,e){return x[e?1:0][t]}function w(t,e,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}function _(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,a=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(a=a*e+.5|0)}function T(t,e,n,r){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(r||void 0===r)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function E(t,e){void 0===e&&(e=null);var n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var r=0,a=0;r<n;r+=6,a+=4)e[r+0]=a+0,e[r+1]=a+1,e[r+2]=a+2,e[r+3]=a+0,e[r+4]=a+2,e[r+5]=a+3;return e}function k(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var I={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function S(t,e){for(var n=0,r=0,a={},i=0;i<t.length;i++)r+=e[i],n+=t[i].length;var o=new ArrayBuffer(4*n),s=null,u=0;for(i=0;i<t.length;i++){var c=e[i],d=t[i],l=k(d);a[l]||(a[l]=new I[l](o)),s=a[l];for(var h=0;h<d.length;h++){s[(h/c|0)*r+u+h%c]=d[h]}u+=c}return new Float32Array(o)}function C(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function N(t){return!(t&t-1)&&!!t}function j(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}function A(t,e,n){var r,a=t.length;if(!(e>=a||0===n)){var i=a-(n=e+n>a?a-e:n);for(r=e;r<i;++r)t[r]=t[r+n];t.length=i}}function R(t){return 0===t?0:t<0?-1:1}var M=0;function P(){return++M}var D={};function F(t,e,n){if(void 0===n&&(n=3),!D[e]){var r=(new Error).stack;"undefined"===typeof r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),D[e]=!0}}var L={},B=Object.create(null),U=Object.create(null);function z(){var t;for(t in B)B[t].destroy();for(t in U)U[t].destroy()}function V(){var t;for(t in B)delete B[t];for(t in U)delete U[t]}var W=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||r.b.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();function G(t){var e,n,r,a=t.width,i=t.height,o=t.getContext("2d"),s=o.getImageData(0,0,a,i).data,u=s.length,c={top:null,left:null,right:null,bottom:null},d=null;for(e=0;e<u;e+=4)0!==s[e+3]&&(n=e/4%a,r=~~(e/4/a),null===c.top&&(c.top=r),(null===c.left||n<c.left)&&(c.left=n),(null===c.right||c.right<n)&&(c.right=n+1),(null===c.bottom||c.bottom<r)&&(c.bottom=r));return null!==c.top&&(a=c.right-c.left,i=c.bottom-c.top+1,d=o.getImageData(c.left,c.top,a,i)),{height:i,width:a,data:d}}var H,X=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Y(t){var e=X.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function q(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,H||(H=document.createElement("a")),H.href=t;var n=Object(u.parse)(H.href),r=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&r&&n.protocol===e.protocol?"":"anonymous"}function K(t,e){var n=r.b.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}},function(t,e,n){"use strict";function r(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function a(t,e){if(t.length!==e.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(t.length)+"Second array length was ".concat(e.length));for(var n,r,a=t.length,i=0;a>0;)i=Math.random()*a|0,n=t[--a],r=e[a],t[a]=t[i],e[a]=e[i],t[i]=n,e[i]=r}function i(t,e,n){return Math.max(t,Math.min(e,n))}function o(t){return t%2===0?t:t+1}function s(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function u(t,e){var n=Math.random();return e*n+(1-n)*t}function c(t,e){for(var n=0,r=0;r<t.length;r++){var a=Number(t[r])-Number(e[r]);n+=a*a}return n}function d(t,e){if(!t)throw new Error("string"===typeof e?e:e())}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";d(v(t,e),(function(){return n+" Shapes ".concat(t," and ").concat(e," must match")}))}function h(t){d(null!=t,(function(){return"The input to the tensor constructor must be a non-null value."}))}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e&&(e=[]),Array.isArray(t)||j(t)&&!n)for(var r=0;r<t.length;++r)p(t[r],e,n);else e.push(t);return e}function f(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function m(t){return 0===t.length}function v(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function b(t){return t%1===0}function g(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function y(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function x(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return r(e),e}function O(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(t())r();else{i++;var s=e(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function _(t,e){for(var n=1,r=-1,a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(-1===t[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(t[a]<0)throw Error("Shapes can not be < 0. Found ".concat(t[a]," at dim ").concat(a));if(-1===r){if(e>0&&e!==n)throw Error("Size(".concat(e,") must match the product of shape ").concat(t));return t}if(0===n)throw Error("Cannot infer the missing size in [".concat(t,"] when ")+"there are 0 elements");if(e%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(e," / ").concat(n));var i=t.slice();return i[r]=e/n,i}function T(t,e){var n=e.length;return d((t=null==t?e.map((function(t,e){return e})):[].concat(t)).every((function(t){return t>=-n&&t<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(t)})),d(t.every((function(t){return b(t)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(t)})),t.map((function(t){return t<0?n+t:t}))}function E(t,e){for(var n=[],r=[],a=null!=e&&Array.isArray(e)&&0===e.length,i=null==e||a?null:T(e,t).sort(),o=0,s=0;s<t.length;++s){if(null!=i){if(i[o]===s&&1!==t[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(t[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),i[o]<=s&&o++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function k(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type ".concat(t));n=new Uint8Array(e)}return n}function I(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type ".concat(t));n=new Array(e)}return n}function S(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(e," being uploaded contains ").concat(r,"."))}}function C(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function N(t,e){return"complex64"!==e&&(("float32"!==e||"complex64"===t)&&(("int32"!==e||"float32"===t||"complex64"===t)&&("bool"!==e||"bool"!==t)))}function j(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function A(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype ".concat(t))}function R(t){if(null==t)return 0;var e=0;return t.forEach((function(t){return e+=t.length})),e}function M(t){return"string"===typeof t||t instanceof String}function P(t){return"boolean"===typeof t}function D(t){return"number"===typeof t}function F(t){return Array.isArray(t)?F(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":D(t)?"float32":M(t)?"string":P(t)?"bool":"float32"}function L(t){return!!(t&&t.constructor&&t.call&&t.apply)}function B(t,e){for(var n=e;n<t;++n)if(t%n===0)return n;return t}function U(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function z(t,e){if(0===t.length)return e[0];var n=t.reduce((function(t,e){return t*e}));if(0===n)return[];if(n!==e.length)throw new Error("[".concat(t,"] does not match the input size ").concat(e.length,"."));return function t(e,n,r){var a=new Array;if(1===n.length)for(var i=n[0],o=0;o<i;o++)a[o]=r[e+o];else for(var s=n[0],u=n.slice(1),c=u.reduce((function(t,e){return t*e})),d=0;d<s;d++)a[d]=t(e+d*c,u,r);return a}(0,t,e)}function V(t,e){for(var n=W(t,e),r=0;r<n.length;r++)n[r]=1;return n}function W(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type ".concat(e))}function G(t,e){var n=t.reduce((function(t,e){return t*e}),1);if(null==e||"float32"===e)return z(t,new Float32Array(n));if("int32"===e)return z(t,new Int32Array(n));if("bool"===e)return z(t,new Uint8Array(n));throw new Error("Unknown data type ".concat(e))}function H(t){t.forEach((function(e){d(Number.isInteger(e)&&e>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(t,"].")}))}))}function X(t,e,n){if(0===e)return 0;if(1===e)return t[0];for(var r=t[t.length-1],a=0;a<t.length-1;++a)r+=n[a]*t[a];return r}function Y(t,e,n){if(0===e)return[];if(1===e)return[t];for(var r=new Array(e),a=0;a<r.length-1;++a)r[a]=Math.floor(t/n[a]),t-=r[a]*n[a];return r[r.length-1]=t,r}function q(t){return t&&t.then&&"function"===typeof t.then}n.d(e,"M",(function(){return r})),n.d(e,"N",(function(){return a})),n.d(e,"i",(function(){return i})),n.d(e,"H",(function(){return o})),n.d(e,"R",(function(){return s})),n.d(e,"J",(function(){return u})),n.d(e,"l",(function(){return c})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return h})),n.d(e,"m",(function(){return p})),n.d(e,"O",(function(){return f})),n.d(e,"y",(function(){return m})),n.d(e,"a",(function(){return v})),n.d(e,"v",(function(){return b})),n.d(e,"S",(function(){return g})),n.d(e,"P",(function(){return y})),n.d(e,"k",(function(){return x})),n.d(e,"L",(function(){return O})),n.d(e,"K",(function(){return w})),n.d(e,"s",(function(){return _})),n.d(e,"I",(function(){return T})),n.d(e,"Q",(function(){return E})),n.d(e,"o",(function(){return k})),n.d(e,"n",(function(){return I})),n.d(e,"h",(function(){return S})),n.d(e,"B",(function(){return C})),n.d(e,"p",(function(){return N})),n.d(e,"A",(function(){return j})),n.d(e,"g",(function(){return A})),n.d(e,"f",(function(){return R})),n.d(e,"z",(function(){return M})),n.d(e,"t",(function(){return P})),n.d(e,"w",(function(){return D})),n.d(e,"r",(function(){return F})),n.d(e,"u",(function(){return L})),n.d(e,"G",(function(){return B})),n.d(e,"j",(function(){return U})),n.d(e,"T",(function(){return z})),n.d(e,"D",(function(){return V})),n.d(e,"F",(function(){return W})),n.d(e,"E",(function(){return G})),n.d(e,"c",(function(){return H})),n.d(e,"C",(function(){return X})),n.d(e,"q",(function(){return Y})),n.d(e,"x",(function(){return q}))},function(t,e,n){t.exports=n(342)},function(t,e,n){"use strict";var r,a,i,o,s,u,c,d,l,h,p,f,m,v,b,g,y;n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return v})),n.d(e,"i",(function(){return g})),n.d(e,"j",(function(){return p})),n.d(e,"k",(function(){return y})),n.d(e,"l",(function(){return b})),n.d(e,"m",(function(){return a})),n.d(e,"n",(function(){return l})),n.d(e,"o",(function(){return c})),n.d(e,"p",(function(){return d})),n.d(e,"q",(function(){return h})),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(a||(a={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(i||(i={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(s||(s={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(u||(u={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(c||(c={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(d||(d={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(l||(l={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(h||(h={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(p||(p={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(f||(f={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(m||(m={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(b||(b={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(g||(g={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(y||(y={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e){Array.isArray(t)||(t=[t]),t.forEach((function(t){null!=t&&r.Md.assert("complex64"!==t.dtype,(function(){return"".concat(e," does not support complex64 tensors in the CPU backend.")}))}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return ie})),n.d(e,"c",(function(){return de})),n.d(e,"d",(function(){return pe})),n.d(e,"e",(function(){return oe})),n.d(e,"f",(function(){return L})),n.d(e,"g",(function(){return Rt})),n.d(e,"h",(function(){return G})),n.d(e,"i",(function(){return J})),n.d(e,"j",(function(){return Nt})),n.d(e,"k",(function(){return X})),n.d(e,"l",(function(){return M})),n.d(e,"m",(function(){return ee})),n.d(e,"n",(function(){return jt})),n.d(e,"o",(function(){return At})),n.d(e,"p",(function(){return A})),n.d(e,"q",(function(){return Pt})),n.d(e,"r",(function(){return q})),n.d(e,"s",(function(){return ne})),n.d(e,"t",(function(){return ae})),n.d(e,"u",(function(){return re}));var r=n(21),a=n(11),i=n(8),o=n(53),s=n(35),u=n(14);r.b.PREFER_ENV=i.isMobile.any?a.f.WEBGL:a.f.WEBGL2,r.b.STRICT_TEXTURE_CACHE=!1;var c=[];function d(t,e){if(!t)return null;var n="";if("string"===typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(var a=c.length-1;a>=0;--a){var i=c[a];if(i.test&&i.test(t,n))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function h(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var p=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new o.a("setRealSize"),this.onUpdate=new o.a("update"),this.onError=new o.a("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),f=function(t){function e(e,n){var r=this,a=n||{},i=a.width,o=a.height;if(!i||!o)throw new Error("BufferResource width or height invalid");return(r=t.call(this,i,o)||this).data=e,r}return h(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===a.a.UNPACK),n.width===e.width&&n.height===e.height?r.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(n.width=e.width,n.height=e.height,r.texImage2D(e.target,0,n.internalFormat,e.width,e.height,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(p),m={scaleMode:a.n.NEAREST,format:a.g.RGBA,alphaMode:a.a.NPM},v=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var o=t.call(this)||this,s=(n=n||{}).alphaMode,u=n.mipmap,c=n.anisotropicLevel,l=n.scaleMode,h=n.width,f=n.height,m=n.wrapMode,v=n.format,b=n.type,g=n.target,y=n.resolution,x=n.resourceOptions;return!e||e instanceof p||((e=d(e,x)).internal=!0),o.width=h||0,o.height=f||0,o.resolution=y||r.b.RESOLUTION,o.mipmap=void 0!==u?u:r.b.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==c?c:r.b.ANISOTROPIC_LEVEL,o.wrapMode=m||r.b.WRAP_MODE,o.scaleMode=void 0!==l?l:r.b.SCALE_MODE,o.format=v||a.g.RGBA,o.type=b||a.p.UNSIGNED_BYTE,o.target=g||a.o.TEXTURE_2D,o.alphaMode=void 0!==s?s:a.a.UNPACK,void 0!==n.premultiplyAlpha&&(o.premultiplyAlpha=n.premultiplyAlpha),o.uid=Object(i.uid)(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=h>0&&f>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(e),o}return h(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(i.isPow2)(this.realWidth)&&Object(i.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete i.BaseTextureCache[this.cacheId],delete i.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,a){void 0===a&&(a=r.b.STRICT_TEXTURE_CACHE);var o="string"===typeof t,s=null;o?s=t:(t._pixiId||(t._pixiId="pixiid_"+Object(i.uid)()),s=t._pixiId);var u=i.BaseTextureCache[s];if(o&&a&&!u)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return u||((u=new e(t,n)).cacheId=s,e.addToCache(u,s)),u},e.fromBuffer=function(t,n,r,i){t=t||new Float32Array(n*r*4);var o=new f(t,{width:n,height:r}),s=t instanceof Float32Array?a.p.FLOAT:a.p.UNSIGNED_BYTE;return new e(o,Object.assign(m,i||{width:n,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),i.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),i.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=i.BaseTextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete i.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete i.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(i.EventEmitter),b=function(t){function e(e,n){var r=this,a=n||{},i=a.width,o=a.height;(r=t.call(this,i,o)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<e;s++){var u=new v;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return h(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof p?this.addResourceAt(t[n],n):this.addResourceAt(d(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],n=e.realWidth,r=e.realHeight;return t.resize(n,r),Promise.resolve(t)})),this._load},e}(p),g=function(t){function e(e,n){var r,a,i=this,o=n||{},s=o.width,u=o.height;return Array.isArray(e)?(r=e,a=e.length):a=e,i=t.call(this,a,{width:s,height:u})||this,r&&i.initFromArray(r,n),i}return h(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=a.o.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var r=this.length,a=this.itemDirtyIds,i=this.items,o=t.gl;n.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,r,0,e.format,e.type,null);for(var s=0;s<r;s++){var u=i[s];a[s]<u.dirtyId&&(a[s]=u.dirtyId,u.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,s,u.resource.width,u.resource.height,1,e.format,e.type,u.resource.source))}return!0},e}(b),y=function(t){function e(e){var n=this,r=e,a=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;return(n=t.call(this,a,i)||this).source=e,n.noSubImage=!1,n}return h(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=Object(i.determineCrossOrigin)(e):!1!==n&&(t.crossOrigin="string"===typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,r){var i=t.gl,o=e.realWidth,s=e.realHeight;return r=r||this.source,i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===a.a.UNPACK),this.noSubImage||e.target!==i.TEXTURE_2D||n.width!==o||n.height!==s?(n.width=o,n.height=s,i.texImage2D(e.target,0,e.format,e.format,e.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(p),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(y),O=function(t){function e(n,r){var i=this,o=r||{},s=o.width,u=o.height,c=o.autoLoad,d=o.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");i=t.call(this,6,{width:s,height:u})||this;for(var l=0;l<e.SIDES;l++)i.items[l].target=a.o.TEXTURE_CUBE_MAP_POSITIVE_X+l;return i.linkBaseTexture=!1!==d,n&&i.initFromArray(n,r),!1!==c&&i.load(),i}return h(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=a.o.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=a.o.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,r){for(var a=this.itemDirtyIds,i=0;i<e.SIDES;i++){var o=this.items[i];a[i]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,r),a[i]=o.dirtyId):a[i]<-1&&(t.gl.texImage2D(o.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),a[i]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(b),w=function(t){function e(e,n){var a=this;if(n=n||{},!(e instanceof HTMLImageElement)){var i=new Image;y.crossOrigin(i,e,n.crossorigin),i.src=e,e=i}return a=t.call(this,e)||this,!e.complete&&a._width&&a._height&&(a._width=0,a._height=0),a.url=e.src,a._process=null,a.preserveBitmap=!1,a.createBitmap=(void 0!==n.createBitmap?n.createBitmap:r.b.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,a.alphaMode="number"===typeof n.alphaMode?n.alphaMode:null,void 0!==n.premultiplyAlpha&&(a.premultiplyAlpha=n.premultiplyAlpha),a.bitmap=null,a._load=null,!1!==n.autoLoad&&a.load(),a}return h(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,n){var r=e.source;e.url=r.src;var a=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?a():(r.onload=a,r.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===a.a.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},e.prototype.upload=function(e,n,r){if("number"===typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,r,this.bitmap),!this.preserveBitmap){var a=!0,i=n._glTextures;for(var o in i){var s=i[o];if(s!==r&&s.dirtyId!==n.dirtyId){a=!1;break}}a&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"===typeof t||t instanceof HTMLImageElement},e}(y),_=function(t){function e(e,n){var r=this;return n=n||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return h(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;y.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(a=t._overrideWidth||t._overrideHeight/r*n,o=t._overrideHeight||t._overrideWidth/n*r),a=Math.round(a),o=Math.round(o);var s=t.source;s.width=a,s.height=o,s._pixiId="canvas_"+Object(i.uid)(),s.getContext("2d").drawImage(e,0,0,n,r,0,0,a,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"===typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"===typeof t&&0===t.indexOf("<svg")},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(y),T=function(t){function e(n,r){var a=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),"string"===typeof n&&(n=[n]);var o=n[0].src||n[0];y.crossOrigin(i,o,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),c=n[s],d=c.src,l=c.mime,h=(d=d||n[s]).split("?").shift().toLowerCase(),p=h.substr(h.lastIndexOf(".")+1);l=l||e.MIME_TYPES[p]||"video/"+p,u.src=d,u.type=l,i.appendChild(u)}n=i}return(a=t.call(this,n)||this).noSubImage=!0,a._autoUpdate=!0,a._isConnectedToTicker=!1,a._updateFPS=r.updateFPS||0,a._msToNextUpdate=0,a.autoPlay=!1!==r.autoPlay,a._load=null,a._resolve=null,a._onCanPlay=a._onCanPlay.bind(a),a._onError=a._onError.bind(a),!1!==r.autoLoad&&a.load(),a}return h(e,t),e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var n=s.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){t.valid?n(t):(t._resolve=n,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(s.a.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&s.a.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(s.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(y),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(y);c.push(w,E,x,T,_,f,O,g);var k=function(){function t(t){this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===a.a.UNPACK),n.width===e.width&&n.height===e.height?r.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(n.width=e.width,n.height=e.height,r.texImage2D(e.target,0,1===t.context.webGLVersion?r.DEPTH_COMPONENT:r.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(f),S=function(){function t(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new o.a("disposeFramebuffer"),this.multisample=a.k.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new v(null,{scaleMode:a.n.NEAREST,resolution:1,mipmap:a.j.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new v(new I(null,{width:this.width,height:this.height}),{scaleMode:a.n.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:a.j.OFF,format:a.g.DEPTH_COMPONENT,type:a.p.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],a=r.resolution;r.setSize(t/a,e/a)}if(this.depthTexture){a=this.depthTexture.resolution;this.depthTexture.setSize(t/a,e/a)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),C=function(t){function e(e){var n=this;if("number"===typeof e){var r=arguments[0],a=arguments[1],i=arguments[2],o=arguments[3];e={width:r,height:a,scaleMode:i,resolution:o}}n=t.call(this,null,e)||this;var s=e||{},u=s.width,c=s.height;return n.mipmap=0,n.width=Math.ceil(u)||100,n.height=Math.ceil(c)||100,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new S(n.width*n.resolution,n.height*n.resolution).addColorTexture(0,n),n.maskStack=[],n.filterStack=[{}],n}return h(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(v),N=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var r=e.width,a=e.height;if(n){var i=t.width/2/r,o=t.height/2/a,s=t.x/r+i,c=t.y/a+o;n=u.n.add(n,u.n.NW),this.x0=s+i*u.n.uX(n),this.y0=c+o*u.n.uY(n),n=u.n.add(n,2),this.x1=s+i*u.n.uX(n),this.y1=c+o*u.n.uY(n),n=u.n.add(n,2),this.x2=s+i*u.n.uX(n),this.y2=c+o*u.n.uY(n),n=u.n.add(n,2),this.x3=s+i*u.n.uX(n),this.y3=c+o*u.n.uY(n)}else this.x0=t.x/r,this.y0=t.y/a,this.x1=(t.x+t.width)/r,this.y1=t.y/a,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/a,this.x3=t.x/r,this.y3=(t.y+t.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t}(),j=new N,A=function(t){function e(n,r,a,i,o,s){var c=t.call(this)||this;if(c.noFrame=!1,r||(c.noFrame=!0,r=new u.j(0,0,1,1)),n instanceof e&&(n=n.baseTexture),c.baseTexture=n,c._frame=r,c.trim=i,c.valid=!1,c._uvs=j,c.uvMatrix=null,c.orig=a||r,c._rotate=Number(o||0),!0===o)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=s?new u.g(s.x,s.y):new u.g(0,0),c._updateID=0,c.textureCacheIds=[],n.valid?c.noFrame?n.valid&&c.onBaseTextureUpdated(n):c.frame=r:n.once("loaded",c.onBaseTextureUpdated,c),c.noFrame&&n.on("update",c.onBaseTextureUpdated,c),c}return h(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture;n&&n.url&&i.TextureCache[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===j&&(this._uvs=new N),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,a){void 0===n&&(n={}),void 0===a&&(a=r.b.STRICT_TEXTURE_CACHE);var o="string"===typeof t,s=null;o?s=t:(t._pixiId||(t._pixiId="pixiid_"+Object(i.uid)()),s=t._pixiId);var u=i.TextureCache[s];if(o&&a&&!u)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return u||(n.resolution||(n.resolution=Object(i.getResolutionOfUrl)(t)),(u=new e(new v(t,n))).baseTexture.cacheId=s,v.addToCache(u.baseTexture,s),e.addToCache(u,s)),u},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},null===n||void 0===n?void 0:n.resourceOptions),a=e.from(t,Object.assign({resourceOptions:r},n),!1),i=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):i.load().then((function(){return Promise.resolve(a)}))},e.fromBuffer=function(t,n,r,a){return new e(v.fromBuffer(t,n,r,a))},e.fromLoader=function(t,n,a){var o=new w(t);o.url=n;var s=new e(new v(o,{scaleMode:r.b.SCALE_MODE,resolution:Object(i.getResolutionOfUrl)(n)}));return a||(a=n),v.addToCache(s.baseTexture,a),e.addToCache(s,a),a!==n&&(v.addToCache(s.baseTexture,n),e.addToCache(s,n)),s},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),i.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),i.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=i.TextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete i.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)i.TextureCache[t.textureCacheIds[r]]===t&&delete i.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,a=t.height,i=e+r>this.baseTexture.width,o=n+a>this.baseTexture.height;if(i||o){var s=i&&o?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,c="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+c)}this.valid=r&&a&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(i.EventEmitter);function R(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}A.EMPTY=new A(new v),R(A.EMPTY),R(A.EMPTY.baseTexture),A.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new A(new v(new x(t)))}(),R(A.WHITE),R(A.WHITE.baseTexture);var M=function(t){function e(e,n){var r=this,a=null;if(!(e instanceof C)){var i=arguments[1],o=arguments[2],s=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+i+", "+o+") instead of the ctor directly."),a=arguments[0],n=null,e=new C({width:i,height:o,scaleMode:s,resolution:u})}return(r=t.call(this,e,n)||this).legacyRenderer=a,r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return h(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"===typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new C(t))},e}(A),P=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e){var n=new C(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new M(n)},t.prototype.getOptimalTexture=function(e,n,r){void 0===r&&(r=1);var a=t.SCREEN_KEY;e*=r,n*=r,this.enableFullScreen&&e===this._pixelsWidth&&n===this._pixelsHeight||(a=(65535&(e=Object(i.nextPow2)(e)))<<16|65535&(n=Object(i.nextPow2)(n))),this.texturePool[a]||(this.texturePool[a]=[]);var o=this.texturePool[a].pop();return o||(o=this.createTexture(e,n)),o.filterPoolKey=a,o.setResolution(r),o},t.prototype.getFilterTexture=function(t,e){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var n=t.SCREEN_KEY,r=this.texturePool[n];if(this.enableFullScreen=e.width>0&&e.height>0,r)for(var a=0;a<r.length;a++)r[a].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY="screen",t}(),D=function(){function t(t,e,n,r,a,i,o){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=5126),this.buffer=t,this.size=e,this.normalized=n,this.type=r,this.stride=a,this.start=i,this.instance=o}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,r,a,i){return new t(e,n,r,a,i)},t}(),F=0,L=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=F++,this.disposeRunner=new o.a("disposeBuffer")}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();function B(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var U={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var z={5126:4,5123:2,5121:1},V=0,W={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},G=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=V++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new o.a("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,r,a,i,o,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof L||(e instanceof Array&&(e=new Float32Array(e)),e=new L(e));var u=t.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],e,n,r,a);return this}var d=this.buffers.indexOf(e);return-1===d&&(this.buffers.push(e),d=this.buffers.length-1),this.attributes[t]=new D(d,n,r,a,i,o,s),this.instanced=this.instanced||s,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof L||(t instanceof Array&&(t=new Uint16Array(t)),t=new L(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],r=new L;for(t in this.attributes){var a=this.attributes[t],i=this.buffers[a.buffer];e.push(i.data),n.push(a.size*z[a.type]/4),a.buffer=0}for(r.data=function(t,e){for(var n=0,r=0,a={},i=0;i<t.length;i++)r+=e[i],n+=t[i].length;var o=new ArrayBuffer(4*n),s=null,u=0;for(i=0;i<t.length;i++){var c=e[i],d=t[i],l=B(d);a[l]||(a[l]=new U[l](o)),s=a[l];for(var h=0;h<d.length;h++){s[(h/c|0)*r+u+h%c]=d[h]}u+=c}return new Float32Array(o)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new L(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];e.attributes[n]=new D(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var n,r=new t,a=[],i=[],o=[],s=0;s<e.length;s++){n=e[s];for(var u=0;u<n.buffers.length;u++)i[u]=i[u]||0,i[u]+=n.buffers[u].data.length,o[u]=0}for(s=0;s<n.buffers.length;s++)a[s]=new(W[B(n.buffers[s].data)])(i[s]),r.buffers[s]=new L(a[s]);for(s=0;s<e.length;s++){n=e[s];for(u=0;u<n.buffers.length;u++)a[u].set(n.buffers[u].data,o[u]),o[u]+=n.buffers[u].data.length}if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.index=!0;var c=0,d=0,l=0,h=0;for(s=0;s<n.buffers.length;s++)if(n.buffers[s]!==n.indexBuffer){h=s;break}for(var s in n.attributes){var p=n.attributes[s];(0|p.buffer)===h&&(d+=p.size*z[p.type]/4)}for(s=0;s<e.length;s++){var f=e[s].indexBuffer.data;for(u=0;u<f.length;u++)r.indexBuffer.data[u+l]+=c;c+=n.buffers[h].data.length/d,l+=f.length}}return r},t}(),H=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return h(e,t),e}(G),X=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new L(e.vertices),e.uvBuffer=new L(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return h(e,t),e.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(G),Y=0,q=function(){function t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Y++,this.static=!!e}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,n,r){this.uniforms[e]=new t(n,r)},t.from=function(e,n){return new t(e,n)},t}(),K=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new u.j,this.destinationFrame=new u.j,this.filters=[]}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Z=function(t){function e(e){var n=t.call(this,e)||this;return n.defaultFilterStack=[{}],n.texturePool=new P,n.texturePool.setScreenSize(e.view),n.statePool=[],n.quad=new H,n.quadUv=new X,n.tempRect=new u.j,n.activeState={},n.globalUniforms=new q({outputFrame:n.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),n.forceClear=!1,n.useMaxPadding=!1,n}return h(e,t),e.prototype.push=function(t,e){for(var n=this.renderer,r=this.defaultFilterStack,a=this.statePool.pop()||new K,i=e[0].resolution,o=e[0].padding,s=e[0].autoFit,u=e[0].legacy,c=1;c<e.length;c++){var d=e[c];i=Math.min(i,d.resolution),o=this.useMaxPadding?Math.max(o,d.padding):o+d.padding,s=s||d.autoFit,u=u||d.legacy}1===r.length&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),r.push(a),a.resolution=i,a.legacy=u,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(o),s&&a.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),a.sourceFrame.ceil(i),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,i),a.filters=e,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var l=this.tempRect;l.width=a.sourceFrame.width,l.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,n.renderTexture.bind(a.renderTexture,a.sourceFrame,l),n.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var i=r.inputSize,o=r.inputPixel,s=r.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=i[0]*e.resolution,o[1]=i[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*i[2]-.5*o[2],s[3]=e.sourceFrame.height*i[3]-.5*o[3],e.legacy){var u=r.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var c=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,c.renderTexture,a.d.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var d=e.renderTexture,l=this.getOptimalFilterTexture(d.width,d.height,e.resolution);l.filterFrame=d.filterFrame;var h=0;for(h=0;h<n.length-1;++h){n[h].apply(this,d,l,a.d.CLEAR,e);var p=d;d=l,l=p}n[h].apply(this,d,c.renderTexture,a.d.BLEND,e),this.returnFilterTexture(d),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},e.prototype.bindAndClear=function(t,e){if(void 0===e&&(e=a.d.CLEAR),t&&t.filterFrame){var n=this.tempRect;n.width=t.filterFrame.width,n.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,n)}else this.renderer.renderTexture.bind(t);"boolean"===typeof e&&(e=e?a.d.CLEAR:a.d.BLEND,Object(i.deprecation)("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===a.d.CLEAR||e===a.d.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},e.prototype.applyFilter=function(t,e,n,r){var i=this.renderer;this.bindAndClear(n,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.state.set(t.state),i.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(a.e.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(a.e.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,r=n.sourceFrame,a=n.destinationFrame,i=e._texture.orig,o=t.set(a.width,0,0,a.height,r.x,r.y),s=e.worldTransform.copyTo(u.d.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/i.width,1/i.height),o.translate(e.anchor.x,e.anchor.y),o},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,n){return void 0===n&&(n=1),this.texturePool.getOptimalTexture(t,e,n)},e.prototype.getFilterTexture=function(t,e){if("number"===typeof t){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(k),J=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),Q=function(t){function e(e){var n=t.call(this,e)||this;return n.emptyRenderer=new J(e),n.currentRenderer=n.emptyRenderer,n}return h(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)},e.prototype.boundArray=function(t,e,n,r){for(var a=t.elements,i=t.ids,o=t.count,s=0,u=0;u<o;u++){var c=a[u],d=c._batchLocation;if(d>=0&&d<r&&e[d]===c)i[u]=d;else for(;s<r;){var l=e[s];if(!l||l._batchEnabled!==n||l._batchLocation!==s){i[u]=s,c._batchLocation=s,e[s]=c;break}s++}}},e}(k),$=0,tt=function(t){function e(e){var n=t.call(this,e)||this;return n.webGLVersion=1,n.extensions={},n.supports={uint32Indices:!1},n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),e.view.addEventListener("webglcontextlost",n.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n}return h(e,t),Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=$++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=$++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var n;if(r.b.PREFER_ENV>=a.f.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var e="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=e,e||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(k),et=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=a.k.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},nt=new u.j,rt=function(t){function e(e){var n=t.call(this,e)||this;return n.managedFramebuffers=[],n.unknownFramebuffer=new S(10,10),n.msaaSamples=null,n}return h(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new u.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;r.b.PREFER_ENV===a.f.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,e){var n=this.gl;if(t){var r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,r.framebuffer)),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var i=t.colorTextures[a];this.renderer.texture.unbind(i.parentTextureArray||i)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,n,r){var a=this.viewport;a.width===n&&a.height===r&&a.x===t&&a.y===e||(a.x=t,a.y=e,a.width=n,a.height=r,this.gl.viewport(t,e,n,r))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,e,n,r,i){void 0===i&&(i=a.c.COLOR|a.c.DEPTH);var o=this.gl;o.clearColor(t,e,n,r),o.clear(i)},e.prototype.initFramebuffer=function(t){var e=this.gl,n=new et(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},e.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var r=t.colorTextures,a=0;a<r.length;a++)this.renderer.texture.bind(r[a],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures.length;e.drawBuffers||(r=Math.min(r,1)),n.multisample>1&&(n.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n.msaaBuffer));for(var a=[],i=0;i<r;i++)if(!(0===i&&n.multisample>1)){var o=t.colorTextures[i],s=o.parentTextureArray||o;this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+i,o.target,s._glTextures[this.CONTEXT_UID].texture,0),a.push(e.COLOR_ATTACHMENT0+i)}if((a.length>1&&e.drawBuffers(a),t.depthTexture)&&this.writeDepthTexture){var u=t.depthTexture;this.renderer.texture.bind(u,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,0)}n.stencil||!t.stencil&&!t.depth||(n.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,n.stencil))},e.prototype.detectSamples=function(t){var e=this.msaaSamples,n=a.k.NONE;if(t<=1||null===e)return n;for(var r=0;r<e.length;r++)if(e[r]<=t){n=e[r];break}return 1===n&&(n=a.k.NONE),n},e.prototype.blit=function(t,e,n){var r=this.current,a=this.renderer,i=this.gl,o=this.CONTEXT_UID;if(2===a.context.webGLVersion&&r){var s=r.glFramebuffers[o];if(s){if(!t){if(s.multisample<=1)return;s.blitFramebuffer||(s.blitFramebuffer=new S(r.width,r.height),s.blitFramebuffer.addColorTexture(0,r.colorTextures[0])),(t=s.blitFramebuffer).width=r.width,t.height=r.height}e||((e=nt).width=r.width,e.height=r.height),n||(n=e);var u=e.width===n.width&&e.height===n.height;this.bind(t),i.bindFramebuffer(i.READ_FRAMEBUFFER,s.framebuffer),i.blitFramebuffer(e.x,e.y,e.width,e.height,n.x,n.y,n.width,n.height,i.COLOR_BUFFER_BIT,u?i.NEAREST:i.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var a=this.managedFramebuffers.indexOf(t);a>=0&&this.managedFramebuffers.splice(a,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.stencil&&r.deleteRenderbuffer(n.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var n=t.width,r=t.height,a=this.gl,i=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,i),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,n,r),e.stencil=i,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,i)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new u.j},e}(k),at=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},it={5126:4,5123:2,5121:1},ot=function(t){function e(e){var n=t.call(this,e)||this;return n._activeGeometry=null,n._activeVao=null,n.hasVao=!0,n.hasInstance=!0,n.canUseUInt32ElementIndex=!1,n.managedGeometries={},n.managedBuffers={},n}return h(e,t),e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!t.createVertexArray){var n=this.renderer.context.extensions.vertexArrayObject;r.b.PREFER_ENV===a.f.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(!t.vertexAttribDivisor){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(t,e){return i.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,r,a){return i.drawElementsInstancedANGLE(t,e,n,r,a)},t.drawArraysInstanced=function(t,e,n,r){return i.drawArraysInstancedANGLE(t,e,n,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID];r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={});var a=r[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,n=0;n<t.buffers.length;n++){var r=t.buffers[n],a=r._glBuffers[this.CONTEXT_UID];if(r._updateID!==a.updateID){a.updateID=r._updateID;var i=r.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(i,a.buffer),this._boundBuffer=a,a.byteLength>=r.data.byteLength)e.bufferSubData(i,0,r.data);else{var o=r.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;a.byteLength=r.data.byteLength,e.bufferData(i,r.data,o)}}}},e.prototype.checkCompatibility=function(t,e){var n=t.attributes,r=e.attributeData;for(var a in r)if(!n[a])throw new Error('shader and geometry incompatible, geometry missing the "'+a+'" attribute')},e.prototype.getSignature=function(t,e){var n=t.attributes,r=e.attributeData,a=["g",t.id];for(var i in n)r[i]&&a.push(i);return a.join("-")},e.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var n=this.gl,r=this.CONTEXT_UID,a=this.getSignature(t,e),i=t.glVertexArrayObjects[this.CONTEXT_UID],o=i[a];if(o)return i[e.id]=o,o;var s=t.buffers,u=t.attributes,c={},d={};for(var l in s)c[l]=0,d[l]=0;for(var l in u)!u[l].size&&e.attributeData[l]?u[l].size=e.attributeData[l].size:u[l].size||console.warn("PIXI Geometry attribute '"+l+"' size cannot be determined (likely the bound shader does not have the attribute)"),c[u[l].buffer]+=u[l].size*it[u[l].type];for(var l in u){var h=u[l],p=h.size;void 0===h.stride&&(c[h.buffer]===p*it[h.type]?h.stride=0:h.stride=c[h.buffer]),void 0===h.start&&(h.start=d[h.buffer],d[h.buffer]+=p*it[h.type])}o=n.createVertexArray(),n.bindVertexArray(o);for(var f=0;f<s.length;f++){var m=s[f];m._glBuffers[r]||(m._glBuffers[r]=new at(n.createBuffer()),this.managedBuffers[m.id]=m,m.disposeRunner.add(this)),m._glBuffers[r].refCount++}return this.activateVao(t,e),this._activeVao=o,i[e.id]=o,i[a]=o,o},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(e||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,a=t.buffers;if(t.disposeRunner.remove(this),n){for(var i=0;i<a.length;i++){var o=a[i]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||e||this.disposeBuffer(a[i],e)}if(!e)for(var s in n)if("g"===s[0]){var u=n[s];this._activeVao===u&&this.unbind(),r.deleteVertexArray(u)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t);e=Object.keys(this.managedBuffers);for(n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},e.prototype.activateVao=function(t,e){var n=this.gl,r=this.CONTEXT_UID,a=t.buffers,i=t.attributes;t.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[r].buffer);var o=null;for(var s in i){var u=i[s],c=a[u.buffer]._glBuffers[r];if(e.attributeData[s]){o!==c&&(n.bindBuffer(n.ARRAY_BUFFER,c.buffer),o=c);var d=e.attributeData[s].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,1)}}}},e.prototype.draw=function(t,e,n,r){var a=this.gl,i=this._activeGeometry;if(i.indexBuffer){var o=i.indexBuffer.data.BYTES_PER_ELEMENT,s=2===o?a.UNSIGNED_SHORT:a.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?i.instanced?a.drawElementsInstanced(t,e||i.indexBuffer.data.length,s,(n||0)*o,r||1):a.drawElements(t,e||i.indexBuffer.data.length,s,(n||0)*o):console.warn("unsupported index buffer type: uint32")}else i.instanced?a.drawArraysInstanced(t,n,e||i.getSize(),r||1):a.drawArrays(t,n,e||i.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(k),st=function(){function t(t){void 0===t&&(t=null),this.type=a.i.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=a.i.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ut(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function ct(t,e,n,r){var a=ut(t,t.VERTEX_SHADER,e),i=ut(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(t.attachShader(o,a),t.attachShader(o,i),r)for(var s in r)t.bindAttribLocation(o,r[s],s);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(a,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(a))),t.getShaderParameter(i,t.COMPILE_STATUS)||(console.warn(n),console.error(t.getShaderInfoLog(i))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(a),t.deleteShader(i),o}function dt(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function lt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return dt(2*e);case"bvec3":return dt(3*e);case"bvec4":return dt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ht,pt={},ft=pt;function mt(){if(ft===pt||ft&&ft.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.b.PREFER_ENV>=a.f.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),ft=e}return ft}function vt(t,e,n){if("precision"!==t.substring(0,9)){var r=e;return e===a.l.HIGH&&n!==a.l.HIGH&&(r=a.l.MEDIUM),"precision "+r+" float;\n"+t}return n!==a.l.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var bt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function gt(t){return bt[t]}var yt=null,xt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ot(t,e){if(!yt){var n=Object.keys(xt);yt={};for(var r=0;r<n.length;++r){var a=n[r];yt[t[a]]=xt[a]}}return yt[e]}var wt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],_t={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Tt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Et,kt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function It(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}var St=0,Ct={},Nt=function(){function t(e,n,i){void 0===i&&(i="pixi-shader"),this.id=St++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),Ct[i]?(Ct[i]++,i+="-"+Ct[i]):Ct[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=vt(this.vertexSrc,r.b.PRECISION_VERTEX,a.l.HIGH),this.fragmentSrc=vt(this.fragmentSrc,r.b.PRECISION_FRAGMENT,function(){if(!ht){ht=a.l.MEDIUM;var t=mt();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);ht=e.precision?a.l.HIGH:a.l.MEDIUM}}return ht}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return t.prototype.extractData=function(t,e){var n=mt();if(n){var r=ct(n,t,e);this.attributeData=this.getAttributeData(r,n),this.uniformData=this.getUniformData(r,n),n.deleteProgram(r)}else this.uniformData={},this.attributeData={}},t.prototype.getAttributeData=function(t,e){for(var n={},r=[],a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<a;i++){var o=e.getActiveAttrib(t,i),s=Ot(e,o.type),u={type:s,name:o.name,size:gt(s),location:0};n[o.name]=u,r.push(u)}r.sort((function(t,e){return t.name>e.name?1:-1}));for(i=0;i<r.length;i++)r[i].location=i;return n},t.prototype.getUniformData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=0;a<r;a++){var i=e.getActiveUniform(t,a),o=i.name.replace(/\[.*?\]$/,""),s=i.name.match(/\[.*?\]$/),u=Ot(e,i.type);n[o]={type:u,size:i.size,isArray:s,value:lt(u,i.size)}}return n},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,r){var a=e+n,o=i.ProgramCache[a];return o||(i.ProgramCache[a]=o=new t(e,n,r)),o},t}(),jt=function(){function t(t,e){for(var n in this.program=t,this.uniformGroup=e?e instanceof q?e:new q(e):new q({}),t.uniformData)this.uniformGroup.uniforms[n]instanceof Array&&(this.uniformGroup.uniforms[n]=new Float32Array(this.uniformGroup.uniforms[n]))}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var r=e.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,r){return new t(Nt.from(e,n),r)},t}(),At=function(){function t(){this.data=0,this.blendMode=a.b.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==a.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Rt=function(t){function e(n,a,i){var o=this,s=Nt.from(n||e.defaultVertexSrc,a||e.defaultFragmentSrc);return(o=t.call(this,s,i)||this).padding=0,o.resolution=r.b.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new At,o}return h(e,t),e.prototype.apply=function(t,e,n,r,a){t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(jt),Mt=new u.d,Pt=function(){function t(t,e){this._texture=t,this.mapCoord=new u.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin="undefined"===typeof e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var a=t[r],i=t[r+1];e[r]=a*n.a+i*n.c+n.tx,e[r+1]=a*n.b+i*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,a=e.trim;a&&(Mt.set(r.width/a.width,0,0,r.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(Mt));var i=e.baseTexture,o=this.uClampFrame,s=this.clampMargin/i.resolution,u=this.clampOffset;return o[0]=(e._frame.x+s+u)/i.width,o[1]=(e._frame.y+s+u)/i.height,o[2]=(e._frame.x+e._frame.width-s+u)/i.width,o[3]=(e._frame.y+e._frame.height-s+u)/i.height,this.uClampOffset[0]=u/i.realWidth,this.uClampOffset[1]=u/i.realHeight,this.isSimple=e._frame.width===i.width&&e._frame.height===i.height&&0===e.rotate,!0},t}(),Dt=function(t){function e(e){var n=this,r=new u.d;return n=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,n.maskSprite=e,n.maskMatrix=r,n}return h(e,t),e.prototype.apply=function(t,e,n,r){var a=this.maskSprite,i=a._texture;i.valid&&(i.uvMatrix||(i.uvMatrix=new Pt(i,0)),i.uvMatrix.update(),this.uniforms.npmAlpha=i.baseTexture.alphaMode?0:1,this.uniforms.mask=i,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,a).prepend(i.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=i.uvMatrix.uClampFrame,t.applyFilter(this,e,n,r))},e}(Rt),Ft=function(t){function e(e){var n=t.call(this,e)||this;return n.enableScissor=!1,n.alphaMaskPool=[],n.maskDataPool=[],n.maskStack=[],n.alphaMaskIndex=0,n}return h(e,t),e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var r=this.maskDataPool.pop()||new st;r.pooled=!0,r.maskObject=e,n=r}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=t,n.type){case a.i.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case a.i.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case a.i.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case a.i.SCISSOR:this.renderer.scissor.pop();break;case a.i.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case a.i.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=a.i.SPRITE;else if(t.type=a.i.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var n=e.worldTransform,r=Math.atan2(n.b,n.a),i=Math.atan2(n.d,n.c);r=Math.round(r*(180/Math.PI)*100),i=((i=Math.round(i*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0===(r=(r%9e3+9e3)%9e3)&&9e3===i&&(t.type=a.i.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,n=t._target,r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new Dt(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e;var a=n.filterArea;n.filterArea=e.getBounds(!0),this.renderer.filter.push(n,r),n.filterArea=a,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(k),Lt=function(t){function e(e){var n=t.call(this,e)||this;return n.maskStack=[],n.glConst=0,n}return h(e,t),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==n&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},e}(k),Bt=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return h(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var n=t._scissorRect,r=e.getBounds(!0),a=this.renderer.gl;e.renderable=!1,n?r.fit(n):a.enable(a.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=r,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,n=this.renderer.projection,r=n.transform,a=n.sourceFrame,i=n.destinationFrame,o=e?e.resolution:this.renderer.resolution,s=(t.x-a.x)*o+i.x,u=(t.y-a.y)*o+i.y,c=t.width*o,d=t.height*o;r&&(s+=r.tx*o,u+=r.ty*o),e||(u=this.renderer.height-d-u),this.renderer.gl.scissor(s,u,c,d)},e}(Lt),Ut=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return h(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Lt),zt=function(t){function e(e){var n=t.call(this,e)||this;return n.destinationFrame=null,n.sourceFrame=null,n.defaultFrame=null,n.projectionMatrix=new u.d,n.transform=null,n}return h(e,t),e.prototype.update=function(t,e,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,n,r){var a=this.projectionMatrix,i=r?-1:1;a.identity(),a.a=1/e.width*2,a.d=i*(1/e.height*2),a.tx=-1-e.x*a.a,a.ty=-i-e.y*a.d},e.prototype.setTransform=function(t){},e}(k),Vt=new u.j,Wt=new u.j,Gt=new u.j,Ht=function(t){function e(e){var n=t.call(this,e)||this;return n.clearColor=e._backgroundColorRgba,n.defaultMaskStack=[],n.current=null,n.sourceFrame=new u.j,n.destinationFrame=new u.j,n}return h(e,t),e.prototype.bind=function(t,e,n){void 0===t&&(t=null);var r,a,i,o=this.renderer;this.current=t,t?(i=(r=t.baseTexture).resolution,e||(Vt.width=t.frame.width,Vt.height=t.frame.height,e=Vt),n||(Wt.x=t.frame.x,Wt.y=t.frame.y,Wt.width=e.width,Wt.height=e.height,n=Wt),a=r.framebuffer):(i=o.resolution,e||(Vt.width=o.screen.width,Vt.height=o.screen.height,e=Vt),n||((n=Vt).width=e.width,n.height=e.height)),Gt.x=n.x*i,Gt.y=n.y*i,Gt.width=n.width*i,Gt.height=n.height*i,this.renderer.framebuffer.bind(a,Gt),this.renderer.projection.update(n,e,i,!a),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(k),Xt=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},t}(),Yt=0,qt={textureCount:0},Kt=function(t){function e(e){var n=t.call(this,e)||this;return n.destroyed=!1,n.systemCheck(),n.gl=null,n.shader=null,n.program=null,n.cache={},n.id=Yt++,n}return h(e,t),e.prototype.systemCheck=function(){if(!function(){if("boolean"===typeof Et)return Et;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Et=!0===t({a:"b"},"a","b")}catch(e){Et=!1}return Et}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),e||(qt.textureCount=0,this.syncUniformGroup(t.uniformGroup,qt)),r},e.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var n=this.getglProgram();t.static&&t.dirtyId===n.uniformGroups[t.id]||(n.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},e.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var n=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var r in t.uniforms){var a=e[r];if(a){for(var i=t.uniforms[r],o=!1,s=0;s<wt.length;s++)if(wt[s].test(a,i)){n.push(wt[s].code(r,i)),o=!0;break}if(!o){var u=(1===a.size?_t:Tt)[a.type].replace("location",'ud["'+r+'"].location');n.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+u+";")}}else t.uniforms[r].group&&n.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var n=t.uniforms,r=[];for(var a in n)r.push(a),e[a]&&r.push(e[a].type);return r.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,n=t.program,r={};for(var a in n.attributeData)r[a]=n.attributeData[a].location;var i=ct(e,n.vertexSrc,n.fragmentSrc,r),o={};for(var a in n.uniformData){var s=n.uniformData[a];o[a]={location:e.getUniformLocation(i,a),value:lt(s.type,s.size)}}var u=new Xt(i,o);return n.glPrograms[this.renderer.CONTEXT_UID]=u,u},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(k);var Zt=function(t){function e(e){var n=t.call(this,e)||this;return n.gl=null,n.stateId=0,n.polygonOffset=0,n.blendMode=a.b.NONE,n._blendEq=!1,n.map=[],n.map[0]=n.setBlend,n.map[1]=n.setOffset,n.map[2]=n.setCullFace,n.map[3]=n.setDepthTest,n.map[4]=n.setFrontFace,n.checks=[],n.defaultState=new At,n.defaultState.blend=!0,n}return h(e,t),e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[a.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.ADD]=[t.ONE,t.ONE],e[a.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.NONE]=[0,0],e[a.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[a.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[a.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[a.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[a.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[a.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[a.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[a.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[a.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[a.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[a.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},e}(k),Jt=function(t){function e(e){var n=t.call(this,e)||this;return n.count=0,n.checkCount=0,n.maxIdle=r.b.GC_MAX_IDLE,n.checkCountMax=r.b.GC_MAX_CHECK_COUNT,n.mode=r.b.GC_MODE,n}return h(e,t),e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==a.h.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,r=0;r<e.length;r++){var a=e[r];!a.framebuffer&&this.count-a.touched>this.maxIdle&&(t.destroyTexture(a,!0),e[r]=null,n=!0)}if(n){var i=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[i++]=e[r]);e.length=i}},e.prototype.unload=function(t){var e,n=this.renderer.texture;(null===(e=t._texture)||void 0===e?void 0:e.framebuffer)&&n.destroyTexture(t._texture);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},e}(k),Qt=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},$t=function(t){function e(e){var n=t.call(this,e)||this;return n.boundTextures=[],n.currentLocation=-1,n.managedTextures=[],n._unknownBoundTextures=!1,n.unknownTexture=new v,n}return h(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new Qt(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Qt(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),n[r]=null)},e.prototype.initTexture=function(t){var e=new Qt(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var n=this.renderer.gl;t.type===n.FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA32F),t.type===a.p.HALF_FLOAT&&(e.type=n.HALF_FLOAT),e.type===n.HALF_FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e));else{var r=t.realWidth,a=t.realHeight,i=n.gl;(e.width!==r||e.height!==a||e.dirtyId<0)&&(e.width=r,e.height=a,i.texImage2D(t.target,0,e.internalFormat,r,a,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&Object(i.removeItems)(this.managedTextures,r,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==a.j.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=a.q.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===a.n.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===a.n.LINEAR){var i=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===a.n.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===a.n.LINEAR?n.LINEAR:n.NEAREST)},e}(k),te=new u.d,ee=function(t){function e(n){var r=t.call(this,a.m.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new o.a("destroy"),contextChange:new o.a("contextChange"),reset:new o.a("reset"),update:new o.a("update"),postrender:new o.a("postrender"),prerender:new o.a("prerender"),resize:new o.a("resize")},r.globalUniforms=new q({projectionMatrix:new u.d},!0),r.addSystem(Ft,"mask").addSystem(tt,"context").addSystem(Zt,"state").addSystem(Kt,"shader").addSystem($t,"texture").addSystem(ot,"geometry").addSystem(rt,"framebuffer").addSystem(Bt,"scissor").addSystem(Ut,"stencil").addSystem(zt,"projection").addSystem(Jt,"textureGC").addSystem(Z,"filter").addSystem(Ht,"renderTexture").addSystem(Q,"batch"),r.initPlugins(e.__plugins),n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:n.antialias,premultipliedAlpha:r.transparent&&"notMultiplied"!==r.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,Object(i.sayHello)(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return h(e,t),e.create=function(t){if(Object(i.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=n,this.runners)this.runners[r].add(n);return this},e.prototype.render=function(t,e,n,r,a){if(this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(e||(this._lastObjectRendered=t),!a){var i=t.enableTempParent();t.updateTransform(),t.disableTempParent(i)}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(e,n)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(function(t){function e(e,n){void 0===e&&(e=a.m.UNKNOWN);var o=t.call(this)||this;return(n=Object.assign({},r.b.RENDER_OPTIONS,n)).roundPixels&&(r.b.ROUND_PIXELS=n.roundPixels,Object(i.deprecation)("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),o.options=n,o.type=e,o.screen=new u.j(0,0,n.width,n.height),o.view=n.view||document.createElement("canvas"),o.resolution=n.resolution||r.b.RESOLUTION,o.transparent=n.transparent,o.autoDensity=n.autoDensity||n.autoResize||!1,o.preserveDrawingBuffer=n.preserveDrawingBuffer,o.clearBeforeRender=n.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,0],o._backgroundColorString="#000000",o.backgroundColor=n.backgroundColor||o._backgroundColor,o._lastObjectRendered=null,o.plugins={},o}return h(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},e.prototype.generateTexture=function(t,e,n,r){0===(r=r||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var a=M.create({width:0|r.width,height:0|r.height,scaleMode:e,resolution:n});return te.tx=-r.x,te.ty=-r.y,this.render(t,a,!1,te,!!t.parent),a},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=a.m.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Object(i.hex2string)(t),Object(i.hex2rgb)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),e}(i.EventEmitter));function ne(t){return ee.create(t)}var re="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",ae="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ie=function(){this.texArray=null,this.blend=0,this.type=a.e.TRIANGLES,this.start=0,this.size=0,this.data=null},oe=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),se=function(){function t(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),ue=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=At.for2d(),n.size=4*r.b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return h(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.b.PREFER_ENV===a.f.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var r=kt.replace(/%forloop%/gi,It(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,a=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new ie);for(;n.length<a;)n.push(new oe);for(var i=0;i<this.MAX_TEXTURES;i++)this._tempBoundTextures[i]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,a=this.renderer.batch,i=this._tempBoundTextures,o=this.renderer.textureGC.count,s=++v._globalBatch,u=0,c=r[0],d=0;a.copyBoundTextures(i,n);for(var l=0;l<this._bufferSize;++l){var h=t[l];t[l]=null,h._batchEnabled!==s&&(c.count>=n&&(a.boundArray(c,i,s,n),this.buildDrawCalls(c,d,l),d=l,c=r[++u],++s),h._batchEnabled=s,h.touched=o,c.elements[c.count++]=h)}c.count>0&&(a.boundArray(c,i,s,n),this.buildDrawCalls(c,d,this._bufferSize),++u,++s);for(l=0;l<i.length;l++)i[l]=null;v._globalBatch=s},e.prototype.buildDrawCalls=function(t,n,r){var a=this._bufferedElements,o=this._attributeBuffer,s=this._indexBuffer,u=this.vertexSize,c=e._drawCallPool,d=this._dcIndex,l=this._aIndex,h=this._iIndex,p=c[d];p.start=this._iIndex,p.texArray=t;for(var f=n;f<r;++f){var m=a[f],v=m._texture.baseTexture,b=i.premultiplyBlendMode[v.alphaMode?1:0][m.blendMode];a[f]=null,n<f&&p.blend!==b&&(p.size=h-p.start,n=f,(p=c[++d]).texArray=t,p.start=h),this.packInterleavedGeometry(m,o,s,l,h),l+=m.vertexData.length/2*u,h+=m.indices.length,p.blend=b}n<r&&(p.size=h-p.start,++d),this._dcIndex=d,this._aIndex=l,this._iIndex=h},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,n=this._indexBuffer;r.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,a=n.state,i=e._drawCallPool,o=null,s=0;s<t;s++){var u=i[s],c=u.texArray,d=u.type,l=u.size,h=u.start,p=u.blend;o!==c&&(o=c,this.bindAndClearTexArray(c)),this.state.blendMode=p,a.set(this.state),r.drawElements(d,l,r.UNSIGNED_SHORT,2*h)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),r.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Object(i.nextPow2)(Math.ceil(t/8)),n=Object(i.log2)(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[r];return a||(this._aBuffers[r]=a=new se(r*this.vertexSize*4)),a},e.prototype.getIndexBuffer=function(t){var e=Object(i.nextPow2)(Math.ceil(t/12)),n=Object(i.log2)(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(r)),a},e.prototype.packInterleavedGeometry=function(t,e,n,r,a){for(var o=e.uint32View,s=e.float32View,u=r/this.vertexSize,c=t.uvs,d=t.indices,l=t.vertexData,h=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?Object(i.premultiplyTint)(t._tintRGB,p):t._tintRGB+(255*p<<24),m=0;m<l.length;m+=2)s[r++]=l[m],s[r++]=l[m+1],s[r++]=c[m],s[r++]=c[m+1],o[r++]=f,s[r++]=h;for(m=0;m<d.length;m++)n[a++]=u+d[m]},e._drawCallPool=[],e._textureArrayPool=[],e}(J),ce=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=q.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Nt(this.vertexSrc,r)}var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new u.d,default:this.defaultGroupCache[t]};return new jt(this.programCache[t],a)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),de=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new L(null,e,!1),n._indexBuffer=new L(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,a.p.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,a.p.FLOAT).addAttribute("aColor",n._buffer,4,!0,a.p.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,a.p.FLOAT).addIndex(n._indexBuffer),n}return h(e,t),e}(G),le="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",he="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",pe=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:le,fragment:he,geometryClass:de,vertexSize:6},t),n=e.vertex,r=e.fragment,a=e.vertexSize,i=e.geometryClass;return function(t){function e(e){var o=t.call(this,e)||this;return o.shaderGenerator=new ce(n,r),o.geometryClass=i,o.vertexSize=a,o}return h(e,t),e}(ue)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return le},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return he},enumerable:!1,configurable:!0}),t}().create()},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return a})),n.d(e,"g",(function(){return h})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return i})),n.d(e,"j",(function(){return s})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return r})),n.d(e,"m",(function(){return _})),n.d(e,"n",(function(){return w}));var r,a=2*Math.PI,i=180/Math.PI,o=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(r||(r={}));var s=function(){function t(t,e,n,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===a&&(a=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(a),this.type=r.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),a=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(a-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),a=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=r,this.height=a-r,this},t}(),u=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.radius=n,this.type=r.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-t,a=this.y-e;return(r*=r)+(a*=a)<=n},t.prototype.getBounds=function(){return new s(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),c=function(){function t(t,e,n,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===a&&(a=0),this.x=t,this.y=e,this.width=n,this.height=a,this.type=r.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return(n*=n)+(r*=r)<=1},t.prototype.getBounds=function(){return new s(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),d=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var a=Array.isArray(e[0])?e[0]:e;if("number"!==typeof a[0]){for(var i=[],o=0,s=a.length;o<s;o++)i.push(a[o].x,a[o].y);a=i}this.points=a,this.type=r.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,a=0,i=r-1;a<r;i=a++){var o=this.points[2*a],s=this.points[2*a+1],u=this.points[2*i],c=this.points[2*i+1];s>e!==c>e&&t<(e-s)/(c-s)*(u-o)+o&&(n=!n)}return n},t}(),l=function(){function t(t,e,n,a,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===i&&(i=20),this.x=t,this.y=e,this.width=n,this.height=a,this.radius=i,this.type=r.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),r=e-(this.y+this.radius),a=this.radius*this.radius;if(n*n+r*r<=a)return!0;if((n=t-(this.x+this.width-this.radius))*n+r*r<=a)return!0;if(n*n+(r=e-(this.y+this.height-this.radius))*r<=a)return!0;if((n=t-(this.x+this.radius))*n+r*r<=a)return!0}return!1},t}(),h=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t}(),p=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t,e,n,r,a,i){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===a&&(a=0),void 0===i&&(i=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=r,this.tx=a,this.ty=i}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,a,i){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=a,this.ty=i,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new h;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new h;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,a=t.y;return e.x=this.d*n*r+-this.c*n*a+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*a+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,a=this.c,i=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=a*e-this.d*n,this.d=a*n+this.d*e,this.tx=i*e-this.ty*n,this.ty=i*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,a=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*a,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*a,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*a+this.ty,this},t.prototype.setTransform=function(t,e,n,r,a,i,o,s,u){return this.a=Math.cos(o+u)*a,this.b=Math.sin(o+u)*a,this.c=-Math.sin(o-s)*i,this.d=Math.cos(o-s)*i,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=-Math.atan2(-r,i),s=Math.atan2(n,e),u=Math.abs(o+s);return u<1e-5||Math.abs(a-u)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,a=this.tx,i=t*r-e*n;return this.a=r/i,this.b=-e/i,this.c=-n/i,this.d=t/i,this.tx=(n*this.ty-r*a)/i,this.ty=-(t*this.ty-e*a)/i,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),m=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],v=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],b=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],g=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],y=[],x=[],O=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];y.push(e);for(var n=0;n<16;n++)for(var r=O(m[t]*m[n]+b[t]*v[n]),a=O(v[t]*m[n]+g[t]*v[n]),i=O(m[t]*b[n]+b[t]*g[n]),o=O(v[t]*b[n]+g[t]*g[n]),s=0;s<16;s++)if(m[s]===r&&v[s]===a&&b[s]===i&&g[s]===o){e.push(s);break}}for(t=0;t<16;t++){var u=new f;u.set(m[t],v[t],b[t],g[t],0,0),x.push(u)}}();var w={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return m[t]},uY:function(t){return v[t]},vX:function(t){return b[t]},vY:function(t){return g[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return y[t][e]},sub:function(t,e){return y[t][w.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?w.S:w.N:2*Math.abs(e)<=Math.abs(t)?t>0?w.E:w.W:e>0?t>0?w.SE:w.SW:t>0?w.NE:w.NW},matrixAppendRotationInv:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var a=x[w.inv(e)];a.tx=n,a.ty=r,t.append(a)}},_=function(){function t(){this.worldTransform=new f,this.localTransform=new f,this.position=new p(this.onChange,this,0,0),this.scale=new p(this.onChange,this,1,1),this.pivot=new p(this.onChange,this,0,0),this.skew=new p(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({reshape_:function(t,e){var n={x:Object(i.a)(t,"x","reshape","string_or_numeric")},o={shape:e};return r.a.runKernel(a.lc,n,o)}})},function(t,e,n){"use strict";n.r(e),n.d(e,"createScalarValue",(function(){return i})),n.d(e,"toTypedArray",(function(){return o})),n.d(e,"now",(function(){return s})),n.d(e,"fetch",(function(){return u})),n.d(e,"encodeString",(function(){return c})),n.d(e,"decodeString",(function(){return d}));var r=n(22),a=n(9);function i(t,e){return"string"===e?c(t):o([t],e)}function o(t,e){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=a.m(t)),Object(r.b)().getBool("DEBUG")&&a.h(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var n=new Uint8Array(t.length),i=0;i<n.length;++i)0!==Math.round(t[i])&&(n[i]=1);return n}throw new Error("Unknown data type ".concat(e))}function s(){return Object(r.b)().platform.now()}function u(t,e){return Object(r.b)().platform.fetch(t,e)}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return e=e||"utf-8",Object(r.b)().platform.encode(t,e)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return e=e||"utf-8",Object(r.b)().platform.decode(t,e)}n.d(e,"shuffle",(function(){return a.M})),n.d(e,"shuffleCombo",(function(){return a.N})),n.d(e,"clamp",(function(){return a.i})),n.d(e,"nearestLargerEven",(function(){return a.H})),n.d(e,"sum",(function(){return a.R})),n.d(e,"randUniform",(function(){return a.J})),n.d(e,"distSquared",(function(){return a.l})),n.d(e,"assert",(function(){return a.b})),n.d(e,"assertShapesMatch",(function(){return a.e})),n.d(e,"assertNonNull",(function(){return a.d})),n.d(e,"flatten",(function(){return a.m})),n.d(e,"sizeFromShape",(function(){return a.O})),n.d(e,"isScalarShape",(function(){return a.y})),n.d(e,"arraysEqual",(function(){return a.a})),n.d(e,"isInt",(function(){return a.v})),n.d(e,"tanh",(function(){return a.S})),n.d(e,"sizeToSquarishShape",(function(){return a.P})),n.d(e,"createShuffledIndices",(function(){return a.k})),n.d(e,"rightPad",(function(){return a.L})),n.d(e,"repeatedTry",(function(){return a.K})),n.d(e,"inferFromImplicitShape",(function(){return a.s})),n.d(e,"parseAxisParam",(function(){return a.I})),n.d(e,"squeezeShape",(function(){return a.Q})),n.d(e,"getTypedArrayFromDType",(function(){return a.o})),n.d(e,"getArrayFromDType",(function(){return a.n})),n.d(e,"checkConversionForErrors",(function(){return a.h})),n.d(e,"isValidDtype",(function(){return a.B})),n.d(e,"hasEncodingLoss",(function(){return a.p})),n.d(e,"isTypedArray",(function(){return a.A})),n.d(e,"bytesPerElement",(function(){return a.g})),n.d(e,"bytesFromStringArray",(function(){return a.f})),n.d(e,"isString",(function(){return a.z})),n.d(e,"isBoolean",(function(){return a.t})),n.d(e,"isNumber",(function(){return a.w})),n.d(e,"inferDtype",(function(){return a.r})),n.d(e,"isFunction",(function(){return a.u})),n.d(e,"nearestDivisor",(function(){return a.G})),n.d(e,"computeStrides",(function(){return a.j})),n.d(e,"toNestedArray",(function(){return a.T})),n.d(e,"makeOnesTypedArray",(function(){return a.D})),n.d(e,"makeZerosTypedArray",(function(){return a.F})),n.d(e,"makeZerosNestedTypedArray",(function(){return a.E})),n.d(e,"assertNonNegativeIntegerDimensions",(function(){return a.c})),n.d(e,"locToIndex",(function(){return a.C})),n.d(e,"indexToLoc",(function(){return a.q})),n.d(e,"isPromise",(function(){return a.x}))},function(t,e,n){"use strict";function r(t,e,n,r,a,i,o){try{var s=t[i](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,u,"next",t)}function u(t){r(o,a,i,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(113);var a=n(146),i=n(81);function o(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||Object(a.a)(t)||Object(i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(0),a=n(12);function i(t,e,n){return function(i){var o=i.inputs,s=i.attrs,u=i.backend,c=o.x;if(Object(a.a)(c,t),"string"===c.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var d=u,l=d.data.get(c.dataId).values,h=r.Md.sizeFromShape(c.shape),p=n||c.dtype,f=r.Md.getArrayFromDType(p,h),m=0;m<h;++m)f[m]=e(l[m],s);return d.makeTensorInfo(c.shape,p,f)}}function o(t,e,n){return function(r){var i=r.inputs,o=r.attrs,s=r.backend,u=i.x;if(Object(a.a)(u,t),"string"===u.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var c=s,d=c.data.get(u.dataId).values,l=n||u.dtype,h=e(d,l,o);return c.makeTensorInfo(u.shape,l,h)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return x}));var r=/iPhone/i,a=/iPod/i,i=/iPad/i,o=/\biOS-universal(?:.+)Mac\b/i,s=/\bAndroid(?:.+)Mobile\b/i,u=/Android/i,c=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,d=/Silk/i,l=/Windows Phone/i,h=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,f=/BB10/i,m=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/Mobile(?:.+)Firefox\b/i,g=function(t){return"undefined"!==typeof t&&"MacIntel"===t.platform&&"number"===typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"===typeof MSStream};var y=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"===typeof navigator?"string"===typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,y=n.split("[FBAN");"undefined"!==typeof y[1]&&(n=y[0]),"undefined"!==typeof(y=n.split("Twitter"))[1]&&(n=y[0]);var x=function(t){return function(e){return e.test(t)}}(n),O={apple:{phone:x(r)&&!x(l),ipod:x(a),tablet:!x(r)&&(x(i)||g(e))&&!x(l),universal:x(o),device:(x(r)||x(a)||x(i)||x(o)||g(e))&&!x(l)},amazon:{phone:x(c),tablet:!x(c)&&x(d),device:x(c)||x(d)},android:{phone:!x(l)&&x(c)||!x(l)&&x(s),tablet:!x(l)&&!x(c)&&!x(s)&&(x(d)||x(u)),device:!x(l)&&(x(c)||x(d)||x(s)||x(u))||x(/\bokhttp\b/i)},windows:{phone:x(l),tablet:x(h),device:x(l)||x(h)},other:{blackberry:x(p),blackberry10:x(f),opera:x(m),firefox:x(b),chrome:x(v),device:x(p)||x(f)||x(m)||x(b)||x(v)},any:!1,phone:!1,tablet:!1};return O.any=O.apple.device||O.android.device||O.windows.device||O.other.device,O.phone=O.apple.phone||O.android.phone||O.windows.phone,O.tablet=O.apple.tablet||O.android.tablet||O.windows.tablet,O}(window.navigator);var x={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(y.tablet||y.phone){var n;if(y.apple.device)if(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(n[1],10)<11&&(e=!1);if(y.android.device)if(n=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(n[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:y.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!y.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f}));var r=n(6),a=n(10),i=n.n(a),o=n(17),s=n(7),u=n(18),c=n(9),d=function(){function t(e){Object(s.a)(this,t),this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return Object(u.a)(t,[{key:"setPlatform",value:function(t,e){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,".")),this.platformName=t,this.platform=e}},{key:"registerFlag",value:function(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){var r=this.urlFlags[t];console.warn("Setting feature override from URL ".concat(t,": ").concat(r,".")),this.set(t,r)}}},{key:"getAsync",value:function(){var t=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e in this.flags)){t.next=2;break}return t.abrupt("return",this.flags[e]);case 2:return t.next=4,this.evaluateFlag(e);case 4:return this.flags[e]=t.sent,t.abrupt("return",this.flags[e]);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(t){if(t in this.flags)return this.flags[t];var e=this.evaluateFlag(t);if(Object(c.x)(e))throw new Error("Flag ".concat(t," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[t]=e,this.flags[t]}},{key:"getNumber",value:function(t){return this.get(t)}},{key:"getBool",value:function(t){return this.get(t)}},{key:"getFlags",value:function(){return this.flags}},{key:"set",value:function(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag ".concat(t," as it has not been registered."));this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}},{key:"evaluateFlag",value:function(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '".concat(t,"': no evaluation function found."));return this.flagRegistry[t].evaluationFn()}},{key:"setFlags",value:function(t){this.flags=Object.assign({},t)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var t=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var e=function(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return l(e,r[0],r[1]),r.join("=")})),e}(this.global.location.search);if("tfjsflags"in e)e.tfjsflags.split(",").forEach((function(e){var n=e.split(":"),a=Object(r.a)(n,2),i=a[0],o=a[1];t.urlFlags[i]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if("".concat(+e)===e)return+e;throw new Error("Could not parse value flag value ".concat(e," for flag ").concat(t,"."))}(i,o)}))}}},{key:"features",get:function(){return this.flags}}]),t}();function l(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function h(){return p}var p=null;function f(t){p=t}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(30),a=n(76);n(9);function i(t,e){if(t.dtype===e.dtype)return[t,e];var n=Object(a.b)(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function o(t){var e=[];return function t(e,n,a){if(null==e)return;if(e instanceof r.a)return void n.push(e);if(i=e,!Array.isArray(i)&&"object"!==typeof i)return;var i;var o=e;for(var s in o){var u=o[s];a.has(u)||(a.add(u),t(u,n,a))}}(t,e,new Set),e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t){return function(e,n,a,i,o){var s=r.dd.assertAndGetBroadcastShape(e,n),u=s.length,c=r.Md.computeStrides(s),d=r.Md.sizeFromShape(s),l=r.Md.getTypedArrayFromDType(o,d),h=e.length,p=n.length,f=r.Md.computeStrides(e),m=r.Md.computeStrides(n),v=r.dd.getBroadcastDims(e,s),b=r.dd.getBroadcastDims(n,s);if(v.length+b.length===0)for(var g=0;g<l.length;++g)l[g]=t(a[g%a.length],i[g%i.length]);else for(var y=function(e){var n=r.Md.indexToLoc(e,u,c),o=n.slice(-h);v.forEach((function(t){return o[t]=0}));var s=r.Md.locToIndex(o,h,f),d=n.slice(-p);b.forEach((function(t){return d[t]=0}));var g=r.Md.locToIndex(d,p,m);l[e]=t(a[s],i[g])},x=0;x<l.length;++x)y(x);return[l,s]}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c}));var r=n(6),a=n(0),i=n(12),o=n(64),s=n(38);function u(t,e,n,a){return null==n?function(n){var o=n.inputs,s=n.backend,u=o.a,c=o.b,d=s;Object(i.a)([u,c],t);var l=d.data.get(u.dataId).values,h=d.data.get(c.dataId).values,p=a||u.dtype,f=e(u.shape,c.shape,l,h,p),m=Object(r.a)(f,2),v=m[0],b=m[1];return d.makeTensorInfo(b,p,v)}:function(t){var i=t.inputs,u=t.backend,c=i.a,d=i.b,l=u;if("complex64"===c.dtype||"complex64"===d.dtype){var h=Object(o.a)({inputs:{x:c},backend:l,attrs:{dtype:"complex64"}}),p=l.data.get(h.dataId),f=p.complexTensorInfos.real,m=p.complexTensorInfos.imag,v=l.data.get(f.dataId).values,b=l.data.get(m.dataId).values,g=Object(o.a)({inputs:{x:d},backend:l,attrs:{dtype:"complex64"}}),y=l.data.get(g.dataId),x=y.complexTensorInfos.real,O=y.complexTensorInfos.imag,w=l.data.get(x.dataId).values,_=l.data.get(O.dataId).values,T=n(c.shape,d.shape,v,b,w,_),E=Object(r.a)(T,3),k=E[0],I=E[1],S=E[2],C=l.makeTensorInfo(S,"float32",k),N=l.makeTensorInfo(S,"float32",I),j=Object(s.a)({inputs:{real:C,imag:N},backend:l});return l.disposeIntermediateTensorInfo(h),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(C),l.disposeIntermediateTensorInfo(N),j}var A=l.data.get(c.dataId).values,R=l.data.get(d.dataId).values,M=a||c.dtype,P=e(c.shape,d.shape,A,R,M),D=Object(r.a)(P,2),F=D[0],L=D[1];return l.makeTensorInfo(L,M,F)}}function c(t){return function(e,n,r,i,o,s){var u=a.dd.assertAndGetBroadcastShape(e,n),c=a.Md.sizeFromShape(u),d=u.length,l=a.Md.computeStrides(u),h=a.Md.getTypedArrayFromDType("float32",c),p=a.Md.getTypedArrayFromDType("float32",c),f=a.dd.getBroadcastDims(e,u),m=a.dd.getBroadcastDims(n,u),v=a.dd.mergeRealAndImagArrays(r,i),b=a.dd.mergeRealAndImagArrays(o,s),g=e.length,y=a.Md.computeStrides(e),x=n.length,O=a.Md.computeStrides(n);if(f.length+m.length===0)for(var w=0;w<h.length;w++){var _=w%v.length,T=w%b.length,E=t(v[2*_],v[2*_+1],b[2*T],b[2*T+1]);h[w]=E.real,p[w]=E.imag}else for(var k=function(e){var n=a.Md.indexToLoc(e,d,l),r=n.slice(-g);f.forEach((function(t){return r[t]=0}));var i=a.Md.locToIndex(r,g,y),o=n.slice(-x);m.forEach((function(t){return o[t]=0}));var s=a.Md.locToIndex(o,x,O),u=t(v[2*i],v[2*i+1],b[2*s],b[2*s+1]);h[e]=u.real,p[e]=u.imag},I=0;I<h.length;I++)k(I);return[h,p,u]}}},function(t,e,n){"use strict";n.d(e,"l",(function(){return l})),n.d(e,"a",(function(){return A})),n.d(e,"c",(function(){return j.g})),n.d(e,"e",(function(){return ot})),n.d(e,"h",(function(){return xe})),n.d(e,"i",(function(){return w.a})),n.d(e,"b",(function(){return x})),n.d(e,"d",(function(){return Gt})),n.d(e,"f",(function(){return p.g})),n.d(e,"g",(function(){return Kt})),n.d(e,"k",(function(){return h.b})),n.d(e,"j",(function(){return Mn}));var r=n(237),a=n(238),i=n.n(a);window.Promise||(window.Promise=r.Polyfill),Object.assign||(Object.assign=i.a);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!window.performance||!window.performance.now){var o=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-o}}for(var s=Date.now(),u=["ms","moz","webkit","o"],c=0;c<u.length&&!window.requestAnimationFrame;++c){var d=u[c];window.requestAnimationFrame=window[d+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d+"CancelAnimationFrame"]||window[d+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){if("function"!==typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+s-e;return n<0&&(n=0),s=e,window.setTimeout((function(){s=Date.now(),t(performance.now())}),n)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var l=n(8),h=n(21),p=n(14);h.b.SORTABLE_CHILDREN=!1;var f=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?p.j.EMPTY:((t=t||new p.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,a=this.maxY,i=t[0],o=t[1];e=i<e?i:e,n=o<n?o:n,r=i>r?i:r,a=o>a?o:a,e=(i=t[2])<e?i:e,n=(o=t[3])<n?o:n,r=i>r?i:r,a=o>a?o:a,e=(i=t[4])<e?i:e,n=(o=t[5])<n?o:n,r=i>r?i:r,a=o>a?o:a,e=(i=t[6])<e?i:e,n=(o=t[7])<n?o:n,r=i>r?i:r,a=o>a?o:a,this.minX=e,this.minY=n,this.maxX=r,this.maxY=a},t.prototype.addFrame=function(t,e,n,r,a){this.addFrameMatrix(t.worldTransform,e,n,r,a)},t.prototype.addFrameMatrix=function(t,e,n,r,a){var i=t.a,o=t.b,s=t.c,u=t.d,c=t.tx,d=t.ty,l=this.minX,h=this.minY,p=this.maxX,f=this.maxY,m=i*e+s*n+c,v=o*e+u*n+d;l=m<l?m:l,h=v<h?v:h,p=m>p?m:p,f=v>f?v:f,l=(m=i*r+s*n+c)<l?m:l,h=(v=o*r+u*n+d)<h?v:h,p=m>p?m:p,f=v>f?v:f,l=(m=i*e+s*a+c)<l?m:l,h=(v=o*e+u*a+d)<h?v:h,p=m>p?m:p,f=v>f?v:f,l=(m=i*r+s*a+c)<l?m:l,h=(v=o*r+u*a+d)<h?v:h,p=m>p?m:p,f=v>f?v:f,this.minX=l,this.minY=h,this.maxX=p,this.maxY=f},t.prototype.addVertexData=function(t,e,n){for(var r=this.minX,a=this.minY,i=this.maxX,o=this.maxY,s=e;s<n;s+=2){var u=t[s],c=t[s+1];r=u<r?u:r,a=c<a?c:a,i=u>i?u:i,o=c>o?c:o}this.minX=r,this.minY=a,this.maxX=i,this.maxY=o},t.prototype.addVertices=function(t,e,n,r){this.addVerticesMatrix(t.worldTransform,e,n,r)},t.prototype.addVerticesMatrix=function(t,e,n,r,a,i){void 0===a&&(a=0),void 0===i&&(i=a);for(var o=t.a,s=t.b,u=t.c,c=t.d,d=t.tx,l=t.ty,h=this.minX,p=this.minY,f=this.maxX,m=this.maxY,v=n;v<r;v+=2){var b=e[v],g=e[v+1],y=o*b+u*g+d,x=c*g+s*b+l;h=Math.min(h,y-a),f=Math.max(f,y+a),p=Math.min(p,x-i),m=Math.max(m,x+i)}this.minX=h,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,a=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>a?t.maxY:a},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,a=t.maxX<e.maxX?t.maxX:e.maxX,i=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=a&&r<=i){var o=this.minX,s=this.minY,u=this.maxX,c=this.maxY;this.minX=n<o?n:o,this.minY=r<s?r:s,this.maxX=a>u?a:u,this.maxY=i>c?i:c}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,a=t.maxX<e.x+e.width?t.maxX:e.x+e.width,i=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=a&&r<=i){var o=this.minX,s=this.minY,u=this.maxX,c=this.maxY;this.minX=n<o?n:o,this.minY=r<s?r:s,this.maxX=a>u?a:u,this.maxY=i>c?i:c}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,r,a,i){t-=a,e-=i,n+=a,r+=i,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function v(t,e){function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var b=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new p.m,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new f,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return v(e,t),e.mixin=function(t){for(var n=Object.keys(t),r=0;r<n.length;++r){var a=n[r];Object.defineProperty(e.prototype,a,Object.getOwnPropertyDescriptor(t,a))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new p.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new p.j),t=this._localBoundsRect),this._localBounds||(this._localBounds=new f);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var i=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-a,i},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,r,a,i,o,s,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=a,this.skew.x=i,this.skew.y=o,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new g),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*p.i},set:function(t){this.transform.rotation=t*p.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1);(this._mask=t,this._mask)&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(l.EventEmitter),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return v(e,t),e}(b);function y(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform;var x=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=h.b.SORTABLE_CHILDREN,e.sortDirty=!1,e}return v(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var a=e[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Object(l.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var a=e[0],i=this.children.indexOf(a);if(-1===i)return null;a.parent=null,a.transform._parentID=-1,Object(l.removeItems)(this.children,i,1),this._boundsID++,this.onChildrenChange(i),a.emit("removed",this),this.emit("childRemoved",a,this,i)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(l.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,r=t,a=e-r;if(a>0&&a<=e){n=this.children.splice(r,a);for(var i=0;i<n.length;++i)n[i].parent=null,n[i].transform&&(n[i].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(i=0;i<n.length;++i)n[i].emit("removed",this),this.emit("childRemoved",n[i],this,i);return n}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(y),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!n)for(var a=0,i=this.children.length;a<i;++a){var o=this.children[a];o.visible&&o.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}n&&t.mask.push(this,this._mask),this._render(t);r=0;for(var a=this.children.length;r<a;r++)this.children[r].render(t);t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"===typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var a=0;a<r.length;++a)r[a].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(b);x.prototype.containerUpdateTransform=x.prototype.updateTransform;b.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var O=function(){function t(t){this._hookDiv=null,(l.isMobile.tablet||l.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){var t=performance.now();if(!(l.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=this.renderer.resolution,r=e.width/this.renderer.width*n,a=e.height/this.renderer.height*n,i=this.div;i.style.left=e.left+"px",i.style.top=e.top+"px",i.style.width=this.renderer.width+"px",i.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,Object(l.removeItems)(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--;else{i=s._accessibleDiv;var u=s.hitArea,c=s.worldTransform;s.hitArea?(i.style.left=(c.tx+u.x*c.a)*r+"px",i.style.top=(c.ty+u.y*c.d)*a+"px",i.style.width=u.width*c.a*r+"px",i.style.height=u.height*c.d*a+"px"):(u=s.getBounds(),this.capHitArea(u),i.style.left=u.x*r+"px",i.style.top=u.y*a+"px",i.style.width=u.width*r+"px",i.style.height=u.height*a+"px",i.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(i.title=s.accessibleTitle),i.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&i.setAttribute("aria-label",s.accessibleHint)),s.accessibleTitle===i.title&&s.tabIndex===i.tabIndex||(i.title=s.accessibleTitle,i.tabIndex=s.tabIndex,this.debug&&this.updateDebugHTML(i))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}(),w=n(35),_=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new p.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),T=function(t,e){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var E=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),k=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!==(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!==(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!==(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),I=function(){function t(){this._tempPoint=new p.g}return t.prototype.recursiveFindHit=function(t,e,n,r,a){if(!e||!e.visible)return!1;var i=t.data.global,o=!1,s=a=e.interactive||a,u=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(i,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(r=!1,u=!1)),s=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(i)||(r=!1)),u&&e.interactiveChildren&&e.children)for(var c=e.children,d=c.length-1;d>=0;d--){var l=c[d],h=this.recursiveFindHit(t,l,n,r,s);if(h){if(!l.parent)continue;s=!1,h&&(t.target&&(r=!1),o=!0)}}return a&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(i)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),n&&n(t,e,!!o))),o},t.prototype.findHit=function(t,e,n,r){this.recursiveFindHit(t,e,n,r,!1)},t}(),S={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};b.mixin(S);var C={target:null,data:{global:null}},N=function(t){function e(e,n){var r=t.call(this)||this;return n=n||{},r.renderer=e,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new _,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new E,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new I,r._tempDisplayObject=new g,r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function n(){this.constructor=t}T(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return C.target=null,C.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(C,e,null,!0),C.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(w.a.system.add(this.tickerUpdate,this,w.c.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(w.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!==typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopPropagationHint&&t!==n.stopsPropagatingAt||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.delayDispatchEvent=function(t,e,n){this.delayedEvents.push({displayObject:t,eventString:e,eventData:n})},e.prototype.mapPositionToPoint=function(t,e,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var a=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*a,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*a},e.prototype.processInteractive=function(t,e,n,r){var a=this.search.findHit(t,e,n,r),i=this.delayedEvents;if(!i.length)return a;t.stopPropagationHint=!1;var o=i.length;this.delayedEvents=[];for(var s=0;s<o;s++){var u=i[s],c=u.displayObject,d=u.eventString,l=u.eventData;l.stopsPropagatingAt===c&&(l.stopPropagationHint=!0),this.dispatchEvent(c,d,l)}return a},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var n=e.length,r=0;r<n;r++){var a=e[r],i=this.getInteractionDataForPointerId(a),o=this.configureInteractionEventForDOMEvent(this.eventData,a,i);if(o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===a.pointerType)this.emit("touchstart",o);else if("mouse"===a.pointerType||"pen"===a.pointerType){var s=2===a.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var r=t.data,a=t.data.identifier;if(n)if(e.trackedPointers[a]||(e.trackedPointers[a]=new k(a)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var i=2===r.button;i?e.trackedPointers[a].rightDown=!0:e.trackedPointers[a].leftDown=!0,this.dispatchEvent(e,i?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var r=this.normalizeToPointerData(t),a=r.length,i=t.target!==this.interactionDOMElement?"outside":"",o=0;o<a;o++){var s=r[o],u=this.getInteractionDataForPointerId(s),c=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(c.data.originalEvent=t,this.processInteractive(c,this.lastObjectRendered,n,e||!i),this.emit(e?"pointercancel":"pointerup"+i,c),"mouse"===s.pointerType||"pen"===s.pointerType){var d=2===s.button;this.emit(d?"rightup"+i:"mouseup"+i,c)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend"+i,c),this.releaseInteractionDataForPointerId(s.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var r=t.data,a=t.data.identifier,i=e.trackedPointers[a],o="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,u=!1;if(s){var c=2===r.button,d=k.FLAGS,l=c?d.RIGHT_DOWN:d.LEFT_DOWN,h=void 0!==i&&i.flags&l;n?(this.dispatchEvent(e,c?"rightup":"mouseup",t),h&&(this.dispatchEvent(e,c?"rightclick":"click",t),u=!0)):h&&this.dispatchEvent(e,c?"rightupoutside":"mouseupoutside",t),i&&(c?i.rightDown=!1:i.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),i&&(s&&!u||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),i.over=!1))):i&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),i&&i.none&&delete e.trackedPointers[a]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=e.length,r=0;r<n;r++){var a=e[r],i=this.getInteractionDataForPointerId(a),o=this.configureInteractionEventForDOMEvent(this.eventData,a,i);o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===a.pointerType&&this.emit("touchmove",o),"mouse"!==a.pointerType&&"pen"!==a.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var r=t.data,a="touch"===r.pointerType,i="mouse"===r.pointerType||"pen"===r.pointerType;i&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),a&&this.dispatchEvent(e,"touchmove",t),i&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var r=t.data,a=t.data.identifier,i="mouse"===r.pointerType||"pen"===r.pointerType,o=e.trackedPointers[a];n&&!o&&(o=e.trackedPointers[a]=new k(a)),void 0!==o&&(n&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(e,"pointerover",t),i&&this.delayDispatchEvent(e,"mouseover",t)),i&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),i&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[a]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,n=t.pointerId;return 1===n||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[n]?e=this.activeInteractionData[n]:((e=this.interactionDataPool.pop()||new _).identifier=n,this.activeInteractionData[n]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,r=t.changedTouches.length;n<r;n++){var a=t.changedTouches[n];"undefined"===typeof a.button&&(a.button=t.touches.length?1:0),"undefined"===typeof a.buttons&&(a.buttons=t.touches.length?1:0),"undefined"===typeof a.isPrimary&&(a.isPrimary=1===t.touches.length&&"touchstart"===t.type),"undefined"===typeof a.width&&(a.width=a.radiusX||1),"undefined"===typeof a.height&&(a.height=a.radiusY||1),"undefined"===typeof a.tiltX&&(a.tiltX=0),"undefined"===typeof a.tiltY&&(a.tiltY=0),"undefined"===typeof a.pointerType&&(a.pointerType="touch"),"undefined"===typeof a.pointerId&&(a.pointerId=a.identifier||0),"undefined"===typeof a.pressure&&(a.pressure=a.force||.5),"undefined"===typeof a.twist&&(a.twist=0),"undefined"===typeof a.tangentialPressure&&(a.tangentialPressure=0),"undefined"===typeof a.layerX&&(a.layerX=a.offsetX=a.clientX),"undefined"===typeof a.layerY&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,e.push(a)}else if(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent)e.push(t);else{var i=t;"undefined"===typeof i.isPrimary&&(i.isPrimary=!0),"undefined"===typeof i.width&&(i.width=1),"undefined"===typeof i.height&&(i.height=1),"undefined"===typeof i.tiltX&&(i.tiltX=0),"undefined"===typeof i.tiltY&&(i.tiltY=0),"undefined"===typeof i.pointerType&&(i.pointerType="mouse"),"undefined"===typeof i.pointerId&&(i.pointerId=1),"undefined"===typeof i.pressure&&(i.pressure=.5),"undefined"===typeof i.twist&&(i.twist=0),"undefined"===typeof i.tangentialPressure&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(l.EventEmitter),j=n(13),A=function(){function t(e){var n=this;e=Object.assign({forceCanvas:!1},e),this.renderer=Object(j.s)(e),this.stage=new x,t._plugins.forEach((function(t){t.init.call(n,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,n){var r=this,a=t._plugins.slice(0);a.reverse(),a.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null},t}();A._plugins=[];var R=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,n;if(e.cancelResize(),e._resizeTo===window)t=window.innerWidth,n=window.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,n=r.clientHeight}e.renderer.resize(t,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();A.registerPlugin(R);var M=new p.j,P=function(){function t(t){this.renderer=t,t.extract=this}return t.prototype.image=function(t,e,n){var r=new Image;return r.src=this.base64(t,e,n),r},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(e){var n,r,a,i=this.renderer,o=!1,s=!1;e&&(e instanceof j.l?a=e:(a=this.renderer.generateTexture(e),s=!0)),a?(n=a.baseTexture.resolution,r=a.frame,o=!1,i.renderTexture.bind(a)):(n=this.renderer.resolution,o=!0,(r=M).width=this.renderer.width,r.height=this.renderer.height,i.renderTexture.bind(null));var u=Math.floor(r.width*n+1e-4),c=Math.floor(r.height*n+1e-4),d=new l.CanvasRenderTarget(u,c,1),h=new Uint8Array(4*u*c),p=i.gl;p.readPixels(r.x*n,r.y*n,u,c,p.RGBA,p.UNSIGNED_BYTE,h);var f=d.context.getImageData(0,0,u,c);if(t.arrayPostDivide(h,f.data),d.context.putImageData(f,0,0),o){var m=new l.CanvasRenderTarget(d.width,d.height,1);m.context.scale(1,-1),m.context.drawImage(d.canvas,0,-c),d.destroy(),d=m}return s&&a.destroy(!0),d.canvas},t.prototype.pixels=function(e){var n,r,a,i=this.renderer,o=!1;e&&(e instanceof j.l?a=e:(a=this.renderer.generateTexture(e),o=!0)),a?(n=a.baseTexture.resolution,r=a.frame,i.renderTexture.bind(a)):(n=i.resolution,(r=M).width=i.width,r.height=i.height,i.renderTexture.bind(null));var s=r.width*n,u=r.height*n,c=new Uint8Array(4*s*u),d=i.gl;return d.readPixels(r.x*n,r.y*n,s,u,d.RGBA,d.UNSIGNED_BYTE,c),o&&a.destroy(!0),t.arrayPostDivide(c,c),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t.arrayPostDivide=function(t,e){for(var n=0;n<t.length;n+=4){var r=e[n+3]=t[n+3];0!==r?(e[n]=Math.round(Math.min(255*t[n]/r,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/r,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/r,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}},t}(),D=n(155),F=n.n(D),L=n(71),B=n.n(L);function U(){}function z(t,e,n,r){var a=0,i=t.length;!function o(s){s||a===i?n&&n(s):r?setTimeout((function(){e(t[a++],o)}),1):e(t[a++],o)}()}function V(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function W(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var n=0,r={_tasks:[],concurrency:e,saturated:U,unsaturated:U,buffer:e/4,empty:U,drain:U,error:U,started:!1,paused:!1,push:function(t,e){a(t,!1,e)},kill:function(){n=0,r.drain=U,r.started=!1,r._tasks=[]},unshift:function(t,e){a(t,!0,e)},process:function(){for(;!r.paused&&n<r.concurrency&&r._tasks.length;){var e=r._tasks.shift();0===r._tasks.length&&r.empty(),(n+=1)===r.concurrency&&r.saturated(),t(e.data,V(i(e)))}},length:function(){return r._tasks.length},running:function(){return n},idle:function(){return r._tasks.length+n===0},pause:function(){!0!==r.paused&&(r.paused=!0)},resume:function(){if(!1!==r.paused){r.paused=!1;for(var t=1;t<=r.concurrency;t++)r.process()}}};function a(t,e,n){if(null!=n&&"function"!==typeof n)throw new Error("task callback must be a function");if(r.started=!0,null==t&&r.idle())setTimeout((function(){return r.drain()}),1);else{var a={data:t,callback:"function"===typeof n?n:U};e?r._tasks.unshift(a):r._tasks.push(a),setTimeout((function(){return r.process()}),1)}}function i(t){return function(){n-=1,t.callback.apply(t,arguments),null!=arguments[0]&&r.error(arguments[0],t.data),n<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r}var G={};function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e,n){return e&&H(t.prototype,e),n&&H(t,n),t}var Y=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),q=null;function K(){}var Z=function(){function t(e,n,r){if("string"!==typeof e||"string"!==typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=K,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new B.a,this.onProgress=new B.a,this.onComplete=new B.a,this.onAfterMiddleware=new B.a}t.setExtensionLoadType=function(e,n){J(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){J(t._xhrTypeMap,e,n)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var n=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(n)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"===typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:Y&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!==(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!==typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!==typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(Q(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(Q(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(Q(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,n="",r="undefined"===typeof e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&"undefined"!==typeof e.responseType||(n=e.responseText),0===r&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(o){return void this.abort("Error trying to parse loaded json: "+o)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(n,"text/xml")}else{var i=document.createElement("div");i.innerHTML=n,this.data=i}this.type=t.TYPE.XML}catch(o){return void this.abort("Error trying to parse loaded xml: "+o)}else this.data=e.response||n;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,q||(q=document.createElement("a")),q.href=t;var n=!(t=F()(q.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&r===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),a=t.indexOf("#"),i=Math.min(r>-1?r:t.length,a>-1?a:t.length);e=(t=t.substring(0,i)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},X(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function J(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function Q(t){return t.toString().replace("object ","")}Z.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Z.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Z.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Z.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Z._loadTypeMap={gif:Z.LOAD_TYPE.IMAGE,png:Z.LOAD_TYPE.IMAGE,bmp:Z.LOAD_TYPE.IMAGE,jpg:Z.LOAD_TYPE.IMAGE,jpeg:Z.LOAD_TYPE.IMAGE,tif:Z.LOAD_TYPE.IMAGE,tiff:Z.LOAD_TYPE.IMAGE,webp:Z.LOAD_TYPE.IMAGE,tga:Z.LOAD_TYPE.IMAGE,svg:Z.LOAD_TYPE.IMAGE,"svg+xml":Z.LOAD_TYPE.IMAGE,mp3:Z.LOAD_TYPE.AUDIO,ogg:Z.LOAD_TYPE.AUDIO,wav:Z.LOAD_TYPE.AUDIO,mp4:Z.LOAD_TYPE.VIDEO,webm:Z.LOAD_TYPE.VIDEO},Z._xhrTypeMap={xhtml:Z.XHR_RESPONSE_TYPE.DOCUMENT,html:Z.XHR_RESPONSE_TYPE.DOCUMENT,htm:Z.XHR_RESPONSE_TYPE.DOCUMENT,xml:Z.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Z.XHR_RESPONSE_TYPE.DOCUMENT,svg:Z.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Z.XHR_RESPONSE_TYPE.DOCUMENT,gif:Z.XHR_RESPONSE_TYPE.BLOB,png:Z.XHR_RESPONSE_TYPE.BLOB,bmp:Z.XHR_RESPONSE_TYPE.BLOB,jpg:Z.XHR_RESPONSE_TYPE.BLOB,jpeg:Z.XHR_RESPONSE_TYPE.BLOB,tif:Z.XHR_RESPONSE_TYPE.BLOB,tiff:Z.XHR_RESPONSE_TYPE.BLOB,webp:Z.XHR_RESPONSE_TYPE.BLOB,tga:Z.XHR_RESPONSE_TYPE.BLOB,json:Z.XHR_RESPONSE_TYPE.JSON,text:Z.XHR_RESPONSE_TYPE.TEXT,txt:Z.XHR_RESPONSE_TYPE.TEXT,ttf:Z.XHR_RESPONSE_TYPE.BUFFER,otf:Z.XHR_RESPONSE_TYPE.BUFFER},Z.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var $=window.URL||window.webkitURL;var tt={caching:function(t,e){var n=this;G[t.url]?(t.data=G[t.url],t.complete()):t.onComplete.once((function(){return G[n.url]=n.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===Z.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!==typeof t.data){if(0===t.data.type.indexOf("image")){var n=$.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=Z.TYPE.IMAGE,void(t.data.onload=function(){$.revokeObjectURL(n),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",n=0;n<t.length;){for(var r=[0,0,0],a=[0,0,0,0],i=0;i<r.length;++i)n<t.length?r[i]=255&t.charCodeAt(n++):r[i]=0;switch(a[0]=r[0]>>2,a[1]=(3&r[0])<<4|r[1]>>4,a[2]=(15&r[1])<<2|r[2]>>6,a[3]=63&r[2],n-(t.length-1)){case 2:a[3]=64,a[2]=64;break;case 1:a[3]=64}for(var o=0;o<a.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a[o])}return e}(t.xhr.responseText),t.type=Z.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},et=/(#[\w-]+)?$/,nt=function(){function t(e,n){var r=this;void 0===e&&(e=""),void 0===n&&(n=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=W(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new B.a,this.onError=new B.a,this.onLoad=new B.a,this.onStart=new B.a,this.onComplete=new B.a;for(var a=0;a<t._defaultBeforeMiddleware.length;++a)this.pre(t._defaultBeforeMiddleware[a]);for(var i=0;i<t._defaultAfterMiddleware.length;++i)this.use(t._defaultAfterMiddleware[i])}var e=t.prototype;return e.add=function(t,e,n,r){if(Array.isArray(t)){for(var a=0;a<t.length;++a)this.add(t[a]);return this}if("object"===typeof t&&(r=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!==typeof e&&(r=n,n=e,e=t),"string"!==typeof e)throw new Error("No url passed to add resource to loader.");if("function"===typeof n&&(r=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Z(t,e,n),"function"===typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var i=n.parentResource,o=[],s=0;s<i.children.length;++s)i.children[s].isComplete||o.push(i.children[s]);var u=i.progressChunk*(o.length+1)/(o.length+2);i.children.push(this.resources[t]),i.progressChunk=u;for(var c=0;c<o.length;++c)o[c].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"===typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,n=F()(t,{strictMode:!0});if(e=n.protocol||!n.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=et.exec(e)[0];-1!==(e=e.substr(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},e._loadResource=function(t,e){var n=this;t._dequeue=e,z(this._beforeMiddleware,(function(e,r){e.call(n,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),z(this._afterMiddleware,(function(n,r){n.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},X(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();nt._defaultBeforeMiddleware=[],nt._defaultAfterMiddleware=[],nt.pre=function(t){return nt._defaultBeforeMiddleware.push(t),nt},nt.use=function(t){return nt._defaultAfterMiddleware.push(t),nt};var rt=Z,at=function(t,e){return(at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var it=function(){function t(){}return t.use=function(t,e){t.data&&t.type===Z.TYPE.IMAGE&&(t.texture=j.p.fromLoader(t.data,t.url,t.name)),e()},t}(),ot=function(t){function e(n,r){for(var a=t.call(this,n,r)||this,i=0;i<e._plugins.length;++i){var o=e._plugins[i],s=o.pre,u=o.use;s&&a.pre(s),u&&a.use(u)}return a._protected=!1,a}return function(t,e){function n(){this.constructor=t}at(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}(nt);ot.registerPlugin({use:tt.parsing}),ot.registerPlugin(it);var st=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?ot.shared:new ot},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),ut=n(11),ct=function(t,e){return(ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function dt(t,e){function n(){this.constructor=t}ct(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}!function(t){function e(e,n,r,a){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===a&&(a=!1);var i=t.call(this)||this;return r>16384&&(r=16384),i._properties=[!1,!0,!1,!1,!1],i._maxSize=e,i._batchSize=r,i._buffers=null,i._bufferUpdateIDs=[],i._updateID=0,i.interactiveChildren=!1,i.blendMode=ut.b.NORMAL,i.autoResize=a,i.roundPixels=!0,i.baseTexture=null,i.setProperties(n),i._tint=0,i.tintRgb=new Float32Array(4),i.tint=16777215,i}dt(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Object(l.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(x);var lt,ht,pt=function(){function t(t,e,n){this.geometry=new j.h,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var a=t[r];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||ut.p.FLOAT,offset:a.offset},e[r]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new j.f(Object(l.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){(o=this.dynamicProperties[n]).offset=e,e+=o.size,this.dynamicStride+=o.size}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new j.f(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(n=0;n<this.staticProperties.length;++n){(o=this.staticProperties[n]).offset=a,a+=o.size,this.staticStride+=o.size}var i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new j.f(this.staticData,!0,!1);for(n=0;n<this.dynamicProperties.length;++n){var o=this.dynamicProperties[n];t.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===ut.p.UNSIGNED_BYTE,o.type,4*this.dynamicStride,4*o.offset)}for(n=0;n<this.staticProperties.length;++n){o=this.staticProperties[n];t.addAttribute(o.attributeName,this.staticBuffer,0,o.type===ut.p.UNSIGNED_BYTE,o.type,4*this.staticStride,4*o.offset)}},t.prototype.uploadDynamic=function(t,e,n){for(var r=0;r<this.dynamicProperties.length;r++){var a=this.dynamicProperties[r];a.uploadFunction(t,e,n,a.type===ut.p.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,n){for(var r=0;r<this.staticProperties.length;r++){var a=this.staticProperties[r];a.uploadFunction(t,e,n,a.type===ut.p.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),ft=function(t){function e(e){var n=t.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new p.d,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ut.p.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=j.n.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=j.o.for2d(),n}return dt(e,t),e.prototype.render=function(t){var e=t.children,n=t._maxSize,r=t._batchSize,a=this.renderer,i=e.length;if(0!==i){i>n&&!t.autoResize&&(i=n);var o=t._buffers;o||(o=t._buffers=this.generateBuffers(t));var s=e[0]._texture.baseTexture;this.state.blendMode=Object(l.correctBlendMode)(t.blendMode,s.alphaMode),a.state.set(this.state);var u=a.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=Object(l.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,s.alphaMode),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var d=!1,h=0,p=0;h<i;h+=r,p+=1){var f=i-h;f>r&&(f=r),p>=o.length&&o.push(this._generateOneMoreBuffer(t));var m=o[p];m.uploadDynamic(e,h,f);var v=t._bufferUpdateIDs[p]||0;(d=d||m._updateID<v)&&(m._updateID=t._updateID,m.uploadStatic(e,h,f)),a.geometry.bind(m.geometry),u.drawElements(u.TRIANGLES,6*f,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],n=t._maxSize,r=t._batchSize,a=t._properties,i=0;i<n;i+=r)e.push(new pt(this.properties,a,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,n=t._properties;return new pt(this.properties,n,e)},e.prototype.uploadVertices=function(t,e,n,r,a,i){for(var o=0,s=0,u=0,c=0,d=0;d<n;++d){var l=t[e+d],h=l._texture,p=l.scale.x,f=l.scale.y,m=h.trim,v=h.orig;m?(o=(s=m.x-l.anchor.x*v.width)+m.width,u=(c=m.y-l.anchor.y*v.height)+m.height):(o=v.width*(1-l.anchor.x),s=v.width*-l.anchor.x,u=v.height*(1-l.anchor.y),c=v.height*-l.anchor.y),r[i]=s*p,r[i+1]=c*f,r[i+a]=o*p,r[i+a+1]=c*f,r[i+2*a]=o*p,r[i+2*a+1]=u*f,r[i+3*a]=s*p,r[i+3*a+1]=u*f,i+=4*a}},e.prototype.uploadPosition=function(t,e,n,r,a,i){for(var o=0;o<n;o++){var s=t[e+o].position;r[i]=s.x,r[i+1]=s.y,r[i+a]=s.x,r[i+a+1]=s.y,r[i+2*a]=s.x,r[i+2*a+1]=s.y,r[i+3*a]=s.x,r[i+3*a+1]=s.y,i+=4*a}},e.prototype.uploadRotation=function(t,e,n,r,a,i){for(var o=0;o<n;o++){var s=t[e+o].rotation;r[i]=s,r[i+a]=s,r[i+2*a]=s,r[i+3*a]=s,i+=4*a}},e.prototype.uploadUvs=function(t,e,n,r,a,i){for(var o=0;o<n;++o){var s=t[e+o]._texture._uvs;s?(r[i]=s.x0,r[i+1]=s.y0,r[i+a]=s.x1,r[i+a+1]=s.y1,r[i+2*a]=s.x2,r[i+2*a+1]=s.y2,r[i+3*a]=s.x3,r[i+3*a+1]=s.y3,i+=4*a):(r[i]=0,r[i+1]=0,r[i+a]=0,r[i+a+1]=0,r[i+2*a]=0,r[i+2*a+1]=0,r[i+3*a]=0,r[i+3*a+1]=0,i+=4*a)}},e.prototype.uploadTint=function(t,e,n,r,a,i){for(var o=0;o<n;++o){var s=t[e+o],u=s._texture.baseTexture.alphaMode>0,c=s.alpha,d=c<1&&u?Object(l.premultiplyTint)(s._tintRGB,c):s._tintRGB+(255*c<<24);r[i]=d,r[i+a]=d,r[i+2*a]=d,r[i+3*a]=d,i+=4*a}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(j.i);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(lt||(lt={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(ht||(ht={}));var mt={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},vt=function(){function t(){this.color=16777215,this.alpha=1,this.texture=j.p.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=j.p.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),bt=function(t,e){return(bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function gt(t,e){function n(){this.constructor=t}bt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var yt={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var n=t.points,r=t.holes,a=e.points,i=e.indices;if(n.length>=6){for(var o=[],s=0;s<r.length;s++){var u=r[s];o.push(n.length/2),n=n.concat(u.points)}var c=Object(l.earcut)(n,o,2);if(!c)return;var d=a.length/2;for(s=0;s<c.length;s+=3)i.push(c[s]+d),i.push(c[s+1]+d),i.push(c[s+2]+d);for(s=0;s<n.length;s++)a.push(n[s])}}},xt={build:function(t){var e,n,r=t.shape,a=t.points,i=r.x,o=r.y;if(a.length=0,t.type===p.l.CIRC)e=r.radius,n=r.radius;else{var s=t.shape;e=s.width,n=s.height}if(0!==e&&0!==n){var u=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(e+n));u/=2.3;for(var c=2*Math.PI/u,d=0;d<u-.5;d++)a.push(i+Math.sin(-c*d)*e,o+Math.cos(-c*d)*n);a.push(a[0],a[1])}},triangulate:function(t,e){var n=t.points,r=e.points,a=e.indices,i=r.length/2,o=i,s=t.shape,u=t.matrix,c=s.x,d=s.y;r.push(t.matrix?u.a*c+u.c*d+u.tx:c,t.matrix?u.b*c+u.d*d+u.ty:d);for(var l=0;l<n.length;l+=2)r.push(n[l],n[l+1]),a.push(i++,o,i)}},Ot={build:function(t){var e=t.shape,n=e.x,r=e.y,a=e.width,i=e.height,o=t.points;o.length=0,o.push(n,r,n+a,r,n+a,r+i,n,r+i)},triangulate:function(t,e){var n=t.points,r=e.points,a=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(a,a+1,a+2,a+1,a+2,a+3)}};function wt(t,e,n){return t+(e-t)*n}function _t(t,e,n,r,a,i,o){void 0===o&&(o=[]);for(var s=o,u=0,c=0,d=0,l=0,h=0,p=0,f=0,m=0;f<=20;++f)u=wt(t,n,m=f/20),c=wt(e,r,m),d=wt(n,a,m),l=wt(r,i,m),h=wt(u,d,m),p=wt(c,l,m),s.push(h,p);return s}var Tt={build:function(t){var e=t.shape,n=t.points,r=e.x,a=e.y,i=e.width,o=e.height,s=Math.max(0,Math.min(e.radius,Math.min(i,o)/2));n.length=0,s?(_t(r,a+s,r,a,r+s,a,n),_t(r+i-s,a,r+i,a,r+i,a+s,n),_t(r+i,a+o-s,r+i,a+o,r+i-s,a+o,n),_t(r+s,a+o,r,a+o,r,a+o-s,n)):n.push(r,a,r+i,a,r+i,a+o,r,a+o)},triangulate:function(t,e){for(var n=t.points,r=e.points,a=e.indices,i=r.length/2,o=Object(l.earcut)(n,null,2),s=0,u=o.length;s<u;s+=3)a.push(o[s]+i),a.push(o[s+1]+i),a.push(o[s+2]+i);for(s=0,u=n.length;s<u;s++)r.push(n[s],n[++s])}};function Et(t,e,n,r,a,i,o,s){var u,c;o?(u=r,c=-n):(u=-r,c=n);var d=t-n*a+u,l=e-r*a+c,h=t+n*i+u,p=e+r*i+c;return s.push(d,l),s.push(h,p),2}function kt(t,e,n,r,a,i,o,s){var u=n-t,c=r-e,d=Math.atan2(u,c),l=Math.atan2(a-t,i-e);s&&d<l?d+=2*Math.PI:!s&&d>l&&(l+=2*Math.PI);var h=d,p=l-d,f=Math.abs(p),m=Math.sqrt(u*u+c*c),v=1+(15*f*Math.sqrt(m)/Math.PI>>0),b=p/v;if(h+=b,s){o.push(t,e),o.push(n,r);for(var g=1,y=h;g<v;g++,y+=b)o.push(t,e),o.push(t+Math.sin(y)*m,e+Math.cos(y)*m);o.push(t,e),o.push(a,i)}else{o.push(n,r),o.push(t,e);for(g=1,y=h;g<v;g++,y+=b)o.push(t+Math.sin(y)*m,e+Math.cos(y)*m),o.push(t,e);o.push(a,i),o.push(t,e)}return 2*v}function It(t,e){t.lineStyle.native?function(t,e){var n=0,r=t.shape,a=t.points||r.points,i=r.type!==p.l.POLY||r.closeStroke;if(0!==a.length){var o=e.points,s=e.indices,u=a.length/2,c=o.length/2,d=c;for(o.push(a[0],a[1]),n=1;n<u;n++)o.push(a[2*n],a[2*n+1]),s.push(d,d+1),d++;i&&s.push(d,c)}}(t,e):function(t,e){var n=t.shape,r=t.points||n.points.slice(),a=e.closePointEps;if(0!==r.length){var i=t.lineStyle,o=new p.g(r[0],r[1]),s=new p.g(r[r.length-2],r[r.length-1]),u=n.type!==p.l.POLY||n.closeStroke,c=Math.abs(o.x-s.x)<a&&Math.abs(o.y-s.y)<a;if(u){r=r.slice(),c&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var d=.5*(o.x+s.x),l=.5*(s.y+o.y);r.unshift(d,l),r.push(d,l)}var h=e.points,f=r.length/2,m=r.length,v=h.length/2,b=i.width/2,g=b*b,y=i.miterLimit*i.miterLimit,x=r[0],O=r[1],w=r[2],_=r[3],T=0,E=0,k=-(O-_),I=x-w,S=0,C=0,N=Math.sqrt(k*k+I*I);k/=N,I/=N,k*=b,I*=b;var j=i.alignment,A=2*(1-j),R=2*j;u||(i.cap===ht.ROUND?m+=kt(x-k*(A-R)*.5,O-I*(A-R)*.5,x-k*A,O-I*A,x+k*R,O+I*R,h,!0)+2:i.cap===ht.SQUARE&&(m+=Et(x,O,k,I,A,R,!0,h))),h.push(x-k*A,O-I*A),h.push(x+k*R,O+I*R);for(var M=1;M<f-1;++M){x=r[2*(M-1)],O=r[2*(M-1)+1],w=r[2*M],_=r[2*M+1],T=r[2*(M+1)],E=r[2*(M+1)+1],k=-(O-_),I=x-w,k/=N=Math.sqrt(k*k+I*I),I/=N,k*=b,I*=b,S=-(_-E),C=w-T,S/=N=Math.sqrt(S*S+C*C),C/=N,S*=b,C*=b;var P=w-x,D=O-_,F=w-T,L=E-_,B=D*F-L*P,U=B<0;if(Math.abs(B)<.1)h.push(w-k*A,_-I*A),h.push(w+k*R,_+I*R);else{var z=(-k+x)*(-I+_)-(-k+w)*(-I+O),V=(-S+T)*(-C+_)-(-S+w)*(-C+E),W=(P*V-F*z)/B,G=(L*z-D*V)/B,H=(W-w)*(W-w)+(G-_)*(G-_),X=w+(W-w)*A,Y=_+(G-_)*A,q=w-(W-w)*R,K=_-(G-_)*R;i.join===lt.BEVEL||H/g>y?(U?(h.push(X,Y),h.push(w+k*R,_+I*R),h.push(X,Y),h.push(w+S*R,_+C*R)):(h.push(w-k*A,_-I*A),h.push(q,K),h.push(w-S*A,_-C*A),h.push(q,K)),m+=2):i.join===lt.ROUND?U?(h.push(X,Y),h.push(w+k*R,_+I*R),m+=kt(w,_,w+k*R,_+I*R,w+S*R,_+C*R,h,!0)+4,h.push(X,Y),h.push(w+S*R,_+C*R)):(h.push(w-k*A,_-I*A),h.push(q,K),m+=kt(w,_,w-k*A,_-I*A,w-S*A,_-C*A,h,!1)+4,h.push(w-S*A,_-C*A),h.push(q,K)):(h.push(X,Y),h.push(q,K))}}x=r[2*(f-2)],O=r[2*(f-2)+1],w=r[2*(f-1)],k=-(O-(_=r[2*(f-1)+1])),I=x-w,k/=N=Math.sqrt(k*k+I*I),I/=N,k*=b,I*=b,h.push(w-k*A,_-I*A),h.push(w+k*R,_+I*R),u||(i.cap===ht.ROUND?m+=kt(w-k*(A-R)*.5,_-I*(A-R)*.5,w-k*A,_-I*A,w+k*R,_+I*R,h,!1)+2:i.cap===ht.SQUARE&&(m+=Et(w,_,k,I,A,R,!1,h)));var Z=e.indices,J=mt.epsilon*mt.epsilon;for(M=v;M<m+v-2;++M)x=h[2*M],O=h[2*M+1],w=h[2*(M+1)],_=h[2*(M+1)+1],T=h[2*(M+2)],E=h[2*(M+2)+1],Math.abs(x*(_-E)+w*(E-O)+T*(O-_))<J||Z.push(M,M+1,M+2)}}(t,e)}var St,Ct=function(t){function e(e,n,r,a,i,o){void 0===o&&(o=0);i=i||a/2;for(var s=-1*Math.PI/2+o,u=2*r,c=p.f/u,d=[],l=0;l<u;l++){var h=l%2?i:a,f=l*c+s;d.push(e+h*Math.cos(f),n+h*Math.sin(f))}return t.call(this,d)||this}return gt(e,t),e}(p.h),Nt=function(){function t(){}return t.curveTo=function(t,e,n,r,a,i){var o=i[i.length-2],s=i[i.length-1]-e,u=o-t,c=r-e,d=n-t,l=Math.abs(s*d-u*c);if(l<1e-8||0===a)return i[i.length-2]===t&&i[i.length-1]===e||i.push(t,e),null;var h=s*s+u*u,p=c*c+d*d,f=s*c+u*d,m=a*Math.sqrt(h)/l,v=a*Math.sqrt(p)/l,b=m*f/h,g=v*f/p,y=m*d+v*u,x=m*c+v*s,O=u*(v+b),w=s*(v+b),_=d*(m+g),T=c*(m+g);return{cx:y+t,cy:x+e,radius:a,startAngle:Math.atan2(w-x,O-y),endAngle:Math.atan2(T-x,_-y),anticlockwise:u*c>d*s}},t.arc=function(t,e,n,r,a,i,o,s,u){for(var c=o-i,d=mt._segmentsCount(Math.abs(c)*a,40*Math.ceil(Math.abs(c)/p.f)),l=c/(2*d),h=2*l,f=Math.cos(l),m=Math.sin(l),v=d-1,b=v%1/v,g=0;g<=v;++g){var y=l+i+h*(g+b*g),x=Math.cos(y),O=-Math.sin(y);u.push((f*x+m*O)*a+n,(f*-O+m*x)*a+r)}},t}(),jt=function(){function t(){}return t.curveLength=function(t,e,n,r,a,i,o,s){for(var u=0,c=0,d=0,l=0,h=0,p=0,f=0,m=0,v=0,b=0,g=0,y=t,x=e,O=1;O<=10;++O)b=y-(m=(f=(p=(h=1-(c=O/10))*h)*h)*t+3*p*c*n+3*h*(d=c*c)*a+(l=d*c)*o),g=x-(v=f*e+3*p*c*r+3*h*d*i+l*s),y=m,x=v,u+=Math.sqrt(b*b+g*g);return u},t.curveTo=function(e,n,r,a,i,o,s){var u=s[s.length-2],c=s[s.length-1];s.length-=2;var d=mt._segmentsCount(t.curveLength(u,c,e,n,r,a,i,o)),l=0,h=0,p=0,f=0,m=0;s.push(u,c);for(var v=1,b=0;v<=d;++v)p=(h=(l=1-(b=v/d))*l)*l,m=(f=b*b)*b,s.push(p*u+3*h*b*e+3*l*f*r+m*i,p*c+3*h*b*n+3*l*f*a+m*o)},t}(),At=function(){function t(){}return t.curveLength=function(t,e,n,r,a,i){var o=t-2*n+a,s=e-2*r+i,u=2*n-2*t,c=2*r-2*e,d=4*(o*o+s*s),l=4*(o*u+s*c),h=u*u+c*c,p=2*Math.sqrt(d+l+h),f=Math.sqrt(d),m=2*d*f,v=2*Math.sqrt(h),b=l/f;return(m*p+f*l*(p-v)+(4*h*d-l*l)*Math.log((2*f+b+p)/(b+v)))/(4*m)},t.curveTo=function(e,n,r,a,i){for(var o=i[i.length-2],s=i[i.length-1],u=mt._segmentsCount(t.curveLength(o,s,e,n,r,a)),c=0,d=0,l=1;l<=u;++l){var h=l/u;c=o+(e-o)*h,d=s+(n-s)*h,i.push(c+(e+(r-e)*h-c)*h,d+(n+(a-n)*h-d)*h)}},t}(),Rt=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,n){this.reset(),this.style=t,this.start=e,this.attribStart=n},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),Mt=((St={})[p.l.POLY]=yt,St[p.l.CIRC]=xt,St[p.l.ELIP]=xt,St[p.l.RECT]=Ot,St[p.l.RREC]=Tt,St),Pt=[],Dt=[],Ft=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),this.shape=t,this.lineStyle=n,this.fillStyle=e,this.matrix=r,this.type=t.type,this.points=[],this.holes=[]}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Lt=new p.g,Bt=new f,Ut=function(t){function e(){var e=t.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new f,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return gt(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Dt.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),Pt.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null);var a=new Ft(t,e,n,r);return this.graphicsData.push(a),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var n=new Ft(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(t,Lt):Lt.copyFrom(t),r.shape.contains(Lt.x,Lt.y)))){var a=!1;if(r.holes)for(var i=0;i<r.holes.length;i++){if(r.holes[i].shape.contains(Lt.x,Lt.y)){a=!0;break}}if(!a)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,n=this.graphicsData,r=null,a=null;this.batches.length>0&&(a=(r=this.batches[this.batches.length-1]).style);for(var i=this.shapeIndex;i<n.length;i++){this.shapeIndex++;var o=n[i],s=o.fillStyle,u=o.lineStyle;Mt[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var c=0;c<2;c++){var d=0===c?s:u;if(d.visible){var l=d.texture.baseTexture,h=this.indices.length,p=this.points.length/2;l.wrapMode=ut.q.REPEAT,0===c?this.processFill(o):this.processLine(o);var f=this.points.length/2-p;0!==f&&(r&&!this._compareStyles(a,d)&&(r.end(h,p),r=null),r||((r=Pt.pop()||new Rt).begin(d,h,p),this.batches.push(r),a=d),this.addUvs(this.points,e,d.texture,p,f,d.matrix))}}}var m=this.indices.length,v=this.points.length/2;if(r&&r.end(m,v),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var b=v>65535&&t;this.indicesUint16=b?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native===!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var n=this.graphicsData[t],r=n.fillStyle,a=n.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(a&&!a.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,n=t.length;e<n;e++)for(var r=t[e],a=0;a<r.size;a++){var i=r.start+a;this.indicesUint16[i]=this.indicesUint16[i]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++j.a._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Dt.push(this.drawCalls[e]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,a=Dt.pop();a||((a=new j.b).texArray=new j.e),a.texArray.count=0,a.start=0,a.size=0,a.type=ut.e.TRIANGLES;var i=0,o=null,s=0,u=!1,c=ut.e.TRIANGLES,d=0;this.drawCalls.push(a);for(e=0;e<this.batches.length;e++){var l=this.batches[e],h=l.style,p=h.texture.baseTexture;u!==!!h.native&&(c=(u=!!h.native)?ut.e.LINES:ut.e.TRIANGLES,o=null,i=8,t++),o!==p&&(o=p,p._batchEnabled!==t&&(8===i&&(t++,i=0,a.size>0&&((a=Dt.pop())||((a=new j.b).texArray=new j.e),this.drawCalls.push(a)),a.start=d,a.size=0,a.texArray.count=0,a.type=c),p.touched=1,p._batchEnabled=t,p._batchLocation=i,p.wrapMode=10497,a.texArray.elements[a.texArray.count++]=p,i++)),a.size+=l.size,d+=l.size,s=p._batchLocation,this.addColors(n,h.color,h.alpha,l.attribSize),this.addTextureIds(r,s,l.attribSize)}j.a._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,a=new ArrayBuffer(3*t.length*4),i=new Float32Array(a),o=new Uint32Array(a),s=0,u=0;u<t.length/2;u++)i[s++]=t[2*u],i[s++]=t[2*u+1],i[s++]=e[2*u],i[s++]=e[2*u+1],o[s++]=n[u],i[s++]=r[u];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),yt.triangulate(t,this)):Mt[t.type].triangulate(t,this)},e.prototype.processLine=function(t){It(t,this);for(var e=0;e<t.holes.length;e++)It(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var n=t[e];Mt[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=Bt,n=p.d.IDENTITY;this._bounds.clear(),e.clear();for(var r=0;r<this.graphicsData.length;r++){var a=this.graphicsData[r],i=a.shape,o=a.type,s=a.lineStyle,u=a.matrix||p.d.IDENTITY,c=0;if(s&&s.visible){var d=s.alignment;c=s.width,o===p.l.POLY?c*=.5+Math.abs(.5-d):c*=Math.max(0,d)}if(n!==u&&(e.isEmpty()||(t.addBoundsMatrix(e,n),e.clear()),n=u),o===p.l.RECT||o===p.l.RREC){var l=i;e.addFramePad(l.x,l.y,l.x+l.width,l.y+l.height,c,c)}else if(o===p.l.CIRC){var h=i;e.addFramePad(h.x,h.y,h.x,h.y,h.radius+c,h.radius+c)}else if(o===p.l.ELIP){var f=i;e.addFramePad(f.x,f.y,f.x,f.y,f.width+c,f.height+c)}else{var m=i;t.addVerticesMatrix(n,m.points,0,m.points.length,c,c)}}e.isEmpty()||t.addBoundsMatrix(e,n),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var n=0;n<t.length/2;n++){var r=t[2*n],a=t[2*n+1];t[2*n]=e.a*r+e.c*a+e.tx,t[2*n+1]=e.b*r+e.d*a+e.ty}},e.prototype.addColors=function(t,e,n,r){for(var a=(e>>16)+(65280&e)+((255&e)<<16),i=Object(l.premultiplyTint)(a,n);r-- >0;)t.push(i)},e.prototype.addTextureIds=function(t,e,n){for(;n-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,n,r,a,i){void 0===i&&(i=null);for(var o=0,s=e.length,u=n.frame;o<a;){var c=t[2*(r+o)],d=t[2*(r+o)+1];if(i){var l=i.a*c+i.c*d+i.tx;d=i.b*c+i.d*d+i.ty,c=l}o++,e.push(c/u.width,d/u.height)}var h=n.baseTexture;(u.width<h.width||u.height<h.height)&&this.adjustUvs(e,n,s,a)},e.prototype.adjustUvs=function(t,e,n,r){for(var a=e.baseTexture,i=1e-6,o=n+2*r,s=e.frame,u=s.width/a.width,c=s.height/a.height,d=s.x/s.width,l=s.y/s.height,h=Math.floor(t[n]+i),p=Math.floor(t[n+1]+i),f=n+2;f<o;f+=2)h=Math.min(h,Math.floor(t[f]+i)),p=Math.min(p,Math.floor(t[f+1]+i));d-=h,l-=p;for(f=n;f<o;f+=2)t[f]=(t[f]+d)*u,t[f+1]=(t[f+1]+l)*c},e.BATCHABLE_SIZE=100,e}(j.c),zt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=ht.BUTT,e.join=lt.MITER,e.miterLimit=10,e}return gt(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(vt),Vt=new Float32Array(3),Wt={},Gt=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._geometry=e||new Ut,n._geometry.refCount++,n.shader=null,n.state=j.o.for2d(),n._fillStyle=new vt,n._lineStyle=new zt,n._matrix=null,n._holeMode=!1,n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n.pluginName="batch",n._transformID=-1,n.tint=16777215,n.blendMode=ut.b.NORMAL,n}return gt(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t){if(void 0===t&&(t=null),"number"===typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"===typeof t){Object(l.deprecation)("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments,n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6];t={width:n,texture:r,color:a,alpha:i,matrix:o,alignment:s,native:u},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({width:0,texture:j.p.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ht.BUTT,join:lt.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var c=t.width>0&&t.alpha>0;return c?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:c},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new p.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new p.h,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],a=n[n.length-1];return r===t&&a===e||n.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,n,r){this._initCurve();var a=this.currentPath.points;return 0===a.length&&this.moveTo(0,0),At.curveTo(t,e,n,r,a),this},e.prototype.bezierCurveTo=function(t,e,n,r,a,i){return this._initCurve(),jt.curveTo(t,e,n,r,a,i,this.currentPath.points),this},e.prototype.arcTo=function(t,e,n,r,a){this._initCurve(t,e);var i=this.currentPath.points,o=Nt.curveTo(t,e,n,r,a,i);if(o){var s=o.cx,u=o.cy,c=o.radius,d=o.startAngle,l=o.endAngle,h=o.anticlockwise;this.arc(s,u,c,d,l,h)}return this},e.prototype.arc=function(t,e,n,r,a,i){if(void 0===i&&(i=!1),r===a)return this;if(!i&&a<=r?a+=p.f:i&&r<=a&&(r+=p.f),0===a-r)return this;var o=t+Math.cos(r)*n,s=e+Math.sin(r)*n,u=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var d=Math.abs(c[c.length-2]-o),l=Math.abs(c[c.length-1]-s);d<u&&l<u||c.push(o,s)}else this.moveTo(o,s),c=this.currentPath.points;return Nt.arc(o,s,t,e,n,r,a,i,c),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:j.p.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof j.p){Object(l.deprecation)("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments,n=e[0],r=e[1],a=e[2],i=e[3];t={texture:n,color:r,alpha:a,matrix:i},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({texture:j.p.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var o=t.alpha>0;return o?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:o},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,n,r){return this.drawShape(new p.j(t,e,n,r))},e.prototype.drawRoundedRect=function(t,e,n,r,a){return this.drawShape(new p.k(t,e,n,r,a))},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new p.a(t,e,n))},e.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new p.c(t,e,n,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];var a=!0,i=n[0];i.points?(a=i.closeStroke,t=i.points):t=Array.isArray(n[0])?n[0]:n;var o=new p.h(t);return o.closeStroke=a,this.drawShape(o),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,n,r,a,i){return void 0===i&&(i=0),this.drawPolygon(new Ct(t,e,n,r,a,i))},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===p.l.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,n=t.context.supports.uint32Indices;e.updateBatches(n),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var r=0;r<n;r++){var a=t.batches[r],i=a.style.color,o=new Float32Array(this.vertexData.buffer,4*a.attribStart*2,2*a.attribSize),s=new Float32Array(t.uvsFloat32.buffer,4*a.attribStart*2,2*a.attribSize),u={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*a.start,a.size),uvs:s,_batchRGB:Object(l.hex2rgb)(i),_tintRGB:i,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[r]=u}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,n=this.batches.length;e<n;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),n=this._geometry,r=this.tint,a=this.worldAlpha,i=e.uniforms,o=n.drawCalls;i.translationMatrix=this.transform.worldTransform,i.tint[0]=(r>>16&255)/255*a,i.tint[1]=(r>>8&255)/255*a,i.tint[2]=(255&r)/255*a,i.tint[3]=a,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(var s=0,u=o.length;s<u;s++)this._renderDrawCallDirect(t,n.drawCalls[s])},e.prototype._renderDrawCallDirect=function(t,e){for(var n=e.texArray,r=e.type,a=e.size,i=e.start,o=n.count,s=0;s<o;s++)t.texture.bind(n.elements[s],s);t.geometry.draw(r,a,i)},e.prototype._resolveDirectShader=function(t){var e=this.shader,n=this.pluginName;if(!e){if(!Wt[n]){for(var r=new Int32Array(16),a=0;a<16;a++)r[a]=a;var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new p.d,default:j.r.from({uSamplers:r},!0)},o=t.plugins[n]._shader.program;Wt[n]=new j.n(o,i)}e=Wt[n]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,n=e.minX,r=e.minY,a=e.maxX,i=e.maxY;this._bounds.addFrame(this.transform,n,r,a,i)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Object(l.hex2rgb)(this.tint,Vt),e=0;e<this.batches.length;e++){var n=this.batches[e],r=n._batchRGB,a=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);n._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,n=e.a,r=e.b,a=e.c,i=e.d,o=e.tx,s=e.ty,u=this._geometry.points,c=this.vertexData,d=0,l=0;l<u.length;l+=2){var h=u[l],p=u[l+1];c[d++]=n*h+a*p+o,c[d++]=i*p+r*h+s}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new p.g,e}(x),Ht=function(t,e){return(Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Xt,Yt=new p.g,qt=new Uint16Array([0,1,2,0,2,3]),Kt=function(t){function e(e){var n=t.call(this)||this;return n._anchor=new p.e(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=ut.b.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||j.p.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=qt,n.pluginName="batch",n.isSprite=!0,n._roundPixels=h.b.ROUND_PIXELS,n}return function(t,e){function n(){this.constructor=t}Ht(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(l.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(l.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,r=e.b,a=e.c,i=e.d,o=e.tx,s=e.ty,u=this.vertexData,c=t.trim,d=t.orig,l=this._anchor,p=0,f=0,m=0,v=0;if(c?(p=(f=c.x-l._x*d.width)+c.width,m=(v=c.y-l._y*d.height)+c.height):(p=(f=-l._x*d.width)+d.width,m=(v=-l._y*d.height)+d.height),u[0]=n*f+a*v+o,u[1]=i*v+r*f+s,u[2]=n*p+a*v+o,u[3]=i*v+r*p+s,u[4]=n*p+a*m+o,u[5]=i*m+r*p+s,u[6]=n*f+a*m+o,u[7]=i*m+r*f+s,this._roundPixels)for(var b=h.b.RESOLUTION,g=0;g<u.length;++g)u[g]=Math.round((u[g]*b|0)/b)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,r=this._anchor,a=this.transform.worldTransform,i=a.a,o=a.b,s=a.c,u=a.d,c=a.tx,d=a.ty,l=-r._x*n.width,h=l+n.width,p=-r._y*n.height,f=p+n.height;e[0]=i*l+s*p+c,e[1]=u*p+o*l+d,e[2]=i*h+s*p+c,e[3]=u*p+o*h+d,e[4]=i*h+s*f+c,e[5]=u*f+o*h+d,e[6]=i*l+s*f+c,e[7]=u*f+o*l+d},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new p.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Yt);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,a=0;return Yt.x>=r&&Yt.x<r+e&&(a=-n*this.anchor.y,Yt.y>=a&&Yt.y<a+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"===typeof e?e:e&&e.texture){var n="boolean"===typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,n){return new e(t instanceof j.p?t:j.p.from(t,n))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Object(l.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Object(l.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||j.p.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(x),Zt=function(t,e){return(Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Xt||(Xt={}));var Jt={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Xt.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Qt=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],$t=function(){function t(t){this.styleID=0,this.reset(),ne(this,t,t)}return t.prototype.clone=function(){var e={};return ne(e,this,Jt),new t(e)},t.prototype.reset=function(){ne(this,Jt,Jt)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=ee(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=ee(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=ee(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"===typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Qt.indexOf(r)<0&&(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function te(t){return"number"===typeof t?Object(l.hex2string)(t):("string"===typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function ee(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=te(t[e]);return t}return te(t)}function ne(t,e,n){for(var r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var re=function(){function t(t,e,n,r,a,i,o,s,u){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=a,this.lineWidths=i,this.lineHeight=o,this.maxLineWidth=s,this.fontProperties=u}return t.measureText=function(e,n,r,a){void 0===a&&(a=t._canvas),r=void 0===r||null===r?n.wordWrap:r;var i=n.toFontString(),o=t.measureFont(i);0===o.fontSize&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);var s=a.getContext("2d");s.font=i;for(var u=(r?t.wordWrap(e,n,a):e).split(/(?:\r\n|\r|\n)/),c=new Array(u.length),d=0,l=0;l<u.length;l++){var h=s.measureText(u[l]).width+(u[l].length-1)*n.letterSpacing;c[l]=h,d=Math.max(d,h)}var p=d+n.strokeThickness;n.dropShadow&&(p+=n.dropShadowDistance);var f=n.lineHeight||o.fontSize+n.strokeThickness,m=Math.max(f,o.fontSize+n.strokeThickness)+(u.length-1)*(f+n.leading);return n.dropShadow&&(m+=n.dropShadowDistance),new t(e,n,p,m,u,c,f+n.leading,d,o)},t.wordWrap=function(e,n,r){void 0===r&&(r=t._canvas);for(var a=r.getContext("2d"),i=0,o="",s="",u={},c=n.letterSpacing,d=n.whiteSpace,l=t.collapseSpaces(d),h=t.collapseNewlines(d),p=!l,f=n.wordWrapWidth+c,m=t.tokenize(e),v=0;v<m.length;v++){var b=m[v];if(t.isNewline(b)){if(!h){s+=t.addLine(o),p=!l,o="",i=0;continue}b=" "}if(l){var g=t.isBreakingSpace(b),y=t.isBreakingSpace(o[o.length-1]);if(g&&y)continue}var x=t.getFromCache(b,c,u,a);if(x>f)if(""!==o&&(s+=t.addLine(o),o="",i=0),t.canBreakWords(b,n.breakWords))for(var O=t.wordWrapSplit(b),w=0;w<O.length;w++){for(var _=O[w],T=1;O[w+T];){var E=O[w+T],k=_[_.length-1];if(t.canBreakChars(k,E,b,w,n.breakWords))break;_+=E,T++}w+=_.length-1;var I=t.getFromCache(_,c,u,a);I+i>f&&(s+=t.addLine(o),p=!1,o="",i=0),o+=_,i+=I}else{o.length>0&&(s+=t.addLine(o),o="",i=0);var S=v===m.length-1;s+=t.addLine(b,!S),p=!1,o="",i=0}else x+i>f&&(p=!1,s+=t.addLine(o),o="",i=0),(o.length>0||!t.isBreakingSpace(b)||p)&&(o+=b,i+=x)}return s+=t.addLine(o,!1)},t.addLine=function(e,n){return void 0===n&&(n=!0),e=t.trimRight(e),e=n?e+"\n":e},t.getFromCache=function(t,e,n,r){var a=n[t];if(void 0===a){var i=t.length*e;a=r.measureText(t).width+i,n[t]=a}return a},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!==typeof e)return"";for(var n=e.length-1;n>=0;n--){var r=e[n];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"===typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"===typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var n=[],r="";if("string"!==typeof e)return n;for(var a=0;a<e.length;a++){var i=e[a];t.isBreakingSpace(i)||t.isNewline(i)?(""!==r&&(n.push(r),r=""),n.push(i)):r+=i}return""!==r&&n.push(r),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,r,a){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={ascent:0,descent:0,fontSize:0},r=t._canvas,a=t._context;a.font=e;var i=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(a.measureText(i).width),s=Math.ceil(a.measureText(t.BASELINE_SYMBOL).width),u=2*s;s=s*t.BASELINE_MULTIPLIER|0,r.width=o,r.height=u,a.fillStyle="#f00",a.fillRect(0,0,o,u),a.font=e,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(i,0,s);var c=a.getImageData(0,0,o,u).data,d=c.length,l=4*o,h=0,p=0,f=!1;for(h=0;h<s;++h){for(var m=0;m<l;m+=4)if(255!==c[p+m]){f=!0;break}if(f)break;p+=l}for(n.ascent=s-h,p=d-l,f=!1,h=u;h>s;--h){for(m=0;m<l;m+=4)if(255!==c[p+m]){f=!0;break}if(f)break;p-=l}return n.descent=h-s,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),ae=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(n){return document.createElement("canvas")}}();ae.width=ae.height=10,re._canvas=ae,re._context=ae.getContext("2d"),re._fonts={},re.METRICS_STRING="|\xc9q\xc5",re.BASELINE_SYMBOL="M",re.BASELINE_MULTIPLIER=1.4,re._newlines=[10,13],re._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var ie={texture:!0,children:!1,baseTexture:!0},oe=function(t){function e(e,n,r){var a=this,i=!1;r||(r=document.createElement("canvas"),i=!0),r.width=3,r.height=3;var o=j.p.from(r);return o.orig=new p.j,o.trim=new p.j,(a=t.call(this,o)||this)._ownCanvas=i,a.canvas=r,a.context=a.canvas.getContext("2d"),a._resolution=h.b.RESOLUTION,a._autoResolution=!0,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=e,a.style=n,a.localStyleID=-1,a}return function(t,e){function n(){this.constructor=t}Zt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n,r,a=this.context,i=re.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=i.width,s=i.height,u=i.lines,c=i.lineHeight,d=i.lineWidths,h=i.maxLineWidth,p=i.fontProperties;this.canvas.width=Math.ceil((Math.max(1,o)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),a.scale(this._resolution,this._resolution),a.clearRect(0,0,this.canvas.width,this.canvas.height),a.font=this._font,a.lineWidth=e.strokeThickness,a.textBaseline=e.textBaseline,a.lineJoin=e.lineJoin,a.miterLimit=e.miterLimit;for(var f=e.dropShadow?2:1,m=0;m<f;++m){var v=e.dropShadow&&0===m,b=v?2*s:0,g=b*this.resolution;if(v){a.fillStyle="black",a.strokeStyle="black";var y=e.dropShadowColor,x=Object(l.hex2rgb)("number"===typeof y?y:Object(l.string2hex)(y));a.shadowColor="rgba("+255*x[0]+","+255*x[1]+","+255*x[2]+","+e.dropShadowAlpha+")",a.shadowBlur=e.dropShadowBlur,a.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,a.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+g}else a.fillStyle=this._generateFillStyle(e,u,i),a.strokeStyle=e.stroke,a.shadowColor="0",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0;for(var O=0;O<u.length;O++)n=e.strokeThickness/2,r=e.strokeThickness/2+O*c+p.ascent,"right"===e.align?n+=h-d[O]:"center"===e.align&&(n+=(h-d[O])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(u[O],n+e.padding,r+e.padding-b,!0),e.fill&&this.drawLetterSpacing(u[O],n+e.padding,r+e.padding-b)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,n,r){void 0===r&&(r=!1);var a=this._style.letterSpacing;if(0!==a)for(var i=e,o=Array.from?Array.from(t):t.split(""),s=this.context.measureText(t).width,u=0,c=0;c<o.length;++c){var d=o[c];r?this.context.strokeText(d,i,n):this.context.fillText(d,i,n),i+=s-(u=this.context.measureText(t.substring(c+1)).width)+a,s=u}else r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Object(l.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,r=this._style,a=r.trim?0:r.padding,i=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(t.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(t.height/this._resolution),n.trim.x=-a,n.trim.y=-a,n.orig.width=n._frame.width-2*a,n.orig.height=n._frame.height-2*a,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,n){var r,a=t.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var i=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,s=Math.ceil(this.canvas.width/this._resolution)-i-2*o,u=Math.ceil(this.canvas.height/this._resolution)-i-2*o,c=a.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var l=c.length+1,h=1;h<l;++h)d.push(h/l);if(c.unshift(a[0]),d.unshift(0),c.push(a[a.length-1]),d.push(1),t.fillGradientType===Xt.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,o,s/2,u+o);var p=0,f=(n.fontProperties.fontSize+t.strokeThickness)/u;for(h=0;h<e.length;h++)for(var m=n.lineHeight*h,v=0;v<c.length;v++){var b=m/u+("number"===typeof d[v]?d[v]:v/c.length)*f,g=Math.max(p,b);g=Math.min(g,1),r.addColorStop(g,c[v]),p=g}}else{r=this.context.createLinearGradient(o,u/2,s+o,u/2);var y=c.length+1,x=1;for(h=0;h<c.length;h++){var O=void 0;O="number"===typeof d[h]?d[h]:x/y,r.addColorStop(O,c[h]),x++}}return r},e.prototype.destroy=function(e){"boolean"===typeof e&&(e={children:e}),e=Object.assign({},ie,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Object(l.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Object(l.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof $t?t:new $t(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e}(Kt);h.b.UPLOADS_PER_FRAME=4;var se=function(t,e){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ue=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function ce(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof j.p){var a=t._textures[r].baseTexture;-1===e.indexOf(a)&&(e.push(a),n=!0)}return n}function de(t,e){if(t.baseTexture instanceof j.a){var n=t.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function le(t,e){if(t._texture&&t._texture instanceof j.p){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function he(t,e){return e instanceof oe&&(e.updateText(!0),!0)}function pe(t,e){if(e instanceof $t){var n=e.toFontString();return re.measureFont(n),!0}return!1}function fe(t,e){if(t instanceof oe){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function me(t,e){return t instanceof $t&&(-1===e.indexOf(t)&&e.push(t),!0)}function ve(t,e){return e instanceof j.a&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function be(t,e){if(!(e instanceof Gt))return!1;var n=e.geometry;e.finishPoly(),n.updateBatches();for(var r=n.batches,a=0;a<r.length;a++){var i=r[a].style.texture;i&&ve(t,i.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function ge(t,e){return t instanceof Gt&&(e.push(t),!0)}var ye=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(ge),n.registerUploadHook(ve),n.registerUploadHook(be),n}return function(t,e){function n(){this.constructor=t}se(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(function(){function t(t){var e=this;this.limiter=new ue(h.b.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(fe),this.registerFindHook(me),this.registerFindHook(ce),this.registerFindHook(de),this.registerFindHook(le),this.registerUploadHook(he),this.registerUploadHook(pe)}return t.prototype.upload=function(t,e){"function"===typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,w.a.system.addOnce(this.tick,this,w.c.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)w.a.system.addOnce(this.tick,this,w.c.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);this.completes.length=0;for(n=0,r=a.length;n<r;n++)a[n]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof x)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&w.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}()),xe=(function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function t(t,e,n){void 0===n&&(n=null),this._texture=t instanceof j.p?t:null,this.baseTexture=t instanceof j.a?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,n=Object(l.getResolutionOfUrl)(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,r=t.BATCH_SIZE;n-e<r&&n<this._frameKeys.length;){var a=this._frameKeys[n],i=this._frames[a],o=i.frame;if(o){var s=null,u=null,c=!1!==i.trimmed&&i.sourceSize?i.sourceSize:i.frame,d=new p.j(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s=i.rotated?new p.j(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new p.j(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==i.trimmed&&i.spriteSourceSize&&(u=new p.j(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[a]=new j.p(this.baseTexture,s,d,u,i.rotated?2:0,i.anchor),j.p.addToCache(this.textures[a],a)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=0;n<t[e].length;n++){var r=t[e][n];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var n in void 0===t&&(t=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}()),Oe=function(){function t(){}return t.use=function(e,n){var r=e.name+"_image";if(e.data&&e.type===rt.TYPE.JSON&&e.data.frames&&!this.resources[r]){var a={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},i=t.getResourcePath(e,this.baseUrl);this.add(r,i,a,(function(t){if(t.error)n(t.error);else{var r=new xe(t.texture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,n()}))}}))}else n()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:l.url.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),we=function(t,e){return(we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function _e(t,e){function n(){this.constructor=t}we(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Te=new p.g,Ee=(function(t){function e(e,n,r){void 0===n&&(n=100),void 0===r&&(r=100);var a=t.call(this,e)||this;return a.tileTransform=new p.m,a._width=n,a._height=r,a.uvMatrix=e.uvMatrix||new j.q(e),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}_e(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new p.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Te);var e=this._width,n=this._height,r=-e*this.anchor._x;if(Te.x>=r&&Te.x<r+e){var a=-n*this.anchor._y;if(Te.y>=a&&Te.y<a+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){return"number"===typeof n&&(Object(l.deprecation)("5.3.0","TilingSprite.from use options instead of width and height args"),n={width:n,height:arguments[2]}),new e(j.p.from(t,n),n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0})}(Kt),"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"),ke=new p.d,Ie=function(t){function e(e){var n=t.call(this,e)||this,r={globals:n.renderer.globalUniforms};return n.shader=j.n.from(Ee,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",r),n.simpleShader=j.n.from(Ee,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",r),n.quad=new j.k,n.state=j.o.for2d(),n}return _e(e,t),e.prototype.render=function(t){var e=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((r=n.uvs)[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y),n.invalidate();var a=t._texture,i=a.baseTexture,o=t.tileTransform.localTransform,s=t.uvMatrix,u=i.isPowerOfTwo&&a.frame.width===i.width&&a.frame.height===i.height;u&&(i._glTextures[e.CONTEXT_UID]?u=i.wrapMode!==ut.q.CLAMP:i.wrapMode===ut.q.CLAMP&&(i.wrapMode=ut.q.REPEAT));var c=u?this.simpleShader:this.shader,d=a.width,h=a.height,p=t._width,f=t._height;ke.set(o.a*d/p,o.b*d/f,o.c*h/p,o.d*h/f,o.tx/p,o.ty/f),ke.invert(),u?ke.prepend(s.mapCoord):(c.uniforms.uMapCoord=s.mapCoord.toArray(!0),c.uniforms.uClampFrame=s.uClampFrame,c.uniforms.uClampOffset=s.uClampOffset),c.uniforms.uTransform=ke.toArray(!0),c.uniforms.uColor=Object(l.premultiplyTintToRgba)(t.tint,t.worldAlpha,c.uniforms.uColor,i.alphaMode),c.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),c.uniforms.uSampler=a,e.shader.bind(c),e.geometry.bind(n),this.state.blendMode=Object(l.correctBlendMode)(t.blendMode,i.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(j.i),Se=function(t,e){return(Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ce(t,e){function n(){this.constructor=t}Se(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ne=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),je=new p.g,Ae=new p.h,Re=function(t){function e(e,n,r,a){void 0===a&&(a=ut.e.TRIANGLES);var i=t.call(this)||this;return i.geometry=e,e.refCount++,i.shader=n,i.state=r||j.o.for2d(),i.drawMode=a,i.start=0,i.size=0,i.uvs=null,i.indices=null,i.vertexData=new Float32Array(1),i.vertexDirty=0,i._transformID=-1,i.tint=16777215,i.blendMode=ut.b.NORMAL,i._roundPixels=h.b.ROUND_PIXELS,i.batchUvs=null,i}return Ce(e,t),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ut.e.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var n=this.transform.worldTransform,r=n.a,a=n.b,i=n.c,o=n.d,s=n.tx,u=n.ty,c=this.vertexData,d=0;d<c.length/2;d++){var l=e[2*d],p=e[2*d+1];c[2*d]=r*l+i*p+s,c[2*d+1]=a*l+o*p+u}if(this._roundPixels){var f=h.b.RESOLUTION;for(d=0;d<c.length;++d)c[d]=Math.round((c[d]*f|0)/f)}this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Ne(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,je);for(var e=this.geometry.getBuffer("aVertexPosition").data,n=Ae.points,r=this.geometry.getIndex().data,a=r.length,i=4===this.drawMode?3:1,o=0;o+2<a;o+=i){var s=2*r[o],u=2*r[o+1],c=2*r[o+2];if(n[0]=e[s],n[1]=e[s+1],n[2]=e[u],n[3]=e[u+1],n[4]=e[c],n[5]=e[c+1],Ae.contains(je.x,je.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(x),Me=function(t){function e(e,n){var r=this,a={uSampler:e,alpha:1,uTextureMatrix:p.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(a,n.uniforms),(r=t.call(this,n.program||j.j.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),a)||this)._colorDirty=!1,r.uvMatrix=new j.q(e),r.batchable=void 0===n.program,r.pluginName=n.pluginName,r.tint=n.tint,r.alpha=n.alpha,r}return Ce(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Object(l.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(j.n),Pe=function(t){function e(e,n,r){var a=t.call(this)||this,i=new j.f(e),o=new j.f(n,!0),s=new j.f(r,!0,!0);return a.addAttribute("aVertexPosition",i,2,!1,ut.p.FLOAT).addAttribute("aTextureCoord",o,2,!1,ut.p.FLOAT).addIndex(s),a._updateId=-1,a}return Ce(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(j.h),De=function(t,e){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Fe=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},Le=[function(){function t(){}return t.test=function(t){return"string"===typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[]};for(var r in e){var a=e[r].match(/^[a-z]+/gm)[0],i=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var s in i){var u=i[s].split("="),c=u[0],d=u[1].replace(/"/gm,""),l=parseFloat(d),h=isNaN(l)?d:l;o[c]=h}n[a].push(o)}var p=new Fe;return n.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),n.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),n.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),n.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),n.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),p},t}(),function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new Fe,n=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),a=t.getElementsByTagName("page"),i=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),s=0;s<n.length;s++)e.info.push({face:n[s].getAttribute("face"),size:parseInt(n[s].getAttribute("size"),10)});for(s=0;s<r.length;s++)e.common.push({lineHeight:parseInt(r[s].getAttribute("lineHeight"),10)});for(s=0;s<a.length;s++)e.page.push({id:parseInt(a[s].getAttribute("id"),10)||0,file:a[s].getAttribute("file")});for(s=0;s<i.length;s++){var u=i[s];e.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(s=0;s<o.length;s++)e.kerning.push({first:parseInt(o[s].getAttribute("first"),10),second:parseInt(o[s].getAttribute("second"),10),amount:parseInt(o[s].getAttribute("amount"),10)});return e},t}()];function Be(t){for(var e=0;e<Le.length;e++)if(Le[e].test(t))return Le[e];return null}function Ue(t,e,n,r,a,i){var o,s=n.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var u=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,d=Math.ceil(t.width/r)-u-2*c,l=Math.ceil(t.height/r)-u-2*c,h=s.slice(),p=n.fillGradientStops.slice();if(!p.length)for(var f=h.length+1,m=1;m<f;++m)p.push(m/f);if(h.unshift(s[0]),p.unshift(0),h.push(s[s.length-1]),p.push(1),n.fillGradientType===Xt.LINEAR_VERTICAL){o=e.createLinearGradient(d/2,c,d/2,l+c);var v=0,b=(i.fontProperties.fontSize+n.strokeThickness)/l;for(m=0;m<a.length;m++)for(var g=i.lineHeight*m,y=0;y<h.length;y++){var x=g/l+("number"===typeof p[y]?p[y]:y/h.length)*b,O=Math.max(v,x);O=Math.min(O,1),o.addColorStop(O,h[y]),v=O}}else{o=e.createLinearGradient(c,l/2,d+c,l/2);var w=h.length+1,_=1;for(m=0;m<h.length;m++){var T=void 0;T="number"===typeof p[m]?p[m]:_/w,o.addColorStop(T,h[m]),_++}}return o}function ze(t,e,n,r,a,i,o){var s=n.text,u=n.fontProperties;e.translate(r,a),e.scale(i,i);var c=o.strokeThickness/2,d=-o.strokeThickness/2;e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=Ue(t,e,o,i,[s],n),e.strokeStyle=o.stroke,e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=Ue(t,e,o,i,[s],n),e.strokeStyle=o.stroke;var h=o.dropShadowColor,p=Object(l.hex2rgb)("number"===typeof h?h:Object(l.string2hex)(h));o.dropShadow?(e.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+o.dropShadowAlpha+")",e.shadowBlur=o.dropShadowBlur,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*o.dropShadowDistance,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*o.dropShadowDistance):(e.shadowColor="0",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),o.stroke&&o.strokeThickness&&e.strokeText(s,c,d+n.lineHeight-u.descent),o.fill&&e.fillText(s,c,d+n.lineHeight-u.descent),e.setTransform(),e.fillStyle="rgba(0, 0, 0, 0)"}var Ve=function(){function t(t,e){var n=t.info[0],r=t.common[0],a=t.page[0],i=Object(l.getResolutionOfUrl)(a.file),o={};this.font=n.face,this.size=n.size,this.lineHeight=r.lineHeight/i,this.chars={},this.pageTextures=o;for(var s=0;s<t.page.length;s++){var u=t.page[s],c=u.id,d=u.file;o[c]=e instanceof Array?e[s]:e[d]}for(s=0;s<t.char.length;s++){var h=t.char[s],f=(c=h.id,h.page),m=t.char[s],v=m.x,b=m.y,g=m.width,y=m.height,x=m.xoffset,O=m.yoffset,w=m.xadvance;v/=i,b/=i,g/=i,y/=i,x/=i,O/=i,w/=i;var _=new p.j(v+o[f].frame.x/i,b+o[f].frame.y/i,g,y);this.chars[c]={xOffset:x,yOffset:O,xAdvance:w,kerning:{},texture:new j.p(o[f].baseTexture,_),page:f}}for(s=0;s<t.kerning.length;s++){var T=t.kerning[s],E=T.first,k=T.second,I=T.amount;E/=i,k/=i,I/=i,this.chars[k]&&(this.chars[k].kerning[E]=I)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,n){var r;if(e instanceof Fe)r=e;else{var a=Be(e);if(!a)throw new Error("Unrecognized data format for font.");r=a.parse(e)}n instanceof j.p&&(n=[n]);var i=new t(r,n);return t.available[i.font]=i,i},t.uninstall=function(e){var n=t.available[e];if(!n)throw new Error("No font found named '"+e+"'");n.destroy(),delete t.available[e]},t.from=function(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var a=Object.assign({},t.defaultOptions,r),i=a.chars,o=a.padding,s=a.resolution,u=a.textureWidth,c=a.textureHeight,d=function(t){"string"===typeof t&&(t=[t]);for(var e=[],n=0,r=t.length;n<r;n++){var a=t[n];if(Array.isArray(a)){if(2!==a.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+a.length+".");var i=a[0].charCodeAt(0),o=a[1].charCodeAt(0);if(o<i)throw new Error("[BitmapFont]: Invalid character range.");for(var s=i,u=o;s<=u;s++)e.push(String.fromCharCode(s))}else e.push.apply(e,a.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(i),l=n instanceof $t?n:new $t(n),h=u,p=new Fe;p.info[0]={face:l.fontFamily,size:l.fontSize},p.common[0]={lineHeight:l.fontSize};for(var f,m,v,b=0,g=0,y=0,x=[],O=0;O<d.length;O++){f||((f=document.createElement("canvas")).width=u,f.height=c,m=f.getContext("2d"),v=new j.a(f,{resolution:s}),x.push(new j.p(v)),p.page.push({id:x.length-1,file:""}));var w=re.measureText(d[O],l,!1,f),_=w.width,T=Math.ceil(w.height),E=Math.ceil(("italic"===l.fontStyle?2:1)*_);if(g>=c-T*s){if(0===g)throw new Error("[BitmapFont] textureHeight "+c+"px is too small for "+l.fontSize+"px fonts");--O,f=null,m=null,v=null,g=0,b=0,y=0}else if(y=Math.max(T+w.fontProperties.descent,y),E*s+b>=h)--O,g+=y*s,g=Math.ceil(g),b=0,y=0;else{ze(f,m,w,b,g,s,l);var k=w.text.charCodeAt(0);p.char.push({id:k,page:x.length-1,x:b/s,y:g/s,width:E,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(_-(l.dropShadow?l.dropShadowDistance:0)-(l.stroke?l.strokeThickness:0))}),b+=(E+2*o)*s,b=Math.ceil(b)}}var I=new t(p,x);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=I,I},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),We=[],Ge=[],He=(function(t){function e(n,r){void 0===r&&(r={});var a=t.call(this)||this;a._tint=16777215,r.font&&(Object(l.deprecation)("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),a._upgradeStyle(r));var i=Object.assign({},e.styleDefaults,r),o=i.align,s=i.tint,u=i.maxWidth,c=i.letterSpacing,d=i.fontName,f=i.fontSize;if(!Ve.available[d])throw new Error('Missing BitmapFont "'+d+'"');return a._activePagesMeshData=[],a._textWidth=0,a._textHeight=0,a._align=o,a._tint=s,a._fontName=d,a._fontSize=f||Ve.available[d].size,a._text=n,a._maxWidth=u,a._maxLineHeight=0,a._letterSpacing=c,a._anchor=new p.e((function(){a.dirty=!0}),a,0,0),a.roundPixels=h.b.ROUND_PIXELS,a.dirty=!0,a}(function(t,e){function n(){this.constructor=t}De(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.updateText=function(){for(var t,e=Ve.available[this._fontName],n=this._fontSize/e.size,r=new p.g,a=[],i=[],o=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",s=o.length,u=this._maxWidth*e.size/this._fontSize,c=null,d=0,h=0,f=0,m=-1,v=0,b=0,g=0,y=0;y<s;y++){var x=o.charCodeAt(y),O=o.charAt(y);if(/(?:\s)/.test(O)&&(m=y,v=d),"\r"!==O&&"\n"!==O){var w=e.chars[x];if(w){c&&w.kerning[c]&&(r.x+=w.kerning[c]);var _=Ge.pop()||{texture:j.p.EMPTY,line:0,charCode:0,position:new p.g};_.texture=w.texture,_.line=f,_.charCode=x,_.position.x=r.x+w.xOffset+this._letterSpacing/2,_.position.y=r.y+w.yOffset,a.push(_),r.x+=w.xAdvance+this._letterSpacing,d=r.x,g=Math.max(g,w.yOffset+w.texture.height),c=x,-1!==m&&u>0&&r.x>u&&(++b,Object(l.removeItems)(a,1+m-b,1+y-m),y=m,m=-1,i.push(v),h=Math.max(h,v),f++,r.x=0,r.y+=e.lineHeight,c=null)}}else i.push(d),h=Math.max(h,d),++f,++b,r.x=0,r.y+=e.lineHeight,c=null}var T=o.charAt(o.length-1);"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(d=v),i.push(d),h=Math.max(h,d));var E=[];for(y=0;y<=f;y++){var k=0;"right"===this._align?k=h-i[y]:"center"===this._align&&(k=(h-i[y])/2),E.push(k)}var I=a.length,S={},C=[],N=this._activePagesMeshData;for(y=0;y<N.length;y++)We.push(N[y]);for(y=0;y<I;y++){var A=(D=a[y].texture).baseTexture.uid;if(!S[A]){if(!(W=We.pop())){var R=new Pe,M=new Me(j.p.EMPTY);W={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new Re(R,M),vertices:null,uvs:null,indices:null}}W.index=0,W.indexCount=0,W.vertexCount=0,W.uvsCount=0,W.total=0,W.mesh.texture=new j.p(D.baseTexture),W.mesh.tint=this._tint,C.push(W),S[A]=W}S[A].total++}for(y=0;y<N.length;y++)-1===C.indexOf(N[y])&&this.removeChild(N[y].mesh);for(y=0;y<C.length;y++)C[y].mesh.parent!==this&&this.addChild(C[y].mesh);for(var y in this._activePagesMeshData=C,S){var P=(W=S[y]).total;(null===(t=W.indices)||void 0===t?void 0:t.length)>6*P&&!(W.vertices.length<2*Re.BATCHABLE_SIZE)||(W.vertices=new Float32Array(8*P),W.uvs=new Float32Array(8*P),W.indices=new Uint16Array(6*P)),W.mesh.size=6*P}for(y=0;y<I;y++){var D,F=((O=a[y]).position.x+E[O.line])*n,L=O.position.y*n,B=S[(D=O.texture).baseTexture.uid],U=D.frame,z=D._uvs,V=B.index++;B.indices[6*V+0]=0+4*V,B.indices[6*V+1]=1+4*V,B.indices[6*V+2]=2+4*V,B.indices[6*V+3]=0+4*V,B.indices[6*V+4]=2+4*V,B.indices[6*V+5]=3+4*V,B.vertices[8*V+0]=F,B.vertices[8*V+1]=L,B.vertices[8*V+2]=F+U.width*n,B.vertices[8*V+3]=L,B.vertices[8*V+4]=F+U.width*n,B.vertices[8*V+5]=L+U.height*n,B.vertices[8*V+6]=F,B.vertices[8*V+7]=L+U.height*n,B.uvs[8*V+0]=z.x0,B.uvs[8*V+1]=z.y0,B.uvs[8*V+2]=z.x1,B.uvs[8*V+3]=z.y1,B.uvs[8*V+4]=z.x2,B.uvs[8*V+5]=z.y2,B.uvs[8*V+6]=z.x3,B.uvs[8*V+7]=z.y3}for(var y in this._textWidth=h*n,this._textHeight=(r.y+e.lineHeight)*n,S){var W=S[y];if(0!==this.anchor.x||0!==this.anchor.y)for(var G=0,H=this._textWidth*this.anchor.x,X=this._textHeight*this.anchor.y,Y=0;Y<W.total;Y++)W.vertices[G++]-=H,W.vertices[G++]-=X,W.vertices[G++]-=H,W.vertices[G++]-=X,W.vertices[G++]-=H,W.vertices[G++]-=X,W.vertices[G++]-=H,W.vertices[G++]-=X;this._maxLineHeight=g*n;var q=W.mesh.geometry.getBuffer("aVertexPosition"),K=W.mesh.geometry.getBuffer("aTextureCoord"),Z=W.mesh.geometry.getIndex();q.data=W.vertices,K.data=W.uvs,Z.data=W.indices,q.update(),K.update(),Z.update()}for(y=0;y<a.length;y++)Ge.push(a[y])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Ve.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype._upgradeStyle=function(t){if("string"===typeof t.font){var e=t.font.split(" ");t.fontName=1===e.length?e[0]:e.slice(1).join(" "),e.length>=2&&(t.fontSize=parseInt(e[0],10))}else t.fontName=t.font.name,t.fontSize="number"===typeof t.font.size?t.font.size:parseInt(t.font.size,10)},e.registerFont=function(t,e){return Object(l.deprecation)("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),Ve.install(t,e)},Object.defineProperty(e,"fonts",{get:function(){return Object(l.deprecation)("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),Ve.available},enumerable:!1,configurable:!0}),e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(x),function(){function t(){}return t.add=function(){rt.setExtensionXhrType("fnt",rt.XHR_RESPONSE_TYPE.DOCUMENT)},t.use=function(e,n){var r=Be(e.data);if(r)for(var a=t.getBaseUrl(this,e),i=r.parse(e.data),o={},s=function(t){o[t.metadata.pageFile]=t.texture,Object.keys(o).length===i.page.length&&(e.bitmapFont=Ve.install(i,o),n())},u=0;u<i.page.length;++u){var c=i.page[u].file,d=a+c,l=!1;for(var h in this.resources){var p=this.resources[h];if(p.url===d){p.metadata.pageFile=c,p.texture?s(p):p.onAfterMiddleware.add(s),l=!0;break}}if(!l){var f={crossOrigin:e.crossOrigin,loadType:rt.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},e.metadata.imageMetadata),parentResource:e};this.add(d,f,s)}}else n()},t.getBaseUrl=function(e,n){var r=n.isDataUrl?"":t.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}()),Xe=function(t,e){return(Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Ye=function(t){function e(e){void 0===e&&(e=1);var n=t.call(this,j.u,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=e,n}return function(t,e){function n(){this.constructor=t}Xe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(j.g),qe=function(t,e){return(qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ke(t,e){function n(){this.constructor=t}qe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ze,Je,Qe,$e,tn,en,nn,rn,an,on,sn,un,cn,dn,ln,hn,pn,fn={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},mn=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Ze||(Ze={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Je||(Je={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Qe||(Qe={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}($e||($e={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(tn||(tn={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(en||(en={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(nn||(nn={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(rn||(rn={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(an||(an={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(on||(on={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(sn||(sn={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(un||(un={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(cn||(cn={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(dn||(dn={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(ln||(ln={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(hn||(hn={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(pn||(pn={}));var vn=function(t){function e(e,n,r,a,i){void 0===n&&(n=8),void 0===r&&(r=4),void 0===a&&(a=h.b.RESOLUTION),void 0===i&&(i=5);var o=this,s=function(t,e){var n,r=Math.ceil(t/2),a="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",i="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var s=n.replace("%index%",o.toString());i+=s=s.replace("%sampleIndex%",o-(r-1)+".0"),i+="\n"}return a=(a=a.replace("%blur%",i)).replace("%size%",t.toString())}(i,e),u=function(t){for(var e,n=fn[t],r=n.length,a=mn,i="",o=0;o<t;o++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());e=o,o>=r&&(e=t-o-1),i+=s=s.replace("%value%",n[e].toString()),i+="\n"}return a=(a=a.replace("%blur%",i)).replace("%size%",t.toString())}(i);return(o=t.call(this,s,u)||this).horizontal=e,o.resolution=a,o._quality=0,o.quality=r,o.blur=n,o}return Ke(e,t),e.prototype.apply=function(t,e,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/e.width):this.uniforms.strength=1/n.height*(n.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{var a=t.getFilterTexture(),i=t.renderer,o=e,s=a;this.state.blend=!1,t.applyFilter(this,o,s,cn.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(o,cn.BLIT),this.uniforms.uSampler=s;var c=s;s=o,o=c,i.shader.bind(this),i.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,s,n,r),t.returnFilterTexture(a)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(j.g),bn=function(t){function e(e,n,r,a){void 0===e&&(e=8),void 0===n&&(n=4),void 0===r&&(r=h.b.RESOLUTION),void 0===a&&(a=5);var i=t.call(this)||this;return i.blurXFilter=new vn(!0,e,n,r,a),i.blurYFilter=new vn(!1,e,n,r,a),i.resolution=r,i.quality=n,i.blur=e,i.repeatEdgePixels=!1,i}return Ke(e,t),e.prototype.apply=function(t,e,n,r){var a=Math.abs(this.blurXFilter.strength),i=Math.abs(this.blurYFilter.strength);if(a&&i){var o=t.getFilterTexture();this.blurXFilter.apply(t,e,o,cn.CLEAR),this.blurYFilter.apply(t,o,n,r),t.returnFilterTexture(o)}else i?this.blurYFilter.apply(t,e,n,r):this.blurXFilter.apply(t,e,n,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(j.g),gn=function(t,e){return(gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var yn=function(t){function e(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,j.t,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,e}return function(t,e){function n(){this.constructor=t}gn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),a=1/3,i=(0,Math.sqrt)(a),o=[n+(1-n)*a,a*(1-n)-i*r,a*(1-n)+i*r,0,0,a*(1-n)+i*r,n+a*(1-n),a*(1-n)-i*r,0,0,a*(1-n)-i*r,a*(1-n)+i*r,n+a*(1-n),0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,r=-.5*(n-1),a=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(a,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var n=2*t/3+1,r=-.5*(n-1),a=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(a,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,n,r,a){var i=((n=n||16770432)>>16&255)/255,o=(n>>8&255)/255,s=(255&n)/255,u=((r=r||3375104)>>16&255)/255,c=(r>>8&255)/255,d=(255&r)/255,l=[.3,.59,.11,0,0,i,o,s,t=t||.2,0,u,c,d,e=e||.15,0,i-u,o-c,s-d,0,0];this._loadMatrix(l,a)},e.prototype.night=function(t,e){var n=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(j.g);yn.prototype.grayscale=yn.prototype.greyscale;var xn=function(t,e){return(xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var On=function(t){function e(e,n){var r=this,a=new p.d;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=a,null!==n&&void 0!==n||(n=20),r.scale=new p.g(n,n),r}return function(t,e){function n(){this.constructor=t}xn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.apply=function(t,e,n,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,i=Math.sqrt(a.a*a.a+a.b*a.b),o=Math.sqrt(a.c*a.c+a.d*a.d);0!==i&&0!==o&&(this.uniforms.rotation[0]=a.a/i,this.uniforms.rotation[1]=a.b/i,this.uniforms.rotation[2]=a.c/o,this.uniforms.rotation[3]=a.d/o),t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(j.g),wn=function(t,e){return(wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var _n=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function n(){this.constructor=t}wn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(j.g),Tn=function(t,e){return(Tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var En=function(t){function e(e,n){void 0===e&&(e=.5),void 0===n&&(n=Math.random());var r=t.call(this,j.t,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=n,r}return function(t,e){function n(){this.constructor=t}Tn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(j.g),kn=new p.d;b.prototype._cacheAsBitmap=!1,b.prototype._cacheData=null;var In=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(b.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new In),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),b.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},b.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters){var r=this.filters[0].padding;n.pad(r)}n.ceil(h.b.RESOLUTION);var a=t.renderTexture.current,i=t.renderTexture.sourceFrame.clone(),o=t.projection.transform,s=j.l.create({width:n.width,height:n.height}),u="cacheAsBitmap_"+Object(l.uid)();this._cacheData.textureCacheId=u,j.a.addToCache(s.baseTexture,u),j.p.addToCache(s,u);var c=this.transform.localTransform.copyTo(kn).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,s,!0,c,!1),t.projection.transform=o,t.renderTexture.bind(a,i),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new Kt(s);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-n.x/n.width,d.anchor.y=-n.y/n.height,d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},b.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},b.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=t.context,a=t._projTransform;e.ceil(h.b.RESOLUTION);var i=j.l.create({width:e.width,height:e.height}),o="cacheAsBitmap_"+Object(l.uid)();this._cacheData.textureCacheId=o,j.a.addToCache(i.baseTexture,o),j.p.addToCache(i,o);var s=kn;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,s,!1),t.context=r,t._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new Kt(i);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},b.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},b.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},b.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,j.a.removeFromCache(this._cacheData.textureCacheId),j.p.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},b.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},b.prototype.name=null,x.prototype.getChildByName=function(t,e){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(n=0,r=this.children.length;n<r;n++){if(this.children[n].getChildByName){var a=this.children[n].getChildByName(t,!0);if(a)return a}}return null},b.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new p.g),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var Sn=function(t,e){return(Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Cn(t,e){function n(){this.constructor=t}Sn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Nn=function(t){function e(e,n,r,a){void 0===e&&(e=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===a&&(a=10);var i=t.call(this)||this;return i.segWidth=r,i.segHeight=a,i.width=e,i.height=n,i.build(),i}return Cn(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],n=[],r=[],a=this.segWidth-1,i=this.segHeight-1,o=this.width/a,s=this.height/i,u=0;u<t;u++){var c=u%this.segWidth,d=u/this.segWidth|0;e.push(c*o,d*s),n.push(c/a,d/i)}var l=a*i;for(u=0;u<l;u++){var h=u%a,p=u/a|0,f=p*this.segWidth+h,m=p*this.segWidth+h+1,v=(p+1)*this.segWidth+h,b=(p+1)*this.segWidth+h+1;r.push(f,m,v,m,b,v)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Pe),jn=function(t){function e(e,n,r){void 0===e&&(e=200),void 0===r&&(r=0);var a=t.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return a.points=n,a._width=e,a.textureScale=r,a.build(),a}return Cn(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var a=n.data,i=r.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var o=0,s=t[0],u=this._width*this.textureScale,c=t.length,d=0;d<c;d++){var l=4*d;if(this.textureScale>0){var h=s.x-t[d].x,p=s.y-t[d].y,f=Math.sqrt(h*h+p*p);s=t[d],o+=f/u}else o=d/(c-1);a[l]=o,a[l+1]=0,a[l+2]=o,a[l+3]=1}var m=0;for(d=0;d<c-1;d++){l=2*d;i[m++]=l,i[m++]=l+1,i[m++]=l+2,i[m++]=l+2,i[m++]=l+1,i[m++]=l+3}n.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,n=t[0],r=0,a=0,i=this.buffers[0].data,o=t.length,s=0;s<o;s++){var u=t[s],c=4*s;a=-((e=s<t.length-1?t[s+1]:u).x-n.x),r=e.y-n.y;var d=Math.sqrt(r*r+a*a),l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=d,a/=d,r*=l,a*=l,i[c]=u.x+r,i[c+1]=u.y+a,i[c+2]=u.x-r,i[c+3]=u.y-a,n=u}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Pe),An=(function(t){function e(e,n,r){void 0===r&&(r=0);var a=this,i=new jn(e.height,n,r),o=new Me(e);return r>0&&(e.baseTexture.wrapMode=ut.q.REPEAT),(a=t.call(this,i,o)||this).autoUpdate=!0,a}Cn(e,t),e.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,e)}}(Re),function(t){function e(e,n,r){var a=this,i=new Nn(e.width,e.height,n,r),o=new Me(j.p.WHITE);return(a=t.call(this,i,o)||this).texture=e,a}return Cn(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e}(Re)),Rn=(function(t){function e(e,n,r,a,i){void 0===e&&(e=j.p.EMPTY);var o=this,s=new Pe(n,r,a);s.getBuffer("aVertexPosition").static=!1;var u=new Me(e);return(o=t.call(this,s,u,null,i)||this).autoUpdate=!0,o}Cn(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)}}(Re),function(t){function e(e,n,r,a,i){void 0===n&&(n=10),void 0===r&&(r=10),void 0===a&&(a=10),void 0===i&&(i=10);var o=t.call(this,j.p.WHITE,4,4)||this;return o._origWidth=e.orig.width,o._origHeight=e.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=n,o._rightWidth=a,o._topHeight=r,o._bottomHeight=i,o.texture=e,o}Cn(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(An),n(53),function(t,e){return(Rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)});!function(t){function e(e,n){void 0===n&&(n=!0);var r=t.call(this,e[0]instanceof j.p?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}(function(t,e){function n(){this.constructor=t}Rn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(w.a.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(w.a.shared.add(this.update,this,w.c.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(j.p.from(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(j.p.from(t[r]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof j.p)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(w.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(w.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(Kt);j.m.registerPlugin("accessibility",O),j.m.registerPlugin("extract",P),j.m.registerPlugin("interaction",N),j.m.registerPlugin("particle",ft),j.m.registerPlugin("prepare",ye),j.m.registerPlugin("batch",j.d),j.m.registerPlugin("tilingSprite",Ie),ot.registerPlugin(He),ot.registerPlugin(Oe),A.registerPlugin(w.b),A.registerPlugin(st);var Mn={AlphaFilter:Ye,BlurFilter:bn,BlurFilterPass:vn,ColorMatrixFilter:yn,DisplacementFilter:On,FXAAFilter:_n,NoiseFilter:En}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(4);var c=Object(u.a)({sub_:function(t,e){var n=Object(s.a)(t,"a","sub"),u=Object(s.a)(e,"b","sub"),c=Object(o.b)(n,u),d=Object(r.a)(c,2),l={a:n=d[0],b:u=d[1]};return a.a.runKernel(i.Mc,l)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(4);var c=Object(u.a)({mul_:function(t,e){var n=Object(s.a)(t,"a","mul"),u=Object(s.a)(e,"b","mul"),c=Object(o.b)(n,u),d=Object(r.a)(c,2),l={a:n=d[0],b:u=d[1]};return a.a.runKernel(i.Sb,l)}})},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";n.d(e,"b",(function(){return g})),n.d(e,"f",(function(){return O})),n.d(e,"e",(function(){return w})),n.d(e,"d",(function(){return _})),n.d(e,"a",(function(){return T})),n.d(e,"c",(function(){return E}));var r=n(84),a=n(83),i=n(10),o=n.n(i),s=n(17),u=n(7),c=n(18),d=n(90),l=n(19),h=n(9);function p(t,e,n,r){var a=Object(h.j)(e),i=function(t,e,n,r){var a=Object(h.O)(e),i=r[r.length-1],o=new Array(i).fill(0),s=e.length,u="complex64"===n?v(t):t;if(s>1)for(var c=0;c<a/i;c++)for(var d=c*i,l=0;l<i;l++)o[l]=Math.max(o[l],f(u[d+l],0,n).length);return o}(t,e,n,a),o=e.length,s=function t(e,n,r,a,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s="complex64"===r?2:1,u=n[0],c=n.length;if(0===c){if("complex64"===r){var d=v(e);return[f(d[0],0,r)]}return"bool"===r?[m(e[0])]:[e[0].toString()]}if(1===c){if(u>20){var h=3*s,p=Array.from(e.slice(0,h)),b=Array.from(e.slice((u-3)*s,u*s));return"complex64"===r&&(p=v(p),b=v(b)),["["+p.map((function(t,e){return f(t,i[e],r)})).join(", ")+", ..., "+b.map((function(t,e){return f(t,i[u-3+e],r)})).join(", ")+"]"]}var g="complex64"===r?v(e):Array.from(e);return["["+g.map((function(t,e){return f(t,i[e],r)})).join(", ")+"]"]}var y=n.slice(1),x=a.slice(1),O=a[0]*s,w=[];if(u>20){for(var _=0;_<3;_++){var T=_*O,E=T+O;w.push.apply(w,Object(l.a)(t(e.slice(T,E),y,r,x,i,!1)))}w.push("...");for(var k=u-3;k<u;k++){var I=k*O,S=I+O;w.push.apply(w,Object(l.a)(t(e.slice(I,S),y,r,x,i,k===u-1)))}}else for(var C=0;C<u;C++){var N=C*O,j=N+O;w.push.apply(w,Object(l.a)(t(e.slice(N,j),y,r,x,i,C===u-1)))}var A=2===c?",":"";w[0]="["+w[0]+A;for(var R=1;R<w.length-1;R++)w[R]=" "+w[R]+A;for(var M=",\n",P=2;P<c;P++)M+="\n";return w[w.length-1]=" "+w[w.length-1]+"]"+(o?"":M),w}(t,e,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(e,"]")),u.push("  values:")),u.push(s.map((function(t){return"    "+t})).join("\n")),u.join("\n")}function f(t,e,n){var r;return r=Array.isArray(t)?"".concat(parseFloat(t[0].toFixed(7))," + ")+"".concat(parseFloat(t[1].toFixed(7)),"j"):Object(h.z)(t)?"'".concat(t,"'"):"bool"===n?m(t):parseFloat(t.toFixed(7)).toString(),Object(h.L)(r,e)}function m(t){return 0===t?"false":"true"}function v(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var b=n(16),g=function(){function t(e,n,r){var a=this;if(Object(u.a)(this,t),this.dtype=n,this.shape=e.slice(),this.size=h.O(e),null!=r){var i=r.length;h.b(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||h.n(n,this.size),this.strides=Object(h.j)(e)}return Object(c.a)(t,[{key:"set",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),h.b(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(e.rank,")")}));var i=this.locToIndex(r);this.values[i]=t}},{key:"get",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];0===e.length&&(e=[0]);for(var r=0,a=0,i=e;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(e,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=e[e.length-1],c=0;c<e.length-1;++c)u+=this.strides[c]*e[c];return this.values[u]}},{key:"locToIndex",value:function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}},{key:"indexToLoc",value:function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}},{key:"toTensor",value:function(){return y().makeTensor(this.values,this.shape,this.dtype)}},{key:"rank",get:function(){return this.shape.length}}]),t}(),y=null,x=null;function O(t){y=t}function w(t){x=t}function _(t){t}var T=function(){function t(e,n,r,a){Object(u.a)(this,t),this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=h.O(e),this.strides=Object(h.j)(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Object(c.a)(t,[{key:"buffer",value:function(){var t=Object(s.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.data();case 2:return e=t.sent,t.abrupt("return",x.buffer(this.shape,this.dtype,e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return x.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var t=Object(s.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.data();case 2:return e=t.sent,t.abrupt("return",Object(h.T)(this.shape,e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Object(h.T)(this.shape,this.dataSync())}},{key:"data",value:function(){var t=Object(s.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.throwIfDisposed(),e=y().read(this.dataId),"string"!==this.dtype){t.next=13;break}return t.next=5,e;case 5:return n=t.sent,t.prev=6,t.abrupt("return",n.map((function(t){return b.decodeString(t)})));case 10:throw t.prev=10,t.t0=t.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return t.abrupt("return",e);case 14:case"end":return t.stop()}}),t,this,[[6,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"dataSync",value:function(){this.throwIfDisposed();var t=y().readSync(this.dataId);if("string"===this.dtype)try{return t.map((function(t){return b.decodeString(t)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}},{key:"bytes",value:function(){var t=Object(s.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.throwIfDisposed(),t.next=3,y().read(this.dataId);case 3:if(e=t.sent,"string"!==this.dtype){t.next=8;break}return t.abrupt("return",e);case 8:return t.abrupt("return",new Uint8Array(e.buffer));case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(y().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return x.print(this,t)}},{key:"clone",value:function(){return this.throwIfDisposed(),x.clone(this)}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.dataSync();return p(e,this.shape,this.dtype,t)}},{key:"cast",value:function(t){return this.throwIfDisposed(),x.cast(this,t)}},{key:"variable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),y().makeVariable(this,t,e,n)}},{key:"rank",get:function(){return this.shape.length}},{key:"isDisposed",get:function(){return this.isDisposedInternal}}]),t}();Object.defineProperty(T,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed}}),Object(d.a)("Tensor",(function(){return T}));var E=function(t){Object(r.a)(n,t);var e=Object(a.a)(n);function n(t,r,a,i){var o;return Object(u.a)(this,n),(o=e.call(this,t.shape,t.dtype,t.dataId,i)).trainable=r,o.name=a,o}return Object(c.a)(n,[{key:"assign",value:function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(t.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!h.a(t.shape,this.shape))throw new Error("shape of the new value (".concat(t.shape,") and ")+"previous value (".concat(this.shape,") must match"));y().disposeTensor(this),this.dataId=t.dataId,y().incRef(this,null)}},{key:"dispose",value:function(){y().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(T);Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return t instanceof T&&null!=t.assign&&t.assign instanceof Function}})},function(t,e,n){"use strict";function r(t,e){for(var n=t.length,r=[],a=0;a<n;a++){var i=n-1-a,o=t[i]||1;(e[e.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function a(t,e){for(var n=[],r=0;r<e.length;r++){var a=t[t.length-r-1],i=e.length-r-1,o=e[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function i(t,e){for(var n=[],r=Math.max(t.length,e.length),a=0;a<r;a++){var i=t[t.length-a-1];null==i&&(i=1);var o=e[e.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(t," and ").concat(e,".");throw Error(s)}n.unshift(i)}}return n}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(9),a=n(68);function i(t,e){if((Object(r.A)(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&Object(r.A)(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Object(a.a)(t,[],[],e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({cast_:function(t,e){var n=Object(i.a)(t,"x","cast");if(!o.B(e))throw new Error("Failed to cast to unknown dtype ".concat(e));if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var s={x:n},u={dtype:e};return r.a.runKernel(a.v,s,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(33),s=n(4);var u=Object(s.a)({sum_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(i.a)(t,"x","sum");"bool"===s.dtype&&(s=Object(o.a)(s,"int32"));var u={x:s},c={axis:e,keepDims:n};return r.a.runKernel(a.Nc,u,c)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r}));var r,a=n(21);a.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(r||(r={}));var i=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.fn=t,this.context=e,this.priority=n,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),o=function(){function t(){var t=this;this._head=new i(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/a.b.TARGET_FPMS,this.elapsedMS=1/a.b.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=r.NORMAL),this._addListener(new i(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=r.NORMAL),this._addListener(new i(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*a.b.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,a.b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),s=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,r.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?o.shared:new o,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var r=n(0),a=n(12),i=n(152);function o(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,s=n.perm;Object(a.a)(o,"transpose");for(var u=o.shape.length,c=new Array(u),d=0;d<c.length;d++)c[d]=o.shape[s[d]];var l=r.data.get(o.dataId).values,h=Object(i.a)(l,o.shape,o.dtype,s,c);return{dataId:r.write(h,c,o.dtype),shape:c,dtype:o.dtype}}var s={kernelName:r.Wc,backendName:"cpu",kernelFunc:o}},function(t,e,n){"use strict";function r(t){var e=t.inputs,n=t.backend,r=e.real,a=e.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var a={kernelName:n(0).y,backendName:"cpu",kernelFunc:r}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({slice_:function(t,e,n){var o=Object(i.a)(t,"x","slice","string_or_numeric");if(0===o.rank)throw new Error("Slicing scalar is not possible");var s={x:o},u={begin:e,size:n};return r.a.runKernel(a.Bc,s,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(4);var c=Object(u.a)({matMul_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(s.a)(t,"a","matMul"),d=Object(s.a)(e,"b","matMul"),l=Object(o.b)(c,d),h=Object(r.a)(l,2),p={a:c=h[0],b:d=h[1]},f={transposeA:n,transposeB:u};return a.a.runKernel(i.s,p,f)}})},function(t,e,n){"use strict";(function(t){n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return p})),n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return g})),n.d(e,"d",(function(){return y})),n.d(e,"c",(function(){return x})),n.d(e,"g",(function(){return O}));var r=n(10),a=n.n(r),i=n(50),o=n(17),s=n(56),u=n(101),c=n(9),d=n(114);function l(t,e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(a.a.mark((function t(e,n){var r,i,s,u,c,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],i=[],s=Array.isArray(e)?e.map((function(t){return t.name})):Object.keys(e),u=function(t){var u=s[t],c=Array.isArray(e)?e[t].tensor:e[u];if("float32"!==c.dtype&&"int32"!==c.dtype&&"bool"!==c.dtype&&"string"!==c.dtype&&"complex64"!==c.dtype)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c.dtype));var d={name:u,shape:c.shape,dtype:c.dtype};if("string"===c.dtype){var l=new Promise(function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,i,o,s,u,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.bytes();case 2:for(n=t.sent,r=n.reduce((function(t,e){return t+e.length}),0)+4*n.length,i=new Uint8Array(r),o=0,s=0;s<n.length;s++)u=n[s],d=new Uint8Array(new Uint32Array([u.length]).buffer),i.set(d,o),o+=4,i.set(u,o),o+=u.length;e(i);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());i.push(l)}else i.push(c.data());null!=n&&(d.group=n),r.push(d)},c=0;c<s.length;++c)u(c);return t.next=7,Promise.all(i);case 7:return d=t.sent,t.abrupt("return",{data:f(d),specs:r});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e){var n,r,a={},o=0,l=Object(i.a)(e);try{for(l.s();!(r=l.n()).done;){var h=r.value,p=h.name,f=h.dtype,m=h.shape,v=Object(c.O)(m),b=void 0;if("quantization"in h){var g=h.quantization;if("uint8"===g.dtype||"uint16"===g.dtype){if(!("min"in g)||!("scale"in g))throw new Error("Weight ".concat(h.name," with quantization ").concat(g.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==g.dtype)throw new Error("Weight ".concat(h.name," has unknown ")+"quantization dtype ".concat(g.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==f)throw new Error("Weight ".concat(h.name," is quantized with ").concat(g.dtype," ")+"which only supports weights of type float32 not ".concat(f,"."))}var y=d.a[g.dtype],x=t.slice(o,o+v*y),O="uint8"===g.dtype?new Uint8Array(x):new Uint16Array(x);if("float32"===f)if("uint8"===g.dtype||"uint16"===g.dtype){b=new Float32Array(O.length);for(var _=0;_<O.length;_++){var T=O[_];b[_]=T*g.scale+g.min}}else{if("float16"!==g.dtype)throw new Error("Unsupported quantization type ".concat(g.dtype," ")+"for weight type float32.");void 0===n&&(n=w()),b=n(O)}else{if("int32"!==f)throw new Error("Unsupported dtype in weight '".concat(p,"': ").concat(f));if("uint8"!==g.dtype&&"uint16"!==g.dtype)throw new Error("Unsupported quantization type ".concat(g.dtype," ")+"for weight type int32.");b=new Int32Array(O.length);for(var E=0;E<O.length;E++){var k=O[E];b[E]=Math.round(k*g.scale+g.min)}}o+=v*y}else if("string"===f){var I=Object(c.O)(h.shape);b=[];for(var S=0;S<I;S++){var C=new Uint32Array(t.slice(o,o+4))[0];o+=4;var N=new Uint8Array(t.slice(o,o+C));b.push(N),o+=C}}else{var j=d.a[f],A=t.slice(o,o+v*j);if("float32"===f)b=new Float32Array(A);else if("int32"===f)b=new Int32Array(A);else if("bool"===f)b=new Uint8Array(A);else{if("complex64"!==f)throw new Error("Unsupported dtype in weight '".concat(p,"': ").concat(f));b=new Float32Array(A);for(var R=new Float32Array(b.length/2),M=new Float32Array(b.length/2),P=0;P<R.length;P++)R[P]=b[2*P],M[P]=b[2*P+1];var D=Object(u.a)(R,m,"float32"),F=Object(u.a)(M,m,"float32");a[p]=Object(s.a)(D,F),D.dispose(),F.dispose()}o+=v*j}"complex64"!==f&&(a[p]=Object(u.a)(b,m,f))}}catch(L){l.e(L)}finally{l.f()}return a}function f(t){if(null===t)throw new Error("Invalid input value: ".concat(JSON.stringify(t)));var e=0,n=[];t.forEach((function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(t.constructor.name))}));var r=new Uint8Array(e),a=0;return n.forEach((function(t){r.set(new Uint8Array(t.buffer),a),a+=t.byteLength})),r.buffer}var m="undefined"!==typeof t&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function v(e){return m?t.byteLength(e):new Blob([e]).size}function b(e){if(m)return t.from(e).toString("base64");for(var n=new Uint8Array(e),r="",a=0,i=n.length;a<i;a++)r+=String.fromCharCode(n[a]);return btoa(r)}function g(e){if(m){var n=t.from(e,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}for(var r=atob(e),a=new Uint8Array(r.length),i=0;i<r.length;++i)a.set([r.charCodeAt(i)],i);return a.buffer}function y(t){if(1===t.length)return t[0];var e=0;t.forEach((function(t){e+=t.byteLength}));var n=new Uint8Array(e),r=0;return t.forEach((function(t){n.set(new Uint8Array(t),r),r+=t.byteLength})),n.buffer}function x(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function O(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:v(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:v(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function w(){var t=function(){var t=function(t){for(var e=t<<13,n=0;0===(8388608&e);)n-=8388608,e<<=1;return(e&=-8388609)|(n+=947912704)},e=new Uint32Array(2048);e[0]=0;for(var n=1;n<1024;n++)e[n]=t(n);for(var r=1024;r<2048;r++)e[r]=939524096+(r-1024<<13);return e}(),e=function(){var t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(var e=1;e<31;e++)t[e]=e<<23;for(var n=33;n<63;n++)t[n]=2147483648+(n-32<<23);return t}(),n=function(){for(var t=new Uint32Array(64),e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=t[n[s>>10]+(1023&s)]+e[s>>10];i[o]=u}return new Float32Array(a)}}}).call(this,n(162).Buffer)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n(19);var r=n(3);n(30),n(2),n(9);function a(t){return r.a.customGrad(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(4);var c=Object(u.a)({add_:function(t,e){var n=Object(s.a)(t,"a","add"),u=Object(s.a)(e,"b","add"),c=Object(o.b)(n,u),d=Object(r.a)(c,2),l={a:n=d[0],b:u=d[1]};return a.a.runKernel(i.d,l)}})},function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return d})),n.d(e,"i",(function(){return b})),n.d(e,"h",(function(){return g})),n.d(e,"g",(function(){return y}));var r=n(6),a=n(19);function i(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,s=t[3],c=[].concat(Object(a.a)(e),[s]),d=y(i);return u(t,c,n,o,r,null,null,d)}function o(t,e,n,a,i,o){var s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",d=l(e),h=Object(r.a)(d,2),p=h[0],f=h[1];if("channelsLast"===c)s=[p,f,t[3],t[3]];else{if("channelsFirst"!==c)throw new Error("Unknown dataFormat ".concat(c));s=[p,f,t[1],t[1]]}return u(t,s,n,a,i,o,!1,c)}function s(t,e,n,a,i,o){var s,u,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",l=h(e),p=Object(r.a)(l,3),f=p[0],m=p[1],v=p[2];if("NDHWC"===d)u="channelsLast",s=[f,m,v,t[4],t[4]];else{if("NCDHW"!==d)throw new Error("Unknown dataFormat ".concat(d));u="channelsFirst",s=[f,m,v,t[1],t[1]]}return c(t,s,n,a,i,!1,u,o)}function u(t,e,n,a,i,o){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,d=-1,h=-1,m=-1;if("channelsLast"===u){var v=Object(r.a)(t,4);c=v[0],d=v[1],h=v[2],m=v[3]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var b=Object(r.a)(t,4);c=b[0],m=b[1],d=b[2],h=b[3]}var g,y=Object(r.a)(e,4),x=y[0],O=y[1],w=y[3],_=l(n),T=Object(r.a)(_,2),E=T[0],k=T[1],I=l(a),S=Object(r.a)(I,2),C=S[0],N=S[1],j=p(x,C),A=p(O,N),R=f(i,d,h,E,k,j,A,o,u),M=R.padInfo,P=R.outHeight,D=R.outWidth,F=s?w*m:w;return"channelsFirst"===u?g=[c,F,P,D]:"channelsLast"===u&&(g=[c,P,D,F]),{batchSize:c,dataFormat:u,inHeight:d,inWidth:h,inChannels:m,outHeight:P,outWidth:D,outChannels:F,padInfo:M,strideHeight:E,strideWidth:k,filterHeight:x,filterWidth:O,effectiveFilterHeight:j,effectiveFilterWidth:A,dilationHeight:C,dilationWidth:N,inShape:t,outShape:g,filterShape:e}}function c(t,e,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=arguments.length>7?arguments[7]:void 0,c=-1,d=-1,l=-1,f=-1,v=-1;if("channelsLast"===s){var b=Object(r.a)(t,5);c=b[0],d=b[1],l=b[2],f=b[3],v=b[4]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var g=Object(r.a)(t,5);c=g[0],v=g[1],d=g[2],l=g[3],f=g[4]}var y,x=Object(r.a)(e,5),O=x[0],w=x[1],_=x[2],T=x[4],E=h(n),k=Object(r.a)(E,3),I=k[0],S=k[1],C=k[2],N=h(a),j=Object(r.a)(N,3),A=j[0],R=j[1],M=j[2],P=p(O,A),D=p(w,R),F=p(_,M),L=m(i,d,l,f,I,S,C,P,D,F,u),B=L.padInfo,U=L.outDepth,z=L.outHeight,V=L.outWidth,W=o?T*v:T;return"channelsFirst"===s?y=[c,W,U,z,V]:"channelsLast"===s&&(y=[c,U,z,V,W]),{batchSize:c,dataFormat:s,inDepth:d,inHeight:l,inWidth:f,inChannels:v,outDepth:U,outHeight:z,outWidth:V,outChannels:W,padInfo:B,strideDepth:I,strideHeight:S,strideWidth:C,filterDepth:O,filterHeight:w,filterWidth:_,effectiveFilterDepth:P,effectiveFilterHeight:D,effectiveFilterWidth:F,dilationDepth:A,dilationHeight:R,dilationWidth:M,inShape:t,outShape:y,filterShape:e}}function d(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=p(e,r);return Math.floor((t[0]*(n-1)-n+a)/2)}function l(t){return"number"===typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function h(t){return"number"===typeof t?[t,t,t]:t}function p(t,e){return e<=1?t:t+(t-1)*(e-1)}function f(t,e,n,r,a,i,o,s,u){var c,l,h;if("number"===typeof t){c={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var p=function(t,e,n,r,a){null==r&&(r=d(t,e,n));var i=t[0],o=t[1];return[v((i-e+2*r)/n+1,a),v((o-e+2*r)/n+1,a)]}([e,n],i,r,t,s);l=p[0],h=p[1]}else if("same"===t){l=Math.ceil(e/r),h=Math.ceil(n/a);var f=Math.max(0,(l-1)*r+i-e),m=Math.max(0,(h-1)*a+o-n),b=Math.floor(f/2),g=f-b,y=Math.floor(m/2);c={top:b,bottom:g,left:y,right:m-y,type:"SAME"}}else if("valid"===t)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-i+1)/r),h=Math.ceil((n-o+1)/a);else{if("object"!==typeof t)throw Error("Unknown padding parameter: ".concat(t));var x="channelsLast"===u?t[1][0]:t[2][0],O="channelsLast"===u?t[1][1]:t[2][1],w="channelsLast"===u?t[2][0]:t[3][0],_="channelsLast"===u?t[2][1]:t[3][1];c={top:x,bottom:O,left:w,right:_,type:0===x&&0===O&&0===w&&0===_?"VALID":"EXPLICIT"},l=v((e-i+x+O)/r+1,s),h=v((n-o+w+_)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:h}}function m(t,e,n,r,a,i,o,s,u,c,l){var h,p,f,m;if("number"===typeof t){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};var b=function(t,e,n,r,a,i){null==a&&(a=d(t,e,r));var o=t[0],s=t[1],u=t[2];return[v((o-e+2*a)/r+1,i),v((s-e+2*a)/r+1,i),v((u-e+2*a)/r+1,i),n]}([e,n,r,1],s,1,a,t,l);p=b[0],f=b[1],m=b[2]}else if("same"===t){var g=((p=Math.ceil(e/a))-1)*a+s-e,y=((f=Math.ceil(n/i))-1)*i+u-n,x=((m=Math.ceil(r/o))-1)*o+c-r,O=Math.floor(g/2),w=g-O,_=Math.floor(y/2),T=y-_,E=Math.floor(x/2);h={top:_,bottom:T,left:E,right:x-E,front:O,back:w,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: ".concat(t));h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-s+1)/a),f=Math.ceil((n-u+1)/i),m=Math.ceil((r-c+1)/o)}return{padInfo:h,outDepth:p,outHeight:f,outWidth:m}}function v(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode ".concat(e))}}function b(t){var e=l(t),n=Object(r.a)(e,3),a=n[0],i=n[1],o=n[2];return 1===a&&1===i&&1===o}function g(t,e){return b(t)||b(e)}function y(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(t))}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){var e=t.inputs,n=t.backend,r=e.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var a={kernelName:n(0).qb,backendName:"cpu",kernelFunc:r}},function(t,e,n){"use strict";n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return m})),n.d(e,"d",(function(){return v}));var r=n(31),a=n(138),i=n(141),o=n(28),s=n(140),u=n(80),c=n(139),d=n(15),l=n(137),h=n(34);function p(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return Object(o.a)(t,Object(l.a)(e));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function f(t,e){var n=e,a=r.c(t.shape,e.shape);return a.length>0&&(n=Object(h.a)(n,a)),Object(d.a)(n,t.shape)}function m(t,e,n,r){if("linear"===e)return t;if("relu"===e)return Object(u.a)(t);if("elu"===e)return Object(a.a)(t);if("relu6"===e)return Object(c.a)(t);if("prelu"===e)return Object(s.a)(t,n);if("leakyrelu"===e)return Object(i.a)(t,r);throw new Error("Unknown fused activation ".concat(e,"."))}var v=function(t,e){return!(t>0)||"linear"===e}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(60),u=n(4);var c=Object(u.a)({concat_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(o.b)(t.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Object(i.b)(t,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(t){if("complex64"!==t.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(t.dtype,". "))})),1===n.length)return Object(s.a)(n[0]);var u=n,c={axis:e};return r.a.runKernel(a.A,u,c)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(81);function a(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(r.a)(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw i}}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({abs_:function(t){var e=Object(i.a)(t,"x","abs");if("complex64"===e.dtype){var n={x:e};return r.a.runKernel(a.z,n)}var o={x:e};return r.a.runKernel(a.a,o)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(121),c=n(4);var d=Object(c.a)({div_:function(t,e){var n=Object(s.a)(t,"a","div"),c=Object(s.a)(e,"b","div"),d=Object(o.b)(n,c),l=Object(r.a)(d,2);if(n=l[0],c=l[1],"int32"===n.dtype&&"int32"===c.dtype)return Object(u.a)(n,c);var h={a:n,b:c};return a.a.runKernel(i.hc,h,{})}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,r,a,i,o,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,d=u.items;this._aliasCount++;for(var l=0,h=d.length;l<h;l++)d[l][c](t,e,n,r,a,i,o,s);return d===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(r.prototype,{dispatch:{value:r.prototype.emit},run:{value:r.prototype.emit}})},,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return S})),n.d(e,"i",(function(){return N})),n.d(e,"c",(function(){return j})),n.d(e,"f",(function(){return A})),n.d(e,"e",(function(){return P})),n.d(e,"d",(function(){return D})),n.d(e,"k",(function(){return L})),n.d(e,"g",(function(){return B})),n.d(e,"h",(function(){return U})),n.d(e,"j",(function(){return z})),n.d(e,"b",(function(){return V}));var r=n(6),a=n(19),i=n(7),o=n(18),s=n(0),u=n(72),c=n(85),d=n(1),l=n(263),h=n(264),p=n(265),f=n(266),m=n(267),v=n(268),b=n(269),g=n(270),y=n(271),x=n(272),O=n(273),w=n(274),_=n(275),T=n(276),E=n(277),k=n(278),I=n(279),S=function(){function t(){var e;Object(i.a)(this,t);var n=[l,h,p,f,m,v,b,O,x,g,w,_,T,E,k,I,y],r=(e=[]).concat.apply(e,Object(a.a)(n.map((function(t){return t.json}))));this.opMappers=r.reduce((function(t,e){return t[e.tfOpName]=e,t}),{})}return Object(o.a)(t,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),Object(o.a)(t,[{key:"transformGraph",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.node,i=[],o=[],s=[],u=a.reduce((function(t,n){return t[n.name]=e.mapNode(n),n.op.startsWith("Placeholder")?i.push(t[n.name]):"Const"===n.op?o.push(t[n.name]):null!=n.input&&0!==n.input.length||s.push(t[n.name]),t}),{}),c=[],l=[],h={},p={};null!=n&&(h=this.mapSignatureEntries(n.inputs),p=this.mapSignatureEntries(n.outputs));var f=Object.keys(u);f.forEach((function(t){var e=u[t];e.inputNames.forEach((function(t){var n=Object(d.b)(t),a=Object(r.a)(n,1)[0];e.inputs.push(u[a]),u[a].children.push(e)}))})),0===Object.keys(p).length?f.forEach((function(t){var e=u[t];0===e.children.length&&l.push(e)})):Object.keys(p).forEach((function(t){var e=Object(d.b)(t),n=Object(r.a)(e,1)[0],a=u[n];null!=a&&(a.signatureKey=p[t],l.push(a))})),Object.keys(h).length>0?Object.keys(h).forEach((function(t){var e=Object(d.b)(t),n=Object(r.a)(e,1)[0],a=u[n];a&&(a.signatureKey=h[t],c.push(a))})):c=i;var m={};null!=t.library&&null!=t.library.function&&(m=t.library.function.reduce((function(t,n){return t[n.signature.name]=e.mapFunction(n),t}),{}));var v={nodes:u,inputs:c,outputs:l,weights:o,placeholders:i,signature:n,functions:m};return s.length>0&&(v.initNodes=s),v}},{key:"mapSignatureEntries",value:function(t){return Object.keys(t||{}).reduce((function(e,n){return e[t[n].name]=n,e}),{})}},{key:"mapNode",value:function(t){var e=Object(c.a)(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});var n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map((function(t){return t.startsWith("^")?t.substr(1):t})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr};return null!=e.inputs&&(n.inputParams=e.inputs.reduce((function(t,e){return t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t}),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce((function(e,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=N(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=N(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=U(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=U(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=A(t.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=A(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=B(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=B(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=j(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=j(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=V(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=V(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=L(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=L(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=z(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=z(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=P(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=P(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=D(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=D(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=M(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=M(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(t.op))}return e[n.name]={value:a,type:r},e}),{})),n}},{key:"mapFunction",value:function(t){var e=this,n=t.nodeDef,a=[],i={};null!=n&&(i=n.reduce((function(t,n){return t[n.name]=e.mapNode(n),"Const"===n.op&&a.push(t[n.name]),t}),{}));var o=[],s=[];t.signature.inputArg.forEach((function(t){var e=Object(d.b)(t.name),n=Object(r.a)(e,1)[0],a={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:R(t.type),type:"dtype"}},children:[]};a.signatureKey=t.name,o.push(a),i[n]=a})),Object.keys(i).forEach((function(t){var e=i[t];e.inputNames.forEach((function(t){var n=Object(d.b)(t),a=Object(r.a)(n,1)[0];e.inputs.push(i[a]),i[a].children.push(e)}))}));var u=t.ret;t.signature.outputArg.forEach((function(t){var e=Object(d.b)(u[t.name]),n=Object(r.a)(e,2),a=n[0],o=n[1],c=i[a];null!=c&&(c.defaultOutput=o,s.push(c))}));var c=this.mapArgsToSignature(t);return{nodes:i,inputs:o,outputs:s,weights:a,placeholders:[],signature:c}}},{key:"mapArgsToSignature",value:function(t){var e=this;return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((function(t,n){return t[n.name]=e.mapArgToTensorInfo(n),t}),{}),outputs:t.signature.outputArg.reduce((function(n,r){return n[r.name]=e.mapArgToTensorInfo(r,t.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(t,e){var n=t.name;return null!=e&&(n=e[n]),{name:n,dtype:t.type}}}]),t}();function C(e,n){var r=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var n=Object(s.nd)().global;if("undefined"!==typeof n.atob)return n.atob(e);if("undefined"!==typeof t)return new t(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return n?r:r.toLowerCase()}function N(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t[e];return null!=a?C(a.s,r):n}function j(t,e,n){var r=t[e];return r?r.b:n}function A(t,e,n){var r=t[e]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function R(t){switch("string"===typeof t&&(t=u.a[t]),t){case u.a.DT_FLOAT:return"float32";case u.a.DT_INT32:case u.a.DT_INT64:case u.a.DT_INT8:case u.a.DT_UINT8:return"int32";case u.a.DT_BOOL:return"bool";case u.a.DT_DOUBLE:return"float32";case u.a.DT_STRING:return"string";default:return null}}function M(t,e,n){var r=t[e];return r&&r.func?r.func.name:n}function P(t,e,n){var r=t[e];return r&&r.type?R(r.type):n}function D(t,e,n){var r=t[e];return r&&r.list&&r.list.type?r.list.type.map((function(t){return R(t)})):n}function F(t){if(!t.unknownRank)return null!=t.dim?t.dim.map((function(t){return"number"===typeof t.size?t.size:parseInt(t.size,10)})):[]}function L(t,e,n){var r=t[e];return r&&r.shape?F(r.shape):n}function B(t,e,n){var r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(t){return"number"===typeof t?t:parseInt(t,10)})):n}function U(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t[e];return a&&a.list&&a.list.s?a.list.s.map((function(t){return C(t,r)})):n}function z(t,e,n){var r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map((function(t){return F(t)})):n}function V(t,e,n){var r=t[e];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n(162).Buffer)},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({complex_:function(t,e){var n=Object(i.a)(t,"real","complex"),s=Object(i.a)(e,"imag","complex");o.e(n.shape,s.shape,"real and imag shapes, ".concat(n.shape," and ").concat(s.shape,", ")+"must match in call to tf.complex().");var u={real:n,imag:s};return r.a.runKernel(a.y,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(30),a=n(9);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return e=e||"float32",a.c(t),new r.b(t,e,n)}},function(t,e,n){"use strict";function r(t){var e=t.inputs,n=t.backend,r=e.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var a={kernelName:n(0).ic,backendName:"cpu",kernelFunc:r}},function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c}));var r=n(6),a=n(19),i=n(0),o=n(12);function s(t,e,n,r,o){var s=i.Bd.isSliceContinous(r,e,n),u=i.Md.sizeFromShape(n),c=i.Md.computeStrides(r);if(s){var d=i.Bd.computeFlatOffset(e,c);return"string"===o?t.slice(d,d+u):t.subarray(d,d+u)}for(var l="string"===o?i.dd.fromUint8ToStringArray(t):t,h=Object(i.fd)(r,o,l),p=Object(i.fd)(n,o),f=0;f<p.size;++f){var m=p.indexToLoc(f),v=m.map((function(t,n){return t+e[n]}));p.set.apply(p,[h.get.apply(h,Object(a.a)(v))].concat(Object(a.a)(m)))}return"string"===o?i.dd.fromStringArrayToUint8(p.values):p.values}function u(t){var e=t.inputs,n=t.backend,a=t.attrs,u=e.x,c=a.begin,d=a.size;Object(o.a)(u,"slice");var l=i.Bd.parseSliceParams(u,c,d),h=Object(r.a)(l,2),p=h[0],f=h[1];i.Bd.assertParamsValid(u,p,f);var m=s(n.data.get(u.dataId).values,p,f,u.shape,u.dtype);return n.makeTensorInfo(f,u.dtype,m)}var c={kernelName:i.Dc,backendName:"cpu",kernelFunc:u}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({clone_:function(t){var e={x:Object(i.a)(t,"x","clone","string_or_numeric")};return r.a.runKernel(a.pb,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({exp_:function(t){var e={x:Object(i.a)(t,"x","exp")};return r.a.runKernel(a.Y,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t){return function(e,n,a){for(var i=r.Md.getTypedArrayFromDType(n,e.length),o=0;o<e.length;++o)i[o]=t(e[o],a);return i}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2),a=n(9),i=n(68);function o(t,e){Object(a.d)(t);var n=Object(r.c)(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Object(i.a)(t,null,n,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return l}));var r=n(6),a=n(0),i=n(24),o=n(150),s=n(38),u=n(46),c=n(58);function d(t){var e=t.inputs,n=t.backend,l=t.attrs,h=e.x,p=l.dtype;if("complex64"===p){if("complex64"===h.dtype)return Object(u.a)({inputs:{x:h},backend:n});var f=Object(o.a)(n,h.shape,h.dtype),m=d({inputs:{x:h},backend:n,attrs:{dtype:"float32"}}),v=Object(s.a)({inputs:{real:m,imag:f},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),v}if("complex64"===h.dtype){var b=Object(c.a)({inputs:{input:h},backend:n}),g=d({inputs:{x:b},backend:n,attrs:{dtype:p}});return n.disposeIntermediateTensorInfo(b),g}if(!a.Md.hasEncodingLoss(h.dtype,p)){var y=Object(u.a)({inputs:{x:h},backend:n});return{dataId:y.dataId,shape:y.shape,dtype:p}}if("int32"===p){var x=n.data.get(h.dataId).values,O=Int32Array.from(x);return n.makeTensorInfo(h.shape,"int32",O)}if("bool"===p){var w=n.data.get(h.dataId).values,_=a.Md.toTypedArray([0],h.dtype),T=Object(i.a)((function(t,e){return t!==e?1:0}))(h.shape,[],w,_,"bool"),E=Object(r.a)(T,2),k=E[0],I=E[1];return n.makeTensorInfo(I,"bool",k)}throw new Error("Error in Cast: failed to cast ".concat(h.dtype," to ").concat(p))}var l={kernelName:a.v,backendName:"cpu",kernelFunc:d}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return d}));var r=n(6),a=(n(22),n(90)),i=Object(a.a)("kernelRegistry",(function(){return new Map})),o=Object(a.a)("gradRegistry",(function(){return new Map}));function s(t,e){var n=l(t,e);return i.get(n)}function u(t){return o.get(t)}function c(t){for(var e=i.entries(),n=[];;){var a=e.next(),o=a.done,s=a.value;if(o)break;var u=Object(r.a)(s,2),c=u[0],d=u[1],l=c.split("_");Object(r.a)(l,1)[0]===t&&n.push(d)}return n}function d(t){var e=t.kernelName,n=t.backendName,r=l(e,n);i.has(r)&&console.warn("The kernel '".concat(e,"' for backend ")+"'".concat(n,"' is already registered")),i.set(r,t)}function l(t,e){return"".concat(e,"_").concat(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u}));var r=n(19);function a(t,e,n){var r=function(t,e,n){return function(t,e,n){var r=0,a=t.length,i=0,o=!1;for(;r<a;){var s=n(e,t[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(t,e,n||i)}(t,e,n),a=r<0?-(r+1):r;t.splice(a,0,e)}function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n,r,a){return c(t,e,n,r,a,0)}function s(t,e,n,r,a,i){return c(t,e,n,r,a,0,!1,i,!0)}function u(t,e,n,r,a,i){return c(t,e,n,r,a,i,!0)}function c(t,e,n,i,o,s){for(var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=[],m=0;m<e.length;m++)e[m]>o&&f.push({score:e[m],boxIndex:m,suppressBeginIndex:0});f.sort(h);for(var v=s>0?-.5/s:0,b=[],g=[];b.length<n&&f.length>0;){var y=f.pop(),x=y.score,O=y.boxIndex,w=y.suppressBeginIndex;if(x<o)break;for(var _=!1,T=b.length-1;T>=w;--T){var E=d(t,O,b[T]);if(E>=i){_=!0;break}if(y.score=y.score*l(i,v,E),y.score<=o)break}y.suppressBeginIndex=b.length,_||(y.score===x?(b.push(O),g.push(y.score)):y.score>o&&a(f,y,h))}var k=b.length,I=n-k;c&&I>0&&(b.push.apply(b,Object(r.a)(new Array(I).fill(0))),g.push.apply(g,Object(r.a)(new Array(I).fill(0))));var S={selectedIndices:b};return u&&(S.selectedScores=g),p&&(S.validOutputs=k),S}function d(t,e,n){var r=t.subarray(4*e,4*e+4),a=t.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),d=Math.min(a[1],a[3]),l=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(s-i)*(u-o),f=(l-c)*(h-d);if(p<=0||f<=0)return 0;var m=Math.max(i,c),v=Math.max(o,d),b=Math.min(s,l),g=Math.min(u,h),y=Math.max(b-m,0)*Math.max(g-v,0);return y/(p+f-y)}function l(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function h(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({neg_:function(t){var e={x:Object(i.a)(t,"x","neg")};return r.a.runKernel(a.Tb,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(3),a=n(9),i=n(16);function o(t,e,n,o){if(null==o&&(o=Object(a.r)(t)),"complex64"===o)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Object(a.A)(t)&&!Array.isArray(t)&&"number"!==typeof t&&"boolean"!==typeof t&&"string"!==typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){Object(a.c)(e);var s=Object(a.O)(e),u=Object(a.O)(n);Object(a.b)(s===u,(function(){return"Based on the provided shape, [".concat(e,"], the tensor should have ")+"".concat(s," values but has ").concat(u)}));for(var c=0;c<n.length;++c){var d=n[c],l=c!==n.length-1||d!==Object(a.O)(e.slice(c));Object(a.b)(n[c]===e[c]||!l,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(e,"). ")}))}}return Object(a.A)(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==o?Object(i.toTypedArray)(t,o):Object(a.m)(t,[],!0),r.a.makeTensor(t,e,o)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({max_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(t,"x","max"),s={x:o},u={reductionIndices:e,keepDims:n};return r.a.runKernel(a.Fb,s,u)}})},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c}));var r=n(0),a=n(24),i=n(25),o=Object(a.a)((function(t,e){return t+e})),s=Object(i.b)((function(t,e,n,r){return{real:t+n,imag:e+r}})),u=Object(i.a)(r.d,o,s),c={kernelName:r.d,backendName:"cpu",kernelFunc:u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e,n,r){void 0===n&&(n=!1),a(this,t),this._fn=e,this._once=n,this._thisArg=r,this._next=this._prev=this._owner=null}return r(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function o(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var s=function(){function t(){a(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof i))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!==typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return o(this,new i(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!==typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return o(this,new i(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof i))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=i,e.default=s,t.exports=e.default},function(t,e,n){"use strict";var r,a;n.d(e,"a",(function(){return r})),function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(r||(r={})),function(t){!function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(a||(a={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({stack_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.b)(t,"tensors","stack","string_or_numeric");o.b(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&o.b(e<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var s=n,u={axis:e};return r.a.runKernel(a.ac,s,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({log_:function(t){var e={x:Object(i.a)(t,"x","log")};return r.a.runKernel(a.Ab,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({expandDims_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(t,"x","expandDims","string_or_numeric");o.b(e<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var s={input:n},u={dim:e};return r.a.runKernel(a.Z,s,u)}})},function(t,e,n){"use strict";var r,a,i,o,s;n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return d})),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(r||(r={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(a||(a={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(i||(i={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(o||(o={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(s||(s={}));var u={float32:o,int32:a,bool:i,complex64:s};function c(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error("Can not upcast ".concat(t," with ").concat(e))}return u[t][e]}function d(t){return c(t,"int32")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(3),a=n(9),i=n(56);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===e){var n=o(t,"float32"),s=o(t,"float32");return Object(i.a)(n,s)}var u=Object(a.F)(Object(a.O)(t),e);return r.a.makeTensor(u,t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(109),u=n(31),c=n(4);var d=Object(c.a)({where_:function(t,e,n){var c=Object(i.a)(e,"a","where"),d=Object(i.a)(n,"b","where"),l=Object(i.a)(t,"condition","where","bool"),h=Object(u.a)(c.shape,d.shape),p=Object(s.a)(c,h),f=Object(s.a)(d,h);1===l.rank&&Object(o.b)(l.shape[0]===c.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})),1!==l.rank&&Object(o.e)(l.shape,f.shape,"Error in where: ");var m={condition:l,t:p,e:f};return r.a.runKernel(a.vc,m)}})},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"h",(function(){return d})),n.d(e,"g",(function(){return l}));var r=n(9);function a(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function i(t,e,n){for(var r=t.length+e.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(t[i++]):a.push(e[o++]);return a}function o(t,e){for(var n=[],r=t.length,a=0;a<r;a++)-1===e.indexOf(a)&&n.push(t[a]);return[n,e.map((function(e){return t[e]}))]}function s(t,e){return i(t,e.map((function(t){return 1})),e)}function u(t,e,n){r.b(a(e,n),(function(){return"".concat(t," supports only inner-most axes for now. ")+"Got axes ".concat(e," and rank-").concat(n," input.")}))}function c(t,e){if(a(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach((function(t){return n.push(t)})),n}function d(t){return t.map((function(t,e){return[e,t]})).sort((function(t,e){return t[1]-e[1]})).map((function(t){return t[0]}))}function l(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({relu_:function(t){var e={x:Object(i.a)(t,"x","relu")};return r.a.runKernel(a.jc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(113);function a(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c}));var r=n(0),a=n(24),i=n(25),o=Object(a.a)((function(t,e){return t*e})),s=Object(i.b)((function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}})),u=Object(i.a)(r.Ub,o,s),c={kernelName:r.Ub,backendName:"cpu",kernelFunc:u}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(89);function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(100);function s(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?Object(o.a)(t):e}function u(t){return function(){var e,n=Object(r.a)(t);if(a()){var i=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return s(this,e)}}},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r={};function a(t){return r[t]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(9),o=n(4);var s=Object(o.a)({ifft_:function(t){Object(i.b)("complex64"===t.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(t.dtype,".")}));var e={input:t};return r.a.runKernel(a.ob,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({real_:function(t){var e={input:Object(i.a)(t,"input","real")};return r.a.runKernel(a.gc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({split_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(i.a)(t,"x","split"),s={x:o},u={numOrSizeSplits:e,axis:n};return r.a.runKernel(a.Gc,s,u)}})},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";(function(t,r){var a;function i(){if(null==a){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof t)e=t;else if("undefined"!==typeof r)e=r;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}a=e}return a}function o(t,e){var n=function(){var t=i();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(n.has(t))return n.get(t);var r=e();return n.set(t,r),n.get(t)}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}))}).call(this,n(91),n(117))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}));var r=n(19),a=n(9);function i(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(e.shape,", shape: ").concat(t)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(t.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+t.length-r)throw new Error(i+" update.rank != ".concat(a+t.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(e.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==t[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(t[s+a],")"))}function o(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(e.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: ".concat(e.shape));if(0===t.size)throw new Error("Updates specified for empty output. updates shape: ".concat(t.shape))}i(n,e,t)}function s(t,e,n){for(var i=e.shape.length,o=i>1?e.shape[i-1]:1,s=n.length,u=1,c=o;c<s;++c)u*=n[c];var d=o<1?1:o;return{sliceRank:o,numUpdates:Object(a.O)(e.shape)/d,sliceSize:u,strides:[].concat(Object(r.a)(Object(a.j)(n.slice(0,o))),[1]),outputSize:Object(a.O)(n)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({unstack_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(t,"x","unstack","string_or_numeric");o.b(e>=-n.shape.length&&e<n.shape.length,(function(){return"Axis = ".concat(e," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var s={value:n},u={axis:e};return r.a.runKernel(a.Uc,s,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(9),o=n(4);var s=Object(o.a)({fft_:function(t){Object(i.b)("complex64"===t.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(t.dtype,".")}));var e={input:t};return r.a.runKernel(a.bb,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(9),a=n(56),i=n(49),o=n(97),s=n(4),u=n(87),c=n(15),d=n(39),l=n(88),h=n(77),p=n(96),f=n(94);var m=Object(s.a)({rfft_:function(t,e){Object(r.b)("float32"===t.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(t.dtype)}));var n,s=t.shape[t.shape.length-1],m=t.size/s;if(null!=e&&e<s){var v=t.shape.map((function(t){return 0})),b=t.shape.map((function(t){return t}));b[t.shape.length-1]=e,n=Object(d.a)(t,v,b),s=e}else if(null!=e&&e>s){var g=t.shape.map((function(t){return t}));g[t.shape.length-1]=e-s,n=Object(i.a)([t,Object(h.a)(g)],t.shape.length-1),s=e}else n=t;var y=Object(p.a)(n),x=Object(c.a)(Object(a.a)(n,y),[m,s]),O=Object(f.a)(x),w=Math.floor(s/2)+1,_=Object(u.a)(O),T=Object(o.a)(O),E=Object(l.a)(_,[w,s-w],_.shape.length-1),k=Object(l.a)(T,[w,s-w],T.shape.length-1),I=n.shape.slice();return I[n.shape.length-1]=w,Object(c.a)(Object(a.a)(E[0],k[0]),I)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({zerosLike_:function(t){var e={x:Object(i.a)(t,"x","zerosLike")};return r.a.runKernel(a.Wc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({imag_:function(t){var e={input:Object(i.a)(t,"input","imag")};return r.a.runKernel(a.qb,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(3),a=n(2),i=n(4);var o=Object(i.a)({square_:function(t){var e=Object(a.a)(t,"x","square");return r.a.runKernel("Square",{x:e},{})}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(44),u=n(4),c=n(15);var d=Object(u.a)({conv2d_:function(t,e,n,u){var d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],h=arguments.length>6?arguments[6]:void 0,p=Object(i.a)(t,"x","conv2d"),f=Object(i.a)(e,"filter","conv2d"),m=p,v=!1;3===p.rank&&(v=!0,m=Object(c.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),o.b(4===m.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(m.rank,".")})),o.b(4===f.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(f.rank,".")})),null!=h&&o.b(o.v(u),(function(){return"Error in conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(h," but got pad ").concat(u,".")}));var b="NHWC"===d?m.shape[3]:m.shape[1];o.b(b===f.shape[2],(function(){return"Error in conv2d: depth of input (".concat(b,") must match ")+"input depth for filter ".concat(f.shape[2],".")})),o.b(s.h(n,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(l,"'")}));var g={x:m,filter:f},y={strides:n,pad:u,dataFormat:d,dilations:l,dimRoundingMode:h},x=r.a.runKernel(a.B,g,y);return v?Object(c.a)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}})},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(2),a=n(68);function i(t,e,n){var i=Object(r.c)(t,n);return Object(a.a)(t,e,i,n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({tile_:function(t,e){var n=Object(i.a)(t,"x","tile","string_or_numeric");o.b(n.rank===e.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(e,".")}));var s={x:n},u={reps:e};return r.a.runKernel(a.Qc,s,u)}})},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return c}));var r=n(0),a=n(24),i=n(25),o=Object(a.a)((function(t,e){return t-e})),s=Object(i.b)((function(t,e,n,r){return{real:t-n,imag:e-r}})),u=Object(i.a)(r.Oc,o,s),c={kernelName:r.Oc,backendName:"cpu",kernelFunc:u}},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i}));var r=n(3);n(2),n(9),n(16);function a(){return 32===r.a.backend.floatPrecision()?.001:.1}function i(t,e,n){if(null==n&&(n=a()),!o(t,e,n))throw new Error("Numbers differ: actual === ".concat(t,", expected === ").concat(e))}function o(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}},function(t,e,n){"use strict";(function(t){n(3);var e=n(119),r=n(22),a=Object(r.b)();a.registerFlag("DEBUG",(function(){return!1}),(function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),a.registerFlag("IS_BROWSER",(function(){return e.isBrowser()})),a.registerFlag("IS_NODE",(function(){return"undefined"!==typeof t&&"undefined"!==typeof t.versions&&"undefined"!==typeof t.versions.node})),a.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),a.registerFlag("PROD",(function(){return!1})),a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return a.getBool("DEBUG")})),a.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),a.registerFlag("IS_TEST",(function(){return!1})),a.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0}))}).call(this,n(117))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n(7),a=n(18),i=function(){function t(e,n){Object(r.a)(this,t),this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Object(a.a)(t,[{key:"get",value:function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}},{key:"set",value:function(t,e){this.dataIdsCount++,this.data.set(t,e)}},{key:"has",value:function(t){return this.data.has(t)}},{key:"delete",value:function(t){return this.dataIdsCount--,this.data.delete(t)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),t}(),o=function(){function t(){Object(r.a)(this,t)}return Object(a.a)(t,[{key:"refCount",value:function(t){return s("refCount")}},{key:"incRef",value:function(t){return s("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(t){return s("time")}},{key:"read",value:function(t){return s("read")}},{key:"readSync",value:function(t){return s("readSync")}},{key:"numDataIds",value:function(){return s("numDataIds")}},{key:"disposeData",value:function(t,e){return s("disposeData")}},{key:"write",value:function(t,e,n){return s("write")}},{key:"move",value:function(t,e,n,r,a){return s("move")}},{key:"memory",value:function(){return s("memory")}},{key:"floatPrecision",value:function(){return s("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return s("dispose")}}]),t}();function s(t){throw new Error("'".concat(t,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({reverse_:function(t,e){var n={x:Object(i.a)(t,"x","reverse")},o={dims:e};return r.a.runKernel(a.qc,n,o)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3),a=n(5);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var o={start:t,stop:e,step:n,dtype:i};return r.a.runKernel(a.fc,{},o)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),a=n(5),i=n(2),o=n(60),s=n(4),u=n(15);var c=Object(s.a)({broadcastTo_:function(t,e){var n=Object(i.a)(t,"broadcastTo","x"),s=n.shape;if(e.some((function(t){return!(t>0)||t%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(e,"]."));if(e.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(e.length," < input.rank=").concat(n.rank,"."));if(e.length>n.rank){for(var c=n.shape.slice();c.length<e.length;)c.unshift(1);n=Object(u.a)(n,c)}for(var d=n.shape,l=Array.from(e),h=e.length-1;h>=0;h--)if(d[h]===e[h])l[h]=1;else if(1!==n.shape[h])throw new Error("broadcastTo(): [".concat(s,"] cannot be broadcast to [").concat(e,"]."));if(0===l.map((function(t,e){return t>1?e:-1})).filter((function(t){return t>=0})).length)return Object(o.a)(n);var p={x:n},f={reps:l};return r.a.runKernel(a.Qc,p,f)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({min_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(t,"x","min"),s={x:o},u={axis:e,keepDims:n};return r.a.runKernel(a.Nb,s,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({sqrt_:function(t){var e={x:Object(i.a)(t,"x","sqrt")};return r.a.runKernel(a.Hc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({transpose_:function(t,e){var n=Object(i.a)(t,"x","transpose");if(null==e&&(e=n.shape.map((function(t,e){return e})).reverse()),o.b(n.rank===e.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(e,".")})),e.forEach((function(t){o.b(t>=0&&t<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(e)}))})),n.rank<=1)return n.clone();var s={x:n},u={perm:e};return r.a.runKernel(a.Sc,s,u)}})},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r=n(0);function a(t,e,n,a,i){for(var o=r.Md.sizeFromShape(a),s=r.Md.makeZerosTypedArray(i,n),u=0;u<t.length;u++){var c=t[u];if(c<0)throw new Error("Input x must be non-negative!");c>=i||(s[c]+=o>0?e[u]:1)}return s}function i(t,e,n){for(var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.shape[0],o=t.shape[1],s=Object(r.fd)([i,n],e.dtype),u=0;u<i;u++)for(var c=0;c<o;c++){var d=t.get(u,c);if(d<0)throw new Error("Input x must be non-negative!");d>=n||(a?s.set(1,u,d):e.size>0?s.set(s.get(u,d)+e.get(u,c),u,d):s.set(s.get(u,d)+1,u,d))}return s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MESH_ANNOTATIONS={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]}},function(t,e){var n,r,a=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,c=[],d=!1,l=-1;function h(){d&&u&&(d=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!d){var t=s(h);d=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,d=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||d||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(346),a=n(347);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){a.isString(t)&&(t=y(t));return t instanceof i?t.format():i.prototype.format.call(t)},e.Url=i;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(c),l=["%","/","?",";","#"].concat(d),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=n(348);function y(t,e,n){if(t&&a.isObject(t)&&t instanceof i)return t;var r=new i;return r.parse(t,e,n),r}i.prototype.parse=function(t,e,n){if(!a.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),s=-1!==i&&i<t.indexOf("#")?"?":"#",c=t.split(s);c[0]=c[0].replace(/\\/g,"/");var y=t=c.join(s);if(y=y.trim(),!n&&1===t.split("#").length){var x=u.exec(y);if(x)return this.path=y,this.href=y,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var O=o.exec(y);if(O){var w=(O=O[0]).toLowerCase();this.protocol=w,y=y.substr(O.length)}if(n||O||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===y.substr(0,2);!_||O&&v[O]||(y=y.substr(2),this.slashes=!0)}if(!v[O]&&(_||O&&!b[O])){for(var T,E,k=-1,I=0;I<h.length;I++){-1!==(S=y.indexOf(h[I]))&&(-1===k||S<k)&&(k=S)}-1!==(E=-1===k?y.lastIndexOf("@"):y.lastIndexOf("@",k))&&(T=y.slice(0,E),y=y.slice(E+1),this.auth=decodeURIComponent(T)),k=-1;for(I=0;I<l.length;I++){var S;-1!==(S=y.indexOf(l[I]))&&(-1===k||S<k)&&(k=S)}-1===k&&(k=y.length),this.host=y.slice(0,k),y=y.slice(k),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var N=this.hostname.split(/\./),j=(I=0,N.length);I<j;I++){var A=N[I];if(A&&!A.match(p)){for(var R="",M=0,P=A.length;M<P;M++)A.charCodeAt(M)>127?R+="x":R+=A[M];if(!R.match(p)){var D=N.slice(0,I),F=N.slice(I+1),L=A.match(f);L&&(D.push(L[1]),F.unshift(L[2])),F.length&&(y="/"+F.join(".")+y),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!m[w])for(I=0,j=d.length;I<j;I++){var z=d[I];if(-1!==y.indexOf(z)){var V=encodeURIComponent(z);V===z&&(V=escape(z)),y=y.split(z).join(V)}}var W=y.indexOf("#");-1!==W&&(this.hash=y.substr(W),y=y.slice(0,W));var G=y.indexOf("?");if(-1!==G?(this.search=y.substr(G),this.query=y.substr(G+1),e&&(this.query=g.parse(this.query)),y=y.slice(0,G)):e&&(this.search="",this.query={}),y&&(this.pathname=y),b[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var H=this.search||"";this.path=B+H}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=g.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||b[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},i.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(a.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var d=u[c];"protocol"!==d&&(n[d]=t[d])}return b[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!b[t.protocol]){for(var l=Object.keys(t),h=0;h<l.length;h++){var p=l[h];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||v[t.protocol])n.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),O=x||y||n.host&&t.pathname,w=O,_=n.pathname&&n.pathname.split("/")||[],T=(f=t.pathname&&t.pathname.split("/")||[],n.protocol&&!b[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),O=O&&(""===f[0]||""===_[0])),x)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),n.search=t.search,n.query=t.query;else if(!a.isNullOrUndefined(t.search)){if(T)n.hostname=n.host=_.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift());return n.search=t.search,n.query=t.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=_.slice(-1)[0],k=(n.host||t.host||_.length>1)&&("."===E||".."===E)||""===E,I=0,S=_.length;S>=0;S--)"."===(E=_[S])?_.splice(S,1):".."===E?(_.splice(S,1),I++):I&&(_.splice(S,1),I--);if(!O&&!w)for(;I--;I)_.unshift("..");!O||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),k&&"/"!==_.join("/").substr(-1)&&_.push("");var C,N=""===_[0]||_[0]&&"/"===_[0].charAt(0);T&&(n.hostname=n.host=N?"":_.length?_.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift()));return(O=O||n.host&&_.length)&&!N&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";function r(){if("undefined"!==typeof navigator&&null!=navigator){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function a(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}n.r(e),n.d(e,"isMobile",(function(){return r})),n.d(e,"isBrowser",(function(){return a}))},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(t.toString(e))}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(4);var c=Object(u.a)({floorDiv_:function(t,e){var n=Object(s.a)(t,"a","floorDiv"),u=Object(s.a)(e,"b","floorDiv"),c=Object(o.b)(n,u),d=Object(r.a)(c,2),l={a:n=d[0],b:u=d[1]};return a.a.runKernel(i.fb,l)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(2),a=n(9),i=n(4),o=n(15);var s=Object(i.a)({squeeze_:function(t,e){var n=Object(r.a)(t,"x","squeeze");return Object(o.a)(n,Object(a.Q)(n.shape,e).newShape)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(56),a=n(49),i=n(97),o=n(28),s=n(4),u=n(87),c=n(15),d=n(107),l=n(32),h=n(39),p=n(86);var f=Object(s.a)({irfft_:function(t){var e,n=t.shape[t.shape.length-1],s=t.size/n;if(n<=2){var f=Object(c.a)(t,[s,n]);e=Object(p.a)(f)}else{var m=[s,2*(n-1)],v=Object(c.a)(Object(u.a)(t),[s,n]),b=Object(c.a)(Object(i.a)(t),[s,n]),g=Object(d.a)(Object(h.a)(v,[0,1],[s,n-2]),1),y=Object(o.a)(Object(d.a)(Object(h.a)(b,[0,1],[s,n-2]),1),Object(l.a)(-1)),x=Object(a.a)([v,g],1),O=Object(a.a)([b,y],1),w=Object(c.a)(Object(r.a)(x,O),[m[0],m[1]]);e=Object(p.a)(w)}if(e=Object(u.a)(e),3===t.rank&&0!==t.shape[0]){var _=e,T=t.shape[0];e=Object(c.a)(e,[T,e.shape[0]/T,e.shape[1]]),_.dispose()}return e}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3),a=n(5);function i(t,e,n){var i={shape:t,value:e,dtype:n};return r.a.runKernel(a.cb,{},i)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(31),s=n(4);var u=Object(s.a)({logicalAnd_:function(t,e){var n=Object(i.a)(t,"a","logicalAnd","bool"),s=Object(i.a)(e,"b","logicalAnd","bool");Object(o.a)(n.shape,s.shape);var u={a:n,b:s};return r.a.runKernel(a.Cb,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(31),c=n(4);var d=Object(c.a)({lessEqual_:function(t,e){var n=Object(s.a)(t,"a","lessEqual"),c=Object(s.a)(e,"b","lessEqual"),d=Object(o.b)(n,c),l=Object(r.a)(d,2);n=l[0],c=l[1],Object(u.a)(n.shape,c.shape);var h={a:n,b:c};return a.a.runKernel(i.yb,h)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(31),c=n(4);var d=Object(c.a)({greaterEqual_:function(t,e){var n=Object(s.a)(t,"a","greaterEqual"),c=Object(s.a)(e,"b","greaterEqual"),d=Object(o.b)(n,c),l=Object(r.a)(d,2);n=l[0],c=l[1],Object(u.a)(n.shape,c.shape);var h={a:n,b:c};return a.a.runKernel(i.nb,h)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(4);var c=Object(u.a)({pow_:function(t,e){var n=Object(s.a)(t,"base","pow"),u=Object(s.a)(e,"exp","pow"),c=Object(o.b)(n,u),d=Object(r.a)(c,2),l={a:n=d[0],b:u=d[1]};return a.a.runKernel(i.cc,l)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(31),c=n(4);var d=Object(c.a)({greater_:function(t,e){var n=Object(s.a)(t,"a","greater"),c=Object(s.a)(e,"b","greater"),d=Object(o.b)(n,c),l=Object(r.a)(d,2);n=l[0],c=l[1],Object(u.a)(n.shape,c.shape);var h={a:n,b:c};return a.a.runKernel(i.mb,h)}})},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return h}));var r=n(3),a=n(22),i=n(30),o=n(23);function s(){return r.a}function u(t,e){return r.a.tidy(t,e)}function c(t){Object(o.a)(t).forEach((function(t){return t.dispose()}))}function d(t){return r.a.keep(t)}function l(){return r.a.backendName}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.a.registerBackend(t,e,n)}Object(i.d)((function(t){Object(a.b)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({mean_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(t,"x","mean"),s={x:o},u={axis:e,keepDims:n};return r.a.runKernel(a.Mb,s,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(9),i=n(56),o=n(77);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===e){var n=s(t,"float32"),u=Object(o.a)(t,"float32");return Object(i.a)(n,u)}var c=Object(a.D)(Object(a.O)(t),e);return r.a.makeTensor(c,t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(31),c=n(4);var d=Object(c.a)({notEqual_:function(t,e){var n=Object(s.a)(t,"a","notEqual"),c=Object(s.a)(e,"b","notEqual"),d=Object(o.b)(n,c),l=Object(r.a)(d,2);n=l[0],c=l[1],Object(u.a)(n.shape,c.shape);var h={a:n,b:c};return a.a.runKernel(i.Xb,h)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(31),c=n(33),d=n(4);var l=Object(d.a)({minimum_:function(t,e){var n=Object(s.a)(t,"a","minimum"),d=Object(s.a)(e,"b","minimum"),l=Object(o.b)(n,d),h=Object(r.a)(l,2);n=h[0],d=h[1],"bool"===n.dtype&&(n=Object(c.a)(n,"int32"),d=Object(c.a)(d,"int32")),Object(u.a)(n.shape,d.shape);var p={a:n,b:d};return a.a.runKernel(i.Ob,p)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(31),c=n(4);var d=Object(c.a)({squaredDifference_:function(t,e){var n=Object(s.a)(t,"a","squaredDifference"),c=Object(s.a)(e,"b","squaredDifference"),d=Object(o.b)(n,c),l=Object(r.a)(d,2);n=l[0],c=l[1],Object(u.a)(n.shape,c.shape);var h={a:n,b:c};return a.a.runKernel(i.Jc,h,{})}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({log1p_:function(t){var e={x:Object(i.a)(t,"x","log1p")};return r.a.runKernel(a.Bb,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({step_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(t,"x","step"),o={x:n},s={alpha:e};return r.a.runKernel(a.Kc,o,s)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({elu_:function(t){var e={x:Object(i.a)(t,"x","elu")};return r.a.runKernel(a.U,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({relu6_:function(t){var e={x:Object(i.a)(t,"x","relu6")};return r.a.runKernel(a.kc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({prelu_:function(t,e){var n={x:Object(i.a)(t,"x","prelu"),alpha:Object(i.a)(e,"alpha","prelu")};return r.a.runKernel(a.dc,n)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({leakyRelu_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=Object(i.a)(t,"x","leakyRelu"),o={x:n},s={alpha:e};return r.a.runKernel(a.wb,o,s)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4),u=n(15);var c=Object(s.a)({depthwiseConv2d_:function(t,e,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],l=arguments.length>6?arguments[6]:void 0,h=Object(i.a)(t,"x","depthwiseConv2d"),p=Object(i.a)(e,"filter","depthwiseConv2d"),f=h,m=!1;3===h.rank&&(m=!0,f=Object(u.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.b(4===f.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(f.rank,".")})),o.b(4===p.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")})),o.b(f.shape[3]===p.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(f.shape[3],") must match the inChannels dimension in ")+"filter ".concat(p.shape[2],".")})),null!=l&&o.b(o.v(s),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")}));var v={x:f,filter:p},b={strides:n,pad:s,dataFormat:c,dilations:d,dimRoundingMode:l},g=r.a.runKernel(a.N,v,b);return m?Object(u.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2),a=n(9),i=n(68);function o(t,e,n){if(Object(a.d)(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");var o=Object(r.c)(t,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object(i.a)(t,e,o,n)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(57);function a(t,e){for(var n=[],a=0;a<e.length;a++)e[a]&&n.push(a);for(var i=Object(r.a)(t,"int32"),o=Object(r.a)([n.length,t.length],"int32"),s=0;s<n.length;s++){var u=i.indexToLoc(n[s]),c=s*t.length;o.values.set(u,c)}return o.toTensor()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(31),c=n(4);var d=Object(c.a)({equal_:function(t,e){var n=Object(s.a)(t,"a","equal"),c=Object(s.a)(e,"b","equal"),d=Object(o.b)(n,c),l=Object(r.a)(d,2);n=l[0],c=l[1],Object(u.a)(n.shape,c.shape);var h={a:n,b:c};return a.a.runKernel(i.W,h)}})},function(t,e,n){"use strict";function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(9),o=n(4),s=n(15);var u=Object(o.a)({conv2DBackpropInput_:function(t,e,n,o,u){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",d=arguments.length>6?arguments[6]:void 0;i.b(t.length===e.rank,(function(){return"Length of inShape "+"(".concat(t.length,") and rank of dy (").concat(e.rank,") must match")}));var l=t,h=e,p=!1;3===e.rank&&(p=!0,h=Object(s.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]),l=[1,t[0],t[1],t[2]]),i.b(4===l.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(l.length,".")})),i.b(4===h.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(h.rank)})),i.b(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var f="NHWC"===c?l[3]:l[1],m="NHWC"===c?h.shape[3]:h.shape[1];i.b(f===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(f,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),i.b(m===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(m,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),null!=d&&i.b(i.v(u),(function(){return"Error in conv2dDerInput: pad must be an integer when using, "+"dimRoundingMode ".concat(d," but got pad ").concat(u,".")}));var v={dy:h,filter:n},b={strides:o,pad:u,dataFormat:c,dimRoundingMode:d,inputShape:l},g=r.a.runKernel(a.D,v,b);return p?Object(s.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),a=n(38);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var o=i(t,e,"float32"),s=i(t,e,"float32");return Object(a.a)({inputs:{real:o,imag:s},backend:t})}var u=r.Md.makeZerosTypedArray(r.Md.sizeFromShape(e),n);return t.makeTensorInfo(e,n,u)}},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var r=n(0),a=n(62),i=n(20),o=Object(a.a)((function(t){return Math.exp(t)})),s=Object(i.b)(r.Z,o),u={kernelName:r.Z,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e,n,a,i){for(var o=e.length,s=r.Md.sizeFromShape(e),u=r.Md.computeStrides(e),c=r.Md.computeStrides(i),d=r.Md.getTypedArrayFromDType(n,r.Md.sizeFromShape(i)),l=0;l<s;++l){for(var h=r.Md.indexToLoc(l,o,u),p=new Array(h.length),f=0;f<p.length;f++)p[f]=h[a[f]];d[r.Md.locToIndex(p,o,c)]=t[l]}return d}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var r=n(7),a=n(18),i=n(154),o=(n(104),function(){function t(e,n,a,o,s){Object(r.a)(this,t),this.mean=e,this.stdDev=n,this.dtype=a,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var u=s||Math.random();this.random=i.alea(u.toString())}return Object(a.a)(t,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)}},{key:"convertValue",value:function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}},{key:"isValidTruncated",value:function(t){return t<=this.upper&&t>=this.lower}}]),t}()),s=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(Object(r.a)(this,t),this.canReturnFloat=function(){return null==e.dtype||"float32"===e.dtype},this.min=n,this.range=a-n,this.dtype=o,null==s&&(s=Math.random()),"number"===typeof s&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(a," <= 1 and dtype is not float"));this.random=i.alea(s)}return Object(a.a)(t,[{key:"convertValue",value:function(t){return this.canReturnFloat()?t:Math.round(t)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),t}()},function(t,e,n){var r=n(373),a=n(374),i=n(375),o=n(376),s=n(377),u=n(378),c=n(379);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,t.exports=c},function(t,e,n){"use strict";t.exports=function(t,e){if(t){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),a={},i=14;i--;)a[n.key[i]]=r[i]||"";return a[n.q.name]={},a[n.key[12]].replace(n.q.parser,(function(t,e,r){e&&(a[n.q.name][e]=r)})),a}}},function(t,e,n){var r=n(351),a=n(352),i=n(353),o=n(354),s=n(355),u=n(356),c=n(357);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,t.exports=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UV_COORDS=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]]},function(t,e,n){"use strict";n.d(e,"a",(function(){return nr})),n.d(e,"b",(function(){return ar}));var r=n(0),a=n(10),i=n.n(a),o=n(17),s=n(7),u=n(18),c=n(55),d=n(19),l=n(6),h=n(1),p=function(){function t(e,n,r){var a=this;Object(s.a)(this,t),this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((function(t){return a.getInput(t)})),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((function(t,e){return t[e]=a.getAttr(e),t}),{}))}return Object(u.a)(t,[{key:"getInput",value:function(t){return Object(h.e)(t,this.tensorMap,this.context)}},{key:"getAttr",value:function(t,e){var n=this.node.rawAttrs[t];if(null!=n.tensor)return Object(h.e)(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Object(c.f)(this.node.rawAttrs,t,e);if(null!=n.s)return Object(c.i)(this.node.rawAttrs,t,e);if(null!=n.b)return Object(c.c)(this.node.rawAttrs,t,e);if(null!=n.shape)return Object(c.k)(this.node.rawAttrs,t,e);if(null!=n.type)return Object(c.e)(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return Object(c.g)(this.node.rawAttrs,t,e);if(null!=n.list.s)return Object(c.h)(this.node.rawAttrs,t,e);if(null!=n.list.shape)return Object(c.j)(this.node.rawAttrs,t,e);if(null!=n.list.b)return Object(c.b)(this.node.rawAttrs,t,e);if(null!=n.list.type)return Object(c.d)(this.node.rawAttrs,t,e)}return e}}]),t}(),f=n(85),m=n(43),v=n(164),b=n(165),g=n(28),y=n(52),x=n(166),O=n(121),w=n(27),_=n(134),T=n(167),E=n(128),k=n(135),I=n(51),S=n(168),C=n(169),N=n(170),j=n(171),A=n(172),R=n(173),M=n(174),P=n(175),D=n(56),F=n(176),L=n(177),B=n(138),U=n(178),z=n(61),V=n(179),W=n(180),G=n(74),H=n(136),X=n(97),Y=n(67),q=n(181),K=n(87),Z=n(80),J=n(182),Q=n(183),$=n(163),tt=n(184),et=n(185),nt=n(186),rt=n(187),at=n(111),it=n(98),ot=n(188),st=n(189),ut=n(190),ct=n(139),dt=n(191),lt=n(192),ht=n(141),pt=n(140);function ft(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof t&&"number"!==typeof e){r.Md.assert(t.length===e.length,(function(){return n+" Shapes ".concat(t," and ").concat(e," must match")}));for(var a=0;a<t.length;a++){var i=t[a],o=e[a];r.Md.assert(i<0||o<0||i===o,(function(){return n+" Shapes ".concat(t," and ").concat(e," must match")}))}}}function mt(t){return"number"!==typeof t&&!t.some((function(t){return t<0}))}function vt(t,e,n){var r=bt(t,n),a=!mt(r);if(a&&0===e.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&e.forEach((function(t){r=bt(t.shape,r)})),!mt(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function bt(t,e){if("number"===typeof t)return e;if("number"===typeof e)return t;if(t.length!==e.length)throw new Error("Incompatible ranks during merge: ".concat(t," vs. ").concat(e));for(var n=[],r=0;r<t.length;++r){var a=t[r],i=e[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(t," vs. ").concat(e));n[r]=a>=0?a:i}return n}var gt=function(){function t(e,n,a,i,o,u,c){Object(s.a)(this,t),this.name=e,this.dtype=n,this.maxSize=a,this.elementShape=i,this.identicalElementShapes=o,this.dynamicSize=u,this.clearAfterRead=c,this.tensors=[],this.closed_=!1,this.idTensor=Object(r.yd)(0),Object(r.sd)(this.idTensor)}return Object(u.a)(t,[{key:"clearAndClose",value:function(t){this.tensors.forEach((function(e){null!=t&&t.has(e.tensor.id)||e.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(t<0||t>=this.size())throw new Error("Tried to read from index ".concat(t,", but array size is: ").concat(this.size()));var e=this.tensors[t];if(e.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(t," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}},{key:"readMany",value:function(t){var e=this;return t.map((function(t){return e.read(t)}))}},{key:"write",value:function(t,e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error("Tried to write to index ".concat(t,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,",\n          because the value dtype is ").concat(e.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),ft(this.elementShape,e.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(t,", because it has already been written."));n.tensor=e,Object(r.sd)(e),n.written=!0,this.tensors[t]=n}},{key:"writeMany",value:function(t,e){var n=this;if(t.length!==e.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(t.length," is not the same as tensors size: ").concat(e.length,"."));t.forEach((function(t,r){return n.write(t,e[r])}))}},{key:"gather",value:function(t,e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(e));if(t)t=t.slice(0,this.size());else{t=[];for(var n=0;n<this.size();n++)t.push(n)}if(0===t.length)return Object(r.Gd)([],[0].concat(this.elementShape));var a=this.readMany(t);return ft(this.elementShape,a[0].shape,"TensorArray shape mismatch: "),Object(r.Dd)(a,0)}},{key:"concat",value:function(t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(t));if(0===this.size())return Object(r.Gd)([],[0].concat(this.elementShape));for(var e=[],n=0;n<this.size();n++)e.push(n);var a=this.readMany(e);return ft(this.elementShape,a[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(a[0].shape,")")),Object(r.id)(a,0)}},{key:"scatter",value:function(t,e){if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(e.dtype));if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var n=Math.max.apply(Math,Object(d.a)(t));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(t,Object(r.Kd)(e,0))}},{key:"split",value:function(t,e){var n=this;if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(e.dtype));var a=0,i=t.map((function(t){return a+=t}));if(a!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(a,", and tensor's shape is: ").concat(e.shape));if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(t.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var o=0===a?0:e.size/a,s=[];Object(r.Jd)((function(){e=Object(r.xd)(e,[1,a,o]);for(var u=0;u<t.length;++u){var c=[0,0===u?0:i[u-1],0],d=[1,t[u],o];s[u]=Object(r.xd)(Object(r.Ad)(e,c,d),n.elementShape)}return s}));for(var u=[],c=0;c<t.length;c++)u[c]=c;this.writeMany(u,s)}},{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}}]),t}(),yt=function(){function t(e,n,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Object(s.a)(this,t),this.tensors=e,this.elementShape=n,this.elementDtype=a,null!=e&&e.forEach((function(t){if(a!==t.dtype)throw new Error("Invalid data types; op elements ".concat(a,", but list elements ").concat(t.dtype));ft(n,t.shape,"TensorList shape mismatch: "),Object(r.sd)(t)})),this.idTensor=Object(r.yd)(0),this.maxNumElements=i,Object(r.sd)(this.idTensor)}return Object(u.a)(t,[{key:"copy",value:function(){return new t(Object(d.a)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(t){this.tensors.forEach((function(e){null!=t&&t.has(e.id)||e.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(e!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e,", but list elements ").concat(this.elementDtype));if(-1!==a&&this.tensors.length!==a)throw new Error("Operation expected a list with ".concat(a," elements but got a list with ").concat(this.tensors.length," elements."));ft(t,this.elementShape,"TensorList shape mismatch: ");var i=vt(this.elementShape,this.tensors,t);return Object(r.Jd)((function(){var t=n.tensors.map((function(t){return Object(r.xd)(t,i)}));return Object(r.Dd)(t,0)}))}},{key:"popBack",value:function(t,e){if(e!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=vt(this.elementShape,this.tensors,t),a=this.tensors.pop();return ft(a.shape,t,"TensorList shape mismatch: "),Object(r.xd)(a,n)}},{key:"pushBack",value:function(t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(ft(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Object(r.sd)(t),this.tensors.push(t)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=t}},{key:"getItem",value:function(t,e,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(t<0||t>this.tensors.length)throw new Error("Trying to access element ".concat(t," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[t])throw new Error("element at index ".concat(t," is null."));ft(this.tensors[t].shape,e,"TensorList shape mismatch: ");var a=vt(this.elementShape,this.tensors,e);return Object(r.xd)(this.tensors[t],a)}},{key:"setItem",value:function(t,e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(t<0||-1!==this.maxNumElements&&t>=this.maxNumElements)throw new Error("Trying to set element ".concat(t," in a list with max ").concat(this.maxNumElements," elements."));ft(this.elementShape,e.shape,"TensorList shape mismatch: "),Object(r.sd)(e),this.tensors[t]=e}},{key:"gather",value:function(t,e,n){var a=this;if(e!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e,", but list elements ").concat(this.elementDtype));ft(this.elementShape,n,"TensorList shape mismatch: "),t=t.slice(0,this.size());var i=vt(this.elementShape,this.tensors,n);return 0===t.length?Object(r.Gd)([],[0].concat(i)):Object(r.Jd)((function(){var e=t.map((function(t){return Object(r.xd)(a.tensors[t],i)}));return Object(r.Dd)(e,0)}))}},{key:"concat",value:function(t,e){var n=this;if(t&&t!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(t));ft(this.elementShape,e,"TensorList shape mismatch: ");var a=vt(this.elementShape,this.tensors,e);return 0===this.size()?Object(r.Gd)([],[0].concat(a)):Object(r.Jd)((function(){var t=n.tensors.map((function(t){return Object(r.xd)(t,a)}));return Object(r.id)(t,0)}))}},{key:"id",get:function(){return this.idTensor.id}}]),t}();function xt(t,e,n){var a=t.dtype;if(t.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(t.shape));if(t.dtype!==n)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(n));ft(t.shape.slice(1),e,"TensorList shape mismatch: ");var i=Object(r.Kd)(t);return new yt(i,e,a)}function Ot(t,e,n){return new yt([],t,e,n)}function wt(t,e,n,a){if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var i=Math.max.apply(Math,Object(d.a)(e));if(null!=a&&-1!==a&&i>=a)throw new Error("Max index must be < array size (".concat(i,"  vs. ").concat(a,")"));var o=new yt([],n,t.dtype,a),s=Object(r.Kd)(t,0);return e.forEach((function(t,e){o.setItem(t,s[e])})),o}function _t(t,e,n){var a=0,i=e.map((function(t){return a+=t}));if(a!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(a,", and tensor's shape is: ").concat(t.shape));for(var o=bt(t.shape.slice(1),n),s=0===a?0:t.size/a,u=Object(r.Jd)((function(){var n=[];t=Object(r.xd)(t,[1,a,s]);for(var u=0;u<e.length;++u){var c=[0,0===u?0:i[u-1],0],d=[1,e[u],s];n[u]=Object(r.xd)(Object(r.Ad)(t,c,d),o)}return t.dispose(),n})),c=new yt([],n,t.dtype,e.length),d=0;d<u.length;d++)c.setItem(d,u[d]);return c}var Tt=function(){var t=Object(o.a)(i.a.mark((function t(e,n,a){var o,s,u,c,d,l,p,f,m,v,b,g,y,x,O,w,_,T,E,k,I,S,C,N,j,A,R,M,P,D,F,L,B,U,z,V,W,G,H,X,Y,q,K,Z,J,Q,$,tt,et,nt,rt,at,it,ot,st,ut,ct,dt,lt,ht,pt,ft,mt,vt,bt,yt,Tt,Et,kt,It,St,Ct,Nt,jt,At,Rt,Mt,Pt,Dt,Ft,Lt,Bt,Ut,zt,Vt,Wt,Gt,Ht,Xt,Yt,qt,Kt,Zt,Jt,Qt,$t;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.op,t.next="If"===t.t0||"StatelessIf"===t.t0?3:"While"===t.t0||"StatelessWhile"===t.t0?15:"LoopCond"===t.t0?19:"Switch"===t.t0?21:"Merge"===t.t0?32:"Enter"===t.t0?37:"Exit"===t.t0?41:"NextIteration"===t.t0?44:"TensorArrayV3"===t.t0?47:"TensorArrayWriteV3"===t.t0?57:"TensorArrayReadV3"===t.t0?63:"TensorArrayGatherV3"===t.t0?67:"TensorArrayScatterV3"===t.t0?72:"TensorArrayConcatV3"===t.t0?78:"TensorArraySplitV3"===t.t0?82:"TensorArraySizeV3"===t.t0?88:"TensorArrayCloseV3"===t.t0?91:"TensorListSetItem"===t.t0?95:"TensorListGetItem"===t.t0?101:"TensorListScatterV2"===t.t0||"TensorListScatter"===t.t0?107:"TensorListReserve"===t.t0||"EmptyTensorList"===t.t0?114:"TensorListGather"===t.t0?121:"TensorListStack"===t.t0?127:"TensorListFromTensor"===t.t0?133:"TensorListConcat"===t.t0?139:"TensorListPushBack"===t.t0?144:"TensorListPopBack"===t.t0?149:"TensorListSplit"===t.t0?154:160;break;case 3:return o=Object(h.d)("thenBranch",e,n,a),s=Object(h.d)("elseBranch",e,n,a),u=Object(h.d)("cond",e,n,a),c=Object(h.d)("args",e,n,a),t.next=9,u.data();case 9:if(!t.sent[0]){t.next=14;break}return t.abrupt("return",a.functionMap[o].executeFunctionAsync(c,a.tensorArrayMap,a.tensorListMap));case 14:return t.abrupt("return",a.functionMap[s].executeFunctionAsync(c,a.tensorArrayMap,a.tensorListMap));case 15:return t.delegateYield(i.a.mark((function t(){var r,o,s,u,c,d,l,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(h.d)("body",e,n,a),o=Object(h.d)("cond",e,n,a),s=Object(h.d)("args",e,n,a),t.next=5,a.functionMap[o].executeFunctionAsync(s,a.tensorArrayMap,a.tensorListMap);case 5:return u=t.sent,c=s.map((function(t){return t.id})),t.next=9,u[0].data();case 9:d=t.sent,u.forEach((function(t){t.kept||-1!==c.indexOf(t.id)||t.dispose()})),l=s,p=i.a.mark((function t(){var e,n,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l,t.next=3,a.functionMap[r].executeFunctionAsync(l,a.tensorArrayMap,a.tensorListMap);case 3:return l=t.sent,n=l.map((function(t){return t.id})),e.forEach((function(t){t.kept||-1!==c.indexOf(t.id)||-1!==n.indexOf(t.id)||t.dispose()})),t.next=8,a.functionMap[o].executeFunctionAsync(l,a.tensorArrayMap,a.tensorListMap);case 8:return s=t.sent,t.next=11,s[0].data();case 11:d=t.sent,s.forEach((function(t){t.kept||-1!==c.indexOf(t.id)||-1!==n.indexOf(t.id)||t.dispose()}));case 13:case"end":return t.stop()}}),t)}));case 13:if(!d[0]){t.next=17;break}return t.delegateYield(p(),"t0",15);case 15:t.next=13;break;case 17:return t.abrupt("return",{v:l});case 18:case"end":return t.stop()}}),t)}))(),"t1",16);case 16:if("object"!==typeof(d=t.t1)){t.next=19;break}return t.abrupt("return",d.v);case 19:return l=Object(h.d)("pred",e,n,a),t.abrupt("return",[Object(h.a)(l)]);case 21:return p=Object(h.d)("pred",e,n,a),(f=Object(h.d)("data",e,n,a)).kept||(f=Object(h.a)(f)),t.next=26,p.data();case 26:if(!t.sent[0]){t.next=30;break}t.t2=[void 0,f],t.next=31;break;case 30:t.t2=[f,void 0];case 31:return t.abrupt("return",t.t2);case 32:if(!(m=e.inputNames.find((function(t){return void 0!==Object(h.e)(t,n,a)})))){t.next=36;break}return v=Object(h.e)(m,n,a),t.abrupt("return",[Object(h.a)(v)]);case 36:return t.abrupt("return",void 0);case 37:return b=Object(h.d)("frameName",e,n,a),g=Object(h.d)("tensor",e,n,a),a.enterFrame(b),t.abrupt("return",[Object(h.a)(g)]);case 41:return y=Object(h.d)("tensor",e,n,a),a.exitFrame(),t.abrupt("return",[Object(h.a)(y)]);case 44:return x=Object(h.d)("tensor",e,n,a),a.nextIteration(),t.abrupt("return",[Object(h.a)(x)]);case 47:return O=Object(h.d)("size",e,n,a),w=Object(h.d)("dtype",e,n,a),_=Object(h.d)("elementShape",e,n,a),T=Object(h.d)("dynamicSize",e,n,a),E=Object(h.d)("clearAfterRead",e,n,a),k=Object(h.d)("identicalElementShapes",e,n,a),I=Object(h.d)("name",e,n,a),S=new gt(I,w,O,_,k,T,E),a.addTensorArray(S),t.abrupt("return",[S.idTensor,Object(r.yd)(1)]);case 57:return C=Object(h.d)("tensorArrayId",e,n,a),N=Object(h.d)("index",e,n,a),j=Object(h.d)("tensor",e,n,a),(A=a.getTensorArray(C.id)).write(N,j),t.abrupt("return",[A.idTensor]);case 63:return R=Object(h.d)("tensorArrayId",e,n,a),M=Object(h.d)("index",e,n,a),P=a.getTensorArray(R.id),t.abrupt("return",[P.read(M)]);case 67:return D=Object(h.d)("tensorArrayId",e,n,a),F=Object(h.d)("indices",e,n,a),L=Object(h.d)("dtype",e,n,a),B=a.getTensorArray(D.id),t.abrupt("return",[B.gather(F,L)]);case 72:return U=Object(h.d)("tensorArrayId",e,n,a),z=Object(h.d)("indices",e,n,a),V=Object(h.d)("tensor",e,n,a),(W=a.getTensorArray(U.id)).scatter(z,V),t.abrupt("return",[W.idTensor]);case 78:return G=Object(h.d)("tensorArrayId",e,n,a),H=a.getTensorArray(G.id),X=Object(h.d)("dtype",e,n,a),t.abrupt("return",[H.concat(X)]);case 82:return Y=Object(h.d)("tensorArrayId",e,n,a),q=Object(h.d)("tensor",e,n,a),K=Object(h.d)("lengths",e,n,a),(Z=a.getTensorArray(Y.id)).split(K,q),t.abrupt("return",[Z.idTensor]);case 88:return J=Object(h.d)("tensorArrayId",e,n,a),Q=a.getTensorArray(J.id),t.abrupt("return",[Object(r.yd)(Q.size(),"int32")]);case 91:return $=Object(h.d)("tensorArrayId",e,n,a),(tt=a.getTensorArray($.id)).clearAndClose(),t.abrupt("return",[tt.idTensor]);case 95:return et=Object(h.d)("tensorListId",e,n,a),nt=Object(h.d)("index",e,n,a),rt=Object(h.d)("tensor",e,n,a),(at=a.getTensorList(et.id)).setItem(nt,rt),t.abrupt("return",[at.idTensor]);case 101:return it=Object(h.d)("tensorListId",e,n,a),ot=Object(h.d)("index",e,n,a),st=Object(h.d)("elementShape",e,n,a),ut=Object(h.d)("elementDType",e,n,a),ct=a.getTensorList(it.id),t.abrupt("return",[ct.getItem(ot,st,ut)]);case 107:return dt=Object(h.d)("indices",e,n,a),lt=Object(h.d)("tensor",e,n,a),ht=Object(h.d)("elementShape",e,n,a),pt=Object(h.d)("numElements",e,n,a),ft=wt(lt,dt,ht,pt),a.addTensorList(ft),t.abrupt("return",[ft.idTensor]);case 114:return mt=Object(h.d)("elementShape",e,n,a),vt=Object(h.d)("elementDType",e,n,a),bt="TensorListReserve"===e.op?"numElements":"maxNumElements",yt=Object(h.d)(bt,e,n,a),Tt=Ot(mt,vt,yt),a.addTensorList(Tt),t.abrupt("return",[Tt.idTensor]);case 121:return Et=Object(h.d)("tensorListId",e,n,a),kt=Object(h.d)("indices",e,n,a),It=Object(h.d)("elementShape",e,n,a),St=Object(h.d)("elementDType",e,n,a),Ct=a.getTensorList(Et.id),t.abrupt("return",[Ct.gather(kt,St,It)]);case 127:return Nt=Object(h.d)("tensorListId",e,n,a),jt=Object(h.d)("elementShape",e,n,a),At=Object(h.d)("elementDType",e,n,a),Rt=Object(h.d)("numElements",e,n,a),Mt=a.getTensorList(Nt.id),t.abrupt("return",[Mt.stack(jt,At,Rt)]);case 133:return Pt=Object(h.d)("tensor",e,n,a),Dt=Object(h.d)("elementShape",e,n,a),Ft=Object(h.d)("elementDType",e,n,a),Lt=xt(Pt,Dt,Ft),a.addTensorList(Lt),t.abrupt("return",[Lt.idTensor]);case 139:return Bt=Object(h.d)("tensorListId",e,n,a),Ut=a.getTensorList(Bt.id),zt=Object(h.d)("dtype",e,n,a),Vt=Object(h.d)("elementShape",e,n,a),t.abrupt("return",[Ut.concat(zt,Vt)]);case 144:return Wt=Object(h.d)("tensorListId",e,n,a),Gt=Object(h.d)("tensor",e,n,a),(Ht=a.getTensorList(Wt.id)).pushBack(Gt),t.abrupt("return",[Ht.idTensor]);case 149:return Xt=Object(h.d)("tensorListId",e,n,a),Yt=Object(h.d)("elementShape",e,n,a),qt=Object(h.d)("elementDType",e,n,a),Kt=a.getTensorList(Xt.id),t.abrupt("return",[Kt.popBack(Yt,qt)]);case 154:return Zt=Object(h.d)("tensor",e,n,a),Jt=Object(h.d)("elementShape",e,n,a),Qt=Object(h.d)("lengths",e,n,a),$t=_t(Zt,Qt,Jt),a.addTensorList($t),t.abrupt("return",[$t.idTensor]);case 160:throw TypeError("Node type ".concat(e.op," is not implemented"));case 161:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),Et=n(193),kt=n(99),It=n(234),St=n(194),Ct=n(142),Nt=n(195),jt=n(196),At=n(197),Rt=n(198),Mt=n(199),Pt=n(200),Dt=n(201);function Ft(t,e,n){var r=Object(h.d)("fusedOps",t,e,n),a=Object(l.a)(r,2),i=a[0],o=a[1],s="biasadd"===i,u="prelu"===o,c="fusedbatchnorm"===i,d=Object(h.d)("numArgs",t,e,n);if(s){if(u&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");var p=Object(h.d)("strides",t,e,n),f=Object(h.c)(t,e,n),m=Object(h.d)("dataFormat",t,e,n).toUpperCase(),v=Object(h.d)("dilations",t,e,n),b=Object(h.d)("args",t,e,n),g=Object(l.a)(b,2);return{stride:p,pad:f,dataFormat:m,dilations:v,biasArg:g[0],preluArg:g[1],activationFunc:o,leakyreluAlpha:Object(h.d)("leakyreluAlpha",t,e,n)}}var Lt=n(124),Bt=n(202),Ut=n(203),zt=n(204),Vt=n(132),Wt=n(205),Gt=n(206),Ht=n(108),Xt=n(207),Yt=n(77),qt=n(96),Kt=n(33),Zt=n(208),Jt=n(209);function Qt(t,e,n){return{boxes:Object(h.d)("boxes",t,e,n),scores:Object(h.d)("scores",t,e,n),maxOutputSize:Object(h.d)("maxOutputSize",t,e,n),iouThreshold:Object(h.d)("iouThreshold",t,e,n),scoreThreshold:Object(h.d)("scoreThreshold",t,e,n),softNmsSigma:Object(h.d)("softNmsSigma",t,e,n)}}var $t=function(){var t=Object(o.a)(i.a.mark((function t(e,n,r){var a,o,s,u,c,d,l,p,f,m,v,b,g,y,x,O,w,_,T,E,k,I,S,C;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.op,t.next="NonMaxSuppressionV5"===t.t0?3:"NonMaxSuppressionV4"===t.t0?8:"NonMaxSuppressionV3"===t.t0||"NonMaxSuppressionV2"===t.t0?14:"Where"===t.t0?19:"ListDiff"===t.t0?26:27;break;case 3:return a=Qt(e,n,r),o=a.boxes,s=a.scores,u=a.maxOutputSize,c=a.iouThreshold,d=a.scoreThreshold,l=a.softNmsSigma,t.next=6,It.j.nonMaxSuppressionWithScoreAsync(o,s,u,c,d,l);case 6:return p=t.sent,t.abrupt("return",[p.selectedIndices,p.selectedScores]);case 8:return f=Qt(e,n,r),m=f.boxes,v=f.scores,b=f.maxOutputSize,g=f.iouThreshold,y=f.scoreThreshold,x=Object(h.d)("padToMaxOutputSize",e,n,r),t.next=12,It.j.nonMaxSuppressionPaddedAsync(m,v,b,g,y,x);case 12:return O=t.sent,t.abrupt("return",[O.selectedIndices,O.validOutputs]);case 14:return w=Qt(e,n,r),_=w.boxes,T=w.scores,E=w.maxOutputSize,k=w.iouThreshold,I=w.scoreThreshold,t.next=17,It.j.nonMaxSuppressionAsync(_,T,E,k,I);case 17:return t.t1=t.sent,t.abrupt("return",[t.t1]);case 19:return S=Kt.a(Object(h.d)("condition",e,n,r),"bool"),t.next=22,Zt.a(S);case 22:return t.t2=t.sent,C=[t.t2],S.dispose(),t.abrupt("return",C);case 26:return t.abrupt("return",Jt.a(Object(h.d)("x",e,n,r),Object(h.d)("y",e,n,r)));case 27:throw TypeError("Node type ".concat(e.op," is not implemented"));case 28:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),te=n(210),ee=n(211),ne=n(63),re=n(32),ae=function(){function t(e,n){Object(s.a)(this,t),this.keyDType=e,this.valueDType=n,this.handle=Object(r.yd)(0),this.tensorMap=new Map,Object(r.sd)(this.handle)}return Object(u.a)(t,[{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(t){return t.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"import",value:function(){var t=Object(o.a)(i.a.mark((function t(e,n){var a,o=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.checkKeyAndValueTensor(e,n),t.next=3,e.data();case 3:return a=t.sent,this.tensorMap.forEach((function(t){return t.dispose()})),this.tensorMap.clear(),t.abrupt("return",Object(r.Jd)((function(){var t=Object(r.Kd)(n),e=a.length,i=t.length;r.Md.assert(e===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(e," elements, the values has ").concat(i," ")+"elements."}));for(var s=0;s<e;s++){var u=a[s],c=t[s];Object(r.sd)(c),o.tensorMap.set(u,c)}return o.handle})));case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"find",value:function(){var t=Object(o.a)(i.a.mark((function t(e,n){var a,o=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.checkKeyAndValueTensor(e,n),t.next=3,e.data();case 3:return a=t.sent,t.abrupt("return",Object(r.Jd)((function(){for(var t=[],e=0;e<a.length;e++){var i=a[e],s=o.findWithDefault(i,n);t.push(s)}return Object(r.Dd)(t)})));case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"findWithDefault",value:function(t,e){var n=this.tensorMap.get(t);return null!=n?n:e}},{key:"checkKeyAndValueTensor",value:function(t,e){if(t.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(t.dtype));if(e.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(e.dtype))}},{key:"id",get:function(){return this.handle.id}}]),t}(),ie=function(){var t=Object(o.a)(i.a.mark((function t(e,n,r,a){var o,s,u,c,d,l,p,f,m,v,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.op,t.next="HashTable"===t.t0||"HashTableV2"===t.t0?3:"LookupTableImport"===t.t0||"LookupTableImportV2"===t.t0?8:"LookupTableFind"===t.t0||"LookupTableFindV2"===t.t0?16:24;break;case 3:return o=Object(h.d)("keyDType",e,n,r),s=Object(h.d)("valueDType",e,n,r),u=new ae(o,s),a.addHashTable(e.name,u),t.abrupt("return",[u.handle]);case 8:return c=Object(h.d)("tableHandle",e,n,r,a),d=Object(h.d)("keys",e,n,r),l=Object(h.d)("values",e,n,r),p=a.getHashTableById(c.id),t.next=14,p.import(d,l);case 14:return t.t1=t.sent,t.abrupt("return",[t.t1]);case 16:return f=Object(h.d)("tableHandle",e,n,r,a),m=Object(h.d)("keys",e,n,r),v=Object(h.d)("defaultValue",e,n,r),b=a.getHashTableById(f.id),t.next=22,b.find(m,v);case 22:return t.t2=t.sent,t.abrupt("return",[t.t2]);case 24:throw TypeError("Node type ".concat(e.op," is not implemented"));case 25:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),oe=n(145),se=n(133),ue=n(129),ce=n(127),de=n(212),le=n(126),he=n(125),pe=n(213),fe=n(214),me=n(78),ve=n(40),be=n(112),ge=n(235),ye=n(215),xe=n(216),Oe=n(217),we=n(236),_e=n(69),Te=n(131),Ee=n(110),ke=n(34),Ie=n(218),Se=n(219),Ce=n(220),Ne=n(221),je=n(222),Ae=n(223),Re=n(224),Me=n(49),Pe=n(225),De=n(107),Fe=n(39),Le=n(226),Be=n(122),Ue=n(15),ze=n(73),Ve=n(93),We=n(102),Ge=n(88),He=n(227),Xe=n(228),Ye=n(94),qe=n(86),Ke=n(95),Ze=n(123),Je=n(75),Qe=n(229),$e=n(230),tn=n(231),en=n(232),nn=n(233),rn=n(109);function an(t,e,n,a){var i=function(t,e,n){switch(t.category){case"arithmetic":return r.Jd((function(){return function(t,e,n){switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[m.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"AddN":return[v.a(Object(h.d)("tensors",t,e,n))];case"FloorMod":case"Mod":return[b.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"Mul":return[g.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"RealDiv":case"Div":return[y.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"DivNoNan":return[x.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"FloorDiv":return[O.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"Sub":return[w.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"Minimum":return[_.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"Maximum":return[T.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"Pow":return[E.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"SquaredDifference":return[k.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"basic_math":return r.Jd((function(){return function(t,e,n){switch(t.op){case"Abs":case"ComplexAbs":return[I.a(Object(h.d)("x",t,e,n))];case"Acos":return[S.a(Object(h.d)("x",t,e,n))];case"Acosh":return[C.a(Object(h.d)("x",t,e,n))];case"Asin":return[N.a(Object(h.d)("x",t,e,n))];case"Asinh":return[j.a(Object(h.d)("x",t,e,n))];case"Atan":return[A.a(Object(h.d)("x",t,e,n))];case"Atan2":return[R.a(Object(h.d)("x",t,e,n),Object(h.d)("y",t,e,n))];case"Atanh":return[M.a(Object(h.d)("x",t,e,n))];case"Ceil":return[P.a(Object(h.d)("x",t,e,n))];case"Complex":return[D.a(Object(h.d)("real",t,e,n),Object(h.d)("imag",t,e,n))];case"Cos":return[F.a(Object(h.d)("x",t,e,n))];case"Cosh":return[L.a(Object(h.d)("x",t,e,n))];case"Elu":return[B.a(Object(h.d)("x",t,e,n))];case"Erf":return[U.a(Object(h.d)("x",t,e,n))];case"Exp":return[z.a(Object(h.d)("x",t,e,n))];case"Expm1":return[V.a(Object(h.d)("x",t,e,n))];case"Floor":return[W.a(Object(h.d)("x",t,e,n))];case"Log":return[G.a(Object(h.d)("x",t,e,n))];case"Log1p":return[H.a(Object(h.d)("x",t,e,n))];case"Imag":return[X.a(Object(h.d)("x",t,e,n))];case"Neg":return[Y.a(Object(h.d)("x",t,e,n))];case"Reciprocal":return[q.a(Object(h.d)("x",t,e,n))];case"Real":return[K.a(Object(h.d)("x",t,e,n))];case"Relu":return[Z.a(Object(h.d)("x",t,e,n))];case"Round":return[J.a(Object(h.d)("x",t,e,n))];case"Selu":return[Q.a(Object(h.d)("x",t,e,n))];case"Sigmoid":return[$.a(Object(h.d)("x",t,e,n))];case"Sin":return[tt.a(Object(h.d)("x",t,e,n))];case"Sign":return[et.a(Object(h.d)("x",t,e,n))];case"Sinh":return[nt.a(Object(h.d)("x",t,e,n))];case"Softplus":return[rt.a(Object(h.d)("x",t,e,n))];case"Sqrt":return[at.a(Object(h.d)("x",t,e,n))];case"Square":return[it.a(Object(h.d)("x",t,e,n))];case"Tanh":return[ot.a(Object(h.d)("x",t,e,n))];case"Tan":return[st.a(Object(h.d)("x",t,e,n))];case"ClipByValue":return[ut.a(Object(h.d)("x",t,e,n),Object(h.d)("clipValueMin",t,e,n),Object(h.d)("clipValueMax",t,e,n))];case"Relu6":return[ct.a(Object(h.d)("x",t,e,n))];case"Rsqrt":return[dt.a(Object(h.e)(t.inputNames[0],e,n))];case"Prod":return[lt.a(Object(h.d)("x",t,e,n),Object(h.d)("axes",t,e,n))];case"LeakyRelu":return[ht.a(Object(h.d)("x",t,e,n),Object(h.d)("alpha",t,e,n))];case"Prelu":return[pt.a(Object(h.d)("x",t,e,n),Object(h.d)("alpha",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"control":return Tt(t,e,n);case"convolution":return r.Jd((function(){return function(t,e,n){switch(t.op){case"Conv1D":var r=Object(h.d)("stride",t,e,n),a=Object(h.d)("pad",t,e,n),i=Object(h.d)("dataFormat",t,e,n).toUpperCase(),o=Object(h.d)("dilation",t,e,n);return[Et.a(Object(h.d)("x",t,e,n),Object(h.d)("filter",t,e,n),r,a,i,o)];case"Conv2D":var s=Object(h.d)("strides",t,e,n),u=Object(h.c)(t,e,n),c=Object(h.d)("dataFormat",t,e,n).toUpperCase(),d=Object(h.d)("dilations",t,e,n);return[kt.a(Object(h.d)("x",t,e,n),Object(h.d)("filter",t,e,n),[s[1],s[2]],u,c,[d[1],d[2]])];case"_FusedConv2D":var l=Ft(t,e,n),p=l.stride,f=l.pad,m=l.dataFormat,v=l.dilations,b=l.biasArg,g=l.preluArg,y=l.activationFunc,x=l.leakyreluAlpha;return[It.i.conv2d({x:Object(h.d)("x",t,e,n),filter:Object(h.d)("filter",t,e,n),strides:[p[1],p[2]],pad:f,dataFormat:m,dilations:[v[1],v[2]],bias:b,activation:y,preluActivationWeights:g,leakyreluAlpha:x})];case"FusedDepthwiseConv2dNative":var O=Ft(t,e,n),w=O.stride,_=O.pad,T=O.dataFormat,E=O.dilations,k=O.biasArg,I=O.preluArg,S=O.activationFunc,C=O.leakyreluAlpha;return[It.i.depthwiseConv2d({x:Object(h.d)("x",t,e,n),filter:Object(h.d)("filter",t,e,n),strides:[w[1],w[2]],pad:_,dataFormat:T,dilations:[E[1],E[2]],bias:k,activation:S,preluActivationWeights:I,leakyreluAlpha:C})];case"Conv2DBackpropInput":case"Conv2dTranspose":var N=Object(h.d)("outputShape",t,e,n),j=Object(h.d)("strides",t,e,n),A=Object(h.c)(t,e,n);return[St.a(Object(h.d)("x",t,e,n),Object(h.d)("filter",t,e,n),N,[j[1],j[2]],A)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var R=Object(h.d)("strides",t,e,n),M=Object(h.c)(t,e,n),P=Object(h.d)("dilations",t,e,n),D=Object(h.d)("dataFormat",t,e,n).toUpperCase();return[Ct.a(Object(h.d)("input",t,e,n),Object(h.d)("filter",t,e,n),[R[1],R[2]],M,D,[P[1],P[2]])];case"Conv3D":var F=Object(h.d)("strides",t,e,n),L=Object(h.d)("pad",t,e,n),B=Object(h.d)("dataFormat",t,e,n).toUpperCase(),U=Object(h.d)("dilations",t,e,n);return[Nt.a(Object(h.d)("x",t,e,n),Object(h.d)("filter",t,e,n),[F[1],F[2],F[3]],L,B,[U[1],U[2],U[3]])];case"AvgPool":var z=Object(h.d)("strides",t,e,n),V=Object(h.d)("pad",t,e,n),W=Object(h.d)("kernelSize",t,e,n);return[jt.a(Object(h.d)("x",t,e,n),[W[1],W[2]],[z[1],z[2]],V)];case"MaxPool":var G=Object(h.d)("strides",t,e,n),H=Object(h.d)("pad",t,e,n),X=Object(h.d)("kernelSize",t,e,n);return[At.a(Object(h.d)("x",t,e,n),[X[1],X[2]],[G[1],G[2]],H)];case"MaxPoolWithArgmax":var Y=Object(h.d)("strides",t,e,n),q=Object(h.d)("pad",t,e,n),K=Object(h.d)("kernelSize",t,e,n),Z=Object(h.d)("includeBatchInIndex",t,e,n),J=Rt.a(Object(h.d)("x",t,e,n),[K[1],K[2]],[Y[1],Y[2]],q,Z);return[J.result,J.indexes];case"AvgPool3D":var Q=Object(h.d)("strides",t,e,n),$=Object(h.d)("pad",t,e,n),tt=Object(h.d)("kernelSize",t,e,n);return[Mt.a(Object(h.d)("x",t,e,n),[tt[1],tt[2],tt[3]],[Q[1],Q[2],Q[3]],$)];case"MaxPool3D":var et=Object(h.d)("strides",t,e,n),nt=Object(h.d)("pad",t,e,n),rt=Object(h.d)("kernelSize",t,e,n);return[Pt.a(Object(h.d)("x",t,e,n),[rt[1],rt[2],rt[3]],[et[1],et[2],et[3]],nt)];case"Dilation2D":var at=Object(h.d)("strides",t,e,n),it=Object(h.d)("pad",t,e,n),ot=Object(h.d)("dilations",t,e,n),st=at[1],ut=at[2],ct=ot[1],dt=ot[2];return[Dt.a(Object(h.d)("x",t,e,n),Object(h.d)("filter",t,e,n),[st,ut],it,[ct,dt],"NHWC")];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"creation":return r.Jd((function(){return function(t,e,n){switch(t.op){case"Fill":var r=Object(h.d)("shape",t,e,n),a=Object(h.d)("dtype",t,e,n),i=Object(h.d)("value",t,e,n);return[Lt.a(r,i,a)];case"LinSpace":var o=Object(h.d)("start",t,e,n),s=Object(h.d)("stop",t,e,n),u=Object(h.d)("num",t,e,n);return[Bt.a(o,s,u)];case"Multinomial":var c=Object(h.d)("logits",t,e,n),d=Object(h.d)("numSamples",t,e,n),l=Object(h.d)("seed",t,e,n);return[Ut.a(c,d,l)];case"OneHot":var p=Object(h.d)("indices",t,e,n),f=Object(h.d)("depth",t,e,n),m=Object(h.d)("onValue",t,e,n),v=Object(h.d)("offValue",t,e,n);return[zt.a(p,f,m,v)];case"Ones":return[Vt.a(Object(h.d)("shape",t,e,n),Object(h.d)("dtype",t,e,n))];case"OnesLike":return[Wt.a(Object(h.d)("x",t,e,n))];case"RandomUniform":return[Gt.a(Object(h.d)("shape",t,e,n),Object(h.d)("minval",t,e,n),Object(h.d)("maxval",t,e,n),Object(h.d)("dtype",t,e,n))];case"Range":var b=Object(h.d)("start",t,e,n),g=Object(h.d)("stop",t,e,n),y=Object(h.d)("step",t,e,n);return[Ht.a(b,g,y,Object(h.d)("dtype",t,e,n))];case"TruncatedNormal":var x=Object(h.d)("shape",t,e,n),O=Object(h.d)("mean",t,e,n),w=Object(h.d)("stdDev",t,e,n),_=Object(h.d)("seed",t,e,n);return[Xt.a(x,O,w,Object(h.d)("dtype",t,e,n),_)];case"Zeros":return[Yt.a(Object(h.d)("shape",t,e,n),Object(h.d)("dtype",t,e,n))];case"ZerosLike":return[qt.a(Object(h.d)("x",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"dynamic":return $t(t,e,n);case"evaluation":return r.Jd((function(){return function(t,e,n){switch(t.op){case"TopKV2":var r=Object(h.d)("x",t,e,n),a=Object(h.d)("k",t,e,n),i=Object(h.d)("sorted",t,e,n),o=te.a(r,a,i);return[o.values,o.indices];case"Unique":var s=Object(h.d)("x",t,e,n),u=ee.a(s);return[u.values,u.indices];case"UniqueV2":var c=Object(h.d)("x",t,e,n),d=Object(h.d)("axis",t,e,n),l=ee.a(c,d);return[l.values,l.indices];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"image":return r.Jd((function(){return function(t,e,n){switch(t.op){case"ResizeBilinear":var r=Object(h.d)("images",t,e,n),a=Object(h.d)("size",t,e,n),i=Object(h.d)("alignCorners",t,e,n),o=Object(h.d)("halfPixelCenters",t,e,n);return[It.j.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=Object(h.d)("images",t,e,n),u=Object(h.d)("size",t,e,n),c=Object(h.d)("alignCorners",t,e,n),d=Object(h.d)("halfPixelCenters",t,e,n);return[It.j.resizeNearestNeighbor(s,[u[0],u[1]],c,d)];case"CropAndResize":var l=Object(h.d)("image",t,e,n),p=Object(h.d)("boxes",t,e,n),f=Object(h.d)("boxInd",t,e,n),m=Object(h.d)("cropSize",t,e,n),v=Object(h.d)("method",t,e,n),b=Object(h.d)("extrapolationValue",t,e,n);return[It.j.cropAndResize(l,p,f,m,v,b)];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"graph":return r.Jd((function(){return function(t,e,n){switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":var r=Object(h.d)("default",t,e,n);return[Object(h.e)(t.name,e,n)||r];case"Placeholder":return[Object(h.e)(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":var a=Object(h.d)("x",t,e,n);return[Object(h.a)(a)];case"IdentityN":return Object(h.d)("x",t,e,n).map((function(t){return Object(h.a)(t)}));case"Snapshot":var i=Object(h.d)("x",t,e,n);return[Object(h.a)(i)];case"Shape":return[ne.a(Object(h.d)("x",t,e,n).shape,"int32")];case"ShapeN":return Object(h.d)("x",t,e,n).map((function(t){return ne.a(t.shape)}));case"Size":return[re.a(Object(h.d)("x",t,e,n).size,"int32")];case"Rank":return[re.a(Object(h.d)("x",t,e,n).rank,"int32")];case"NoOp":return[re.a(1)];case"Print":var o=Object(h.d)("x",t,e,n),s=Object(h.d)("data",t,e,n),u=Object(h.d)("message",t,e,n),c=Object(h.d)("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(var d=0;d<s.length;d++)console.log(Array.prototype.slice.call(s[d].dataSync()).slice(0,c));return[o];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"logical":return r.Jd((function(){return function(t,e,n){switch(t.op){case"Equal":return[oe.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"NotEqual":return[se.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"Greater":return[ue.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"GreaterEqual":return[ce.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"Less":return[de.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"LessEqual":return[le.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"LogicalAnd":return[he.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"LogicalNot":return[pe.a(Object(h.d)("a",t,e,n))];case"LogicalOr":return[fe.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];case"Select":case"SelectV2":return[me.a(Object(h.d)("condition",t,e,n),Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"matrices":return r.Jd((function(){return function(t,e,n){switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[ve.a(Object(h.d)("a",t,e,n),Object(h.d)("b",t,e,n),Object(h.d)("transposeA",t,e,n),Object(h.d)("transposeB",t,e,n))];case"Transpose":return[be.a(Object(h.d)("x",t,e,n),Object(h.d)("perm",t,e,n))];case"_FusedMatMul":var r=Object(h.d)("fusedOps",t,e,n),a=Object(l.a)(r,2),i=a[0],o=a[1],s="biasadd"===i,u="prelu"===o,c=Object(h.d)("numArgs",t,e,n),d=Object(h.d)("leakyreluAlpha",t,e,n);if(s){if(u&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var p=Object(h.d)("args",t,e,n),f=Object(l.a)(p,2),m=f[0],v=f[1];return[It.i.matMul({a:Object(h.d)("a",t,e,n),b:Object(h.d)("b",t,e,n),transposeA:Object(h.d)("transposeA",t,e,n),transposeB:Object(h.d)("transposeB",t,e,n),bias:m,activation:o,preluActivationWeights:v,leakyreluAlpha:d})];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"normalization":return r.Jd((function(){return function(t,e,n){switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[ge.a(Object(h.d)("x",t,e,n),Object(h.d)("mean",t,e,n),Object(h.d)("variance",t,e,n),Object(h.d)("offset",t,e,n),Object(h.d)("scale",t,e,n),Object(h.d)("epsilon",t,e,n))];case"LRN":return[ye.a(Object(h.d)("x",t,e,n),Object(h.d)("radius",t,e,n),Object(h.d)("bias",t,e,n),Object(h.d)("alpha",t,e,n),Object(h.d)("beta",t,e,n))];case"Softmax":return[xe.a(Object(h.d)("x",t,e,n))];case"LogSoftmax":return[Oe.a(Object(h.d)("x",t,e,n))];case"SparseToDense":return[we.a(Object(h.d)("sparseIndices",t,e,n),Object(h.d)("outputShape",t,e,n),Object(h.d)("sparseValues",t,e,n),Object(h.d)("defaultValue",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"reduction":return r.Jd((function(){return function(t,e,n){switch(t.op){case"Max":var r=Object(h.d)("axis",t,e,n),a=Object(h.d)("keepDims",t,e,n);return[_e.a(Object(h.d)("x",t,e,n),r,a)];case"Mean":var i=Object(h.d)("axis",t,e,n),o=Object(h.d)("keepDims",t,e,n);return[Te.a(Object(h.d)("x",t,e,n),i,o)];case"Min":var s=Object(h.d)("axis",t,e,n),u=Object(h.d)("keepDims",t,e,n);return[Ee.a(Object(h.d)("x",t,e,n),s,u)];case"Sum":var c=Object(h.d)("axis",t,e,n),d=Object(h.d)("keepDims",t,e,n);return[ke.a(Object(h.d)("x",t,e,n),c,d)];case"All":var l=Object(h.d)("axis",t,e,n),p=Object(h.d)("keepDims",t,e,n);return[Ie.a(Object(h.d)("x",t,e,n),l,p)];case"Any":var f=Object(h.d)("axis",t,e,n),m=Object(h.d)("keepDims",t,e,n);return[Se.a(Object(h.d)("x",t,e,n),f,m)];case"ArgMax":var v=Object(h.d)("axis",t,e,n);return[Ce.a(Object(h.d)("x",t,e,n),v)];case"ArgMin":var b=Object(h.d)("axis",t,e,n);return[Ne.a(Object(h.d)("x",t,e,n),b)];case"Prod":var g=Object(h.d)("axis",t,e,n),y=Object(h.d)("keepDims",t,e,n);return[lt.a(Object(h.d)("x",t,e,n),g,y)];case"Cumsum":var x=Object(h.d)("axis",t,e,n),O=Object(h.d)("exclusive",t,e,n),w=Object(h.d)("reverse",t,e,n);return[je.a(Object(h.d)("x",t,e,n),x,O,w)];case"Bincount":var _=Object(h.d)("x",t,e,n),T=Object(h.d)("weights",t,e,n),E=Object(h.d)("size",t,e,n);return[Ae.a(_,T,E)];case"DenseBincount":var k=Object(h.d)("x",t,e,n),I=Object(h.d)("weights",t,e,n),S=Object(h.d)("size",t,e,n),C=Object(h.d)("binaryOutput",t,e,n);return[Re.a(k,I,S,C)];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"slice_join":return r.Jd((function(){return function(t,e,n){switch(t.op){case"ConcatV2":case"Concat":var a=Object(h.d)("n",t,e,n),i=Object(h.d)("axis",t,e,n),o=Object(h.d)("tensors",t,e,n);return o=o.slice(0,a),[Me.a(o,i)];case"Gather":var s=Object(h.d)("x",t,e,n),u=Object(h.d)("indices",t,e,n);return[Pe.a(s,Kt.a(u,"int32"),0)];case"GatherV2":var c=Object(h.d)("axis",t,e,n),d=Object(h.d)("batchDims",t,e,n),l=Object(h.d)("x",t,e,n),p=Object(h.d)("indices",t,e,n);return[Pe.a(l,Kt.a(p,"int32"),c,d)];case"Reverse":for(var f=Object(h.d)("dims",t,e,n),m=[],v=0;v<f.length;v++)f[v]&&m.push(v);var b=Object(h.d)("x",t,e,n);return[De.a(b,m)];case"ReverseV2":var g=Object(h.d)("axis",t,e,n),y=Object(h.d)("x",t,e,n);return[De.a(y,g)];case"Slice":var x=Object(h.d)("begin",t,e,n),O=Object(h.d)("size",t,e,n);return[Fe.a(Object(h.d)("x",t,e,n),x,O)];case"StridedSlice":var w=Object(h.d)("begin",t,e,n),_=Object(h.d)("end",t,e,n),T=Object(h.d)("strides",t,e,n),E=Object(h.d)("beginMask",t,e,n),k=Object(h.d)("endMask",t,e,n),I=Object(h.d)("ellipsisMask",t,e,n),S=Object(h.d)("newAxisMask",t,e,n),C=Object(h.d)("shrinkAxisMask",t,e,n),N=Object(h.d)("x",t,e,n);return[Le.a(N,w,_,T,E,k,I,S,C)];case"Pack":return Object(r.Jd)((function(){var a=Object(h.d)("axis",t,e,n),i=Object(h.d)("tensors",t,e,n),o=i[0].shape,s=Be.a(i[0]).shape,u=i.map((function(t){var e=r.Md.arraysEqual(t.shape,o);if(!e&&!r.Md.arraysEqual(Be.a(t).shape,s))throw new Error("the input tensors shape does not match");return e?t:Ue.a(t,o)}));return[ze.a(u,a)]}));case"Unpack":var j=Object(h.d)("axis",t,e,n),A=Object(h.d)("tensor",t,e,n);return Ve.a(A,j);case"Tile":var R=Object(h.d)("reps",t,e,n);return[We.a(Object(h.d)("x",t,e,n),R)];case"Split":case"SplitV":var M=Object(h.d)("axis",t,e,n),P=Object(h.d)("numOrSizeSplits",t,e,n),D=Object(h.d)("x",t,e,n);return Ge.a(D,P,M);case"ScatterNd":var F=Object(h.d)("indices",t,e,n),L=Object(h.d)("values",t,e,n),B=Object(h.d)("shape",t,e,n);return[He.a(F,L,B)];case"GatherNd":var U=Object(h.d)("x",t,e,n),z=Object(h.d)("indices",t,e,n);return[Xe.a(U,z)];case"SparseToDense":var V=Object(h.d)("sparseIndices",t,e,n),W=Object(h.d)("outputShape",t,e,n),G=Object(h.d)("sparseValues",t,e,n),H=Object(h.d)("defaultValue",t,e,n);return[we.a(V,G,W,G.dtype===H.dtype?H:Kt.a(H,G.dtype))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"spectral":return r.Jd((function(){return function(t,e,n){switch(t.op){case"FFT":return[Ye.a(Object(h.d)("x",t,e,n))];case"IFFT":return[qe.a(Object(h.d)("x",t,e,n))];case"RFFT":return[Ke.a(Object(h.d)("x",t,e,n))];case"IRFFT":return[Ze.a(Object(h.d)("x",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"transformation":return r.Jd((function(){return function(t,e,n){switch(t.op){case"Cast":return[Kt.a(Object(h.d)("x",t,e,n),Object(h.d)("dtype",t,e,n))];case"ExpandDims":var r=Object(h.d)("axis",t,e,n);return[Je.a(Object(h.d)("x",t,e,n),r)];case"Squeeze":var a=Object(h.d)("axis",t,e,n);return[Be.a(Object(h.d)("x",t,e,n),a)];case"Reshape":return[Ue.a(Object(h.d)("x",t,e,n),Object(h.d)("shape",t,e,n))];case"MirrorPad":return[Qe.a(Object(h.d)("x",t,e,n),Object(h.d)("padding",t,e,n),Object(h.d)("mode",t,e,n))];case"PadV2":case"Pad":return[$e.a(Object(h.d)("x",t,e,n),Object(h.d)("padding",t,e,n),Object(h.d)("constantValue",t,e,n))];case"SpaceToBatchND":var i=Object(h.d)("blockShape",t,e,n),o=Object(h.d)("paddings",t,e,n);return[tn.a(Object(h.d)("x",t,e,n),i,o)];case"BatchToSpaceND":var s=Object(h.d)("blockShape",t,e,n),u=Object(h.d)("crops",t,e,n);return[en.a(Object(h.d)("x",t,e,n),s,u)];case"DepthToSpace":var c=Object(h.d)("blockSize",t,e,n),d=Object(h.d)("dataFormat",t,e,n).toUpperCase();return[nn.a(Object(h.d)("x",t,e,n),c,d)];case"BroadcastTo":return[rn.a(Object(h.d)("x",t,e,n),Object(h.d)("shape",t,e,n))];default:throw TypeError("Node type ".concat(t.op," is not implemented"))}}(t,e,n)}));case"hash_table":return ie(t,e,n,a);case"custom":var i=Object(f.a)(t.op);if(i&&i.customExecutor)return i.customExecutor(new p(t,e,n));throw TypeError("Custom op ".concat(t.op," is not registered."));default:throw TypeError("Unknown op '".concat(t.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(t,e,n);return r.Md.isPromise(i)?i.then((function(t){return[].concat(t)})):[].concat(i)}var on=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(s.a)(this,t),this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return Object(u.a)(t,[{key:"newFrame",value:function(t,e){return{id:t,frameName:e,iterationId:0}}},{key:"generateCurrentContextIds",value:function(){for(var t=[],e=0;e<this.contexts.length-1;e++){var n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}},{key:"contextIdforContexts",value:function(t){return t?t.map((function(t){return 0===t.id&&0===t.iterationId?"":"".concat(t.frameName,"-").concat(t.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(t){return this.weightMap[t]}},{key:"addTensorArray",value:function(t){this.tensorArrayMap[t.id]=t}},{key:"getTensorArray",value:function(t){return this.tensorArrayMap[t]}},{key:"addTensorList",value:function(t){this.tensorListMap[t.id]=t}},{key:"getTensorList",value:function(t){return this.tensorListMap[t]}},{key:"dispose",value:function(t){for(var e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(t)}},{key:"currentContext",set:function(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())},get:function(){return this.contexts}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}}]),t}();function sn(t,e,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(t).map((function(t){return Object(h.g)(t)[0]})),l=[];null!=r&&(l=r.map((function(t){return Object(h.g)(t.name)[0]})));for(var p=Object(d.a)(e);p.length>0;){var f=p.pop();(ln(f)||hn(f)||pn(f))&&null==o&&(s=(o=f).children.map((function(t){return t.name})).filter((function(t){return a.has(t)}))),a.add(f.name),null==n[f.name]&&(-1===c.indexOf(f.name)&&-1===l.indexOf(f.name)&&(0!==f.inputs.length?f.inputs.forEach((function(t){u.has(t.name)||(u.add(t.name),p.push(t))})):i.push(f.name)))}return{inputs:t,outputs:e,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var un=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],cn=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],dn=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function ln(t){return un.indexOf(t.op)>=0}function hn(t){return cn.indexOf(t.op)>=0}function pn(t){return dn.indexOf(t.op)>=0}var fn=function(){function t(e,n){var r=this;Object(s.a)(this,t),this.graph=e,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((function(n){r._functionExecutorMap[n]=new t(e.functions[n],r)}))}return Object(u.a)(t,[{key:"getCompilationKey",value:function(t,e){var n=t.map((function(t){return t.name})).sort(),r=e.map((function(t){return t.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(t,e){var n=sn(t,e,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=e.map((function(t){return t.name})),s=Object.keys(t);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(t,e,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(t){return Object(h.g)(t)[0]})).map((function(e){return t.nodes[e]})),s=t.initNodes;o.forEach((function(t){r.has(t.name)&&i.push(t)})),t.weights.forEach((function(t){r.has(t.name)&&i.push(t)})),null!=s&&s.forEach((function(t){r.has(t.name)&&i.push(t)}));for(var u=new Set,c=[];i.length>0;){var d=i.pop();u.add(d.name),e[d.name]||c.push(d),d.children.forEach((function(t){!u.has(t.name)&&r.has(t.name)&&t.inputs.every((function(t){return u.has(t.name)}))&&i.push(t)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(t,e){var n=this;t=this.mapInputs(t);var a=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);var i=a.map((function(t){return n.graph.nodes[Object(h.g)(t)[0]]})),o=e.map((function(t){return Object(h.g)(t)[0]})),s=o.map((function(t){return n.graph.nodes[t]}));0===s.length&&(s=this._outputs);var u=this.getCompilationKey(i,s),c=this.compiledMap.get(u);null==c&&(c=this.compile(t,s),this.compiledMap.set(u,c));var d={},p={};return Object(r.Jd)((function(){var a=new on(n.weightMap,d,p,n.functionExecutorMap),i=Object.assign({},n.weightMap);Object.keys(t).forEach((function(e){var n=Object(h.g)(e),r=Object(l.a)(n,2),a=r[0],o=[];o[r[1]]=t[e],i[a]=o}));for(var s=n.getFrozenTensorIds(i),u={},f=0;f<c.length;f++){var m=c[f];if(!i[m.name]){var v=an(m,i,a,n._resourceManager);if(r.Md.isPromise(v))throw new Error("The execution of the op '".concat(m.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");i[m.name]=v,n.checkTensorForDisposal(m.name,m,i,a,s,o,u)}}return null==n.parent&&a.dispose(s),e.map((function(t){return Object(h.e)(t,i,a)}))}))}},{key:"getFrozenTensorIds",value:function(t){var e=[].concat.apply([],Object.keys(t).map((function(e){return t[e]})).map((function(t){return t.map((function(t){return t.id}))})));return new Set(e)}},{key:"checkTensorForDisposal",value:function(t,e,n,r,a,i,o){"control"!==e.category&&-1===i.indexOf(t)&&(n[t].forEach((function(t){null!=t&&(o[t.id]=(o[t.id]||0)+e.children.length)})),e.inputs.forEach((function(t){if("control"!==t.category){var e=Object(h.f)(t.name,n,r);null!=e&&e.forEach((function(t){if(t&&!a.has(t.id)){var e=o[t.id];1===e?(t.dispose(),delete o[t.id]):null!=e&&o[t.id]--}}))}})))}},{key:"executeAsync",value:function(){var t=Object(o.a)(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._executeAsync(e,n));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_executeAsync",value:function(){var t=Object(o.a)(i.a.mark((function t(e,n){var r,a,o,s,u,c,l,p,f,m=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=m.length>2&&void 0!==m[2]&&m[2],a=m.length>3&&void 0!==m[3]?m[3]:{},o=m.length>4&&void 0!==m[4]?m[4]:{},r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n)),s=new on(this.weightMap,a,o,this.functionExecutorMap),t.next=7,this.executeWithControlFlow(e,s,n,r);case 7:return u=t.sent,c=n.map((function(t){return Object(h.e)(t,u,s)})),l=c.map((function(t){return t.id})),p=Object.keys(e).map((function(t){return e[t].id})),f=new Set([].concat(Object(d.a)(l),Object(d.a)(p),Object(d.a)(this.weightIds))),Object.keys(u).forEach((function(t){u[t].forEach((function(t){!t||t.isDisposed||f.has(t.id)||t.dispose()}))})),null==this.parent&&s.dispose(f),t.abrupt("return",c);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var t=Object(o.a)(i.a.mark((function t(e,n,r){var a,o=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.reduce((function(t,e,n){return t[o.inputs[n].name]=e,t}),{}),t.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var t=Object(o.a)(i.a.mark((function t(e,n,r,a){var o,s,u,c,p,f,m,v,b,g,y,x,O,w,_,T,E,k=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=Object.keys(e),s=o.map((function(t){return k.graph.nodes[Object(h.g)(t)[0]]})),u=r.map((function(t){return Object(h.g)(t)[0]})),0===(c=u.map((function(t){return k.graph.nodes[t]}))).length&&(c=this._outputs),p=sn(e,c,this.weightMap,this._initNodes),f=p.usedNodes,m=p.missingInputs,v=p.dynamicNode,b=p.syncInputs,g=[].concat(Object(d.a)(s),Object(d.a)(this.graph.weights),Object(d.a)(this._initNodes||[])).map((function(t){return{node:t,contexts:n.currentContext}})),y=Object.assign({},this.weightMap),Object.keys(e).forEach((function(t){var n=Object(h.g)(t),r=Object(l.a)(n,2),a=r[0],i=[];i[r[1]]=e[t],y[a]=i})),x={},O=this.getFrozenTensorIds(y),w={};case 12:if(!(g.length>0)){t.next=18;break}return _=this.processStack(s,g,n,y,w,O,u,x,f),t.next=16,Promise.all(_);case 16:t.next=12;break;case 18:if(null!=v||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((T=c.filter((function(t){return!ln(t)&&!Object(h.e)(t.name,y,n)})).map((function(t){return t.name}))).length>0)){t.next=24;break}throw E="",null!=v&&(E="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(b,"]")),new Error("Cannot compute the outputs [".concat(T,"] from the provided ")+"inputs [".concat(o,"]. Consider providing the following inputs: ")+"[".concat(m,"]. ").concat(E));case 24:return t.abrupt("return",y);case 25:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"processStack",value:function(t,e,n,a,i,o,s,u,c){for(var d=this,p=[],f=function(){var t=e.pop();n.currentContext=t.contexts;var f="";if("Enter"===t.node.op&&Object(h.d)("isConstant",t.node,a,n)){var m=Object(h.b)(t.node.name,n),v=Object(l.a)(m,1);f=v[0]}if(null==a[t.node.name]){var b=an(t.node,a,n,d._resourceManager);if(!f){var g=Object(h.b)(t.node.name,n),y=Object(l.a)(g,1);f=y[0]}var x=n.currentContext;r.Md.isPromise(b)?p.push(b.then((function(r){return a[f]=r,n.currentContext=x,d.checkTensorForDisposal(f,t.node,a,n,o,s,u),d.processChildNodes(t.node,e,n,a,i,c),r}))):(a[f]=b,d.checkTensorForDisposal(f,t.node,a,n,o,s,u),d.processChildNodes(t.node,e,n,a,i,c))}else d.processChildNodes(t.node,e,n,a,i,c)};e.length>0;)f();return p}},{key:"processChildNodes",value:function(t,e,n,r,a,i){t.children.forEach((function(t){var o=Object(h.b)(t.name,n),s=Object(l.a)(o,1)[0];!a[s]&&i.has(t.name)&&("Merge"===t.op?t.inputNames.some((function(t){return!!Object(h.e)(t,r,n)}))&&(a[s]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every((function(t){return!!Object(h.e)(t,r,n)}))&&(a[s]=!0,e.push({contexts:n.currentContext,node:t})))}))}},{key:"dispose",value:function(){var t=this;Object.keys(this.weightMap).forEach((function(e){return t.weightMap[e].forEach((function(t){return t.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(t){var e=this;Object.keys(t).forEach((function(n){var a=t[n],i=Object(h.g)(n),o=Object(l.a)(i,1)[0],s=e.graph.nodes[o];if(s.attrParams.shape&&s.attrParams.shape.value){var u=s.attrParams.shape.value,c=u.length===a.shape.length&&a.shape.every((function(t,e){return-1===u[e]||u[e]===t}));r.Md.assert(c,(function(){return"The shape of dict['".concat(s.name,"'] provided in ")+"model.execute(dict) must be [".concat(u,"], but was ")+"[".concat(a.shape,"]")}))}s.attrParams.dtype&&s.attrParams.dtype.value&&r.Md.assert(a.dtype===s.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(s.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(s.attrParams.dtype.value,", but was ").concat(a.dtype)}))}))}},{key:"mapInputs",value:function(t){var e={};for(var n in t){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])e[this._signature.inputs[n].name]=t[n];else e[n]=t[n]}return e}},{key:"checkInputs",value:function(t){var e=this,n=Object.keys(t).filter((function(t){var n=Object(h.g)(t),r=Object(l.a)(n,1)[0];return null==e.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(t){var e=this;return t.map((function(t){return null!=e._signature&&null!=e._signature.outputs&&null!=e._signature.outputs[t]?e._signature.outputs[t].name:t}),{})}},{key:"checkOutputs",value:function(t){var e=this;t.forEach((function(t){var n=Object(h.g)(t),r=Object(l.a)(n,1)[0];if(!e.graph.nodes[r])throw new Error("The output '".concat(t,"' is not found in the graph"))}))}},{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(t){var e,n=Object.keys(t).map((function(e){return t[e].map((function(t){return t.id}))}));this._weightIds=(e=[]).concat.apply(e,Object(d.a)(n)),this._weightMap=t}},{key:"resourceManager",set:function(t){this._resourceManager=t}},{key:"inputs",get:function(){return this._inputs.map((function(t){return{name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(t){return{name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(t){return t.signatureKey||t.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(t){var e=t.signatureKey||t.name;return t.defaultOutput?"".concat(e,":").concat(t.defaultOutput):e}))}},{key:"functions",get:function(){var t=this;return Object.keys(this._functions).reduce((function(e,n){return e[n]=t._functions[n].signature,e}),{})}}]),t}(),mn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,t),this.hashTableNameToHandle=e,this.hashTableMap=n}return Object(u.a)(t,[{key:"addHashTable",value:function(t,e){this.hashTableNameToHandle[t]=e.handle,this.hashTableMap[e.id]=e}},{key:"getHashTableHandleByName",value:function(t){return this.hashTableNameToHandle[t]}},{key:"getHashTableById",value:function(t){return this.hashTableMap[t]}},{key:"dispose",value:function(){for(var t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(var e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}]),t}(),vn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(s.a)(this,t),this.modelUrl=e,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new mn}return Object(u.a)(t,[{key:"findIOHandler",value:function(){var t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=r.rd.browserHTTPRequest(t,this.loadOptions);else{var e=r.rd.getLoadHandlers(t,this.loadOptions);if(0===e.length)e.push(r.rd.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error("Found more than one (".concat(e.length,") load handlers for ")+"URL '".concat([t],"'"));this.handler=e[0]}}},{key:"load",value:function(){var t=Object(o.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.findIOHandler(),null!=this.handler.load){t.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return t.next=5,this.handler.load();case 5:return e=t.sent,t.abrupt("return",this.loadSync(e));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loadSync",value:function(t){this.artifacts=t;var e,n=this.artifacts.modelTopology;e=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=e,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var a=r.rd.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new fn(c.a.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,null!=t.modelInitializer&&null!=t.modelInitializer.node){var i=c.a.Instance.transformGraph(t.modelInitializer);this.initializer=new fn(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var t=Object(o.a)(i.a.mark((function t(e,n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=9;break}if(0!==(a=r.rd.getSaveHandlers(e)).length){t.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));case 6:if(!(a.length>1)){t.next=8;break}throw new Error("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(e,"'"));case 8:e=a[0];case 9:if(null!=e.save){t.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return t.abrupt("return",e.save(this.artifacts));case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"predict",value:function(t,e){return this.execute(t,this.outputNodes)}},{key:"normalizeInputs",value:function(t){if(!(t instanceof r.Sc)&&!Array.isArray(t))return t;if((t=Array.isArray(t)?t:[t]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(t.length," input tensors."));return this.inputNodes.reduce((function(e,n,r){return e[n]=t[r],e}),{})}},{key:"normalizeOutputs",value:function(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}},{key:"execute",value:function(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);var n=this.executor.execute(t,e);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var t=Object(o.a)(i.a.mark((function t(e,n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.normalizeInputs(e),n=this.normalizeOutputs(n),t.next=4,this.executor.executeAsync(e,n);case 4:return r=t.sent,t.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"convertTensorMapToTensorsMap",value:function(t){return Object.keys(t).reduce((function(e,n){return e[n]=[t[n]],e}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}},{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}}]),t}();function bn(t){return gn.apply(this,arguments)}function gn(){return(gn=Object(o.a)(i.a.mark((function t(e){var n,r,a=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=e){t.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e="".concat(e).concat("model.json").concat("?tfjs-format=file")),r=new vn(e,n),t.next=8,r.load();case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var yn=function(){return(yn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function xn(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))}function On(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function wn(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))}function _n(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var Tn=function(t){return{startEndTensor:t,startPoint:Object(r.Ad)(t,[0,0],[-1,2]),endPoint:Object(r.Ad)(t,[0,2],[-1,2])}},En={strides:[8,16],anchors:[2,6]};function kn(t,e){var n,a,i;if(t.topLeft instanceof r.Sc&&t.bottomRight instanceof r.Sc){var o=Object(r.Jd)((function(){return[Object(r.id)([Object(r.Ad)(Object(r.Ed)(e-1,t.topLeft),0,1),Object(r.Ad)(t.topLeft,1,1)]),Object(r.id)([Object(r.Ed)(e-1,Object(r.Ad)(t.bottomRight,0,1)),Object(r.Ad)(t.bottomRight,1,1)])]}));n=o[0],a=o[1],null!=t.landmarks&&(i=Object(r.Jd)((function(){var n=Object(r.Ed)(Object(r.Hd)([e-1,0]),t.landmarks),a=Object(r.Hd)([1,-1]);return Object(r.ud)(n,a)})))}else{var s=t.topLeft,u=s[0],c=s[1],d=t.bottomRight,l=d[0],h=d[1];n=[e-1-u,c],a=[e-1-l,h],null!=t.landmarks&&(i=t.landmarks.map((function(t){return[e-1-t[0],t[1]]})))}var p={topLeft:n,bottomRight:a};return null!=i&&(p.landmarks=i),null!=t.probability&&(p.probability=t.probability instanceof r.Sc?t.probability.clone():t.probability),p}function In(t,e){return Object(r.Jd)((function(){var n;return n=t.hasOwnProperty("box")?t.box:t,Object(r.Cd)(function(t,e){var n=Object(r.ud)(t.startPoint,e),a=Object(r.ud)(t.endPoint,e),i=Object(r.jd)([n,a],1);return Tn(i)}(n,e).startEndTensor)}))}var Sn=function(){function t(t,e,n,a,i,o){this.blazeFaceModel=t,this.width=e,this.height=n,this.maxFaces=a,this.anchorsData=function(t,e,n){for(var r=[],a=0;a<n.strides.length;a++)for(var i=n.strides[a],o=Math.floor((e+i-1)/i),s=Math.floor((t+i-1)/i),u=n.anchors[a],c=0;c<o;c++)for(var d=i*(c+.5),l=0;l<s;l++)for(var h=i*(l+.5),p=0;p<u;p++)r.push([h,d]);return r}(e,n,En),this.anchors=Object(r.Id)(this.anchorsData),this.inputSizeData=[e,n],this.inputSize=Object(r.Hd)([e,n]),this.iouThreshold=i,this.scoreThreshold=o}return t.prototype.getBoundingBoxes=function(t,e,n){return void 0===n&&(n=!0),wn(this,void 0,void 0,(function(){var a,i,o,s,u,c,d,l,h,p,f,m,v,b,g=this;return _n(this,(function(y){switch(y.label){case 0:return a=Object(r.Jd)((function(){var e=r.qd.resizeBilinear(t,[g.width,g.height]),n=Object(r.ud)(Object(r.Ed)(Object(r.ld)(e,255),.5),2),a=g.blazeFaceModel.predict(n),i=Object(r.Cd)(a),o=function(t,e,n){var a=Object(r.Ad)(t,[0,1],[-1,2]),i=Object(r.cd)(a,e),o=Object(r.Ad)(t,[0,3],[-1,2]),s=Object(r.ld)(o,n),u=Object(r.ld)(i,n),c=Object(r.ld)(s,2),d=Object(r.Ed)(u,c),l=Object(r.cd)(u,c),h=Object(r.ud)(d,n),p=Object(r.ud)(l,n);return Object(r.jd)([h,p],1)}(i,g.anchors,g.inputSize),s=Object(r.Ad)(i,[0,0],[-1,1]);return[i,o,Object(r.Cd)(Object(r.zd)(s))]})),i=a[0],o=a[1],s=a[2],u=console.warn,console.warn=function(){},c=r.qd.nonMaxSuppression(o,s,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=u,[4,c.array()];case 1:return d=y.sent(),c.dispose(),l=d.map((function(t){return Object(r.Ad)(o,[t,0],[1,-1])})),e?[3,3]:[4,Promise.all(l.map((function(t){return wn(g,void 0,void 0,(function(){var e;return _n(this,(function(n){switch(n.label){case 0:return[4,t.array()];case 1:return e=n.sent(),t.dispose(),[2,e]}}))}))})))];case 2:l=y.sent(),y.label=3;case 3:for(h=t.shape[1],p=t.shape[2],f=e?Object(r.ld)([p,h],this.inputSize):[p/this.inputSizeData[0],h/this.inputSizeData[1]],m=[],v=function(t){var a=l[t],o=Object(r.Jd)((function(){var o=Tn(a instanceof r.Sc?a:Object(r.Id)(a));if(!n)return o;var u,c=d[t];return u=e?Object(r.Ad)(g.anchors,[c,0],[1,2]):g.anchorsData[c],{box:o,landmarks:Object(r.xd)(Object(r.Cd)(Object(r.Ad)(i,[c,5],[1,-1])),[6,-1]),probability:Object(r.Ad)(s,[c],[1]),anchor:u}}));m.push(o)},b=0;b<l.length;b++)v(b);return o.dispose(),s.dispose(),i.dispose(),[2,{boxes:m,scaleFactor:f}]}}))}))},t.prototype.estimateFaces=function(t,e,n,a){return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===a&&(a=!0),wn(this,void 0,void 0,(function(){var i,o,s,u,c,d,l=this;return _n(this,(function(h){switch(h.label){case 0:return i=function(t){return t instanceof r.Sc?[t.shape[0],t.shape[1]]:[t.height,t.width]}(t),o=i[1],s=Object(r.Jd)((function(){return t instanceof r.Sc||(t=r.ed.fromPixels(t)),Object(r.od)(Object(r.gd)(t,"float32"),0)})),[4,this.getBoundingBoxes(s,e,a)];case 1:return u=h.sent(),c=u.boxes,d=u.scaleFactor,s.dispose(),e?[2,c.map((function(t){var e=In(t,d),i={topLeft:Object(r.Ad)(e,[0],[2]),bottomRight:Object(r.Ad)(e,[2],[2])};if(a){var s=t,u=s.landmarks,c=s.probability,l=s.anchor,h=Object(r.ud)(Object(r.cd)(u,l),d);i.landmarks=h,i.probability=c}return n&&(i=kn(i,o)),i}))]:[2,Promise.all(c.map((function(t){return wn(l,void 0,void 0,(function(){var e,r,i,s,u,c,l,h,p,f,m,v=this;return _n(this,(function(b){switch(b.label){case 0:return e=In(t,d),a?[3,2]:[4,e.array()];case 1:return u=b.sent(),r={topLeft:u.slice(0,2),bottomRight:u.slice(2)},[3,4];case 2:return[4,Promise.all([t.landmarks,e,t.probability].map((function(t){return wn(v,void 0,void 0,(function(){return _n(this,(function(e){return[2,t.array()]}))}))})))];case 3:i=b.sent(),s=i[0],u=i[1],c=i[2],l=t.anchor,p=(h=d)[0],f=h[1],m=s.map((function(t){return[(t[0]+l[0])*p,(t[1]+l[1])*f]})),r={topLeft:u.slice(0,2),bottomRight:u.slice(2),landmarks:m,probability:c},function(t){t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose()}(t.box),t.landmarks.dispose(),t.probability.dispose(),b.label=4;case 4:return e.dispose(),n&&(r=kn(r,o)),[2,r]}}))}))})))]}}))}))},t}();function Cn(t){var e=void 0===t?{}:t,n=e.maxFaces,r=void 0===n?10:n,a=e.inputWidth,i=void 0===a?128:a,o=e.inputHeight,s=void 0===o?128:o,u=e.iouThreshold,c=void 0===u?.3:u,d=e.scoreThreshold,l=void 0===d?.75:d,h=e.modelUrl;return wn(this,void 0,void 0,(function(){var t;return _n(this,(function(e){switch(e.label){case 0:return null==h?[3,2]:[4,bn(h)];case 1:return t=e.sent(),[3,4];case 2:return[4,bn("/gender-generator/tfjs-blazeface_1_default_1",{fromTFHub:!0})];case 3:t=e.sent(),e.label=4;case 4:return[2,new Sn(t,i,s,r,c,l)]}}))}))}var Nn={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function jn(t){return[Math.abs(t.endPoint[0]-t.startPoint[0]),Math.abs(t.endPoint[1]-t.startPoint[1])]}function An(t){return[t.startPoint[0]+(t.endPoint[0]-t.startPoint[0])/2,t.startPoint[1]+(t.endPoint[1]-t.startPoint[1])/2]}function Rn(t,e){void 0===e&&(e=1.5);var n=An(t),r=jn(t),a=[e*r[0]/2,e*r[1]/2];return{startPoint:[n[0]-a[0],n[1]-a[1]],endPoint:[n[0]+a[0],n[1]+a[1]],landmarks:t.landmarks}}function Mn(t){var e=An(t),n=jn(t),r=Math.max.apply(Math,n)/2;return{startPoint:[e[0]-r,e[1]-r],endPoint:[e[0]+r,e[1]+r],landmarks:t.landmarks}}var Pn=[[1,0,0],[0,1,0],[0,0,1]];function Dn(t,e){return[[1,0,t],[0,1,e],[0,0,1]]}function Fn(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function Ln(t,e){for(var n=[],r=0;r<t.length;r++)n.push(t[r][e]);return n}function Bn(t,e){for(var n=[],r=t.length,a=0;a<r;a++){n.push([]);for(var i=0;i<r;i++)n[a].push(Fn(t[a],Ln(e,i)))}return n}function Un(t,e){var n=Math.cos(t),r=Math.sin(t),a=[[n,-r,0],[r,n,0],[0,0,1]],i=Bn(Dn(e[0],e[1]),a);return Bn(i,Dn(-e[0],-e[1]))}var zn=[13,Nn.midwayBetweenEyes[0]],Vn=[3,2],Wn=Nn.leftEyeLower0,Gn=[Wn[0],Wn[Wn.length-1]],Hn=Nn.rightEyeLower0,Xn=[Hn[0],Hn[Hn.length-1]],Yn=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}];function qn(t,e,n,r){for(var a=0;a<Yn.length;a++){var i=Yn[a],o=i.key,s=i.indices,u=Nn[""+n+o];if(null==r||r.includes(o))for(var c=0;c<s.length;c++){var d=s[c];t[u[c]]=[e[d][0],e[d][1],(e[d][2]+t[u[c]][2])/2]}}}var Kn=function(){function t(t,e,n,r,a,i,o){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=t,this.meshDetector=e,this.irisModel=o,this.meshWidth=n,this.meshHeight=r,this.maxContinuousChecks=a,this.maxFaces=i}return t.prototype.transformRawCoords=function(t,e,n,r){var a,i,o,s,u=this,c=jn({startPoint:e.startPoint,endPoint:e.endPoint}),d=[c[0]/this.meshWidth,c[1]/this.meshHeight],l=t.map((function(t){return[d[0]*(t[0]-u.meshWidth/2),d[1]*(t[1]-u.meshHeight/2),t[2]]})),h=Un(n,[0,0]),p=l.map((function(t){return function(t,e){return[Fn(t,e[0]),Fn(t,e[1])]}(t,h).concat([t[2]])})),f=(i=[[(a=r)[0][0],a[1][0]],[a[0][1],a[1][1]]],o=[a[0][2],a[1][2]],s=[-Fn(i[0],o),-Fn(i[1],o)],[i[0].concat(s[0]),i[1].concat(s[1]),[0,0,1]]),m=An({startPoint:e.startPoint,endPoint:e.endPoint}).concat([1]),v=[Fn(m,f[0]),Fn(m,f[1])];return p.map((function(t){return[t[0]+v[0],t[1]+v[1],t[2]]}))},t.prototype.getLeftToRightEyeDepthDifference=function(t){return t[Gn[0]][2]-t[Xn[0]][2]},t.prototype.getEyeBox=function(t,e,n,a,i){void 0===i&&(i=!1);var o=Mn(Rn(this.calculateLandmarksBoundingBox([t[n],t[a]]),2.3)),s=jn(o),u=r.qd.cropAndResize(e,[[o.startPoint[1]/this.meshHeight,o.startPoint[0]/this.meshWidth,o.endPoint[1]/this.meshHeight,o.endPoint[0]/this.meshWidth]],[0],[64,64]);return i&&(u=r.qd.flipLeftRight(u)),{box:o,boxSize:s,crop:u}},t.prototype.getEyeCoords=function(t,e,n,r){void 0===r&&(r=!1);for(var a=[],i=0;i<76;i++){var o=t[3*i],s=t[3*i+1],u=t[3*i+2];a.push([(r?1-o/64:o/64)*n[0]+e.startPoint[0],s/64*n[1]+e.startPoint[1],u])}return{rawCoords:a,iris:a.slice(71)}},t.prototype.getAdjustedIrisCoords=function(t,e,n){var r=t[Nn[n+"EyeUpper0"][3]][2],a=t[Nn[n+"EyeLower0"][4]][2],i=(r+a)/2;return e.map((function(t,e){var n=i;return 2===e?n=r:4===e&&(n=a),[t[0],t[1],n]}))},t.prototype.predict=function(t,e){return xn(this,void 0,void 0,(function(){var n,a,i,o,s=this;return On(this,(function(u){switch(u.label){case 0:return this.shouldUpdateRegionsOfInterest()?[4,this.boundingBoxDetector.getBoundingBoxes(t,!1,!0)]:[3,2];case 1:return n=u.sent(),a=n.boxes,i=n.scaleFactor,0===a.length?(this.regionsOfInterest=[],[2,null]):(o=a.map((function(t){var e,n,a={startPoint:Object(r.Cd)(t.box.startPoint).arraySync(),endPoint:Object(r.Cd)(t.box.endPoint).arraySync()},o=Mn(Rn((n=i,{startPoint:[(e=a).startPoint[0]*n[0],e.startPoint[1]*n[1]],endPoint:[e.endPoint[0]*n[0],e.endPoint[1]*n[1]]})));return yn({},o,{landmarks:t.landmarks.arraySync()})})),a.forEach((function(t){null!=t&&null!=t.startPoint&&(t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose())})),this.updateRegionsOfInterest(o),this.runsWithoutFaceDetector=0,[3,3]);case 2:this.runsWithoutFaceDetector++,u.label=3;case 3:return[2,Object(r.Jd)((function(){return s.regionsOfInterest.map((function(n,a){var i,o=n.landmarks.length>=468,u=zn[0],c=zn[1];!1===o&&(u=Vn[0],c=Vn[1]),i=function(t,e){var n;return(n=Math.PI/2-Math.atan2(-(e[1]-t[1]),e[0]-t[0]))-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}(n.landmarks[u],n.landmarks[c]);var d=An({startPoint:n.startPoint,endPoint:n.endPoint}),l=[d[0]/t.shape[2],d[1]/t.shape[1]],h=t,p=Pn;0!==i&&(h=r.qd.rotateWithOffset(t,i,0,l),p=Un(-i,d));var f={startPoint:n.startPoint,endPoint:n.endPoint},m=Object(r.ld)(function(t,e,n){var a=e.shape[1],i=e.shape[2],o=[[t.startPoint[1]/a,t.startPoint[0]/i,t.endPoint[1]/a,t.endPoint[0]/i]];return r.qd.cropAndResize(e,o,[0],n,"bilinear",0)}(f,h,[s.meshHeight,s.meshWidth]),255),v=s.meshDetector.predict(m),b=v[1],g=v[2],y=Object(r.xd)(g,[-1,3]).arraySync();if(e){var x=s.getEyeBox(y,m,Gn[0],Gn[1],!0),O=x.box,w=x.boxSize,_=x.crop,T=s.getEyeBox(y,m,Xn[0],Xn[1]),E=T.box,k=T.boxSize,I=T.crop,S=s.irisModel.predict(Object(r.id)([_,I])).dataSync(),C=S.slice(0,228),N=s.getEyeCoords(C,O,w,!0),j=N.rawCoords,A=N.iris,R=S.slice(228),M=s.getEyeCoords(R,E,k),P=M.rawCoords,D=M.iris,F=s.getLeftToRightEyeDepthDifference(y);Math.abs(F)<30?(qn(y,j,"left"),qn(y,P,"right")):F<1?qn(y,j,"left",["EyeUpper0","EyeLower0"]):qn(y,P,"right",["EyeUpper0","EyeLower0"]);var L=s.getAdjustedIrisCoords(y,A,"left"),B=s.getAdjustedIrisCoords(y,D,"right");y=y.concat(L).concat(B)}var U=s.transformRawCoords(y,n,i,p),z=Object(r.Id)(U),V=Rn(s.calculateLandmarksBoundingBox(U)),W=Mn(V);return s.regionsOfInterest[a]=yn({},W,{landmarks:z.arraySync()}),{coords:Object(r.Id)(y,[y.length,3]),scaledCoords:z,box:V,flag:Object(r.Cd)(b)}}))}))]}}))}))},t.prototype.updateRegionsOfInterest=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=this.regionsOfInterest[e],a=0;if(r&&r.startPoint){var i=n.startPoint,o=i[0],s=i[1],u=n.endPoint,c=u[0],d=u[1],l=r.startPoint,h=l[0],p=l[1],f=r.endPoint,m=f[0],v=f[1],b=Math.max(o,h),g=Math.max(s,p),y=(Math.min(c,m)-b)*(Math.min(d,v)-g);a=y/((c-o)*(d-s)+(m-h)*(v-s)-y)}a<.25&&(this.regionsOfInterest[e]=n)}this.regionsOfInterest=this.regionsOfInterest.slice(0,t.length)},t.prototype.clearRegionOfInterest=function(t){null!=this.regionsOfInterest[t]&&(this.regionsOfInterest=this.regionsOfInterest.slice(0,t).concat(this.regionsOfInterest.slice(t+1)))},t.prototype.shouldUpdateRegionsOfInterest=function(){var t=this.regionsOfInterest.length,e=0===t;return 1===this.maxFaces||e?e:t!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks},t.prototype.calculateLandmarksBoundingBox=function(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{startPoint:[Math.min.apply(Math,e),Math.min.apply(Math,n)],endPoint:[Math.max.apply(Math,e),Math.max.apply(Math,n)]}},t}(),Zn=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]];function Jn(t){return xn(this,void 0,void 0,(function(){var e,n,r,a,i,o,s,u,c,d,l,h,p,f,m,v;return On(this,(function(b){switch(b.label){case 0:return e=t.maxContinuousChecks,n=void 0===e?5:e,r=t.detectionConfidence,a=void 0===r?.9:r,i=t.maxFaces,o=void 0===i?10:i,s=t.iouThreshold,u=void 0===s?.3:s,c=t.scoreThreshold,d=void 0===c?.75:c,l=t.shouldLoadIrisModel,h=void 0===l||l,p=t.modelUrl,f=t.detectorModelUrl,m=t.irisModelUrl,h?[4,Promise.all([Qn(f,o,u,d),$n(p),tr(m)])]:[3,2];case 1:return v=b.sent(),[3,4];case 2:return[4,Promise.all([Qn(f,o,u,d),$n(p)])];case 3:v=b.sent(),b.label=4;case 4:return[2,new rr(v[0],v[1],n,a,o,h?v[2]:null)]}}))}))}function Qn(t,e,n,r){return xn(this,void 0,void 0,(function(){return On(this,(function(a){return[2,Cn({modelUrl:t,maxFaces:e,iouThreshold:n,scoreThreshold:r})]}))}))}function $n(t){return xn(this,void 0,void 0,(function(){return On(this,(function(e){return null!=t?[2,bn(t)]:[2,bn("https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",{fromTFHub:!0})]}))}))}function tr(t){return xn(this,void 0,void 0,(function(){return On(this,(function(e){return null!=t?[2,bn(t)]:[2,bn("https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2",{fromTFHub:!0})]}))}))}function er(t,e){if(t.mesh instanceof r.Sc){var n=Object(r.Jd)((function(){var n=Object(r.Hd)([e-1,0,0]),a=Object(r.Hd)([1,-1,1]);return Object(r.Jd)((function(){return[Object(r.id)([Object(r.Ed)(e-1,Object(r.Ad)(t.boundingBox.topLeft,0,1)),Object(r.Ad)(t.boundingBox.topLeft,1,1)]),Object(r.id)([Object(r.Ed)(e-1,Object(r.Ad)(t.boundingBox.bottomRight,0,1)),Object(r.Ad)(t.boundingBox.bottomRight,1,1)]),Object(r.ud)(Object(r.Ed)(n,t.mesh),a),Object(r.ud)(Object(r.Ed)(n,t.scaledMesh),a)]}))})),a=n[0],i=n[1],o=n[2],s=n[3];return Object.assign({},t,{boundingBox:{topLeft:a,bottomRight:i},mesh:o,scaledMesh:s})}return Object.assign({},t,{boundingBox:{topLeft:[e-1-t.boundingBox.topLeft[0],t.boundingBox.topLeft[1]],bottomRight:[e-1-t.boundingBox.bottomRight[0],t.boundingBox.bottomRight[1]]},mesh:t.mesh.map((function(t){var n=t.slice(0);return n[0]=e-1-t[0],n})),scaledMesh:t.scaledMesh.map((function(t){var n=t.slice(0);return n[0]=e-1-t[0],n}))})}var nr,rr=function(){function t(t,e,n,r,a,i){this.kind="MediaPipeFaceMesh",this.pipeline=new Kn(t,e,192,192,n,a,i),this.detectionConfidence=r}return t.getAnnotations=function(){return Nn},t.getUVCoords=function(){return Zn},t.prototype.estimateFaces=function(t){return xn(this,void 0,void 0,(function(){var e,n,a,i,o,s,u,c,d,l,h,p,f=this;return On(this,(function(m){switch(m.label){case 0:if(e=t.returnTensors,n=void 0!==e&&e,a=t.flipHorizontal,i=void 0!==a&&a,o=t.predictIrises,s=void 0===o||o,u=t.input,s&&null==this.pipeline.irisModel)throw new Error("The iris model was not loaded as part of facemesh. Please initialize the model with facemesh.load({shouldLoadIrisModel: true}).");return c=function(t){return t instanceof r.Sc?[t.shape[0],t.shape[1]]:[t.height,t.width]}(u),d=c[1],l=Object(r.Jd)((function(){return u instanceof r.Sc||(u=r.ed.fromPixels(u)),Object(r.od)(Object(r.gd)(u,"float32"),0)})),"webgl"!==Object(r.pd)()?[3,2]:(p=Object(r.nd)().get("WEBGL_PACK_DEPTHWISECONV"),Object(r.nd)().set("WEBGL_PACK_DEPTHWISECONV",!0),[4,this.pipeline.predict(l,s)]);case 1:return h=m.sent(),Object(r.nd)().set("WEBGL_PACK_DEPTHWISECONV",p),[3,4];case 2:return[4,this.pipeline.predict(l,s)];case 3:h=m.sent(),m.label=4;case 4:return l.dispose(),null!=h&&h.length>0?[2,Promise.all(h.map((function(t,e){return xn(f,void 0,void 0,(function(){var a,o,u,c,l,h,p,f,m,v,b,g,y,x,O=this;return On(this,(function(w){switch(w.label){case 0:return a=t.coords,o=t.scaledCoords,u=t.box,c=t.flag,l=[c],n||(l=l.concat([a,o])),[4,Promise.all(l.map((function(t){return xn(O,void 0,void 0,(function(){return On(this,(function(e){return[2,t.array()]}))}))})))];case 1:if(h=w.sent(),p=h[0],c.dispose(),p<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(e),n)return f={kind:"MediaPipePredictionTensors",faceInViewConfidence:p,mesh:a,scaledMesh:o,boundingBox:{topLeft:Object(r.Hd)(u.startPoint),bottomRight:Object(r.Hd)(u.endPoint)}},i?[2,er(f,d)]:[2,f];for(x in m=h.slice(1),v=m[0],b=m[1],o.dispose(),a.dispose(),g={kind:"MediaPipePredictionValues",faceInViewConfidence:p,boundingBox:{topLeft:u.startPoint,bottomRight:u.endPoint},mesh:v,scaledMesh:b},i&&(g=er(g,d)),y={},Nn)(s||!1===x.includes("Iris"))&&(y[x]=Nn[x].map((function(t){return g.scaledMesh[t]})));return g.annotations=y,[2,g]}}))}))})))]:[2,[]]}}))}))},t}();function ar(t,e){return void 0===t&&(t=nr.mediapipeFacemesh),void 0===e&&(e={}),xn(this,void 0,void 0,(function(){return On(this,(function(n){if(t===nr.mediapipeFacemesh)return[2,Jn(e)];throw new Error(t+" is not a valid package name.")}))}))}(nr||(nr={})).mediapipeFacemesh="mediapipe-facemesh"},,function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,a="~";function i(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,i){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||t,i),u=a?a+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0===--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(a=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=a?a+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},c.prototype.listenerCount=function(t){var e=a?a+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,c,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,e),!0;case 3:return d.fn.call(d.context,e,n),!0;case 4:return d.fn.call(d.context,e,n,r),!0;case 5:return d.fn.call(d.context,e,n,r,i),!0;case 6:return d.fn.call(d.context,e,n,r,i,o),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];d.fn.apply(d.context,u)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(t,d[c].fn,void 0,!0),l){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,e);break;case 3:d[c].fn.call(d[c].context,e,n);break;case 4:d[c].fn.call(d[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];d[c].fn.apply(d[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=a?a+t:t;if(!this._events[i])return this;if(!e)return u(this,i),this;var o=this._events[i];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||u(this,i);else{for(var s=0,c=[],d=o.length;s<d;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&c.push(o[s]);c.length?this._events[i]=1===c.length?c[0]:c:u(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&u(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=a,c.EventEmitter=c,t.exports=c},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,s,u,c,d,p,f,v=e&&e.length,b=v?e[0]*n:t.length,g=a(t,0,b,n,!0),y=[];if(!g||g.next===g.prev)return y;if(v&&(g=function(t,e,n,r){var o,s,u,c,d,p=[];for(o=0,s=e.length;o<s;o++)u=e[o]*r,c=o<s-1?e[o+1]*r:t.length,(d=a(t,u,c,r,!1))===d.next&&(d.steiner=!0),p.push(m(d));for(p.sort(l),o=0;o<p.length;o++)h(p[o],n),n=i(n,n.next);return n}(t,e,g,n)),t.length>80*n){r=u=t[0],s=c=t[1];for(var x=n;x<b;x+=n)(d=t[x])<r&&(r=d),(p=t[x+1])<s&&(s=p),d>u&&(u=d),p>c&&(c=p);f=0!==(f=Math.max(u-r,c-s))?1/f:0}return o(g,y,n,r,s,f),y}function a(t,e,n,r,a){var i,o;if(a===S(t,e,n,r)>0)for(i=e;i<n;i+=r)o=E(i,t[i],t[i+1],o);else for(i=n-r;i>=e;i-=r)o=E(i,t[i],t[i+1],o);return o&&y(o,o.next)&&(k(o),o=o.next),o}function i(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(k(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function o(t,e,n,r,a,l,h){if(t){!h&&l&&function(t,e,n,r){var a=t;do{null===a.z&&(a.z=f(a.x,a.y,e,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,function(t){var e,n,r,a,i,o,s,u,c=1;do{for(n=t,t=null,i=null,o=0;n;){for(o++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,u--),i?i.nextZ=a:t=a,a.prevZ=i,i=a;n=r}i.nextZ=null,c*=2}while(o>1)}(a)}(t,r,a,l);for(var p,m,v=t;t.prev!==t.next;)if(p=t.prev,m=t.next,l?u(t,r,a,l):s(t))e.push(p.i/n),e.push(t.i/n),e.push(m.i/n),k(t),t=m.next,v=m.next;else if((t=m)===v){h?1===h?o(t=c(i(t),e,n),e,n,r,a,l,2):2===h&&d(t,e,n,r,a,l):o(i(t),e,n,r,a,l,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(g(e,n,r)>=0)return!1;for(var a=t.next.next;a!==t.prev;){if(v(e.x,e.y,n.x,n.y,r.x,r.y,a.x,a.y)&&g(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function u(t,e,n,r){var a=t.prev,i=t,o=t.next;if(g(a,i,o)>=0)return!1;for(var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,u=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,c=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,d=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,l=f(s,u,e,n,r),h=f(c,d,e,n,r),p=t.prevZ,m=t.nextZ;p&&p.z>=l&&m&&m.z<=h;){if(p!==t.prev&&p!==t.next&&v(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==t.prev&&m!==t.next&&v(a.x,a.y,i.x,i.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&v(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=h;){if(m!==t.prev&&m!==t.next&&v(a.x,a.y,i.x,i.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(t,e,n){var r=t;do{var a=r.prev,o=r.next.next;!y(a,o)&&x(a,r,r.next,o)&&_(a,o)&&_(o,a)&&(e.push(a.i/n),e.push(r.i/n),e.push(o.i/n),k(r),k(r.next),r=t=o),r=r.next}while(r!==t);return i(r)}function d(t,e,n,r,a,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&b(u,c)){var d=T(u,c);return u=i(u,u.next),d=i(d,d.next),o(u,e,n,r,a,s),void o(d,e,n,r,a,s)}c=c.next}u=u.next}while(u!==t)}function l(t,e){return t.x-e.x}function h(t,e){if(e=function(t,e){var n,r=e,a=t.x,i=t.y,o=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(a===o)return n;var u,c=n,d=n.x,l=n.y,h=1/0;r=n;do{a>=r.x&&r.x>=d&&a!==r.x&&v(i<l?a:o,i,d,l,i<l?o:a,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(a-r.x),_(r,t)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&p(n,r)))&&(n=r,h=u)),r=r.next}while(r!==c);return n}(t,e)){var n=T(e,t);i(e,e.next),i(n,n.next)}}function p(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function f(t,e,n,r,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*a)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*a)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function v(t,e,n,r,a,i,o,s){return(a-o)*(e-s)-(t-o)*(i-s)>=0&&(t-o)*(r-s)-(n-o)*(e-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&x(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(_(t,e)&&_(e,t)&&function(t,e){var n=t,r=!1,a=(t.x+e.x)/2,i=(t.y+e.y)/2;do{n.y>i!==n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||y(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,n,r){var a=w(g(t,e,n)),i=w(g(t,e,r)),o=w(g(n,r,t)),s=w(g(n,r,e));return a!==i&&o!==s||(!(0!==a||!O(t,n,e))||(!(0!==i||!O(t,r,e))||(!(0!==o||!O(n,t,r))||!(0!==s||!O(n,e,r)))))}function O(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w(t){return t>0?1:t<0?-1:0}function _(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function T(t,e){var n=new I(t.i,t.x,t.y),r=new I(e.i,e.x,e.y),a=t.next,i=e.prev;return t.next=e,e.prev=t,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function E(t,e,n,r){var a=new I(t,e,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(t,e,n,r){for(var a=0,i=e,o=n-r;i<n;i+=r)a+=(t[o]-t[i])*(t[i+1]+t[o+1]),o=i;return a}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var a=e&&e.length,i=a?e[0]*n:t.length,o=Math.abs(S(t,0,i,n));if(a)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,d=s<u-1?e[s+1]*n:t.length;o-=Math.abs(S(t,c,d,n))}var l=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,f=r[s+2]*n;l+=Math.abs((t[h]-t[f])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[f+1]-t[h+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,a=0;a<t.length;a++){for(var i=0;i<t[a].length;i++)for(var o=0;o<e;o++)n.vertices.push(t[a][i][o]);a>0&&(r+=t[a-1].length,n.holes.push(r))}return n}},function(t,e,n){"use strict";(function(t){var r=n(359),a=n(360),i=n(361);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,n),a=(t=s(t,r)).write(e,n);a!==r&&(t=t.slice(0,a));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function d(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(d(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function f(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return S(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,a){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(a)return-1;n=t.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,a);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,a);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,a){var i,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(a){var d=-1;for(i=n;i<s;i++)if(c(t,i)===c(e,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===u)return d*o}else-1!==d&&(i-=i-d),d=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){for(var l=!0,h=0;h<u;h++)if(c(t,i+h)!==c(e,h)){l=!1;break}if(l)return i}return-1}function y(t,e,n,r){n=Number(n)||0;var a=t.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function x(t,e,n,r){return V(U(e,t.length-n),t,n,r)}function O(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return O(t,e,n,r)}function _(t,e,n,r){return V(z(e),t,n,r)}function T(t,e,n,r){return V(function(t,e){for(var n,r,a,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,a=n%256,i.push(a),i.push(r);return i}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],a=e;a<n;){var i,o,s,u,c=t[a],d=null,l=c>239?4:c>223?3:c>191?2:1;if(a+l<=n)switch(l){case 1:c<128&&(d=c);break;case 2:128===(192&(i=t[a+1]))&&(u=(31&c)<<6|63&i)>127&&(d=u);break;case 3:i=t[a+1],o=t[a+2],128===(192&i)&&128===(192&o)&&(u=(15&c)<<12|(63&i)<<6|63&o)>2047&&(u<55296||u>57343)&&(d=u);break;case 4:i=t[a+1],o=t[a+2],s=t[a+3],128===(192&i)&&128===(192&o)&&128===(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(d=u)}null===d?(d=65533,l=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),a+=l}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return d(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,a=0,i=Math.min(n,r);a<i;++a)if(t[a]!==e[a]){n=t[a],r=e[a];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),a=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,a){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),e<0||n>t.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&e>=n)return 0;if(r>=a)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(i,o),c=this.slice(r,a),d=t.slice(e,n),l=0;l<s;++l)if(c[l]!==d[l]){i=c[l],o=d[l];break}return i<o?-1:o<i?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-e;if((void 0===n||n>a)&&(n=a),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return O(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(t,e,n){var r="";n=Math.min(t.length,n);for(var a=e;a<n;++a)r+=String.fromCharCode(127&t[a]);return r}function S(t,e,n){var r="";n=Math.min(t.length,n);for(var a=e;a<n;++a)r+=String.fromCharCode(t[a]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=e;i<n;++i)a+=B(t[i]);return a}function N(t,e,n){for(var r=t.slice(e,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function j(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function A(t,e,n,r,a,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r){e<0&&(e=65535+e+1);for(var a=0,i=Math.min(t.length-n,2);a<i;++a)t[n+a]=(e&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function M(t,e,n,r){e<0&&(e=4294967295+e+1);for(var a=0,i=Math.min(t.length-n,4);a<i;++a)t[n+a]=e>>>8*(r?a:3-a)&255}function P(t,e,n,r,a,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,i){return i||P(t,0,n,4),a.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return i||P(t,0,n,8),a.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var a=e-t;n=new u(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],a=1,i=0;++i<e&&(a*=256);)r+=this[t+i]*a;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],a=1;e>0&&(a*=256);)r+=this[t+--e]*a;return r},u.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],a=1,i=0;++i<e&&(a*=256);)r+=this[t+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=e,a=1,i=this[t+--r];r>0&&(a*=256);)i+=this[t+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),a.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),a.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),a.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),a.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||A(this,t,e,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[e]=255&t;++i<n&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||A(this,t,e,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[e+a]=255&t;--a>=0&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var a=Math.pow(2,8*n-1);A(this,t,e,n,a-1,-a)}var i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var a=Math.pow(2,8*n-1);A(this,t,e,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||A(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var a,i=r-n;if(this===t&&n<e&&e<r)for(a=i-1;a>=0;--a)t[a+e]=this[a+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(i=e;i<n;++i)this[i]=t;else{var o=u.isBuffer(t)?t:U(new u(t,r).toString()),s=o.length;for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,a=null,i=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(e-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(L,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function V(t,e,n,r){for(var a=0;a<r&&!(a+n>=e.length||a>=t.length);++a)e[a+n]=t[a];return a}}).call(this,n(91))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({sigmoid_:function(t){var e={x:Object(i.a)(t,"x","sigmoid")};return r.a.runKernel(a.xc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({addN_:function(t){o.b(Array.isArray(t),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),o.b(t.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(t.length)}));var e=t.map((function(t,e){return Object(i.a)(t,"tensors".concat(e),"addN")})),n=e[0];e.forEach((function(t){if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),e.forEach((function(t){if(!o.a(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var s=e;return r.a.runKernel(a.e,s)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(4);var c=Object(u.a)({mod_:function(t,e){var n=Object(s.a)(t,"a","mod"),u=Object(s.a)(e,"b","mod"),c=Object(o.b)(n,u),d=Object(r.a)(c,2),l={a:n=d[0],b:u=d[1]};return a.a.runKernel(i.Qb,l)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(6),a=n(23),i=n(2),o=n(52),s=n(145),u=n(4),c=n(78),d=n(96);var l=Object(u.a)({divNoNan_:function(t,e){var n=Object(i.a)(t,"a","div"),u=Object(i.a)(e,"b","div"),l=Object(a.b)(n,u),h=Object(r.a)(l,2);n=h[0],u=h[1];var p=Object(o.a)(n,u),f=Object(d.a)(p),m=Object(s.a)(u,f);return Object(c.a)(m,f,p)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(31),c=n(33),d=n(4);var l=Object(d.a)({maximum_:function(t,e){var n=Object(s.a)(t,"a","maximum"),d=Object(s.a)(e,"b","maximum"),l=Object(o.b)(n,d),h=Object(r.a)(l,2);n=h[0],d=h[1],"bool"===n.dtype&&(n=Object(c.a)(n,"int32"),d=Object(c.a)(d,"int32")),Object(u.a)(n.shape,d.shape);var p={a:n,b:d};return a.a.runKernel(i.Lb,p)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({acos_:function(t){var e={x:Object(i.a)(t,"x","acos")};return r.a.runKernel(a.b,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({acosh_:function(t){var e={x:Object(i.a)(t,"x","acosh")};return r.a.runKernel(a.c,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({asin_:function(t){var e={x:Object(i.a)(t,"x","asin")};return r.a.runKernel(a.j,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({asinh_:function(t){var e={x:Object(i.a)(t,"x","asinh")};return r.a.runKernel(a.k,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({atan_:function(t){var e={x:Object(i.a)(t,"x","atan")};return r.a.runKernel(a.l,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(4);var c=Object(u.a)({atan2_:function(t,e){var n=Object(s.a)(t,"a","atan2"),u=Object(s.a)(e,"b","atan2"),c=Object(o.b)(n,u),d=Object(r.a)(c,2),l={a:n=d[0],b:u=d[1]};return a.a.runKernel(i.m,l)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({atanh_:function(t){var e={x:Object(i.a)(t,"x","atanh")};return r.a.runKernel(a.n,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({ceil_:function(t){var e={x:Object(i.a)(t,"x","ceil")};return r.a.runKernel(a.w,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({cos_:function(t){var e={x:Object(i.a)(t,"x","cos")};return r.a.runKernel(a.H,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({cosh_:function(t){var e={x:Object(i.a)(t,"x","cosh")};return r.a.runKernel(a.I,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(33),u=n(4);var c=Object(u.a)({erf_:function(t){var e=Object(i.a)(t,"x","erf");o.b("int32"===e.dtype||"float32"===e.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===e.dtype&&(e=Object(s.a)(e,"float32"));var n={x:e};return r.a.runKernel(a.X,n)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({expm1_:function(t){var e={x:Object(i.a)(t,"x","expm1")};return r.a.runKernel(a.ab,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({floor_:function(t){var e={x:Object(i.a)(t,"x","floor")};return r.a.runKernel(a.eb,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({reciprocal_:function(t){var e={x:Object(i.a)(t,"x","reciprocal")};return r.a.runKernel(a.ic,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({round_:function(t){var e={x:Object(i.a)(t,"x","round")};return r.a.runKernel(a.sc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({selu_:function(t){var e={x:Object(i.a)(t,"x","selu")};return r.a.runKernel(a.wc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({sin_:function(t){var e={x:Object(i.a)(t,"x","sin")};return r.a.runKernel(a.zc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({sign_:function(t){var e={x:Object(i.a)(t,"x","sign")};return r.a.runKernel(a.yc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({sinh_:function(t){var e={x:Object(i.a)(t,"x","sinh")};return r.a.runKernel(a.Ac,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({softplus_:function(t){var e={x:Object(i.a)(t,"x","softplus")};return r.a.runKernel(a.Dc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({tanh_:function(t){var e={x:Object(i.a)(t,"x","tanh")};return r.a.runKernel(a.Pc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({tan_:function(t){var e={x:Object(i.a)(t,"x","tan")};return r.a.runKernel(a.Oc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({clipByValue_:function(t,e,n){var s=Object(i.a)(t,"x","clipByValue");o.b(e<=n,(function(){return"Error in clip: min (".concat(e,") must be ")+"less than or equal to max (".concat(n,").")}));var u={x:s},c={clipValueMin:e,clipValueMax:n};return r.a.runKernel(a.x,u,c)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({rsqrt_:function(t){var e={x:Object(i.a)(t,"x","rsqrt")};return r.a.runKernel(a.tc,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(33),s=n(4);var u=Object(s.a)({prod_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Object(i.a)(t,"x","prod");"bool"===s.dtype&&(s=Object(o.a)(s,"int32"));var u={x:s},c={axis:e,keepDims:n};return r.a.runKernel(a.ec,u,c)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(2),a=n(9),i=n(99),o=n(44),s=n(4),u=n(15);var c=Object(s.a)({conv1d_:function(t,e,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6?arguments[6]:void 0,h=Object(r.a)(t,"x","conv1d"),p=Object(r.a)(e,"filter","conv1d"),f=h,m=!1;2===h.rank&&(m=!0,f=Object(u.a)(h,[1,h.shape[0],h.shape[1]])),a.b(3===f.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(f.rank,".")})),a.b(3===p.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(p.rank,".")})),null!=l&&a.b(a.v(s),(function(){return"Error in conv1d: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")})),a.b(f.shape[2]===p.shape[1],(function(){return"Error in conv1d: depth of input (".concat(f.shape[2],") must match ")+"input depth for filter ".concat(p.shape[1],".")})),a.b(o.h(n,d),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(d,"'")})),a.b("NWC"===c,(function(){return"Error in conv1d: got dataFormat of ".concat(c," but only NWC is currently supported.")}));var v=Object(u.a)(p,[1,p.shape[0],p.shape[1],p.shape[2]]),b=Object(u.a)(f,[f.shape[0],1,f.shape[1],f.shape[2]]),g=[1,n],y=[1,d],x="NHWC",O=Object(i.a)(b,v,g,s,x,y,l);return m?Object(u.a)(O,[O.shape[2],O.shape[3]]):Object(u.a)(O,[O.shape[0],O.shape[2],O.shape[3]])}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2),a=n(149),i=n(4);var o=Object(i.a)({conv2dTranspose_:function(t,e,n,i,o,s){var u=Object(r.a)(t,"x","conv2dTranspose"),c=Object(r.a)(e,"filter","conv2dTranspose");return Object(a.a)(n,u,c,i,o,"NHWC",s)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(44),u=n(4),c=n(15);var d=Object(u.a)({conv3d_:function(t,e,n,u){var d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],h=Object(i.a)(t,"x","conv3d"),p=Object(i.a)(e,"filter","conv3d"),f=h,m=!1;4===h.rank&&(m=!0,f=Object(c.a)(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]])),o.b(5===f.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(f.rank,".")})),o.b(5===p.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(p.rank,".")})),o.b(f.shape[4]===p.shape[3],(function(){return"Error in conv3d: depth of input (".concat(f.shape[4],") must match ")+"input depth for filter ".concat(p.shape[3],".")})),o.b(Object(s.h)(n,l),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(l,"'")})),o.b("NDHWC"===d,(function(){return"Error in conv3d: got dataFormat of ".concat(d," but only NDHWC is currently supported.")}));var v={x:f,filter:p},b={strides:n,pad:u,dataFormat:d,dilations:l},g=r.a.runKernel(a.E,v,b);return m?Object(c.a)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(33),u=n(44),c=n(4),d=n(15);var l=Object(c.a)({avgPool_:function(t,e,n,c,l){var h=Object(i.a)(t,"x","avgPool","float32");o.b(u.h(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var p=h,f=!1;3===h.rank&&(f=!0,p=Object(d.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.b(4===p.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(p.rank,".")})),null!=l&&o.b(o.v(c),(function(){return"Error in avgPool: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(c,".")}));var m={x:p},v={filterSize:e,strides:n,pad:c,dimRoundingMode:l},b=r.a.runKernel(a.o,m,v);return b=Object(s.a)(b,h.dtype),f?Object(d.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(44),u=n(4),c=n(15);var d=Object(u.a)({maxPool_:function(t,e,n,u,d){var l=Object(i.a)(t,"x","maxPool"),h=l,p=!1;3===l.rank&&(p=!0,h=Object(c.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),o.b(4===h.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(h.rank,".")})),o.b(s.h(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),null!=d&&o.b(o.v(u),(function(){return"Error in maxPool: pad must be an integer when using, "+"dimRoundingMode ".concat(d," but got pad ").concat(u,".")}));var f={x:h},m={filterSize:e,strides:n,pad:u,dimRoundingMode:d},v=r.a.runKernel(a.Gb,f,m);return p?Object(c.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({maxPoolWithArgmax_:function(t,e,n,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=Object(i.a)(t,"x","maxPoolWithArgmax"),c={x:u},d={filterSize:e,strides:n,pad:o,includeBatchInIndex:s},l=r.a.runKernel(a.Kb,c,d);return{result:l[0],indexes:l[1]}}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(33),u=n(4),c=n(15);var d=Object(u.a)({avgPool3d_:function(t,e,n,u,d){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",h=Object(i.a)(t,"x","avgPool3d","float32"),p=h,f=!1;4===h.rank&&(f=!0,p=Object(c.a)(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]])),o.b(5===p.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(p.rank,".")})),o.b("NDHWC"===l,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(l)})),null!=d&&o.b(o.v(u),(function(){return"Error in avgPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(d," but got pad ").concat(u,".")}));var m={x:p},v={filterSize:e,strides:n,pad:u,dimRoundingMode:d,dataFormat:l},b=r.a.runKernel(a.p,m,v);return b=Object(s.a)(b,p.dtype),f?Object(c.a)(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4),u=n(15);var c=Object(s.a)({maxPool3d_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",l=Object(i.a)(t,"x","maxPool3d"),h=l,p=!1;4===l.rank&&(p=!0,h=Object(u.a)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),o.b(5===h.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(h.rank,".")})),o.b("NDHWC"===d,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(d)})),null!=c&&o.b(o.v(s),(function(){return"Error in maxPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(c," but got pad ").concat(s,".")}));var f={x:h},m={filterSize:e,strides:n,pad:s,dimRoundingMode:c,dataFormat:d},v=r.a.runKernel(a.Hb,f,m);return p?Object(u.a)(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4),u=n(15);var c=Object(s.a)({dilation2d_:function(t,e,n,s){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",l=Object(i.a)(t,"x","dilation2d"),h=Object(i.a)(e,"filter","dilation2d");o.b(3===l.rank||4===l.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(l.rank,".")})),o.b(3===h.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(h.rank,".")})),o.b("NHWC"===d,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(d)}));var p=l,f=!1;3===l.rank&&(p=Object(u.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=!0);var m={x:p,filter:h},v={strides:n,pad:s,dilations:c},b=r.a.runKernel(a.R,m,v);return f?Object(u.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3),a=n(5);function i(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");var i={start:t,stop:e,num:n};return r.a.runKernel(a.zb,{},i)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(4),s=n(15);var u=Object(o.a)({multinomial_:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=Object(i.a)(t,"logits","multinomial"),c=u.size,d=u.rank;if(c<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(c,"."));if(d>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(d));n=n||Math.random();var l=1===d?Object(s.a)(u,[1,-1]):u,h={logits:l},p={numSamples:e,seed:n,normalized:o},f=r.a.runKernel(a.Rb,h,p);return 1===d?Object(s.a)(f,[f.size]):f}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({oneHot_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(e));var s=Object(i.a)(t,"indices","oneHot","int32"),u={indices:s},c={depth:e,onValue:n,offValue:o};return r.a.runKernel(a.Yb,u,c)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({onesLike_:function(t){var e={x:Object(i.a)(t,"x","onesLike")};return r.a.runKernel(a.Zb,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(57),a=n(4),i=n(153);var o=Object(a.a)({randomUniform_:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0,s=Object(r.a)(t,a),u=new i.b(e,n,null,o),c=0;c<s.values.length;c++)s.values[c]=u.nextValue();return s.toTensor()}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(57),a=n(4),i=n(153);var o=Object(a.a)({truncatedNormal_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");for(var s=new i.a(e,n,a,!0,o),u=Object(r.a)(t,a),c=0;c<u.values.length;c++)u.values[c]=s.nextValue();return u.toTensor()}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(10),a=n.n(r),i=n(17),o=n(144),s=n(2);function u(){return(u=Object(i.a)(a.a.mark((function t(e){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(s.a)(e,"condition","whereAsync","bool"),t.next=3,n.data();case 3:return r=t.sent,i=Object(o.a)(n.shape,r),e!==n&&n.dispose(),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var c=function(t){return u.apply(this,arguments)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(10),a=n.n(r),i=n(17),o=n(30),s=n(2),u=n(9);function c(){return(c=Object(i.a)(a.a.mark((function t(e,n){var r,i,c,d,l,h,p,f,m,v,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(s.a)(e,"x","setdiff1d"),i=Object(s.a)(n,"y","setdiff1d"),u.b(r.dtype===i.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(i.dtype,").")})),u.b(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),u.b(1===i.rank,(function(){return"y should be 1D tensor, but got y (".concat(i.shape,").")})),t.next=7,r.data();case 7:return c=t.sent,t.next=10,i.data();case 10:for(d=t.sent,l=new Set(d),h=0,p=0;p<c.length;p++)l.has(c[p])||h++;for(f=new o.b([h],r.dtype),m=new o.b([h],"int32"),v=0,b=0;v<c.length;v++)l.has(c[v])||(f.values[b]=c[v],m.values[b]=v,b++);return t.abrupt("return",[f.toTensor(),m.toTensor()]);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var d=function(t,e){return c.apply(this,arguments)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(6),a=n(3),i=n(5),o=n(2),s=n(4);var u=Object(s.a)({topk_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Object(o.a)(t,"x","topk");if(0===s.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var u=s.shape[s.shape.length-1];if(e>u)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(u,") ")+"but got ".concat(e));var c={x:s},d={k:e,sorted:n},l=a.a.runKernel(i.Rc,c,d),h=Object(r.a)(l,2),p=h[0],f=h[1];return{values:p,indices:f}}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(6),a=n(3),i=n(5),o=n(2),s=n(9),u=n(4);var c=Object(u.a)({unique_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(o.a)(t,"x","unique","string_or_numeric");Object(s.b)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var u={x:n},c={axis:e},d=a.a.runKernel(i.Tc,u,c),l=Object(r.a)(d,2),h=l[0],p=l[1];return{values:h,indices:p}}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(6),a=n(3),i=n(5),o=n(23),s=n(2),u=n(31),c=n(4);var d=Object(c.a)({less_:function(t,e){var n=Object(s.a)(t,"a","less"),c=Object(s.a)(e,"b","less"),d=Object(o.b)(n,c),l=Object(r.a)(d,2);n=l[0],c=l[1],Object(u.a)(n.shape,c.shape);var h={a:n,b:c};return a.a.runKernel(i.xb,h)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({logicalNot_:function(t){var e={x:Object(i.a)(t,"x","logicalNot","bool")};return r.a.runKernel(a.Db,e)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(31),s=n(4);var u=Object(s.a)({logicalOr_:function(t,e){var n=Object(i.a)(t,"a","logicalOr","bool"),s=Object(i.a)(e,"b","logicalOr","bool");Object(o.a)(n.shape,s.shape);var u={a:n,b:s};return r.a.runKernel(a.Eb,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4),u=n(15);var c=Object(s.a)({localResponseNormalization_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,d=Object(i.a)(t,"x","localResponseNormalization");o.b(4===d.rank||3===d.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(d.rank,".")})),o.b(o.v(e),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(e,".")}));var l=d,h=!1;3===d.rank&&(h=!0,l=Object(u.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]]));var p={x:l},f={depthRadius:e,bias:n,alpha:s,beta:c},m=r.a.runKernel(a.ub,p,f);return h?Object(u.a)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({softmax_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Object(i.a)(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(e));var o={logits:n},s={dim:e};return r.a.runKernel(a.Cc,o,s)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(6),a=n(42),i=n(2),o=n(33),s=n(61),u=n(74),c=n(69),d=n(28),l=n(4),h=n(27),p=n(34);var f=Object(l.a)({logSoftmax_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Object(i.a)(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(e));var l=Object(a.a)((function(t,n){var a=Object(c.a)(t,e,!0),i=Object(h.a)(t,a),l=Object(h.a)(Object(o.a)(i,"float32"),Object(u.a)(Object(p.a)(Object(s.a)(i),e,!0)));n([l]);return{value:l,gradFunc:function(t,n){var a=Object(r.a)(n,1)[0],i=Object(s.a)(a);return Object(h.a)(t,Object(d.a)(Object(p.a)(t,e,!0),i))}}}));return l(n)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({all_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(t,"x","all","bool"),s={x:o},u={axis:e,keepDims:n};return r.a.runKernel(a.f,s,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({any_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(t,"x","any","bool"),s={x:o},u={axis:e,keepDims:n};return r.a.runKernel(a.g,s,u)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({argMax_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(t,"x","argMax"),o={x:n},s={axis:e};return r.a.runKernel(a.h,o,s)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({argMin_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(t,"x","argMin"),o={x:n},s={axis:e};return r.a.runKernel(a.i,o,s)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({cumsum_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=Object(i.a)(t,"x","cumsum"),u={x:s},c={axis:e,exclusive:n,reverse:o};return r.a.runKernel(a.K,u,c)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({bincount_:function(t,e,n){var s=Object(i.a)(t,"x","bincount"),u=Object(i.a)(e,"weights","bincount");o.b("int32"===s.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(s.dtype)})),o.b(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.b(u.size===s.size||0===u.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(s.shape,", weights shape: ")+"".concat(u.shape,".")}));var c={x:s,weights:u},d={size:n};return r.a.runKernel(a.u,c,d)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({denseBincount_:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=Object(i.a)(t,"x","denseBincount"),c=Object(i.a)(e,"weights","denseBincount");o.b("int32"===u.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(u.dtype)})),o.b(u.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(u.rank,".")})),o.b(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.b(c.size===u.size||0===c.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(u.shape,", weights shape: ")+"".concat(c.shape,".")}));var d={x:u,weights:c},l={size:n,binaryOutput:s};return r.a.runKernel(a.L,d,l)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({gather_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=Object(i.a)(t,"x","gather"),u=Object(i.a)(e,"indices","gather","int32"),c={x:s,indices:u},d={axis:n,batchDims:o};return r.a.runKernel(a.lb,c,d)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({stridedSlice_:function(t,e,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=Object(i.a)(t,"x","stridedSlice"),p={x:h},f={begin:e,end:n,strides:o,beginMask:s,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:l};return r.a.runKernel(a.Lc,p,f)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(4),s=n(92);var u=Object(o.a)({scatterND_:function(t,e,n){var o=Object(i.a)(t,"indices","scatterND","int32"),u=Object(i.a)(e,"updates","scatterND");s.b(u,o,n);var c={indices:o,updates:u},d={shape:n};return r.a.runKernel(a.uc,c,d)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({gatherND_:function(t,e){var n=Object(i.a)(e,"indices","gatherND","int32"),o={params:Object(i.a)(t,"x","gatherND"),indices:n};return r.a.runKernel(a.kb,o)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({mirrorPad_:function(t,e,n){o.b("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var s=Object(i.a)(t,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.b(e.length===s.rank,(function(){return"Padding doesn't match input. Must be ".concat(s.rank,". ")+"Got ".concat(e.length,".")}));for(var u="reflect"===n?1:0,c=function(t){o.b(2===e[t].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),o.b(e[t][0]>=0&&e[t][0]<=s.shape[t]-u&&e[t][1]>=0&&e[t][1]<=s.shape[t]-u,(function(){return"Padding in dimension ".concat(t," cannot be greater than or equal ")+"to ".concat(s.shape[t]-u," or less than 0 for input of ")+"shape ".concat(s.shape)}))},d=0;d<s.rank;d++)c(d);var l={paddings:e,mode:n},h={x:s};return r.a.runKernel(a.Pb,h,l)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),a=n(5),i=n(2),o=n(4);var s=Object(o.a)({pad_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(i.a)(t,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:e,constantValue:n},u={x:o};return r.a.runKernel(a.bc,u,s)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({spaceToBatchND_:function(t,e,n){var s=Object(i.a)(t,"x","spaceToBatchND");o.b(s.rank>=1+e.length,(function(){return"input rank ".concat(s.rank," should be > than [blockShape] ").concat(e.length)})),o.b(n.length===e.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(e.length)})),o.b(s.shape.reduce((function(t,r,a){return a>0&&a<=e.length?t&&(r+n[a-1][0]+n[a-1][1])%e[a-1]===0:t}),!0),(function(){return"input spatial dimensions ".concat(s.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(e.toString())}));var u={x:s},c={blockShape:e,paddings:n};return r.a.runKernel(a.Ec,u,c)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({batchToSpaceND_:function(t,e,n){var s=Object(i.a)(t,"x","batchToSpaceND"),u=e.reduce((function(t,e){return t*e}));o.b(s.rank>=1+e.length,(function(){return"input rank is ".concat(s.rank," but should be > than blockShape.length ").concat(e.length)})),o.b(n.length===e.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(e.length)})),o.b(s.shape[0]%u===0,(function(){return"input tensor batch is ".concat(s.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(e.join(" * ")," === ").concat(u)}));var c={x:s},d={blockShape:e,crops:n};return r.a.runKernel(a.t,c,d)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(4);var u=Object(s.a)({depthToSpace_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",s=Object(i.a)(t,"x","depthToSpace"),u="NHWC"===n?s.shape[1]:s.shape[2],c="NHWC"===n?s.shape[2]:s.shape[3],d="NHWC"===n?s.shape[3]:s.shape[1];o.b(u*e>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(u," and ").concat(e,"  for depthToSpace with input shape\n    ").concat(s.shape)})),o.b(c*e>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(c," and ").concat(e," for depthToSpace with input shape\n        ").concat(s.shape)})),o.b(d%(e*e)===0,(function(){return"Dimension size must be evenly divisible by ".concat(e*e," but is ").concat(d," for depthToSpace with input shape ").concat(s.shape)}));var l={x:s},h={blockSize:e,dataFormat:n};return r.a.runKernel(a.M,l,h)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a.a})),n.d(e,"b",(function(){return i.a})),n.d(e,"c",(function(){return o.a})),n.d(e,"d",(function(){return s.a})),n.d(e,"e",(function(){return u.a})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return l.a})),n.d(e,"h",(function(){return h.a})),n.d(e,"k",(function(){return p.a})),n.d(e,"l",(function(){return f.a})),n.d(e,"m",(function(){return m.a})),n.d(e,"n",(function(){return v.a})),n.d(e,"o",(function(){return b.a})),n.d(e,"p",(function(){return g.a})),n.d(e,"q",(function(){return y.a})),n.d(e,"r",(function(){return x.a})),n.d(e,"s",(function(){return O.a})),n.d(e,"t",(function(){return w.a})),n.d(e,"u",(function(){return k})),n.d(e,"v",(function(){return I.a})),n.d(e,"w",(function(){return S.a})),n.d(e,"j",(function(){return ce})),n.d(e,"i",(function(){return r}));var r={};n.r(r),n.d(r,"conv2d",(function(){return G})),n.d(r,"depthwiseConv2d",(function(){return q})),n.d(r,"matMul",(function(){return Z}));var a=n(43),i=n(57),o=n(33),s=n(60),u=n(49),c=n(4);var d=Object(c.a)({concat2d_:function(t,e){return Object(u.a)(t,e)}}),l=n(52),h=n(75),p=n(28),f=n(15),m=n(32),v=n(163),b=n(39),g=n(122),y=n(73),x=n(27),O=n(101),w=n(63),_=n(2),T=n(9),E=n(68);function k(t,e,n){if(Object(T.d)(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Object(_.c)(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object(E.a)(t,e,r,n)}var I=n(93),S=n(77),C=n(95),N=n(94),j=n(86),A=n(123),R=n(6),M=n(3),P=n(42),D=n(5),F=n(23),L=n(31),B=n(99);var U=Object(c.a)({conv2DBackpropFilter_:function(t,e,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=t;3===t.rank&&(s=Object(f.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var u=e;3===u.rank&&(u=Object(f.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]])),T.b(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),T.b(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),T.b(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],d="NHWC"===i?u.shape[3]:u.shape[1];T.b(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),T.b(d===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(d,") must ")+"match output depth for filter (".concat(n[3],").")})),null!=o&&T.b(T.v(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(a,".")}));var l={x:s,dy:u},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return M.a.runKernel(D.C,l,h)}}),z=n(149),V=n(44),W=n(47);var G=Object(c.a)({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,s=void 0===o?"NHWC":o,u=t.dilations,c=void 0===u?[1,1]:u,d=t.dimRoundingMode,l=t.bias,h=t.activation,p=void 0===h?"linear":h,m=t.preluActivationWeights,v=t.leakyreluAlpha;if(p=p||"linear",!1===Object(W.d)(M.a.state.gradientDepth,p)){var b=Object(B.a)(e,n,r,i,s,c,d);return null!=l&&(b=Object(a.a)(b,l)),Object(W.a)(b,p,m,v)}var g=Object(_.a)(e,"x","conv2d"),y=Object(_.a)(n,"filter","conv2d"),x=g,O=!1;3===g.rank&&(O=!0,x=Object(f.a)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),T.b(4===x.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(x.rank,".")})),T.b(4===y.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(y.rank,".")})),null!=d&&T.b(T.v(i),(function(){return"Error in fused conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(d," but got pad ").concat(i,".")})),T.b(x.shape[3]===y.shape[2],(function(){return"Error in conv2d: depth of input (".concat(x.shape[3],") must match ")+"input depth for filter ".concat(y.shape[2],".")})),T.b(V.h(r,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(c,"'")})),T.b("NHWC"===s,(function(){return"Error in conv2d: got dataFormat of ".concat(s," but only NHWC is currently supported.")}));var w,E,k=V.a(x.shape,y.shape,r,c,i,d);if(null!=l){w=Object(_.a)(l,"bias","fused conv2d");var I=Object(F.b)(w,g);w=Object(R.a)(I,1)[0],L.a(k.outShape,w.shape)}null!=m&&(E=Object(_.a)(m,"prelu weights","fused conv2d"));var S=function(t,e){var n=Object(R.a)(e,4),a=n[0],o=n[1],s=n[2],u=n[3],d=Object(W.c)(t,s,p);T.b(V.i(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(c,"'")}));var l=[Object(z.a)(o.shape,d,a,r,i),U(o,d,a.shape,r,i)];if(null!=u){var h=Object(W.b)(u,d);l.push(h)}return l},C={x:x,filter:y,bias:w,preluActivationWeights:E},N={strides:r,pad:i,dataFormat:s,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:v};return null==l?Object(P.a)((function(t,e,n){var r=M.a.runKernel(D.ib,C,N);return n([e,t,r]),O&&(r=Object(f.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:S}}))(x,y):Object(P.a)((function(t,e,n,r){var a=M.a.runKernel(D.ib,C,N);return r([e,t,a,n]),O&&(a=Object(f.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:S}}))(x,y,w)}}),H=n(142);var X=Object(c.a)({depthwiseConv2dNativeBackpropFilter_:function(t,e,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t;3===t.rank&&(s=Object(f.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var u=e;3===u.rank&&(u=Object(f.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var c={x:s,dy:u},d={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return M.a.runKernel(D.O,c,d)}});var Y=Object(c.a)({depthwiseConv2dNativeBackpropInput_:function(t,e,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e,u=!1;3===e.rank&&(u=!0,s=Object(f.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var c={dy:s,filter:n},d={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:t},l=M.a.runKernel(D.P,c,d);return u?Object(f.a)(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var q=Object(c.a)({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,s=void 0===o?"NHWC":o,u=t.dilations,c=void 0===u?[1,1]:u,d=t.dimRoundingMode,l=t.bias,h=t.activation,p=void 0===h?"linear":h,m=t.preluActivationWeights,v=t.leakyreluAlpha;if(!1===Object(W.d)(M.a.state.gradientDepth,p)){var b=Object(H.a)(e,n,r,i,s,c,d);return null!=l&&(b=Object(a.a)(b,l)),Object(W.a)(b,p,m,v)}var g=Object(_.a)(e,"x","depthwiseConv2d"),y=Object(_.a)(n,"filter","depthwiseConv2d"),x=g,O=!1;3===g.rank&&(O=!0,x=Object(f.a)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),T.b(4===x.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(x.rank,".")})),T.b(4===y.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(y.rank,".")})),T.b(x.shape[3]===y.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(x.shape[3],") must match the inChannels dimension in ")+"filter ".concat(y.shape[2],".")})),null==c&&(c=[1,1]),T.b(V.h(r,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(c,"'")})),null!=d&&T.b(T.v(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when "+"using dimRoundingMode ".concat(d," but got pad ").concat(i,".")}));var w,E,k=V.a(x.shape,y.shape,r,c,i,d,!0);if(null!=l){w=Object(_.a)(l,"bias","fused conv2d");var I=Object(F.b)(w,g),S=Object(R.a)(I,1);w=S[0],L.a(k.outShape,w.shape)}null!=m&&(E=Object(_.a)(m,"prelu weights","fused depthwiseConv2d"));var C=function(t,e){T.b(V.i(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(c,"'")}));var n=Object(R.a)(e,4),a=n[0],o=n[1],s=n[2],u=n[3],l=Object(W.c)(t,s,p),h=Y(o.shape,l,a,r,i,c,d),f=X(o,l,a.shape,r,i,c,d);return null!=u?[h,f,Object(W.b)(w,l)]:[h,f]},N={x:x,filter:y,bias:w,preluActivationWeights:E},j={strides:r,pad:i,dataFormat:s,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:v};return null==l?Object(P.a)((function(t,e,n){var r=M.a.runKernel(D.jb,N,j);return n([e,t,r]),O&&(r=Object(f.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}))(x,y):Object(P.a)((function(t,e,n,r){var a=M.a.runKernel(D.jb,N,j);return r([e,t,a,n]),O&&(a=Object(f.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}))(x,y,w)}}),K=n(40);var Z=Object(c.a)({fusedMatMul_:function(t){var e=t.a,n=t.b,r=t.transposeA,i=void 0!==r&&r,o=t.transposeB,s=void 0!==o&&o,u=t.bias,c=t.activation,d=void 0===c?"linear":c,l=t.preluActivationWeights,h=t.leakyreluAlpha;if(!1===Object(W.d)(M.a.state.gradientDepth,d)){var p=Object(K.a)(e,n,i,s);return null!=u&&(p=Object(a.a)(p,u)),Object(W.a)(p,d,l,h)}var m=Object(_.a)(e,"a","fused matMul"),v=Object(_.a)(n,"b","fused matMul"),b=Object(F.b)(m,v),g=Object(R.a)(b,2);m=g[0],v=g[1];var y=i?m.shape[m.rank-2]:m.shape[m.rank-1],x=s?v.shape[v.rank-1]:v.shape[v.rank-2],O=i?m.shape[m.rank-1]:m.shape[m.rank-2],w=s?v.shape[v.rank-2]:v.shape[v.rank-1],E=m.shape.slice(0,-2),k=v.shape.slice(0,-2),I=T.O(E),S=T.O(k);T.b(m.rank>=2&&v.rank>=2&&m.rank===v.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at "+"least 2, got ranks ".concat(m.rank," and ").concat(v.rank,".")})),T.b(T.a(E,k),(function(){return"Error in fused matMul: outer dimensions (".concat(E,") and (")+"".concat(k,") of Tensors with shapes ").concat(m.shape," and ")+"".concat(v.shape," must match.")})),T.b(y===x,(function(){return"Error in fused matMul: inner shapes (".concat(y,") and (")+"".concat(x,") of Tensors with shapes ").concat(m.shape," and ")+"".concat(v.shape," and transposeA=").concat(i)+" and transposeB=".concat(s," must match.")}));var C,N,j=m.shape.slice(0,-2).concat([O,w]),A=i?Object(f.a)(m,[I,y,O]):Object(f.a)(m,[I,O,y]),B=s?Object(f.a)(v,[S,w,x]):Object(f.a)(v,[S,x,w]);if(null!=u){C=Object(_.a)(u,"bias","fused matMul");var U=Object(F.b)(C,m);C=Object(R.a)(U,1)[0],L.a(j,C.shape)}null!=l&&(N=Object(_.a)(l,"prelu weights","fused matMul"));var z=function(t,e){var n,r,a=Object(R.a)(e,4),o=a[0],c=a[1],l=a[2],h=a[3],p=Object(W.c)(Object(f.a)(t,l.shape),l,d);return i||s?!i&&s?(n=Object(K.a)(p,c,!1,!1),r=Object(K.a)(p,o,!0,!1)):i&&!s?(n=Object(K.a)(c,p,!1,!0),r=Object(K.a)(o,p,!1,!1)):(n=Object(K.a)(c,p,!0,!0),r=Object(K.a)(p,o,!0,!0)):(n=Object(K.a)(p,c,!1,!0),r=Object(K.a)(o,p,!0,!1)),null!=u?[n,r,Object(W.b)(h,p)]:[n,r]},V={a:A,b:B,bias:C,preluActivationWeights:N},G={transposeA:i,transposeB:s,activation:d,leakyreluAlpha:h};return null==u?Object(P.a)((function(t,e,n){var r=M.a.runKernel(D.Xc,V,G);return n([t,e,r]),{value:Object(f.a)(r,j),gradFunc:z}}))(A,B):Object(P.a)((function(t,e,n,r){var a=M.a.runKernel(D.Xc,V,G);return r([t,e,a,n]),{value:Object(f.a)(a,j),gradFunc:z}}))(A,B,C)}});function J(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function Q(t,e,n){for(var r=1-t%2,a=new Float32Array(t),i=0;i<t;++i){var o=2*Math.PI*i/(t+r-1);a[i]=e-n*Math.cos(o)}return Object(w.a)(a,"float32")}Object(c.a)({hammingWindow_:function(t){return Q(t,.54,.46)}});var $=Object(c.a)({hannWindow_:function(t){return Q(t,.5,.5)}}),tt=n(124);var et=Object(c.a)({frame_:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+e<=t.size;)o.push(Object(b.a)(t,i,e)),i+=n;if(r)for(;i<t.size;){var s=i+e-t.size,c=Object(u.a)([Object(b.a)(t,i,e-s),Object(tt.a)([s],a)]);o.push(c),i+=n}return 0===o.length?k([],[0,e]):Object(f.a)(Object(u.a)(o),[o.length,e])}});Object(c.a)({stft_:function(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$;null==r&&(r=J(e));for(var i=et(t,e,n),o=Object(p.a)(i,a(e)),s=[],c=0;c<i.shape[0];c++)s.push(Object(C.a)(Object(b.a)(o,[c,0],[1,e]),r));return Object(u.a)(s)}});var nt=Object(c.a)({cropAndResize_:function(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Object(_.a)(t,"image","cropAndResize"),s=Object(_.a)(e,"boxes","cropAndResize","float32"),u=Object(_.a)(n,"boxInd","cropAndResize","int32"),c=s.shape[0];T.b(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),T.b(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),T.b(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),T.b(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),T.b(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),T.b("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var d={image:o,boxes:s,boxInd:u},l={method:a,extrapolationValue:i,cropSize:r},h=M.a.runKernel(D.J,d,l);return h}});var rt=Object(c.a)({flipLeftRight_:function(t){var e=Object(_.a)(t,"image","flipLeftRight","float32");T.b(4===e.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(e.rank,".")}));var n={image:e};return M.a.runKernel(D.db,n,{})}});var at=Object(c.a)({rotateWithOffset_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Object(_.a)(t,"image","rotateWithOffset","float32");T.b(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:e,fillValue:n,center:r},s=M.a.runKernel(D.rc,i,o);return s}});function it(t,e,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=t.shape[0];return n=Math.min(n,o),T.b(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),T.b(2===t.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(t.rank,"'")})),T.b(4===t.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(t.shape[1])})),T.b(1===e.rank,(function(){return"scores must be a 1D tensor"})),T.b(e.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(e.shape[0])})),T.b(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var ot=Object(c.a)({nonMaxSuppression_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Object(_.a)(t,"boxes","nonMaxSuppression"),o=Object(_.a)(e,"scores","nonMaxSuppression"),s=it(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return M.a.runKernel(D.Ub,{boxes:i,scores:o},u)}}),st=n(10),ut=n.n(st),ct=n(17),dt=n(66);function lt(){return(lt=Object(ct.a)(ut.a.mark((function t(e,n,r){var a,i,o,s,u,c,d,l,h,p,f=arguments;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:.5,i=f.length>4&&void 0!==f[4]?f[4]:Number.NEGATIVE_INFINITY,o=Object(_.a)(e,"boxes","nonMaxSuppressionAsync"),s=Object(_.a)(n,"scores","nonMaxSuppressionAsync"),u=it(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,t.next=10,Promise.all([o.data(),s.data()]);case 10:return c=t.sent,d=c[0],l=c[1],h=Object(dt.a)(d,l,r,a,i),p=h.selectedIndices,o!==e&&o.dispose(),s!==n&&s.dispose(),t.abrupt("return",Object(w.a)(p,"int32"));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ht=function(t,e,n){return lt.apply(this,arguments)};var pt=Object(c.a)({nonMaxSuppressionWithScore_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Object(_.a)(t,"boxes","nonMaxSuppression"),s=Object(_.a)(e,"scores","nonMaxSuppression"),u=it(o,s,n,r,a,i),c={boxes:o,scores:s},d={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},l=M.a.runKernel(D.Wb,c,d);return{selectedIndices:l[0],selectedScores:l[1]}}});function ft(){return(ft=Object(ct.a)(ut.a.mark((function t(e,n,r){var a,i,o,s,u,c,d,l,h,p,f,m,v=arguments;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,o=v.length>5&&void 0!==v[5]?v[5]:0,s=Object(_.a)(e,"boxes","nonMaxSuppressionAsync"),u=Object(_.a)(n,"scores","nonMaxSuppressionAsync"),c=it(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,t.next=12,Promise.all([s.data(),u.data()]);case 12:return d=t.sent,l=d[0],h=d[1],p=Object(dt.c)(l,h,r,a,i,o),f=p.selectedIndices,m=p.selectedScores,s!==e&&s.dispose(),u!==n&&u.dispose(),t.abrupt("return",{selectedIndices:Object(w.a)(f,"int32"),selectedScores:Object(w.a)(m)});case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var mt=function(t,e,n){return ft.apply(this,arguments)};var vt=Object(c.a)({nonMaxSuppressionPadded_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Object(_.a)(t,"boxes","nonMaxSuppression"),s=Object(_.a)(e,"scores","nonMaxSuppression"),u=it(o,s,n,r,a,null),c=u.maxOutputSize,d=u.iouThreshold,l=u.scoreThreshold,h={boxes:o,scores:s},p={maxOutputSize:c,iouThreshold:d,scoreThreshold:l,padToMaxOutputSize:i},f=M.a.runKernel(D.Vb,h,p);return{selectedIndices:f[0],validOutputs:f[1]}}});function bt(){return(bt=Object(ct.a)(ut.a.mark((function t(e,n,r){var a,i,o,s,u,c,d,l,h,p,f,v,b,g,y,x,O=arguments;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=O.length>3&&void 0!==O[3]?O[3]:.5,i=O.length>4&&void 0!==O[4]?O[4]:Number.NEGATIVE_INFINITY,o=O.length>5&&void 0!==O[5]&&O[5],s=Object(_.a)(e,"boxes","nonMaxSuppressionAsync"),u=Object(_.a)(n,"scores","nonMaxSuppressionAsync"),c=it(s,u,r,a,i,null),d=c.maxOutputSize,l=c.iouThreshold,h=c.scoreThreshold,t.next=11,Promise.all([s.data(),u.data()]);case 11:return p=t.sent,f=Object(R.a)(p,2),v=f[0],b=f[1],g=Object(dt.b)(v,b,d,l,h,o),y=g.selectedIndices,x=g.validOutputs,s!==e&&s.dispose(),u!==n&&u.dispose(),t.abrupt("return",{selectedIndices:Object(w.a)(y,"int32"),validOutputs:Object(m.a)(x,"int32")});case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var gt=function(t,e,n){return bt.apply(this,arguments)},yt=n(147),xt=n(146),Ot=n(81),wt=n(148);function _t(t){return Object(yt.a)(t)||Object(xt.a)(t)||Object(Ot.a)(t)||Object(wt.a)()}var Tt=Object(c.a)({resizeBilinear_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Object(_.a)(t,"images","resizeBilinear");T.b(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),T.b(2===e.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(e,".")})),T.b(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Object(f.a)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),_t(e);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},c=M.a.runKernel(D.mc,s,u);return o?Object(f.a)(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Et=Object(c.a)({resizeNearestNeighbor_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Object(_.a)(t,"images","resizeNearestNeighbor");T.b(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),T.b(2===e.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(e,".")})),T.b("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),T.b(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Object(f.a)(a,[1,a.shape[0],a.shape[1],a.shape[2]])),_t(e);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:e},c=M.a.runKernel(D.oc,s,u);return o?Object(f.a)(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),kt=n(127),It=n(126),St=n(125),Ct=n(108),Nt=n(78);Object(c.a)({bandPart_:function(t,e,n){Object(T.b)(e%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(e,".")})),Object(T.b)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Object(_.a)(t,"a","bandPart");Object(T.b)(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=Object(R.a)(i,2),s=o[0],u=o[1];if(!(e<=s))throw new Error("bandPart(): numLower (".concat(e,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=u))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(u,")."));e<0&&(e=s),n<0&&(n=u);var c=Object(f.a)(Object(Ct.a)(0,s,1,"int32"),[-1,1]),d=Object(Ct.a)(0,u,1,"int32"),l=Object(x.a)(c,d),h=Object(St.a)(Object(It.a)(l,Object(m.a)(+e,"int32")),Object(kt.a)(l,Object(m.a)(-n,"int32"))),p=Object(S.a)([s,u],r.dtype);return Object(f.a)(Object(y.a)(Object(I.a)(Object(f.a)(r,[-1,s,u])).map((function(t){return Object(Nt.a)(h,t,p)}))),a)}});var jt=n(51),At=n(79),Rt=n(69),Mt=n(110),Pt=n(128),Dt=n(111),Ft=n(98),Lt=n(34);function Bt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===t.rank)return Object(jt.a)(t);if(1!==t.rank&&null===n)return Bt(Object(f.a)(t,[-1]),e,n);if(1===t.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===e)return Object(Lt.a)(Object(jt.a)(t),n);if(e===1/0)return Object(Rt.a)(Object(jt.a)(t),n);if(e===-1/0)return Object(Mt.a)(Object(jt.a)(t),n);if("euclidean"===e||2===e)return Object(Dt.a)(Object(Lt.a)(Object(Pt.a)(Object(jt.a)(t),Object(m.a)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(e))}if(Array.isArray(n)&&2===n.length){if(1===e)return Object(Rt.a)(Object(Lt.a)(Object(jt.a)(t),n[0]),n[1]-1);if(e===1/0)return Object(Rt.a)(Object(Lt.a)(Object(jt.a)(t),n[1]),n[0]);if(e===-1/0)return Object(Mt.a)(Object(Lt.a)(Object(jt.a)(t),n[1]),n[0]);if("fro"===e||"euclidean"===e)return Object(Dt.a)(Object(Lt.a)(Object(Ft.a)(t),n));throw new Error("Error in norm: invalid ord value: ".concat(e))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Ut=Object(c.a)({norm_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Bt(t=Object(_.a)(t,"x","norm"),e,n),i=a.shape;if(r){var o=Object(T.I)(n,t.shape);i=At.e(a.shape,o)}return Object(f.a)(a,i)}}),zt=n(88);Object(c.a)({gramSchmidt_:function(t){var e;Array.isArray(t)?function(){e=!1,Object(T.b)(null!=t&&t.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=t[0].shape[0],r=function(e){Object(T.b)(t[e].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(t[e].shape[0]," vs. ").concat(n,")")}))},a=1;a<t.length;++a)r(a)}():(e=!0,t=Object(zt.a)(t,t.shape[0],0).map((function(t){return Object(g.a)(t,[0])}))),Object(T.b)(t.length<=t[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(t.length,") exceeds ")+"number of dimensions (".concat(t[0].shape[0],").")}));for(var n=[],r=t,a=function(t){n.push(M.a.tidy((function(){var e=r[t];if(t>0)for(var a=0;a<t;++a){var i=Object(p.a)(Object(Lt.a)(Object(p.a)(n[a],e)),n[a]);e=Object(x.a)(e,i)}return Object(l.a)(e,Ut(e,"euclidean"))})))},i=0;i<t.length;++i)a(i);return e?Object(y.a)(n,0):n}});var Vt=n(130),Wt=n(102);var Gt=Object(c.a)({eye_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==e&&(e=t);for(var a=Object(i.a)([t,e],r),o=t<=e?t:e,s=0;s<o;++s)a.set(1,s,s);var u=Object(f.a)(a.toTensor(),[t,e]);if(null==n)return u;if(1===n.length)return Object(Wt.a)(Object(h.a)(u,0),[n[0],1,1]);if(2===n.length)return Object(Wt.a)(Object(h.a)(Object(h.a)(u,0),0),[n[0],n[1],1,1]);if(3===n.length)return Object(Wt.a)(Object(h.a)(Object(h.a)(Object(h.a)(u,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),Ht=n(129),Xt=n(67),Yt=n(112);function qt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return M.a.tidy((function(){Object(T.b)(2===t.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(t.shape.length,"D Tensor.")}));for(var n=t.shape[0],r=t.shape[1],a=Gt(n),i=Object(s.a)(t),o=k([[1]],[1,1]),c=Object(s.a)(o),d=n>=r?r:n,h=function(t){var e=i,d=c,h=a,f=M.a.tidy((function(){var e=Object(b.a)(i,[t,t],[n-t,1]),d=Ut(e),h=Object(b.a)(i,[t,t],[1,1]),f=Object(Nt.a)(Object(Ht.a)(h,0),k([[-1]]),k([[1]])),m=Object(x.a)(h,Object(p.a)(f,d)),v=Object(l.a)(e,m);c=1===v.shape[0]?Object(s.a)(o):Object(u.a)([o,Object(b.a)(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);var g=Object(Xt.a)(Object(l.a)(Object(K.a)(f,m),d)),y=Object(b.a)(i,[t,0],[n-t,r]),O=Object(p.a)(g,c),w=Object(Yt.a)(c);if(0===t)i=Object(x.a)(y,Object(K.a)(O,Object(K.a)(w,y)));else{var _=Object(x.a)(y,Object(K.a)(O,Object(K.a)(w,y)));i=Object(u.a)([Object(b.a)(i,[0,0],[t,r]),_],0)}var T=Object(Yt.a)(O),E=Object(b.a)(a,[0,t],[n,a.shape[1]-t]);if(0===t)a=Object(x.a)(E,Object(K.a)(Object(K.a)(E,c),T));else{var I=Object(x.a)(E,Object(K.a)(Object(K.a)(E,c),T));a=Object(u.a)([Object(b.a)(a,[0,0],[n,t]),I],1)}return[c,i,a]})),m=Object(R.a)(f,3);c=m[0],i=m[1],a=m[2],Object(Vt.a)([e,d,h])},f=0;f<d;++f)h(f);return!e&&n>r&&(a=Object(b.a)(a,[0,0],[n,r]),i=Object(b.a)(i,[0,0],[r,r])),[a,i]}))}Object(c.a)({qr_:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Object(T.b)(t.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(t.rank)})),2===t.rank)return qt(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce((function(t,e){return t*e})),r=Object(I.a)(Object(f.a)(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),a=[],i=[];r.forEach((function(t){var n=qt(t,e),r=Object(R.a)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)}));var o=Object(f.a)(Object(y.a)(a,0),t.shape),s=Object(f.a)(Object(y.a)(i,0),t.shape);return[o,s]}});var Kt=n(36),Zt=n(131),Jt=n(133),Qt=n(132);var $t=Object(c.a)({computeWeightedLoss_:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kt.a.SUM_BY_NONZERO_WEIGHTS,r=Object(_.a)(t,"losses","computeWeightedLoss"),a=null;null!=e&&(a=Object(_.a)(e,"weights","computeWeightedLoss"));var i=null==a?r:Object(p.a)(r,a);if(n===Kt.a.NONE)return i;if(n===Kt.a.SUM)return Object(Lt.a)(i);if(n===Kt.a.MEAN){if(null==a)return Object(Zt.a)(i);var s=r.size/a.size,u=Object(l.a)(Object(Lt.a)(i),Object(Lt.a)(a));return s>1?Object(l.a)(u,Object(m.a)(s)):u}if(n===Kt.a.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Object(l.a)(Object(Lt.a)(i),Object(m.a)(r.size));var c=Object(p.a)(a,Object(Qt.a)(r.shape)),d=Object(o.a)(Object(Lt.a)(Object(Jt.a)(c,Object(m.a)(0))),"float32");return Object(l.a)(Object(Lt.a)(i),d)}throw Error("Unknown reduction: ".concat(n))}});Object(c.a)({absoluteDifference_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kt.a.SUM_BY_NONZERO_WEIGHTS,a=Object(_.a)(t,"labels","absoluteDifference"),i=Object(_.a)(e,"predictions","absoluteDifference"),o=null;null!=n&&(o=Object(_.a)(n,"weights","absoluteDifference")),Object(T.e)(a.shape,i.shape,"Error in absoluteDifference: ");var s=Object(jt.a)(Object(x.a)(a,i));return $t(s,o,r)}});Object(c.a)({cosineDistance_:function(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kt.a.SUM_BY_NONZERO_WEIGHTS,i=Object(_.a)(t,"labels","cosineDistance"),o=Object(_.a)(e,"predictions","cosineDistance"),s=null;null!=r&&(s=Object(_.a)(r,"weights","cosineDistance")),Object(T.e)(i.shape,o.shape,"Error in cosineDistance: ");var u=Object(m.a)(1),c=Object(x.a)(u,Object(Lt.a)(Object(p.a)(i,o),n,!0));return $t(c,s,a)}});var te=n(80);Object(c.a)({hingeLoss_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kt.a.SUM_BY_NONZERO_WEIGHTS,a=Object(_.a)(t,"labels","hingeLoss"),i=Object(_.a)(e,"predictions","hingeLoss"),o=null;null!=n&&(o=Object(_.a)(n,"weights","hingeLoss")),Object(T.e)(a.shape,i.shape,"Error in hingeLoss: ");var s=Object(m.a)(1);a=Object(x.a)(Object(p.a)(Object(m.a)(2),a),s);var u=Object(te.a)(Object(x.a)(s,Object(p.a)(a,i)));return $t(u,o,r)}});var ee=n(134);Object(c.a)({huberLoss_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kt.a.SUM_BY_NONZERO_WEIGHTS,o=Object(_.a)(t,"labels","huberLoss"),s=Object(_.a)(e,"predictions","huberLoss"),u=null;null!=n&&(u=Object(_.a)(n,"weights","huberLoss")),Object(T.e)(o.shape,s.shape,"Error in huberLoss: ");var c=Object(m.a)(r),d=Object(jt.a)(Object(x.a)(s,o)),l=Object(ee.a)(d,c),h=Object(x.a)(d,l),f=Object(a.a)(Object(p.a)(Object(m.a)(.5),Object(Ft.a)(l)),Object(p.a)(c,h));return $t(f,u,i)}});var ne=n(74);Object(c.a)({logLoss_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kt.a.SUM_BY_NONZERO_WEIGHTS,o=Object(_.a)(t,"labels","logLoss"),s=Object(_.a)(e,"predictions","logLoss"),u=null;null!=n&&(u=Object(_.a)(n,"weights","logLoss")),Object(T.e)(o.shape,s.shape,"Error in logLoss: ");var c=Object(m.a)(1),d=Object(m.a)(r),l=Object(Xt.a)(Object(p.a)(o,Object(ne.a)(Object(a.a)(s,d)))),h=Object(p.a)(Object(x.a)(c,o),Object(ne.a)(Object(a.a)(Object(x.a)(c,s),d))),f=Object(x.a)(l,h);return $t(f,u,i)}});var re=n(135);Object(c.a)({meanSquaredError_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kt.a.SUM_BY_NONZERO_WEIGHTS,a=Object(_.a)(t,"labels","meanSquaredError"),i=Object(_.a)(e,"predictions","meanSquaredError"),o=null;null!=n&&(o=Object(_.a)(n,"weights","meanSquaredError")),Object(T.e)(a.shape,i.shape,"Error in meanSquaredError: ");var s=Object(re.a)(a,i);return $t(s,o,r)}});var ae=n(61),ie=n(136);function oe(t,e){var n=Object(_.a)(t,"labels","sigmoidCrossEntropyWithLogits"),r=Object(_.a)(e,"logits","sigmoidCrossEntropyWithLogits");Object(T.e)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=Object(te.a)(r),o=Object(p.a)(r,n),s=Object(ie.a)(Object(ae.a)(Object(Xt.a)(Object(jt.a)(r))));return Object(a.a)(Object(x.a)(i,o),s)}Object(c.a)({sigmoidCrossEntropy_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kt.a.SUM_BY_NONZERO_WEIGHTS,o=Object(_.a)(t,"multiClassLabels","sigmoidCrossEntropy"),s=Object(_.a)(e,"logits","sigmoidCrossEntropy"),u=null;if(null!=n&&(u=Object(_.a)(n,"weights","sigmoidCrossEntropy")),Object(T.e)(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=Object(m.a)(r),d=Object(m.a)(1),l=Object(m.a)(.5);o=Object(a.a)(Object(p.a)(o,Object(x.a)(d,c)),Object(p.a)(l,c))}var h=oe(o,s);return $t(h,u,i)}});var se=Object(c.a)({logSumExp_:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(_.a)(t,"x","logSumExp"),i=Object(T.I)(e,r.shape),o=Object(Rt.a)(r,i,!0),s=Object(x.a)(r,o),u=Object(ae.a)(s),c=Object(Lt.a)(u,i),d=Object(ne.a)(c),l=Object(a.a)(Object(f.a)(o,d.shape),d);if(n){var h=Object(At.e)(l.shape,i);return Object(f.a)(l,h)}return l}});function ue(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(e.rank," ")+"and dim was ".concat(n));var r=Object(P.a)((function(t,e,r){var a=se(e,[n],!0),i=Object(x.a)(Object(o.a)(e,"float32"),a);r([t,i]);var s=Object(Xt.a)(Object(p.a)(i,t));return{value:Object(Lt.a)(s,[n]),gradFunc:function(t,e){var r=Object(R.a)(e,2),a=r[0],i=r[1],s=Object(At.e)(t.shape,[n]);return[Object(p.a)(Object(f.a)(t,s),Object(x.a)(Object(o.a)(a,"float32"),Object(ae.a)(i))),Object(p.a)(Object(f.a)(t,s),Object(x.a)(Object(ae.a)(i),Object(o.a)(a,"float32")))]}}}));return r(t,e)}Object(c.a)({softmaxCrossEntropy_:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kt.a.SUM_BY_NONZERO_WEIGHTS,o=Object(_.a)(t,"onehotLabels","softmaxCrossEntropy"),s=Object(_.a)(e,"logits","softmaxCrossEntropy"),u=null;if(null!=n&&(u=Object(_.a)(n,"weights","softmaxCrossEntropy")),Object(T.e)(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var c=Object(m.a)(r),d=Object(m.a)(1),h=Object(m.a)(o.shape[1]);o=Object(a.a)(Object(p.a)(o,Object(x.a)(d,c)),Object(l.a)(c,h))}var f=ue(o,s);return $t(f,u,i)}}),N.a,j.a,C.a,A.a;var ce={flipLeftRight:rt,resizeNearestNeighbor:Et,resizeBilinear:Tt,rotateWithOffset:at,cropAndResize:nt,nonMaxSuppression:ot,nonMaxSuppressionAsync:ht,nonMaxSuppressionWithScore:pt,nonMaxSuppressionWithScoreAsync:mt,nonMaxSuppressionPadded:vt,nonMaxSuppressionPaddedAsync:gt}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),a=n(5),i=n(2),o=n(9),s=n(15);var u=n(4);var c=Object(u.a)({batchNorm_:function(t,e,n,u,c,d){null==d&&(d=.001);var l,h,p=Object(i.a)(t,"x","batchNorm"),f=Object(i.a)(e,"mean","batchNorm"),m=Object(i.a)(n,"variance","batchNorm");null!=c&&(l=Object(i.a)(c,"scale","batchNorm")),null!=u&&(h=Object(i.a)(u,"offset","batchNorm")),o.b(f.rank===m.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),o.b(null==h||f.rank===h.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),o.b(null==l||f.rank===l.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var v={x:function(t){return 0===t.rank||1===t.rank?Object(s.a)(t,[1,1,1,t.size]):2===t.rank?Object(s.a)(t,[1,1,t.shape[0],t.shape[1]]):3===t.rank?Object(s.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]):t}(p),scale:l,offset:h,mean:f,variance:m},b={varianceEpsilon:d},g=r.a.runKernel(a.hb,v,b);return Object(s.a)(g,p.shape)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(3),a=n(5);function i(t,e,n,r){if("int32"!==t.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(t.shape,"."));var a=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=e.size;if(0!==e.rank&&(1!==e.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(e.shape,", should be [] or [").concat(a,"]"));if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var o=n(2),s=n(4);var u=Object(s.a)({sparseToDense_:function(t,e,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=Object(o.a)(t,"sparseIndices","sparseToDense","int32"),c=Object(o.a)(e,"sparseValues","sparseToDense"),d=Object(o.a)(s,"defaultValue","sparseToDense",c.dtype);i(u,c,n,d);var l={sparseIndices:u,sparseValues:c,defaultValue:d},h={outputShape:n};return r.a.runKernel(a.Fc,l,h)}})},function(t,e,n){(function(r,a){var i;!function(r){var o=r.Promise,s=o&&"resolve"in o&&"reject"in o&&"all"in o&&"race"in o&&function(){var t;return new o((function(e){t=e})),"function"===typeof t}();e?(e.Promise=s?o:_,e.Polyfill=_):void 0===(i=function(){return s?o:_}.call(e,n,e,t))||(t.exports=i);var u=function(){};function c(t){return"[object Array]"===Object.prototype.toString.call(t)}var d,l="undefined"!==typeof a?a:setTimeout,h=[];function p(){for(var t=0;t<h.length;t++)h[t][0](h[t][1]);h=[],d=!1}function f(t,e){h.push([t,e]),d||(d=!0,l(p,0))}function m(t){var e=t.owner,n=e.state_,r=e.data_,a=t[n],i=t.then;if("function"===typeof a){n="fulfilled";try{r=a(r)}catch(o){y(i,o)}}v(i,r)||("fulfilled"===n&&b(i,r),"rejected"===n&&y(i,r))}function v(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"===typeof e||"object"===typeof e)){var r=e.then;if("function"===typeof r)return r.call(e,(function(r){n||(n=!0,e!==r?b(t,r):g(t,r))}),(function(e){n||(n=!0,y(t,e))})),!0}}catch(a){return n||y(t,a),!0}return!1}function b(t,e){t!==e&&v(t,e)||g(t,e)}function g(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,f(O,t))}function y(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,f(w,t))}function x(t){var e=t.then_;t.then_=void 0;for(var n=0;n<e.length;n++)m(e[n])}function O(t){t.state_="fulfilled",x(t)}function w(t){t.state_="rejected",x(t)}function _(t){if("function"!==typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof _===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function n(t){y(e,t)}try{t((function(t){b(e,t)}),n)}catch(r){n(r)}}(t,this)}_.prototype={constructor:_,state_:"pending",then_:null,data_:void 0,then:function(t,e){var n={owner:this,then:new this.constructor(u),fulfilled:t,rejected:e};return"fulfilled"===this.state_||"rejected"===this.state_?f(m,n):this.then_.push(n),n.then},catch:function(t){return this.then(null,t)}},_.all=function(t){if(!c(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(e,n){var r=[],a=0;function i(t){return a++,function(n){r[t]=n,--a||e(r)}}for(var o,s=0;s<t.length;s++)(o=t[s])&&"function"===typeof o.then?o.then(i(s),n):r[s]=o;a||e(r)}))},_.race=function(t){if(!c(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(e,n){for(var r,a=0;a<t.length;a++)(r=t[a])&&"function"===typeof r.then?r.then(e,n):e(r)}))},_.resolve=function(t){return t&&"object"===typeof t&&t.constructor===this?t:new this((function(e){e(t)}))},_.reject=function(t){return new this((function(e,n){n(t)}))}}("undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this)}).call(this,n(91),n(344).setImmediate)},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(t,e){for(var n,s,u=o(t),c=1;c<arguments.length;c++){for(var d in n=Object(arguments[c]))a.call(n,d)&&(u[d]=n[d]);if(r){s=r(n);for(var l=0;l<s.length;l++)i.call(n,s[l])&&(u[s[l]]=n[s[l]])}}return u}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(13),a=function(t){function e(e,n){void 0===e&&(e=1),void 0===n&&(n=5),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n"),this.scale=e,this.angle=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={scale:{configurable:!0},angle:{configurable:!0}};return n.scale.get=function(){return this.uniforms.scale},n.scale.set=function(t){this.uniforms.scale=t},n.angle.get=function(){return this.uniforms.angle},n.angle.set=function(t){this.uniforms.angle=t},Object.defineProperties(e.prototype,n),e}(r.g)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(13),a=n(8),i=function(t){function e(e,n,r){void 0===n&&(n=.05),void 0===r&&(r=null),r=r||e.length,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n".replace(/%maxColors%/g,r)),this.epsilon=n,this._maxColors=r,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*r),this.uniforms.targetColors=new Float32Array(3*r),this.replacements=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return n.replacements.set=function(t){var e=this.uniforms.originalColors,n=this.uniforms.targetColors,r=t.length;if(r>this._maxColors)throw"Length of replacements ("+r+") exceeds the maximum colors length ("+this._maxColors+")";e[3*r]=-1;for(var i=0;i<r;i++){var o=t[i],s=o[0];"number"===typeof s?s=Object(a.hex2rgb)(s):o[0]=Object(a.rgb2hex)(s),e[3*i]=s[0],e[3*i+1]=s[1],e[3*i+2]=s[2];var u=o[1];"number"===typeof u?u=Object(a.hex2rgb)(u):o[1]=Object(a.rgb2hex)(u),n[3*i]=u[0],n[3*i+1]=u[1],n[3*i+2]=u[2]}this._replacements=t},n.replacements.get=function(){return this._replacements},e.prototype.refresh=function(){this.replacements=this._replacements},n.maxColors.get=function(){return this._maxColors},n.epsilon.set=function(t){this.uniforms.epsilon=t},n.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(e.prototype,n),e}(r.g)},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),a=n(62),i=n(20),o=Object(a.a)((function(t){return Math.ceil(t)})),s=Object(i.b)(r.w,o),u={kernelName:r.w,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e,n,a){var i=r.Md.getArrayFromDType(n,r.Md.sizeFromShape(e));if(a&&"string"!==n){var o=0;t.forEach((function(t){var e=r.Md.sizeFromShape(t.shape);i.set(t.vals,o),o+=e}))}else{var s=0;t.forEach((function(t){for(var a="string"===n?r.dd.fromUint8ToStringArray(t.vals):t.vals,o=0,u=0;u<t.shape[0];++u)for(var c=u*e[1]+s,d=0;d<t.shape[1];++d)i[c+d]=a[o++];s+=t.shape[1]}))}return i}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),a=n(62),i=n(20),o=Object(a.a)((function(t){return Math.expm1(t)})),s=Object(i.b)(r.bb,o),u={kernelName:r.bb,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),a=n(62),i=n(20),o=Object(a.a)((function(t){return Math.floor(t)})),s=Object(i.b)(r.fb,o),u={kernelName:r.fb,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e,n){for(var a=Object(r.fd)(n,t.dtype),i=0;i<a.size;++i){var o=a.indexToLoc(i).slice(),s=o[0],u=o[2],c=e.locToIndex([s,u]);o[2]=e.values[c];var d=t.locToIndex(o);a.values[i]=t.values[d]}return a}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),a=n(24),i=n(25),o=Object(a.a)((function(t,e){return t>e?1:0})),s=Object(i.a)(r.nb,o,null,"bool"),u={kernelName:r.nb,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),a=n(24),i=n(25),o=Object(a.a)((function(t,e){return t<e?1:0})),s=Object(i.a)(r.zb,o,null,"bool"),u={kernelName:r.zb,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e,n){var a=(e-t)/(n-1),i=r.Md.makeZerosTypedArray(n,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+a;return i}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),a=n(62),i=n(20),o=Object(a.a)((function(t){return Math.log(t)})),s=Object(i.b)(r.Cb,o),u={kernelName:r.Cb,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e,n,a){for(var i=r.Md.getTypedArrayFromDType(a,r.Md.sizeFromShape(n)),o=0;o<i.length;++o){for(var s=o*e,u=t[s],c=0;c<e;++c){var d=t[s+c];d>u&&(u=d)}i[o]=u}return i}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),a=n(24),i=n(25),o=Object(a.a)((function(t,e){return Math.max(t,e)})),s=Object(i.a)(r.Nb,o),u={kernelName:r.Nb,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),a=n(24),i=n(25),o=Object(a.a)((function(t,e){return Math.min(t,e)})),s=Object(i.a)(r.Qb,o),u={kernelName:r.Qb,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u}));var r=n(6),a=n(0),i=n(12),o=n(82);function s(t,e,n){var r=a.Md.createScalarValue(-1,n);return Object(o.c)([],e,r,t,n)}var u={kernelName:a.Vb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.x;Object(i.a)(a,"neg");var o=s(n.data.get(a.dataId).values,a.shape,a.dtype),u=Object(r.a)(o,2),c=u[0],d=u[1];return n.makeTensorInfo(d,a.dtype,c)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u}));var r=n(6),a=n(0),i=n(12),o=n(37);function s(t,e,n,i){for(var o=a.dd.computeOutAndReduceShapes(t,i),s=Object(r.a)(o,2),u=s[0],c=s[1],d=Object(a.Ld)(e,"int32"),l=a.Md.makeZerosTypedArray(a.Md.sizeFromShape(u),d),h=a.Md.sizeFromShape(c),p=0;p<l.length;++p){for(var f=p*h,m=1,v=0;v<h;++v)m*=n[f+v];l[p]=m}return{outVals:l,outShape:u,outDtype:d}}var u={kernelName:a.gc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,u=e.x,c=r.axis,d=r.keepDims;Object(i.a)(u,"prod");var l=u.shape.length,h=a.Md.parseAxisParam(c,u.shape),p=a.dd.getAxesPermutation(h,l),f=h,m=u,v=[];null!=p&&(m=Object(o.a)({inputs:{x:u},backend:n,attrs:{perm:p}}),v.push(m),f=a.dd.getInnerMostAxes(f.length,l));var b=n.data.get(m.dataId).values,g=s(m.shape,m.dtype,b,f),y=g.outVals,x=g.outShape,O=g.outDtype,w=x;return d&&(w=a.dd.expandShapeToKeepDim(x,h)),v.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.makeTensorInfo(w,O,y)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e,n,a){if(t===e||t<e&&n<0||e<t&&n>1)return r.Md.makeZerosTypedArray(0,a);var i=Math.abs(Math.ceil((e-t)/n)),o=r.Md.makeZerosTypedArray(i,a);e<t&&1===n&&(n=-1),o[0]=t;for(var s=1;s<o.length;s++)o[s]=o[s-1]+n;return o}},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u}));var r=n(0),a=n(62),i=n(20),o=Object(a.a)((function(t){return 1/Math.sqrt(t)})),s=Object(i.b)(r.vc,o),u={kernelName:r.vc,backendName:"cpu",kernelFunc:s}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(0),a=n(12);function i(t){for(var e=new Float32Array(t.length),n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}var o={kernelName:r.a,backendName:"cpu",kernelFunc:function(t){var e=t.inputs.x,n=t.backend;Object(a.a)(e,"abs");var o=new Float32Array(r.Md.sizeFromShape(e.shape));return o=i(n.data.get(e.dataId).values),n.makeOutput(o,e.shape,"float32")}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(19),a=n(0);function i(t,e,n,i){for(var o=Object(a.fd)(t,e.dtype),s=0;s<o.size;s++){for(var u=o.indexToLoc(s),c=new Array(u.length),d=0;d<c.length;d++)c[d]=u[d]*n[d]+i[d];o.set.apply(o,[e.get.apply(e,c)].concat(Object(r.a)(u)))}return o}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e){for(var n=new Array(t.rank),a=0;a<n.length;a++)n[a]=t.shape[a]*e[a];for(var i=Object(r.fd)(n,t.dtype),o=0;o<i.values.length;++o){for(var s=i.indexToLoc(o),u=new Array(t.rank),c=0;c<u.length;c++)u[c]=s[c]%t.shape[c];var d=t.locToIndex(u);i.values[o]=t.values[d]}return i}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e,n,a,i){for(var o=e[e.length-1],s=t.length/o,u=o,c=r.Md.getTypedArrayFromDType(n,s*a),d=r.Md.getTypedArrayFromDType("int32",s*a),l=0;l<s;l++){for(var h=l*u,p=t.subarray(h,h+u),f=[],m=0;m<p.length;m++)f.push({value:p[m],index:m});f.sort((function(t,e){return e.value-t.value}));for(var v=l*a,b=c.subarray(v,v+a),g=d.subarray(v,v+a),y=0;y<a;y++)b[y]=f[y].value,g[y]=f[y].index}var x=e.slice();return x[x.length-1]=a,[Object(r.fd)(x,n,c),Object(r.fd)(x,"int32",d)]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0);function a(t,e,n,a){for(var i=r.Md.parseAxisParam(e,n)[0],o=[1,n[0],1],s=0;s<i;s++)o[0]*=n[s];o[1]=n[i];for(var u=i+1;u<n.length;u++)o[2]*=n[u];for(var c={},d=new Int32Array(n[i]),l=new r.Tc(o,a,t),h=[],p=1===o[0]&&1===o[2],f=0;f<n[i];f++){var m=void 0;if(p)m=t[f].toString();else{for(var v=[],b=0;b<o[0];b++)for(var g=0;g<o[2];g++)v.push(l.get(b,f,g));m=v.join(",")}if(void 0!==c[m])d[f]=c[m];else{var y=Object.keys(c).length;c[m]=y,d[f]=y,h.push(f)}}var x=o.slice();x[1]=Object.keys(c).length;var O=new r.Tc(x,a);h.forEach((function(t,e){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)O.set(l.get(n,t,r),n,e,r)}));var w=n.slice();return w[i]=x[1],{outputValues:O.values,outputShape:w,indices:d}}},function(t,e,n){var r=n(365),a=n(366),i=n(367),o=n(368),s=n(369),u=n(370),c=n(371);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,t.exports=c},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},function(t,e,n){"use strict";n.r(e),n.d(e,"json",(function(){return r}));var r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}]},,function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"a",(function(){return i}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(k){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var a=e&&e.prototype instanceof l?e:l,i=Object.create(a.prototype),o=new _(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return E()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,o),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(k){return{type:"throw",arg:k}}}t.wrap=u;var d={};function l(){}function h(){}function p(){}var f={};f[a]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(T([])));v&&v!==e&&n.call(v,a)&&(f=v);var b=p.prototype=l.prototype=Object.create(f);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){var r;this._invoke=function(a,i){function o(){return new e((function(r,o){!function r(a,i,o,s){var u=c(t[a],t,i);if("throw"!==u.type){var d=u.arg,l=d.value;return l&&"object"===typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(l).then((function(t){d.value=t,o(d)}),(function(t){return r("throw",t,o,s)}))}s(u.arg)}(a,i,r,o)}))}return r=r?r.then(o,o):o()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=b.constructor=p,p.constructor=h,h.displayName=s(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,o,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(y.prototype),y.prototype[i]=function(){return this},t.AsyncIterator=y,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new y(u(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},g(b),s(b,o,"Generator"),b[a]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}(t.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}},,function(t,e,n){(function(t){var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(a.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(345),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(91))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,a=1,i={},o=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&d(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){d(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){d(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(d,0,t)},u.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return i[a]=o,r(a),a++},u.clearImmediate=c}function c(t){delete i[t]}function d(t){if(o)setTimeout(d,0,t);else{var e=i[t];if(e){o=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{c(t),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n(91),n(117))},function(t,e,n){(function(t,r){var a;!function(i){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof r&&r;o.global!==o&&o.window!==o&&o.self;var s,u=2147483647,c=/^xn--/,d=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw new RangeError(h[t])}function v(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function b(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+v((t=t.replace(l,".")).split("."),e).join(".")}function g(t){for(var e,n,r=[],a=0,i=t.length;a<i;)(e=t.charCodeAt(a++))>=55296&&e<=56319&&a<i?56320==(64512&(n=t.charCodeAt(a++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),a--):r.push(e);return r}function y(t){return v(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function O(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))}function w(t){var e,n,r,a,i,o,s,c,d,l,h,f=[],v=t.length,b=0,g=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&m("not-basic"),f.push(t.charCodeAt(r));for(a=n>0?n+1:0;a<v;){for(i=b,o=1,s=36;a>=v&&m("invalid-input"),((c=(h=t.charCodeAt(a++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||c>p((u-b)/o))&&m("overflow"),b+=c*o,!(c<(d=s<=x?1:s>=x+26?26:s-x));s+=36)o>p(u/(l=36-d))&&m("overflow"),o*=l;x=O(b-i,e=f.length+1,0==i),p(b/e)>u-g&&m("overflow"),g+=p(b/e),b%=e,f.splice(b++,0,g)}return y(f)}function _(t){var e,n,r,a,i,o,s,c,d,l,h,v,b,y,w,_=[];for(v=(t=g(t)).length,e=128,n=0,i=72,o=0;o<v;++o)(h=t[o])<128&&_.push(f(h));for(r=a=_.length,a&&_.push("-");r<v;){for(s=u,o=0;o<v;++o)(h=t[o])>=e&&h<s&&(s=h);for(s-e>p((u-n)/(b=r+1))&&m("overflow"),n+=(s-e)*b,e=s,o=0;o<v;++o)if((h=t[o])<e&&++n>u&&m("overflow"),h==e){for(c=n,d=36;!(c<(l=d<=i?1:d>=i+26?26:d-i));d+=36)w=c-l,y=36-l,_.push(f(x(l+w%y,0))),c=p(w/y);_.push(f(x(c,0))),i=O(n,b,r==a),n=0,++r}++n,++e}return _.join("")}s={version:"1.4.1",ucs2:{decode:g,encode:y},decode:w,encode:_,toASCII:function(t){return b(t,(function(t){return d.test(t)?"xn--"+_(t):t}))},toUnicode:function(t){return b(t,(function(t){return c.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(a=function(){return s}.call(e,n,e,t))||(t.exports=a)}()}).call(this,n(45)(t),n(91))},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"===typeof t},isObject:function(t){return"object"===typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(349),e.encode=e.stringify=n(350)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var o={};if("string"!==typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var u=1e3;i&&"number"===typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var d=0;d<c;++d){var l,h,p,f,m=t[d].replace(s,"%20"),v=m.indexOf(n);v>=0?(l=m.substr(0,v),h=m.substr(v+1)):(l=m,h=""),p=decodeURIComponent(l),f=decodeURIComponent(h),r(o,p)?a(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===typeof t?i(o(t),(function(o){var s=encodeURIComponent(r(o))+n;return a(t[o])?i(t[o],(function(t){return s+encodeURIComponent(r(t))})).join(e):s+encodeURIComponent(r(t[o]))})).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n=function(){var t=4022871197;return function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new o(t),r=e&&e.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.alea=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xor128=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xorwow=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this;e.next=function(){var t,n,r=e.x,a=e.i;return t=r[a],n=(t^=t>>>7)^t<<24,n^=(t=r[a+1&7])^t>>>10,n^=(t=r[a+3&7])^t>>>3,n^=(t=r[a+4&7])^t<<7,t=r[a+7&7],n^=(t^=t<<13)^t<<9,r[a]=n,e.i=a+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xorshift7=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this;e.next=function(){var t,n,r=e.w,a=e.X,i=e.i;return e.w=r=r+1640531527|0,n=a[i+34&127],t=a[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=a[i]=n^t,e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,a,i,o,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),a=0,i=-32;i<u;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(e&&e.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;t.w=o,t.X=s,t.i=a}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xor4096=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,a=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^a,e.a=a-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.tychei=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){var r;!function(a,i,o){var s,u=o.pow(256,6),c=o.pow(2,52),d=2*c;function l(t,e,n){var r=[],l=f(function t(e,n){var r,a=[],i=typeof e;if(n&&"object"==i)for(r in e)try{a.push(t(e[r],n-1))}catch(o){}return a.length?a:"string"==i?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,m(i)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(256):(t=new Uint8Array(256),(a.crypto||a.msCrypto).getRandomValues(t)),m(t)}catch(r){var e=a.navigator,n=e&&e.plugins;return[+new Date,a,n,a.screen,m(i)]}}():t,3),r),v=new h(r),b=function(){for(var t=v.g(6),e=u,n=0;t<c;)t=256*(t+n),e*=256,n=v.g(1);for(;t>=d;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|v.g(4)},b.quick=function(){return v.g(4)/4294967296},b.double=b,f(m(v.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&p(r,v),t.state=function(){return p(v,{})}),n?(o.random=t,e):t})(b,l,"global"in e?e.global:this==o,e.state)}function h(t){var e,n=t.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(t=[n++]);a<256;)o[a]=a++;for(a=0;a<256;a++)o[a]=o[i=255&i+t[a%n]+(e=o[a])],o[i]=e;(r.g=function(t){for(var e,n=0,a=r.i,i=r.j,o=r.S;t--;)e=o[a=255&a+1],n=256*n+o[255&(o[a]=o[i=255&i+e])+(o[i]=e)];return r.i=a,r.j=i,n})(256)}function p(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function f(t,e){for(var n,r=t+"",a=0;a<r.length;)e[255&a]=255&(n^=19*e[255&a])+r.charCodeAt(a++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(f(o.random(),i),t.exports){t.exports=l;try{s=n(358)}catch(v){}}else void 0===(r=function(){return l}.call(e,n,e,t))||(t.exports=r)}("undefined"!==typeof self?self:this,[],Math)},,function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),o=r[0],s=r[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,o,s)),d=0,l=s>0?o-4:o;for(n=0;n<l;n+=4)e=a[t.charCodeAt(n)]<<18|a[t.charCodeAt(n+1)]<<12|a[t.charCodeAt(n+2)]<<6|a[t.charCodeAt(n+3)],u[d++]=e>>16&255,u[d++]=e>>8&255,u[d++]=255&e;2===s&&(e=a[t.charCodeAt(n)]<<2|a[t.charCodeAt(n+1)]>>4,u[d++]=255&e);1===s&&(e=a[t.charCodeAt(n)]<<10|a[t.charCodeAt(n+1)]<<4|a[t.charCodeAt(n+2)]>>2,u[d++]=e>>8&255,u[d++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,a=n%3,i=[],o=0,s=n-a;o<s;o+=16383)i.push(d(t,o,o+16383>s?s:o+16383));1===a?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===a&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],a=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function d(t,e,n){for(var a,i,o=[],s=e;s<n;s+=3)a=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,a){var i,o,s=8*a-r-1,u=(1<<s)-1,c=u>>1,d=-7,l=n?a-1:0,h=n?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-d)-1,p>>=-d,d+=s;d>0;i=256*i+t[e+l],l+=h,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=256*o+t[e+l],l+=h,d-=8);if(0===i)i=1-c;else{if(i===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),i-=c}return(p?-1:1)*o*Math.pow(2,i-r)},e.write=function(t,e,n,r,a,i){var o,s,u,c=8*i-a-1,d=(1<<c)-1,l=d>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=d?(s=0,o=d):o+l>=1?(s=(e*u-1)*Math.pow(2,a),o+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,a),o=0));a>=8;t[n+p]=255&s,p+=f,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;t[n+p]=255&o,p+=f,o/=256,c-=8);t[n+p-f]|=128*m}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";(function(t){var e,r=n(7),a=n(18),i=n(22),o=function(){return n(363)};var s=function(){function s(){Object(r.a)(this,s),this.util=n(364),this.textEncoder=new this.util.TextEncoder}return Object(a.a)(s,[{key:"fetch",value:function(t,n){return null!=Object(i.b)().global.fetch?Object(i.b)().global.fetch(t,n):(null==e&&(e=o()),e(t,n))}},{key:"now",value:function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(e));return this.textEncoder.encode(t)}},{key:"decode",value:function(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}}]),s}();Object(i.b)().get("IS_NODE")&&Object(i.b)().setPlatform("node",new s)}).call(this,n(117))},,,function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n=function(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new o(t),r=e&&e.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.alea=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xor128=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xorwow=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this;e.next=function(){var t,n,r=e.x,a=e.i;return t=r[a],n=(t^=t>>>7)^t<<24,n^=(t=r[a+1&7])^t>>>10,n^=(t=r[a+3&7])^t>>>3,n^=(t=r[a+4&7])^t<<7,t=r[a+7&7],n^=(t^=t<<13)^t<<9,r[a]=n,e.i=a+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xorshift7=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this;e.next=function(){var t,n,r=e.w,a=e.X,i=e.i;return e.w=r=r+1640531527|0,n=a[i+34&127],t=a[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=a[i]=n^t,e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,a,i,o,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),a=0,i=-32;i<u;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(e&&e.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;t.w=o,t.X=s,t.i=a}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xor4096=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,a=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^a,e.a=a-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.tychei=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){var r;!function(a,i){var o,s=this,u=i.pow(256,6),c=i.pow(2,52),d=2*c;function l(t,e,n){var r=[],l=f(function t(e,n){var r,a=[],i=typeof e;if(n&&"object"==i)for(r in e)try{a.push(t(e[r],n-1))}catch(o){}return a.length?a:"string"==i?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,m(a)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(256):(t=new Uint8Array(256),(s.crypto||s.msCrypto).getRandomValues(t)),m(t)}catch(r){var e=s.navigator,n=e&&e.plugins;return[+new Date,s,n,s.screen,m(a)]}}():t,3),r),v=new h(r),b=function(){for(var t=v.g(6),e=u,n=0;t<c;)t=256*(t+n),e*=256,n=v.g(1);for(;t>=d;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|v.g(4)},b.quick=function(){return v.g(4)/4294967296},b.double=b,f(m(v.S),a),(e.pass||n||function(t,e,n,r){return r&&(r.S&&p(r,v),t.state=function(){return p(v,{})}),n?(i.random=t,e):t})(b,l,"global"in e?e.global:this==i,e.state)}function h(t){var e,n=t.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(t=[n++]);a<256;)o[a]=a++;for(a=0;a<256;a++)o[a]=o[i=255&i+t[a%n]+(e=o[a])],o[i]=e;(r.g=function(t){for(var e,n=0,a=r.i,i=r.j,o=r.S;t--;)e=o[a=255&a+1],n=256*n+o[255&(o[a]=o[i=255&i+e])+(o[i]=e)];return r.i=a,r.j=i,n})(256)}function p(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function f(t,e){for(var n,r=t+"",a=0;a<r.length;)e[255&a]=255&(n^=19*e[255&a])+r.charCodeAt(a++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(i.seedrandom=l,f(i.random(),a),t.exports){t.exports=l;try{o=n(372)}catch(v){}}else void 0===(r=function(){return l}.call(e,n,e,t))||(t.exports=r)}([],Math)},,function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n=function(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new o(t),r=e&&e.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.alea=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xor128=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xorwow=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this;e.next=function(){var t,n,r=e.x,a=e.i;return t=r[a],n=(t^=t>>>7)^t<<24,n^=(t=r[a+1&7])^t>>>10,n^=(t=r[a+3&7])^t>>>3,n^=(t=r[a+4&7])^t<<7,t=r[a+7&7],n^=(t^=t<<13)^t<<9,r[a]=n,e.i=a+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xorshift7=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this;e.next=function(){var t,n,r=e.w,a=e.X,i=e.i;return e.w=r=r+1640531527|0,n=a[i+34&127],t=a[i=i+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=a[i]=n^t,e.i=i,n+(r^r>>>16)|0},function(t,e){var n,r,a,i,o,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),a=0,i=-32;i<u;++i)e&&(r^=e.charCodeAt((i+32)%e.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(e&&e.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;t.w=o,t.X=s,t.i=a}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.xor4096=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){(function(t){var r;!function(t,a,i){function o(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,a=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^a,e.a=a-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new o(t),r=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(29)&&n(48)?void 0===(r=function(){return u}.call(e,n,e,a))||(a.exports=r):this.tychei=u}(0,t,n(29))}).call(this,n(45)(t))},function(t,e,n){var r;!function(a,i){var o,s=this,u=i.pow(256,6),c=i.pow(2,52),d=2*c;function l(t,e,n){var r=[],l=f(function t(e,n){var r,a=[],i=typeof e;if(n&&"object"==i)for(r in e)try{a.push(t(e[r],n-1))}catch(o){}return a.length?a:"string"==i?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,m(a)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(256):(t=new Uint8Array(256),(s.crypto||s.msCrypto).getRandomValues(t)),m(t)}catch(r){var e=s.navigator,n=e&&e.plugins;return[+new Date,s,n,s.screen,m(a)]}}():t,3),r),v=new h(r),b=function(){for(var t=v.g(6),e=u,n=0;t<c;)t=256*(t+n),e*=256,n=v.g(1);for(;t>=d;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|v.g(4)},b.quick=function(){return v.g(4)/4294967296},b.double=b,f(m(v.S),a),(e.pass||n||function(t,e,n,r){return r&&(r.S&&p(r,v),t.state=function(){return p(v,{})}),n?(i.random=t,e):t})(b,l,"global"in e?e.global:this==i,e.state)}function h(t){var e,n=t.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(t=[n++]);a<256;)o[a]=a++;for(a=0;a<256;a++)o[a]=o[i=255&i+t[a%n]+(e=o[a])],o[i]=e;(r.g=function(t){for(var e,n=0,a=r.i,i=r.j,o=r.S;t--;)e=o[a=255&a+1],n=256*n+o[255&(o[a]=o[i=255&i+e])+(o[i]=e)];return r.i=a,r.j=i,n})(256)}function p(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function f(t,e){for(var n,r=t+"",a=0;a<r.length;)e[255&a]=255&(n^=19*e[255&a])+r.charCodeAt(a++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(i.seedrandom=l,f(i.random(),a),t.exports){t.exports=l;try{o=n(380)}catch(v){}}else void 0===(r=function(){return l}.call(e,n,e,t))||(t.exports=r)}([],Math)},,function(t,e,n){"use strict";var r,a,i,o=n(0),s=n(6),u=n(10),c=n.n(u),d=n(19),l=n(17),h=n(7),p=n(18),f=n(100),m=n(84),v=n(83),b={},g={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function y(t){if(!(t in b)){var e=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=function(t){if("undefined"!==typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);if(e.addEventListener("webglcontextlost",(function(e){e.preventDefault(),delete b[t]}),!1),1===t)return e.getContext("webgl",g)||e.getContext("experimental-webgl",g);return e.getContext("webgl2",g)}(t);if(null===e)return console.log("Could not get context for WebGL version",t),null;b[t]=e}var n=b[t];return n.isContextLost()?(delete b[t],y(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),b[t])}function x(t,e){return[e,t]}function O(t){var e=o.Md.sizeFromShape(t),n=Math.ceil(e/4);return o.Md.sizeToSquarishShape(n)}function w(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function _(t,e){var n,r,a,i,s,u,c,d,l,h=t;return 2===Object(o.nd)().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,s=h.RED,u=4,c=1,d=h.HALF_FLOAT,l=h.FLOAT):(n=t.RGBA,r=t.RGBA,a=t.RGBA,i=h.RGBA,s=t.RGBA,u=4,c=4,d=null!=e?e.HALF_FLOAT_OES:null,l=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:l}}function T(t,e){var n=e();return Object(o.nd)().getBool("DEBUG")&&function(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+function(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(e)}}(t,e))}(t),n}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(r||(r={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(a||(a={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(i||(i={}));function E(t){return!!(Object(o.nd)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||5.96e-8<Math.abs(t)&&Math.abs(t)<65504)}function k(t,e){return B(t,(function(){return t.getExtension(e)}),'Extension "'+e+'" not supported on this browser.')}function I(t,e){var n=B(t,(function(){return t.createShader(t.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(T(t,(function(){return t.shaderSource(n,e)})),T(t,(function(){return t.compileShader(n)})),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw function(t,e){var n=N.exec(e);if(null==n)return console.log("Couldn't parse line number in error: ".concat(e)),void console.log(t);for(var r=+n[1],a=t.split("\n"),i=a.length.toString().length+2,s=a.map((function(t,e){return o.Md.rightPad((e+1).toString(),i)+t})),u=0,c=0;c<s.length;c++)u=Math.max(s[c].length,u);var d=s.slice(0,r-1),l=s.slice(r-1,r),h=s.slice(r);console.log(d.join("\n")),console.log(e.split("\n")[0]),console.log("%c ".concat(o.Md.rightPad(l[0],u)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var S,C,N=/ERROR: [0-9]+:([0-9]+):/g;function j(t,e){if(T(t,(function(){return t.validateProgram(e)})),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function A(t,e,n,r,a,i,o){var s=t.getAttribLocation(e,n);return-1!==s&&(T(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,r)})),T(t,(function(){return t.vertexAttribPointer(s,a,t.FLOAT,!1,i,o)})),T(t,(function(){return t.enableVertexAttribArray(s)})),!0)}function R(t,e,n){return B(t,(function(){return t.getUniformLocation(e,n)}),'uniform "'+n+'" not present in program.')}function M(t,e,n){return t.getUniformLocation(e,n)}function P(t,e,n,r){T(t,(function(){return function(t,e,n){U(t,n),T(t,(function(){return t.activeTexture(t.TEXTURE0+n)})),T(t,(function(){return t.bindTexture(t.TEXTURE_2D,e)}))}(t,e,r)})),T(t,(function(){return t.uniform1i(n,r)}))}function D(t,e,n){T(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)})),T(t,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}))}function F(t,e){T(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)})),T(t,(function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)}))}function L(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(e)}}(t,e))}function B(t,e,n){var r=T(t,(function(){return e()}));if(null==r)throw new Error(n);return r}function U(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return o.Md.sizeFromShape(t.slice(0,t.length-e))}function V(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function W(t){var e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[z(t)].concat(Object(d.a)(V(t)))),e}function G(t){return t%2===0}function H(t,e){if(t=t.slice(-2),e=e.slice(-2),o.Md.arraysEqual(t,e))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(G(n)&&G(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&G(t[0])&&G(e[0])}function X(t,e){return null!=t.getExtension(e)}function Y(t){try{if(null!=y(t))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function q(t){if(0===t)return!1;var e=y(t);if(1!==t){if(X(e,"EXT_color_buffer_float"))return K(e);if(X(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(t,e){var n=_(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),i}(e,n)}return!1}return!!X(e,"OES_texture_float")&&(!!X(e,"WEBGL_color_buffer_float")&&K(e))}function K(t){var e=_(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),a}function Z(t,e){Array.isArray(t)||(t=[t]),t.forEach((function(t){null!=t&&o.Md.assert("complex64"!==t.dtype,(function(){return"".concat(e," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var J=Object(o.nd)();function Q(){var t,e,n,r,a,i,s,u,c,d;return 2===Object(o.nd)().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",a="texture",i="outputColor",s="out vec4 outputColor;",u="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",c="",d="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",s="",u="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",d="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:s,defineSpecialNaN:u,defineSpecialInf:c,defineRound:d}}function $(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=o.Md.computeStrides(e);return r.map((function(e,a){var i="int ".concat(t[a]," = ").concat(n," / ").concat(e),o=a===r.length-1?"int ".concat(t[a+1]," = ").concat(n," - ").concat(t[a]," * ").concat(e):"index -= ".concat(t[a]," * ").concat(e);return"".concat(i,"; ").concat(o,";")})).join("")}function tt(t){var e=o.Md.computeStrides(t).map((function(t){return t.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(e[0]," + coords.y * ").concat(e[1]," + coords.z;\n  }\n")}J.registerFlag("HAS_WEBGL",(function(){return J.getNumber("WEBGL_VERSION")>0})),J.registerFlag("WEBGL_VERSION",(function(){return Y(2)?2:Y(1)?1:0})),J.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),J.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===J.get("WEBGL_VERSION")})),J.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),J.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),J.registerFlag("WEBGL_PACK",(function(){return J.getBool("HAS_WEBGL")})),J.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return J.getBool("WEBGL_PACK")})),J.registerFlag("WEBGL_PACK_CLIP",(function(){return J.getBool("WEBGL_PACK")})),J.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),J.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return J.getBool("WEBGL_PACK")})),J.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return J.getBool("WEBGL_PACK")})),J.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return J.getBool("WEBGL_PACK")})),J.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return J.getBool("WEBGL_PACK")})),J.registerFlag("WEBGL_PACK_REDUCE",(function(){return J.getBool("WEBGL_PACK")})),J.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return J.getBool("WEBGL_PACK")})),J.registerFlag("WEBGL_CONV_IM2COL",(function(){return J.getBool("WEBGL_PACK")})),J.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(t){if(null==S){var e=y(t);S=e.getParameter(e.MAX_TEXTURE_SIZE)}return S}(J.getNumber("WEBGL_VERSION"))})),J.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(t){if(null==C){var e=y(t);C=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,C)}(J.getNumber("WEBGL_VERSION"))})),J.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var t=J.getNumber("WEBGL_VERSION");return 0===t?0:function(t){if(0===t)return 0;var e=y(t);return X(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:X(e,"EXT_disjoint_timer_query")?1:0}(t)})),J.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return J.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!o.kd.isMobile()})),J.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(t){if(0===t)return!1;var e=y(t);if(1===t){if(!X(e,"OES_texture_float"))return!1}else if(!X(e,"EXT_color_buffer_float"))return!1;return K(e)}(J.getNumber("WEBGL_VERSION"))})),J.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!J.getBool("WEBGL_FORCE_F16_TEXTURES")&&J.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),J.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return q(J.getNumber("WEBGL_VERSION"))})),J.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(t=J.getNumber("WEBGL_VERSION"))&&null!=y(t).fenceSync;var t})),J.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return J.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),J.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(t){if(t<0&&-1!==t)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(t,"."))})),J.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return-1}),(function(t){if(t<0&&-1!==t)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(t,"."))}));var et="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",nt=function t(e){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=r.DENSE;var n=O(e),a=Q();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat($(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(a.output," = result;\n      }\n    ")},rt=function t(e){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=r.DENSE;var n=O(e),a=Q();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat($(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(a.output," = result;\n      }\n    ")},at=function t(e){Object(h.a)(this,t),this.variableNames=["A"],this.outTexUsage=a.DOWNLOAD;var n=Q();this.outputShape=e,this.userCode="\n      ".concat(et,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},it=function t(e){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=a.DOWNLOAD;var n=Q();this.outputShape=e,this.userCode="\n      ".concat(et,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},ot=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(h.a)(this,t),this.variableNames=["A"];var a=Q(),i=Object(s.a)(n,2),o=i[0],u=i[1];this.outputShape=e;var c="result";r&&(c="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(tt(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ").concat(u,";\n        int c = imod(flatIndex, ").concat(u,");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(").concat(u,".0, ").concat(o,".0);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(c,", 0., 0., 0.);\n      }\n    ")},st=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=Q(),i=Object(s.a)(n,2),o=i[0],u=i[1];this.outputShape=e;var c="",d="result";r&&(d="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var p=0;p<=1;p++){var f=2*l+p;c+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(p," < ").concat(e[2],") {\n            localCoords[2] += ").concat(p,";\n            if(localCoords[1] + ").concat(l," < ").concat(e[1],") {\n              localCoords[1] += ").concat(l,";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ").concat(u,";\n              c = imod(flatIndex, ").concat(u,");\n              uv = (vec2(c, r) + halfCR) / vec2(").concat(u,".0, ").concat(o,".0);\n              values = ").concat(a.texture2D,"(A, uv);\n\n              if(offset == 0) {\n                result[").concat(f,"] = values[0];\n              } else if(offset == 1) {\n                result[").concat(f,"] = values[1];\n              } else if(offset == 2) {\n                result[").concat(f,"] = values[2];\n              } else {\n                result[").concat(f,"] = values[3];\n              }\n            }\n          }\n        ")}this.userCode="\n      ".concat(tt(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ").concat(c,"\n\n        ").concat(a.output," = ").concat(d,";\n      }\n    ")};function ut(t){var e=Q();return function(t,e){var n=B(t,(function(){return t.createShader(t.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(T(t,(function(){return t.shaderSource(n,e)})),T(t,(function(){return t.compileShader(n)})),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(t,"".concat(e.version,"\n    precision highp float;\n    ").concat(e.attribute," vec3 clipSpacePos;\n    ").concat(e.attribute," vec2 uv;\n    ").concat(e.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function ct(t){return function(t,e){var n=B(t,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return T(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,n)})),T(t,(function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)})),n}(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function dt(t){return function(t,e){var n=B(t,(function(){return t.createBuffer()}),"Unable to create WebGLBuffer");return T(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)})),T(t,(function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)})),n}(t,new Uint16Array([0,1,2,2,1,3]))}function lt(t,e,n,r,a,i){!function(t,e){var n=Object(o.nd)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="[".concat(t,"x").concat(e,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){var a="[".concat(t,"x").concat(e,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(e,n);var s=function(t){return B(t,(function(){return t.createTexture()}),"Unable to create WebGLTexture.")}(t),u=t.TEXTURE_2D;return T(t,(function(){return t.bindTexture(u,s)})),T(t,(function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)})),T(t,(function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)})),T(t,(function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)})),T(t,(function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)})),T(t,(function(){return t.texImage2D(u,0,r,e,n,0,a,i,null)})),T(t,(function(){return t.bindTexture(t.TEXTURE_2D,null)})),s}function ht(t){return t.internalFormatFloat}function pt(t){return t.internalFormatHalfFloat}function ft(t){return t.downloadTextureFormat}function mt(t){return t.internalFormatPackedFloat}function vt(t){return t.internalFormatPackedHalfFloat}function bt(t,e,n,r,a,i,o,u){var c=t,d=new Float32Array(function(t,e){var n=w(t,e),r=Object(s.a)(n,2);return r[0]*r[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,d),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),d}var gt=function(){function t(e){Object(h.a)(this,t),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Object(o.nd)().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,function(t,e){b[t]=e}(n,e)):this.gl=y(n);var r="WEBGL_color_buffer_float";if(1===Object(o.nd)().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=k(this.gl,"OES_texture_float"),X(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=k(this.gl,"OES_texture_half_float");else if(Object(o.nd)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),X(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=k(this.gl,"EXT_color_buffer_half_float");else if(Object(o.nd)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",X(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!X(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=ct(this.gl),this.indexBuffer=dt(this.gl),this.framebuffer=function(t){return B(t,(function(){return t.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=_(this.gl,this.textureHalfFloatExtension)}return Object(p.a)(t,[{key:"dispose",value:function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;T(e,(function(){return e.finish()})),T(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),T(e,(function(){return e.deleteFramebuffer(t.framebuffer)})),T(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,null)})),T(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)})),T(e,(function(){return e.deleteBuffer(t.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(t,e){return this.throwIfDisposed(),function(t,e,n,r){var a=x(e,n),i=Object(s.a)(a,2);return lt(t,i[0],i[1],ht(r),r.textureFormatFloat,t.FLOAT)}(this.gl,t,e,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(t,e){return this.throwIfDisposed(),function(t,e,n,r){var a=x(e,n),i=Object(s.a)(a,2);return lt(t,i[0],i[1],pt(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,t,e,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(t,e){return this.throwIfDisposed(),function(t,e,n,r){var a=x(e,n),i=Object(s.a)(a,2);return lt(t,i[0],i[1],ft(r),t.RGBA,t.UNSIGNED_BYTE)}(this.gl,t,e,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(t,e){this.throwIfDisposed(),function(t,e,n){T(t,(function(){return t.bindTexture(t.TEXTURE_2D,e)})),n.data instanceof Uint8Array?T(t,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)})):T(t,(function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)})),T(t,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}(this.gl,t,e)}},{key:"uploadDenseMatrixToTexture",value:function(t,e,n,r){this.throwIfDisposed(),function(t,e,n,r,a,i){var o,s,u;T(t,(function(){return t.bindTexture(t.TEXTURE_2D,e)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,u=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,u=i.internalFormatPackedFloat),o.set(a),T(t,(function(){return t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,s,o)})),T(t,(function(){return t.bindTexture(t.TEXTURE_2D,null)}))}(this.gl,t,e,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(t,e){return this.throwIfDisposed(),function(t,e,n,r){var a=w(e,n),i=Object(s.a)(a,2);return lt(t,i[0],i[1],vt(r),t.RGBA,r.textureTypeHalfFloat)}(this.gl,t,e,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(t,e){return this.throwIfDisposed(),function(t,e,n,r){var a=w(e,n),i=Object(s.a)(a,2);return lt(t,i[0],i[1],mt(r),t.RGBA,t.FLOAT)}(this.gl,t,e,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(F(this.gl,this.framebuffer),this.outputTexture=null),T(this.gl,(function(){return e.gl.deleteTexture(t)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(t,e,n){var r=this;return this.downloadMatrixDriver(t,(function(){return function(t,e,n,r){var a=x(e,n),i=Object(s.a)(a,2),o=i[0],u=i[1],c=new Uint8Array(e*n*4);return T(t,(function(){return t.readPixels(0,0,o,u,r.downloadTextureFormat,t.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}(r.gl,e,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(t,e,n,r,a,i){return bt(this.gl,t,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(t,e){return function(t,e,n){var r=t,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,t,e)}},{key:"createBufferFromTexture",value:function(t,e,n){this.bindTextureToFrameBuffer(t);var r=function(t,e,n,r){var a=t.createBuffer();T(t,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)}));var i=16*e*n;return T(t,(function(){return t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)})),T(t,(function(){return t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)})),T(t,(function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)})),a}(this.gl,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var t=this.createFence(this.gl);return this.pollFence(t)}},{key:"createFence",value:function(t){var e,n,r=this;if(Object(o.nd)().getBool("WEBGL_FENCE_API_ENABLED")){var a=t,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=a.clientWaitSync(i,0,0);return t===a.ALREADY_SIGNALED||t===a.CONDITION_SATISFIED},e=i}else Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(e,Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:e,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(t,e,n){var r=this;return this.downloadMatrixDriver(t,(function(){return function(t,e,n){var r=new Float32Array(e*n*4);return T(t,(function(){return t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)})),r}(r.gl,e,n)}))}},{key:"createProgram",value:function(t){this.throwIfDisposed();var e=this.gl,n=I(e,t),r=ut(e),a=function(t){return B(t,(function(){return t.createProgram()}),"Unable to create WebGLProgram.")}(e);return T(e,(function(){return e.attachShader(a,r)})),T(e,(function(){return e.attachShader(a,n)})),function(t,e){if(T(t,(function(){return t.linkProgram(e)})),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}(e,a),this.debug&&j(e,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(t,e,n){return T(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,n)})),A(t,e,"clipSpacePos",n,3,20,0)&&A(t,e,"uv",n,2,20,12)}(e,this.program,this.vertexBuffer)),a}},{key:"deleteProgram",value:function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&T(this.gl,(function(){return e.gl.deleteProgram(t)}))}},{key:"setProgram",value:function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&j(this.gl,this.program),T(this.gl,(function(){return e.gl.useProgram(t)}))}},{key:"getUniformLocation",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?R(this.gl,t,e):M(this.gl,t,e)}},{key:"getAttributeLocation",value:function(t,e){var n=this;return this.throwIfDisposed(),T(this.gl,(function(){return n.gl.getAttribLocation(t,e)}))}},{key:"getUniformLocationNoThrow",value:function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}},{key:"setInputMatrixTexture",value:function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),P(this.gl,t,e,n)}},{key:"setOutputMatrixTexture",value:function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)}},{key:"setOutputPackedMatrixTexture",value:function(t,e,n){this.throwIfDisposed();var r=w(e,n),a=Object(s.a)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(t,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)}},{key:"setOutputPackedMatrixWriteRegion",value:function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&j(this.gl,this.program),L(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),T(t,(function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var t=this;this.throwIfDisposed(),T(this.gl,(function(){return t.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=k(this.gl,2===Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var t=Object(l.a)(c.a.mark((function t(e){var n=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Md.repeatedTry((function(){return n.disposed||n.isQueryAvailable(e,Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return t.abrupt("return",this.getQueryTime(e,Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getQueryTime",value:function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(t,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(t){var e=this;return new Promise((function(n){e.addItemToPoll((function(){return t.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var t=function(t){for(var e=0;e<t.length;++e){if(!t[e]())break}return e-1}(this.itemsToPoll.map((function(t){return t.isDoneFn}))),e=0;e<=t;++e){(0,this.itemsToPoll[e].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}},{key:"addItemToPoll",value:function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||o.Md.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(t){this.throwIfDisposed(),D(this.gl,t,this.framebuffer),this.debug&&L(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(D(this.gl,this.outputTexture,this.framebuffer),this.debug&&L(this.gl)):F(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(t,e,n){this.throwIfDisposed();var r=this.gl;D(r,t,this.framebuffer),this.debug&&L(r),this.outputTexture=t,T(r,(function(){return r.viewport(0,0,e,n)})),T(r,(function(){return r.scissor(0,0,e,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(t,e,n,r){var a=this;this.throwIfDisposed(),T(this.gl,(function(){return a.gl.scissor(t,e,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}},{key:"debug",get:function(){return Object(o.nd)().getBool("DEBUG")}}]),t}();var yt=o.dd.getBroadcastDims;function xt(t,e,n,r){var a=[];t.forEach((function(t){var e=o.Md.sizeFromShape(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?a.push("uniform float ".concat(t.name).concat(e>1?"[".concat(e,"]"):"",";")):(a.push("uniform sampler2D ".concat(t.name,";")),a.push("uniform int offset".concat(t.name,";")))}));var i,s,u=a.join("\n"),c=t.map((function(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="";r+=n?wt(t):Ot(t);var a=t.shapeInfo.logicalShape,i=e.logicalShape;a.length<=i.length&&(r+=n?Ct(t,e):Nt(t,e));return r}(t,e,r)})).join("\n"),d=e.texShape,l=Q(),h=function(t){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(t.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),p=function(t){return"".concat(t.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(t.varyingFs," vec2 resultUV;\n    ").concat(t.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(t.defineSpecialNaN,"\n    ").concat(t.defineSpecialInf,"\n    ").concat(t.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(_t,"\n    ").concat(Tt,"\n    ").concat(Et,"\n  ")}(l);return e.isPacked?(i=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(1===n[0])return"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(n[1],".0);\n      }\n    ");if(1===n[1])return"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(n[0],".0);\n      }\n    ");return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      return 2 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n    }\n  ")}(0,e);case 2:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(o.Md.arraysEqual(t,e))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(n[0],", ").concat(n[1],"));\n      }\n    ");var r=Math.ceil(t[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(t,e);case 3:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),a=r*Math.ceil(t[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(t,e);default:return function(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),a=r*Math.ceil(t[t.length-2]/2),i=a,o="",s="b, r, c",u=2;u<t.length-1;u++)i*=t[t.length-u-1],o="\n      int b".concat(u," = index / ").concat(i,";\n      index -= b").concat(u," * ").concat(i,";\n    ")+o,s="b".concat(u,", ")+s;return"\n    ivec".concat(t.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(t.length,"(").concat(s,");\n    }\n  ")}(t,e)}}(e.logicalShape,d),s=function(t){return"\n    void setOutput(vec4 val) {\n      ".concat(t.output," = val;\n    }\n  ")}(l)):(i=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){if(1===e[0])return"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(e[1],".0);\n      }\n    ");if(1===e[1])return"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(e[0],".0);\n      }\n    ");return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      return resTexRC.x * ").concat(e[1]," + resTexRC.y;\n    }\n  ")}(0,e);case 2:return function(t,e){if(o.Md.arraysEqual(t,e))return"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(e[0],", ").concat(e[1],"));\n      }\n    ");if(1===t[1])return"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n        int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===t[0])return"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n        int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      int r = index / ").concat(t[1],";\n      int c = index - r * ").concat(t[1],";\n      return ivec2(r, c);\n    }\n  ")}(t,e);case 3:return function(t,e){var n=$(["r","c","d"],t);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,e);case 4:return function(t,e){var n=$(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(t,e);case 5:return function(t,e){var n=$(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(e[0],",\n                             ").concat(e[1],"));\n\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(t,e);case 6:return function(t,e){var n=$(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(e[0],", ").concat(e[1],"));\n      int index = resTexRC.x * ").concat(e[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(t,e);default:throw new Error("".concat(t.length,"-D output sampling is not yet supported"))}}(e.logicalShape,d),s=function(t){return"\n    void setOutput(float val) {\n      ".concat(t.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),r&&(p+=kt),[p,h,s,u,i,c,n].join("\n")}function Ot(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"float ".concat(n,"() {return ").concat(e,";}");var r=Object(s.a)(t.shapeInfo.texShape,2),a=r[0],i=r[1];if(1===a&&1===i)return"\n      float ".concat(n,"() {\n        return sampleTexture(").concat(e,", halfCR);\n      }\n    ");var o=Object(s.a)(t.shapeInfo.texShape,2),u=o[0],c=o[1],d=It(e);return"\n    float ".concat(n,"() {\n      vec2 uv = uvFromFlat(").concat(u,", ").concat(c,", ").concat(d,");\n      return sampleTexture(").concat(e,", uv);\n    }\n  ")}(t);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"\n      float ".concat(n,"(int index) {\n        ").concat(St(t),"\n      }\n    ");var r=t.shapeInfo.texShape,a=r[0],i=r[1];if(1===i&&1===a)return"\n      float ".concat(n,"(int index) {\n        return sampleTexture(").concat(e,", halfCR);\n      }\n    ");var o=It(e);if(1===i)return"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(a,".0);\n        return sampleTexture(").concat(e,", uv);\n      }\n    ");if(1===a)return"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(e,", uv);\n      }\n    ");return"\n    float ".concat(n,"(int index) {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(i,", index + ").concat(o,");\n      return sampleTexture(").concat(e,", uv);\n    }\n  ")}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape;if(null!=a&&o.Md.arraysEqual(e,a)){var i=a[0],s=a[1];return"\n    float ".concat(r,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}var u=o.Md.squeezeShape(e),c=u.newShape,d=u.keptDims,l=c;if(l.length<e.length){var h=At(t,l);return"\n      ".concat(Ot(h),"\n      float ").concat(r,"(int row, int col) {\n        return ").concat(r,"(").concat(Rt(["row","col"],d),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(e[1],", 1)));\n        ").concat(St(t),"\n      }\n    ");var p=a[0],f=a[1],m=It(n);if(1===f)return"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(e[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");if(1===p)return"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(e[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(f,".0, 0.5);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n  float ".concat(r,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(e[1]," + col + ").concat(m,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n    return sampleTexture(").concat(n,", uv);\n  }\n")}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[1]*e[2],i=e[2],s=o.Md.squeezeShape(e),u=s.newShape,c=s.keptDims,d=u;if(d.length<e.length){var l=At(t,d);return"\n        ".concat(Ot(l),"\n        float ").concat(r,"(int row, int col, int depth) {\n          return ").concat(r,"(").concat(Rt(["row","col","depth"],c),");\n        }\n      ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(a,", ").concat(i,", 1)));\n        ").concat(St(t),"\n      }\n    ");var h=t.shapeInfo.texShape,p=h[0],f=h[1],m=t.shapeInfo.flatOffset;if(f===a&&null==m)return"\n        float ".concat(r,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(i,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(f,".0, ").concat(p,".0);\n          return sampleTexture(").concat(n,", uv);\n        }\n      ");if(f===i&&null==m)return"\n    float ".concat(r,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(e[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(f,".0, ").concat(p,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var v=It(n);return"\n      float ".concat(r,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(a," + col * ").concat(i," + depth + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n        return sampleTexture(").concat(n,", uv);\n      }\n  ")}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[3],i=e[2]*a,s=e[1]*i,u=o.Md.squeezeShape(e),c=u.newShape,d=u.keptDims;if(c.length<e.length){var l=At(t,c);return"\n      ".concat(Ot(l),"\n      float ").concat(r,"(int row, int col, int depth, int depth2) {\n        return ").concat(r,"(").concat(Rt(["row","col","depth","depth2"],d),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(i,", ").concat(a,", 1)));\n        ").concat(St(t),"\n      }\n    ");var h=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,f=p[0],m=p[1];if(m===s&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(e[1]*e[2],", ").concat(e[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var v=It(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(i," +\n          depth * ").concat(a," + depth2;\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(m,", index + ").concat(v,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t);case 5:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e[4],i=e[3]*a,s=e[2]*i,u=e[1]*s,c=o.Md.squeezeShape(e),d=c.newShape,l=c.keptDims;if(d.length<e.length){var h=At(t,d);return"\n      ".concat(Ot(h),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(Rt(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(s,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(St(t),"\n      }\n    ");var p=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,m=f[0],v=f[1];if(v===u&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(s,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(e[1]*e[2]*e[3],",\n               ").concat(e[2]*e[3],", ").concat(e[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var b=It(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(s," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(b,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t);case 6:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=o.Md.squeezeShape(e),i=a.newShape,s=a.keptDims;if(i.length<e.length){var u=At(t,i);return"\n      ".concat(Ot(u),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(Rt(["row","col","depth","depth2","depth3","depth4"],s),");\n      }\n    ")}var c=e[5],d=e[4]*c,l=e[3]*d,h=e[2]*l,p=e[1]*h;if(t.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(h,", ").concat(l,", ").concat(d,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(c,", 1)));\n        ").concat(St(t),"\n      }\n    ");var f=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,v=m[0],b=m[1];if(b===p&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(h,", ").concat(l,", ").concat(d,", ").concat(c,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(b,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(b===c&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(e[1]*e[2]*e[3]*e[4],",\n               ").concat(e[2]*e[3]*e[4],",\n               ").concat(e[3]*e[4],",\n               ").concat(e[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(b,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=It(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(h," + depth * ").concat(l," +\n          depth2 * ").concat(d," + depth3 * ").concat(c," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(b,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(t);default:throw new Error("".concat(e.length,"-D input sampling")+" is not yet supported")}}function wt(t){switch(t.shapeInfo.logicalShape.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Q();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(e,", halfCR);\n    }\n  ")}(t);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Q();return"\n    vec4 ".concat(n,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(i.texture2D,"(").concat(e,", uv);\n    }\n  ")}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=a[0],s=a[1],u=Q();if(null!=a&&o.Md.arraysEqual(e,a))return"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(i,".0);\n\n        return ").concat(u.texture2D,"(").concat(n,", uv);\n      }\n    ");var c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],d=Math.ceil(e[1]/2);return"\n    vec4 ".concat(r,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(d,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(n,", uv);\n    }\n  ")}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===e[0]){var o=e.slice(1),s=At(t,o);return"\n        ".concat(wt(s),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(Rt(["b","row","col"],[1,2]),");\n        }\n      ")}var u=i[0],c=i[1],d=Math.ceil(e[2]/2),l=d*Math.ceil(e[1]/2),h=Q();return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(u,", ").concat(c,", ").concat(l,", ").concat(d,", b, row, col);\n      return ").concat(h.texture2D,"(").concat(n,", uv);\n    }\n  ")}(t);default:return function(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=o[0],u=o[1],c=Math.ceil(e[n-1]/2),d=c*Math.ceil(e[n-2]/2),l="int b, int row, int col",h="b * ".concat(d," + (row / 2) * ").concat(c," + (col / 2)"),p=2;p<n-1;p++)l="int b".concat(p,", ")+l,d*=e[n-p-1],h="b".concat(p," * ").concat(d," + ")+h;var f=Q();return"\n    vec4 ".concat(a,"(").concat(l,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(s,");\n      return ").concat(f.texture2D,"(").concat(r,", uv);\n    }\n  ")}(t)}}var _t="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Tt="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Et="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",kt="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function It(t){return"offset".concat(t)}function St(t){var e=t.name,n=o.Md.sizeFromShape(t.shapeInfo.logicalShape);return n<2?"return ".concat(e,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(e,"[i];\n      }\n    }\n  ")}function Ct(t,e){var n,r=t.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length,c=yt(t.shapeInfo.logicalShape,e.logicalShape),d=jt(u),l=u-s,h=["x","y","z","w","u","v"];n=0===s?"":u<2&&c.length>=1?"coords = 0;":c.map((function(t){return"coords.".concat(h[t+l]," = 0;")})).join("\n");var p="";p=u<2&&s>0?"coords":t.shapeInfo.logicalShape.map((function(t,e){return"coords.".concat(h[e+l])})).join(", ");var f="return outputValue;",m=1===o.Md.sizeFromShape(t.shapeInfo.logicalShape),v=1===o.Md.sizeFromShape(e.logicalShape);if(1!==s||m||v){if(m&&!v)f=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){var b=s-2,g=s-1;c.indexOf(b)>-1&&c.indexOf(g)>-1?f="return vec4(outputValue.x);":c.indexOf(b)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(g)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(d," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(p,");\n      ").concat(f,"\n    }\n  ")}function Nt(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=e.texShape,s=t.shapeInfo.texShape,u=t.shapeInfo.logicalShape.length,c=e.logicalShape.length;if(!t.shapeInfo.isUniform&&u===c&&null==t.shapeInfo.flatOffset&&o.Md.arraysEqual(s,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var d,l=jt(c),h=yt(t.shapeInfo.logicalShape,e.logicalShape),p=c-u,f=["x","y","z","w","u","v"];d=0===u?"":c<2&&h.length>=1?"coords = 0;":h.map((function(t){return"coords.".concat(f[t+p]," = 0;")})).join("\n");var m="";return m=c<2&&u>0?"coords":t.shapeInfo.logicalShape.map((function(t,e){return"coords.".concat(f[e+p])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(d,"\n      return get").concat(r,"(").concat(m,");\n    }\n  ")}function jt(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank ".concat(t," is not yet supported"))}function At(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Rt(t,e){return e.map((function(e){return t[e]})).join(", ")}function Mt(t,e,n,r){var a=e.userCode,i=n.map((function(t,n){var r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}})),s=i.map((function(t){return t.shapeInfo})),u={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},c=xt(i,u,a,e.packedInputs),d=t.createProgram(c),l=null,h=t.getUniformLocation(d,"NAN",!1);1===Object(o.nd)().getNumber("WEBGL_VERSION")&&(l=t.getUniformLocation(d,"INFINITY",!1));for(var p={},f=0;f<e.variableNames.length;f++){var m=e.variableNames[f];p[m]=t.getUniformLocation(d,m,!1),p["offset".concat(m)]=t.getUniformLocation(d,"offset".concat(m),!1)}return{program:e,source:c,webGLProgram:d,uniformLocations:p,inShapeInfos:s,outShapeInfo:u,infLoc:l,nanLoc:h}}function Pt(t,e){if(t.length!==e.length)throw Error("Binary was compiled with ".concat(t.length," inputs, but ")+"was executed with ".concat(e.length," inputs"));t.forEach((function(t,n){var r=t.logicalShape,a=e[n],i=a.shape;if(!o.Md.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!t.isUniform||!a.isUniform){var s=t.texShape,u=a.isUniform?null:a.texData.texShape;if(!o.Md.arraysEqual(s,u))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(s," and ").concat(u," must match"))}}))}function Dt(t,e,n,r,a){Pt(e.inShapeInfos,n),Pt([e.outShapeInfo],[r]);var i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i,s[0],s[1]):t.setOutputMatrixTexture(i,s[0],s[1]),t.setProgram(e.webGLProgram),1===Object(o.nd)().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((function(n,r){var a=e.program.variableNames[r],i=e.uniformLocations[a],s=e.uniformLocations["offset".concat(a)];if(null!=i)if(n.isUniform)if(o.Md.sizeFromShape(n.shape)<2)t.gl.uniform1f(i,n.uniformValues[0]);else{var u=n.uniformValues;u instanceof Float32Array||(u=new Float32Array(u)),t.gl.uniform1fv(i,u)}else null!=n.texData.slice&&null!=s&&t.gl.uniform1i(s,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,i,r)})),null!=a&&a(t,e.webGLProgram),t.executeProgram()}function Ft(t,e,n){var r="";e.concat(n).forEach((function(t){var e=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0,n=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(n,"_").concat(e)}));var a=t.userCode,i=t.constructor.name;return i+="_"+r+"_"+a}var Lt=n(70),Bt=n(115),Ut=n(241),zt=n(242),Vt=n(151),Wt=n(243),Gt=n(244),Ht=n(245),Xt=n(246),Yt=n(247),qt=n(248),Kt=n(249),Zt=n(250),Jt=n(251),Qt=n(252),$t=n(82),te=n(253),ee=n(254),ne=n(255),re=n(256),ae=n(257),ie=n(59),oe=n(258),se=n(103),ue=n(259),ce=n(260),de=n(152),le=n(261),he=Lt.c,pe=Bt.a,fe=Bt.b,me=Ut.b,ve=zt.a,be=Vt.c,ge=Wt.b,ye=Gt.b,xe=Ht.a,Oe=Xt.b,we=Yt.b,_e=qt.a,Te=Kt.b,Ee=Zt.a,ke=Jt.b,Ie=Qt.b,Se=$t.c,Ce=te.b,Ne=ee.b,je=ne.a,Ae=re.b,Re=ae.b,Me=ie.c,Pe=oe.a,De=se.c,Fe=ue.a,Le=ce.a,Be=de.a,Ue=le.a;function ze(t,e){return["x","y","z","w","u","v"].slice(0,e).map((function(e){return"".concat(t,".").concat(e)}))}function Ve(t,e){return 1===e?[t]:ze(t,e)}var We=function t(e){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var n=e.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=Ve("rc",n),a=jt(n),i=function(t,e,n){if(1===t)return"rc > ".concat(e[0]);for(var r="",a=t-2;a<t;a++)r+="".concat(n[a]," >= ").concat(e[a]),a<t-1&&(r+="||");return r}(n,e,r),o=function(t,e,n,r){if(1===t)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(e,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,e[e.length-1],e[e.length-2],r),s=function(t,e){var n=t.length,r=function(t,e){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),o=2;o<t;o++)i="".concat(e[e.length-1-o],",")+i;n.push(i)}return n}(n,e);if(1===n)return"getA(rc),\n            rc + 1 >= ".concat(t[0]," ? 0. : getA(rc + 1),\n            0, 0");return"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}(e,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(i,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(s,"));\n          }\n        }\n      ")}};var Ge=function t(e,n){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(t){var e=$(["r","c","d"],t);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(e,"\n      return ivec3(r, c, d);\n    }\n  ")}(n),"\n      ").concat(tt(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(e[1],";\n        int cols = ").concat(e[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")};var He=function(){function t(e){Object(h.a)(this,t),this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Object(p.a)(t,[{key:"acquireTexture",value:function(t,e,n){var r=Ye(e,n),a=qe(t,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var o,s=Xe(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();var u=this.freeTextures[a].shift();return this.usedTextures[a].push(u),u}return r===i.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===i.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):r===i.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===i.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===i.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),o}},{key:"releaseTexture",value:function(t,e,n,r){if(null!=this.freeTextures){var a=Ye(n,r),i=qe(e,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var s=Xe(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),u=Object(o.nd)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==u&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(t),this._numBytesAllocated-=s):(this.freeTextures[i].push(t),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;var c=this.usedTextures[i],d=c.indexOf(t);if(d<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(d,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(t,")"));var e=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*e),"%)"))}}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach((function(e){t.gpgpu.deleteMatrixTexture(e)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(e){t.gpgpu.deleteMatrixTexture(e)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}}]),t}();function Xe(t,e,n,r,a){var o,u=function(t,e){switch(t){case i.PACKED_2X2_FLOAT32:return mt(e);case i.PACKED_2X2_FLOAT16:return vt(e);case i.UNPACKED_FLOAT32:return ht(e);case i.UNPACKED_FLOAT16:return pt(e);case i.PACKED_4X1_UNSIGNED_BYTE:return ft(e);default:throw new Error("Unknown physical texture type ".concat(t))}}(e,r);if(a){var c=w(t[0],t[1]),d=Object(s.a)(c,2);o=d[0]*d[1]}else{var l=x(t[0],t[1]),h=Object(s.a)(l,2);o=h[0]*h[1]}return o*function(t,e){var n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;throw new Error("Unknown internal format ".concat(e))}(n,u)}function Ye(t,e){if(t===a.UPLOAD)return i.PACKED_2X2_FLOAT32;if(t===a.RENDER||null==t)return function(t){return Object(o.nd)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?i.PACKED_2X2_FLOAT32:i.UNPACKED_FLOAT32:t?i.PACKED_2X2_FLOAT16:i.UNPACKED_FLOAT16}(e);if(t===a.DOWNLOAD||t===a.PIXELS)return i.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(t))}function qe(t,e,n){return"".concat(t[0],"_").concat(t[1],"_").concat(e,"_").concat(n)}var Ke=function t(e,n){Object(h.a)(this,t),this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},Ze="if (isnan(x)) return x;",Je="return abs(x);";var Qe="return (x >= 0.0) ? x : (exp(x) - 1.0);",$e=Ze+"\n  return (x < 0.0) ? 0.0 : x;\n",tn=Ze+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",en="return x;",nn="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",rn="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",an="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",on=function t(e,n){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},sn=function t(e){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var n=e.length,r=Ve("rc",n),a=jt(n),i=function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")},un=o.td.whereImpl,cn={};var dn=function(t){Object(m.a)(n,t);var e=Object(v.a)(n);function n(t){var r,a;if(Object(h.a)(this,n),(r=e.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.warnedAboutCPUBackend=!1,r.pendingDeletes=0,r.disposed=!1,!Object(o.nd)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var i=y(Object(o.nd)().getNumber("WEBGL_VERSION"));r.binaryCache=((a=Object(o.nd)().getNumber("WEBGL_VERSION"))in cn||(cn[a]={}),cn[a]),r.gpgpu=new gt(i),r.canvas=i.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new He(r.gpgpu),r.numMBBeforeWarning=null==Object(o.nd)().global.screen?1024:Object(o.nd)().global.screen.height*Object(o.nd)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new o.L(Object(f.a)(r),Object(o.md)()),r}return Object(p.a)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}},{key:"write",value:function(t,e,n){if((Object(o.nd)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(o.nd)().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:a.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(t){return this.texData.has(t)?this.texData.get(t).refCount:0}},{key:"incRef",value:function(t){this.texData.get(t).refCount++}},{key:"decRef",value:function(t){this.texData.has(t)&&this.texData.get(t).refCount--}},{key:"move",value:function(t,e,n,r,i){if(Object(o.nd)().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:a.UPLOAD,refCount:i})}},{key:"disposeIntermediateTensorInfo",value:function(t){this.disposeData(t.dataId)}},{key:"readSync",value:function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,a=e.complexTensorInfos,i=e.slice,s=e.shape,u=e.isPacked;if(null!=i){var c;c=u?new on(s,en):new Ke(s,en);var d=this.runWebGLProgram(c,[{dataId:t,shape:s,dtype:r}],r),l=this.readSync(d.dataId);return this.disposeIntermediateTensorInfo(d),l}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;var h,p,f=null!=this.activeTimers;if(f&&(h=o.Md.now()),"complex64"===r){var m=this.readSync(a.real.dataId),v=this.readSync(a.imag.dataId);p=o.dd.mergeRealAndImagArrays(m,v)}else p=this.getValuesFromTexture(t);return f&&(this.downloadWaitMs+=o.Md.now()-h),this.convertAndCacheOnCPU(t,p)}},{key:"read",value:function(){var t=Object(l.a)(c.a.mark((function t(e){var n,r,a,i,s,u,l,h,p,f,m,v,b,g,y,x,w,_,T,E,k,I;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.pendingRead.has(e)){t.next=3;break}return n=this.pendingRead.get(e),t.abrupt("return",new Promise((function(t){return n.push(t)})));case 3:if(r=this.texData.get(e),a=r.values,i=r.shape,s=r.slice,u=r.dtype,l=r.complexTensorInfos,h=r.isPacked,null==s){t.next=11;break}return p=h?new on(i,en):new Ke(i,en),f=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:u}],u),m=this.read(f.dataId),this.disposeIntermediateTensorInfo(f),t.abrupt("return",m);case 11:if(null==a){t.next=13;break}return t.abrupt("return",this.convertAndCacheOnCPU(e));case 13:if(Object(o.nd)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Object(o.nd)().getNumber("WEBGL_VERSION")){t.next=15;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 15:if(v=null,"complex64"!==u&&Object(o.nd)().get("WEBGL_BUFFER_SUPPORTED")&&(b=this.decode(e),y=this.texData.get(b.dataId),v=(g=this.gpgpu).createBufferFromTexture.apply(g,[y.texture].concat(Object(d.a)(O(i))))),this.pendingRead.set(e,[]),"complex64"===u){t.next=21;break}return t.next=21,this.gpgpu.createAndWaitForFence();case 21:if("complex64"!==u){t.next=30;break}return t.next=24,Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]);case 24:w=t.sent,_=w[0],T=w[1],x=o.dd.mergeRealAndImagArrays(_,T),t.next=31;break;case 30:null==v?x=this.getValuesFromTexture(e):(E=o.Md.sizeFromShape(i),x=this.gpgpu.downloadFloat32MatrixFromBuffer(v,E));case 31:return null!=b&&this.disposeIntermediateTensorInfo(b),k=this.convertAndCacheOnCPU(e,x),I=this.pendingRead.get(e),this.pendingRead.delete(e),I.forEach((function(t){return t(k)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Object(o.md)().removeDataId(e,this),this.pendingDeletes--),t.abrupt("return",k);case 38:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"bufferSync",value:function(t){var e=this.readSync(t.dataId),n=e;if("string"===t.dtype)try{n=e.map((function(t){return o.Md.decodeString(t)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(o.fd)(t.shape,t.dtype,n)}},{key:"checkNumericalProblems",value:function(t){if(null!=t)for(var e=0;e<t.length;e++){var n=t[e];if(!E(n)){if(Object(o.nd)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(t){var e=this.texData.get(t),n=e.shape,r=e.dtype,a=e.isPacked,i=o.Md.sizeFromShape(n);if(Object(o.nd)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s,u=this.decode(t),c=this.texData.get(u.dataId),l=(s=this.gpgpu).downloadMatrixFromPackedTexture.apply(s,[c.texture].concat(Object(d.a)(O(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(u),l}var h=Object(o.nd)().getBool("WEBGL_PACK")&&!0===a,p=h?W(n):n,f=h?new it(p):new at(p),m=this.runWebGLProgram(f,[{shape:p,dtype:r,dataId:t}],"float32"),v=this.texData.get(m.dataId),b=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(m),b}},{key:"timerAvailable",value:function(){return Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(){var t=Object(l.a)(c.a.mark((function t(e){var n,r,a,i,s,u,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.activeTimers,r=[],a=!1,null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e(),i=o.Md.flatten(this.activeTimers.map((function(t){return t.query}))).filter((function(t){return null!=t})),s=o.Md.flatten(this.activeTimers.map((function(t){return t.name}))).filter((function(t){return null!=t})),this.activeTimers=n,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){t.next=19;break}return t.next=14,Promise.all(i);case 14:d=t.sent,u.kernelMs=o.Md.sum(d),u.getExtraProfileInfo=function(){return d.map((function(t,e){return{name:s[e],ms:t}})).map((function(t){return"".concat(t.name,": ").concat(t.ms)})).join(", ")},t.next=20;break;case 19:u.kernelMs={error:"WebGL query timers are not supported in this environment."};case 20:return this.uploadWaitMs=0,this.downloadWaitMs=0,t.abrupt("return",u);case 23:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:o.Md.now(),endMs:null}}},{key:"endTimer",value:function(t){return Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=o.Md.now(),t)}},{key:"getQueryTime",value:function(){var t=Object(l.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Object(o.nd)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){t.next=2;break}return t.abrupt("return",this.gpgpu.waitForQueryAndGetTime(e));case 2:return n=e,t.abrupt("return",n.endMs-n.startMs);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"disposeData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(e?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!e&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);var n=this.texData.get(t),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,e),this.disposeData(r.imag.dataId,e)),this.texData.delete(t),!0}},{key:"releaseGPUData",value:function(t){var e=this.texData.get(t),n=e.texture,r=e.dtype,a=e.texShape,i=e.usage,o=e.isPacked,s=e.slice,u=s&&s.origDataId||t,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var d=this.texData.get(t);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}},{key:"getTexture",value:function(t){return this.uploadToGPU(t),this.texData.get(t).texture}},{key:"getDataInfo",value:function(t){return this.texData.get(t)}},{key:"getCPUBackend",value:function(){return Object(o.nd)().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Object(o.md)().findBackend("cpu")),this.cpuBackend):null}},{key:"shouldExecuteOnCPU",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=this.getCPUBackend();return Object(o.nd)().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=r||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=r&&t.every((function(t){return null==e.texData.get(t.dataId).texture&&o.Md.sizeFromShape(t.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(t){o.dd.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=t.dataSync();return un(t.shape,e)}},{key:"packedUnaryOp",value:function(t,e,n){var r=new on(t.shape,e),a=this.compileAndRun(r,[t],n);return Object(o.md)().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(t){if(this.shouldExecuteOnCPU([t])&&"complex64"!==t.dtype){var e=Re(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,e)}if(Object(o.nd)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Je,t.dtype);var n=new Ke(t.shape,Je),r=this.compileAndRun(n,[t]);return Object(o.md)().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(t,e,n){var r;if("string"===e&&null!=n&&n.length>0&&o.Md.isString(n[0])){var a=n.map((function(t){return o.Md.encodeString(t)}));r=this.write(a,t,e)}else r=this.write(n,t,e);return this.texData.get(r).usage=null,{dataId:r,shape:t,dtype:e}}},{key:"makeOutput",value:function(t,e,n){var r=this.makeTensorInfo(t,e,n).dataId;return Object(o.md)().makeTensorFromDataId(r,t,e,this)}},{key:"unpackTensor",value:function(t){var e=new sn(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}},{key:"packTensor",value:function(t){var e=new We(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)}},{key:"packedReshape",value:function(t,e){var n=[z(t.shape)].concat(Object(d.a)(V(t.shape))),r={dtype:t.dtype,shape:n,dataId:t.dataId},a=[z(e)].concat(Object(d.a)(V(e))),i=new Ge(a,n),o=this.runWebGLProgram(i,[r],t.dtype,null,!0);return{dataId:o.dataId,shape:e,dtype:o.dtype}}},{key:"decode",value:function(t){var e,n=this.texData.get(t),r=n.isPacked,a=n.shape,i=n.dtype,o=W(a);e=r?new rt(o):new nt(o);return{dtype:i,shape:a,dataId:this.runWebGLProgram(e,[{shape:o,dtype:i,dataId:t}],i,null,!0).dataId}}},{key:"runWebGLProgram",value:function(t,e,n,a){var i=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=this.makeTensorInfo(t.outputShape,n),c=this.texData.get(u.dataId);if(t.packedOutput&&(c.isPacked=!0),t.outPackingScheme===r.DENSE){var d=O(t.outputShape);c.texShape=d.map((function(t){return 2*t}))}if(null!=t.outTexUsage&&(c.usage=t.outTexUsage),0===o.Md.sizeFromShape(u.shape))return c.values=o.Md.getTypedArrayFromDType(u.dtype,0),u;var l=[],h=e.map((function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&o.Md.sizeFromShape(e.shape)<=Object(o.nd)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!==!!t.packedInputs)e=n.isPacked?i.unpackTensor(e):i.packTensor(e),l.push(e),n=i.texData.get(e.dataId);else if(n.isPacked&&!H(n.shape,e.shape)){var r=e,a=e.shape;e.shape=n.shape,e=i.packedReshape(e,a),l.push(e),n=i.texData.get(e.dataId),r.shape=a}return i.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}}));this.uploadToGPU(u.dataId);var p,f={shape:u.shape,texData:c,isUniform:!1},m=Ft(t,h,f),v=this.getAndSaveBinary(m,(function(){return Mt(i.gpgpu,t,h,f)})),b=null!=this.activeTimers;b&&(p=this.startTimer()),Dt(this.gpgpu,v,h,f,a),l.forEach((function(t){return i.disposeIntermediateTensorInfo(t)})),b&&(p=this.endTimer(p),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(p)}));var g=Object(o.nd)().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=o.Md.now();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!Object(o.nd)().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&!1===s){var x=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),x}return u}},{key:"compileAndRun",value:function(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||e[0].dtype;var i=this.runWebGLProgram(t,e,n,r,a);return i}},{key:"getAndSaveBinary",value:function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var t=this;if(!this.disposed){if(!Object(o.nd)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(e){t.gpgpu.deleteProgram(t.binaryCache[e].webGLProgram),delete t.binaryCache[e]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(o.Jd)((function(){if(!Object(o.nd)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=Object(o.nd)().getBool("DEBUG");Object(o.nd)().set("DEBUG",!1);var n=t.abs(Object(o.yd)(1e-8)).dataSync()[0];if(Object(o.nd)().set("DEBUG",e),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(t){var e=this.texData.get(t),n=e.shape,r=e.dtype,i=e.values,u=e.texture,c=e.usage,d=e.isPacked;if(null==u){var l,h=null!=this.activeTimers;h&&(l=o.Md.now());var p=e.texShape;if(null==p&&(p=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(o.nd)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(n*=2,1===(t=t.map((function(e,n){return n>=t.length-2?o.Md.nearestLargerEven(t[n]):t[n]}))).length&&(t=[2,t[0]])),2!==t.length){var r=o.Md.squeezeShape(t);t=r.newShape}var a=o.Md.sizeFromShape(t);if(t.length<=1&&a<=n)return[1,a];if(2===t.length&&t[0]<=n&&t[1]<=n)return t;if(3===t.length&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];if(e){var i=z(t),u=2,c=2;if(t.length){var d=V(t),l=Object(s.a)(d,2);u=l[0],c=l[1]}return a=i*(u/2)*(c/2),o.Md.sizeToSquarishShape(a).map((function(t){return 2*t}))}return o.Md.sizeToSquarishShape(a)}(n,d),e.texShape=p),null!=i){var f,m=W(n),v=p[1],b=p[0],g=i instanceof Uint8Array;if(d){var y=w(p[0],p[1]),x=Object(s.a)(y,2);v=x[0],b=x[1],f=new st(m,[b,v],g)}else f=new ot(m,[b,v],g);var O=this.makeTensorInfo([b,v],r);this.texData.get(O.dataId).usage=g?a.PIXELS:a.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(O.dataId),v,b,i);var _=this.runWebGLProgram(f,[O],r,null,!0),T=this.texData.get(_.dataId);e.texture=T.texture,e.texShape=T.texShape,e.isPacked=T.isPacked,e.usage=T.usage,this.disposeIntermediateTensorInfo(O),this.texData.delete(_.dataId),e.values=null,h&&(this.uploadWaitMs+=o.Md.now()-l)}else{var E=this.acquireTexture(p,c,r,d);e.texture=E}}}},{key:"convertAndCacheOnCPU",value:function(t,e){var n=this.texData.get(t),r=n.dtype;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype ".concat(e))}(e,r)),n.values}},{key:"acquireTexture",value:function(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)}},{key:"computeBytes",value:function(t,e){return t[0]*t[1]*o.Md.bytesPerElement(e)}}]),n}(o.vb);dn.nextDataId=0,o.kd.isBrowser()&&Object(o.vd)("webgl",(function(){return new dn}),2);var ln=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["A","B"],this.outputShape=o.dd.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},hn=function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(h.a)(this,t),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o.dd.assertAndGetBroadcastShape(n,r);var i=this.outputShape.length,s="";if(a)if(0===i||1===o.Md.sizeFromShape(this.outputShape))s="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var u=jt(i);if(s="\n          ".concat(u," coords = getOutputCoords();\n        "),1===i)s+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var c=Ve("coords",i);s+="\n            bool nextRowOutOfBounds =\n              (".concat(c[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(c[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(s,"\n\n        setOutput(result);\n      }\n    ")};function pn(t){var e=t.inputs,n=t.backend,r=e.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var fn={kernelName:o.qb,backendName:"webgl",kernelFunc:pn};function mn(t){var e=t.inputs,n=t.backend,r=e.real,a=e.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=pn({inputs:{x:r},backend:n}),u=pn({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var vn={kernelName:o.y,backendName:"webgl",kernelFunc:mn},bn="return (a < 0.) ? b * a : a;",gn="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var yn={kernelName:o.yb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.alpha,s=n.makeTensorInfo([],"float32",o.Md.createScalarValue(i,"float32")),u=Object(o.nd)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hn(gn,a.shape,s.shape):new ln(bn,a.shape,s.shape),c=n.runWebGLProgram(u,[a,s],a.dtype);return n.disposeIntermediateTensorInfo(s),c}},xn="return (a < 0.) ? b * a : a;",On="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var wn={kernelName:o.fc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,a=e.alpha,i=Object(o.nd)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hn(On,r.shape,a.shape):new ln(xn,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}};function _n(t){var e=t.opSnippet,n=t.packedOpSnippet,r=t.cpuKernelImpl,a=t.dtype;return function(t){var i,s=t.inputs,u=t.backend,c=s.x,d=u,l=a||c.dtype;if(d.shouldExecuteOnCPU([c])&&null!=r){var h=d.texData.get(c.dataId),p=r(h.values,l);return d.makeTensorInfo(c.shape,l,p)}return i=Object(o.nd)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new on(c.shape,n):new Ke(c.shape,e),d.runWebGLProgram(i,[c],l)}}function Tn(t){var e=t.opSnippet,n=t.packedOpSnippet,r=t.checkOutOfBounds,a=void 0!==r&&r,i=t.supportsComplex,u=void 0!==i&&i,c=t.cpuKernelImpl,d=t.dtype;return function(t){var r=t.inputs,i=t.backend,l=r.a,h=r.b,p=i;if(u&&"complex64"===l.dtype){var f=p.texData.get(l.dataId),m=p.texData.get(h.dataId),v=[[f.complexTensorInfos.real,m.complexTensorInfos.real],[f.complexTensorInfos.imag,m.complexTensorInfos.imag]].map((function(t){var n=Object(s.a)(t,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:l.shape},u={dataId:a.dataId,dtype:a.dtype,shape:h.shape},c=new ln(e,l.shape,h.shape);return p.runWebGLProgram(c,[i,u],Object(o.Ld)(r.dtype,a.dtype))})),b=Object(s.a)(v,2),g=b[0],y=b[1],x=mn({inputs:{real:g,imag:y},backend:p});return p.disposeIntermediateTensorInfo(g),p.disposeIntermediateTensorInfo(y),x}var O,w=d||Object(o.Ld)(l.dtype,h.dtype);if(p.shouldExecuteOnCPU([l,h])&&null!=c){var _=p.texData.get(l.dataId),T=p.texData.get(h.dataId),E=c(l.shape,h.shape,_.values,T.values,w),k=Object(s.a)(E,2),I=k[0],S=k[1],C=p.makeTensorInfo(S,w);return p.texData.get(C.dataId).values=I,C}return O=Object(o.nd)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new hn(n,l.shape,h.shape,a):new ln(e,l.shape,h.shape),p.runWebGLProgram(O,[l,h],w)}}function En(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===t)return"return x;";if("relu"===t)return e?rn:$e;if("elu"===t)return e?nn:Qe;if("relu6"===t)return e?an:tn;if("prelu"===t)return e?On:xn;if("leakyrelu"===t)return e?gn:bn;throw new Error("Activation ".concat(t," has not been implemented for the WebGL backend."))}var kn=function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(h.a)(this,t),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;var d=a?e[1]:e[2],l=Math.ceil(d/2),p=a?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",m=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],b="",g="";s&&(b=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var x="rc.x",O="rc.x";e[0]<n[0]?x="int(min(float(rc.x), ".concat(e[0]-1,".))"):n[0]<e[0]&&(O="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(b,"\n\n      const float sharedDimension = ").concat(l,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(l,"; i++) {\n          int batchA = ").concat(x,";\n          int batchB = ").concat(O,";\n          vec4 a = getMatrixA(batchA, ").concat(p,");\n          vec4 b = getMatrixB(batchB, ").concat(f,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(m[0]," * ").concat(v[0],");\n          result += (").concat(m[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")},In="return areal * breal - aimag * bimag;",Sn="return areal * bimag + aimag * breal;",Cn=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=o.dd.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},Nn="return a * b;";function jn(t){var e,n=t.inputs,r=t.backend,a=n.a,i=n.b,u=o.dd.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){var c=r.texData.get(a.dataId),d=r.texData.get(i.dataId),l=new Cn(In,a.shape,i.shape),h=new Cn(Sn,a.shape,i.shape),p=[{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:a.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:d.complexTensorInfos.real.dataId,dtype:d.complexTensorInfos.real.dtype,shape:i.shape},{dataId:d.complexTensorInfos.imag.dataId,dtype:d.complexTensorInfos.imag.dtype,shape:i.shape}],f=r.runWebGLProgram(l,p,"float32"),m=r.runWebGLProgram(h,p,"float32"),v=mn({inputs:{real:f,imag:m},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),v}if(r.shouldExecuteOnCPU([a,i])){var b=r.texData.get(a.dataId),g=r.texData.get(i.dataId),y=Se(a.shape,i.shape,b.values,g.values,u),x=Object(s.a)(y,2),O=x[0],w=x[1],_=r.makeTensorInfo(w,u);return r.texData.get(_.dataId).values=O,_}return e=Object(o.nd)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hn(Nn,a.shape,i.shape):new ln(Nn,a.shape,i.shape),r.runWebGLProgram(e,[a,i],u)}var An={kernelName:o.Ub,backendName:"webgl",kernelFunc:jn};function Rn(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.shape,s=n,u=o.Md.sizeFromShape(a.shape),c=o.Md.inferFromImplicitShape(i,u),l=o.Md.sizeFromShape(c);o.Md.assert(u===l,(function(){return"The new shape (".concat(c,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(u," elements. The new shape and old ")+"shape must have the same number of elements."}));var h=s.texData.get(a.dataId);return!h.isPacked||H(a.shape,c)||null!==h.texture&&H(h.shape,c)?(s.incRef(a.dataId),{dataId:a.dataId,shape:c,dtype:a.dtype}):function(t,e,n){var r=[z(t.shape)].concat(Object(d.a)(V(t.shape))),a={dtype:t.dtype,shape:r,dataId:t.dataId},i=[z(e)].concat(Object(d.a)(V(e))),o=new Ge(i,r),s=n.runWebGLProgram(o,[a],t.dtype,null,!0);return{dataId:s.dataId,shape:e,dtype:s.dtype}}(a,c,s)}var Mn={kernelName:o.nc,backendName:"webgl",kernelFunc:Rn},Pn=function t(e,n){Object(h.a)(this,t),this.variableNames=["x"];var r=e.windowSize,a=e.batchSize,i=e.inSize,s=e.outSize;this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,d="sumValue += dot(values, ones);";if(null!=n){var l=1/n;d="sumValue += dot(values * ".concat(o.Md.isInt(l)?l.toPrecision(2):l,", ones);")}var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(d,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(d,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(d,"\n        }\n        setOutput(sumValue);\n      }\n    ")},Dn=function t(e,n){Object(h.a)(this,t),this.variableNames=["x"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=e.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var d=4*Math.floor(r/4),l=r%4,p="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n      }\n    "),f="vec4";"all"===n?(s="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===n&&(s="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var m="";i%r>0&&(m="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(m,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(d,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(p,"\n        }\n\n        int inIdx = inOffset + ").concat(d,";\n        if (").concat(1===l,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(2===l,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(p,"\n        } else if (").concat(3===l,") {\n          ").concat(f," values = ").concat(f,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(p,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")};function Fn(t,e,n,r){for(var a=function(t){for(var e=[];0===e.length||1!==e[e.length-1].outSize;){var n=e.length?e[e.length-1].outSize:t[1],r=o.dd.computeOptimalWindowSize(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}(t.shape),i=t,s=0;s<a.length;s++){var u,c=a[s],d=c.inSize,l=c.windowSize,h=c.outSize,p=void 0;p="mean"===n?0===s?new Pn({windowSize:l,inSize:d,batchSize:t.shape[0],outSize:h},d):new Pn({windowSize:l,inSize:d,batchSize:t.shape[0],outSize:h}):new Dn({windowSize:l,inSize:d,batchSize:t.shape[0],outSize:h},n),u=i,i=r.runWebGLProgram(p,[i],e),u.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(u)}return i}var Ln=function t(e,n){Object(h.a)(this,t),this.variableNames=["A"];for(var r=new Array(e.length),a=0;a<r.length;a++)r[a]=e[n[a]];this.outputShape=r,this.rank=r.length;var i=jt(this.rank),o=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank ".concat(e," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),a=0;a<t.length;a++)r[t[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")};var Bn=function t(e,n){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(e.length),a=0;a<r.length;a++)r[a]=e[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=jt(this.rank),o=ze("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),d="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),l="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(d,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(d,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};function Un(t,e,n){var r=Object(o.nd)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Bn(t.shape,e):new Ln(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}function zn(t){var e=t.inputs,n=t.backend,r=t.attrs;return function(t,e,n,r){var a=e,i=t.shape.length,u=o.Md.parseAxisParam(a,t.shape),c=u,d=o.dd.getAxesPermutation(c,i),l=null!=d,h=t;l&&(h=Un(t,d,r),c=o.dd.getInnerMostAxes(c.length,i)),o.dd.assertAxesAreInnerMostDims("sum",c,i);var p=o.dd.computeOutAndReduceShapes(h.shape,c),f=Object(s.a)(p,2),m=f[0],v=f[1],b=m;n&&(b=o.dd.expandShapeToKeepDim(m,u));var g=o.Md.sizeFromShape(v),y=Rn({inputs:{x:h},attrs:{shape:[o.Md.sizeFromShape(t.shape)/g,g]},backend:r}),x=Fn(y,Object(o.Fd)(t.dtype),"sum",r),O=Rn({inputs:{x:x},attrs:{shape:b},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(x),l&&r.disposeIntermediateTensorInfo(h),O}(e.x,r.axis,r.keepDims,n)}var Vn={kernelName:o.Pc,backendName:"webgl",kernelFunc:zn};function Wn(t){for(var e,n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),d=0;d<c.length;d++)c[d]=i.shape[o[d]];if(s.shouldExecuteOnCPU([i])){var l=s.texData.get(i.dataId).values,h=Be(l,i.shape,i.dtype,o,c);e=s.makeTensorInfo(c,i.dtype),s.texData.get(e.dataId).values=h}else e=Un(i,o,s);return e}var Gn={kernelName:o.Wc,backendName:"webgl",kernelFunc:Wn};function Hn(t){var e=t.a,n=t.b,r=t.transposeA,a=t.transposeB,i=t.backend,s=t.bias,u=void 0===s?null:s,c=t.preluActivationWeights,d=void 0===c?null:c,l=t.leakyreluAlpha,h=void 0===l?0:l,p=t.activation,f=void 0===p?null:p,m=e.shape.length,v=n.shape.length,b=r?e.shape[m-2]:e.shape[m-1],g=a?n.shape[v-1]:n.shape[v-2],y=r?e.shape[m-1]:e.shape[m-2],x=a?n.shape[v-2]:n.shape[v-1],O=e.shape.slice(0,-2),w=n.shape.slice(0,-2),_=o.Md.sizeFromShape(O),T=o.Md.sizeFromShape(w),E=_===T||1===_||1===T;o.Md.assert(m>=2&&v>=2&&E,(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(O,") and (").concat(w,").")}));var k=(_>T?e.shape.slice(0,-2):n.shape.slice(0,-2)).concat([y,x]);o.Md.assert(b===g,(function(){return"Error in matMul: inner shapes (".concat(b,") and (")+"".concat(g,") of Tensors with shapes ").concat(e.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var I,S=r?[_,b,y]:[_,y,b],C=a?[T,x,g]:[T,g,x],N=Rn({inputs:{x:e},backend:i,attrs:{shape:S}}),j=Rn({inputs:{x:n},backend:i,attrs:{shape:C}}),A=[N,j],R=Math.max(_,T),M=r?N.shape[1]:N.shape[2],P=null!=u,D=null!=d,F="leakyrelu"===f,L=null!=f?En(f,!0):null;if((1===y||1===x)&&M>1e3&&!1===(P||D||F||null!=L)){var B=N,U=j;r&&(B=Wn({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),A.push(B)),a&&(U=Wn({inputs:{x:j},backend:i,attrs:{perm:[0,2,1]}}),A.push(U));var z=1===x,V=B;1!==x&&(V=Rn({inputs:{x:B},backend:i,attrs:{shape:[R,M,1]}}),A.push(V));var W=1===x?2:1,G=U;z&&(G=Rn({inputs:{x:U},backend:i,attrs:{shape:[R,1,M]}}),A.push(G));var H=jn({inputs:{a:V,b:G},backend:i});I=zn({inputs:{x:H},backend:i,attrs:{axis:W,keepDims:!0}}),A.push(H)}else{var X=Object(o.Ld)(e.dtype,n.dtype),Y=new kn(S,C,[R,y,x],r,a,P,L,D,F),q=[N,j];if(null!=u&&q.push(u),D&&q.push(d),F){var K=i.makeTensorInfo([],"float32",o.Md.createScalarValue(h,"float32"));q.push(K),A.push(K)}I=i.runWebGLProgram(Y,q,X)}var Z=Rn({inputs:{x:I},backend:i,attrs:{shape:k}});A.push(I);for(var J=0,Q=A;J<Q.length;J++){var $=Q[J];i.disposeIntermediateTensorInfo($)}return Z}var Xn={kernelName:o.bd,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.a,i=e.b,o=e.bias,s=e.preluActivationWeights,u=r.transposeA,c=r.transposeB,d=r.activation;return Hn({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:d})}};var Yn={kernelName:o.a,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,r=t.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),s=Re(i.values);return r.makeTensorInfo(a.shape,a.dtype,s)}return e=Object(o.nd)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new on(a.shape,"return abs(x);"):new Ke(a.shape,"return abs(x);"),r.runWebGLProgram(e,[a],a.dtype)}},qn=_n({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),Kn={kernelName:o.b,backendName:"webgl",kernelFunc:qn},Zn=_n({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Jn={kernelName:o.c,backendName:"webgl",kernelFunc:Zn},Qn="return a + b;",$n=Tn({opSnippet:Qn,packedOpSnippet:Qn,supportsComplex:!0,cpuKernelImpl:he}),tr={kernelName:o.d,backendName:"webgl",kernelFunc:$n},er=function t(e,n){Object(h.a)(this,t),this.outputShape=[],this.outputShape=e,this.variableNames=n.map((function(t,e){return"T".concat(e)}));var r=[];this.variableNames.forEach((function(t){r.push("float v".concat(t," = get").concat(t,"AtOutCoords();"))}));var a=this.variableNames.map((function(t){return"v".concat(t)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},nr=function t(e,n){Object(h.a)(this,t),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((function(t,e){return"T".concat(e)}));var r=[];this.variableNames.forEach((function(t){r.push("vec4 v".concat(t," = get").concat(t,"AtOutCoords();"))}));var a=this.variableNames.map((function(t){return"v".concat(t)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")};var rr={kernelName:o.e,backendName:"webgl",kernelFunc:function t(e){var n=e.inputs,r=e.backend,a=n;if(1===a.length)return pn({inputs:{x:a[0]},backend:r});if(a.length>Object(o.nd)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),s=t({inputs:a.slice(0,i),backend:r}),u=t({inputs:a.slice(i),backend:r});return t({inputs:[s,u],backend:r})}var c=a.map((function(t){return t.dtype})).reduce((function(t,e){return Object(o.Ld)(t,e)})),d=a.map((function(t){return t.shape})),l=Object(o.nd)().getBool("WEBGL_PACK")?new nr(a[0].shape,d):new er(a[0].shape,d);return r.runWebGLProgram(l,a,c)}};var ar={kernelName:o.f,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.axis,u=r.keepDims,c=a.shape.length,d=o.Md.parseAxisParam(i,a.shape),l=d,h=o.dd.getAxesPermutation(l,c),p=a;null!=h&&(p=Wn({inputs:{x:a},backend:n,attrs:{perm:h}}),l=o.dd.getInnerMostAxes(l.length,c)),o.dd.assertAxesAreInnerMostDims("all",l,c);var f,m=o.dd.computeOutAndReduceShapes(p.shape,l),v=Object(s.a)(m,2),b=v[0],g=v[1],y=Rn({inputs:{x:p},backend:n,attrs:{shape:[-1,o.Md.sizeFromShape(g)]}}),x=Fn(y,y.dtype,"all",n);return f=Rn(u?{inputs:{x:x},backend:n,attrs:{shape:o.dd.expandShapeToKeepDim(b,d)}}:{inputs:{x:x},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),null!=h&&n.disposeIntermediateTensorInfo(p),f}};var ir={kernelName:o.g,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.axis,u=r.keepDims,c=a.shape.length,d=o.Md.parseAxisParam(i,a.shape),l=d,h=o.dd.getAxesPermutation(l,c),p=a;null!=h&&(p=Wn({inputs:{x:a},backend:n,attrs:{perm:h}}),l=o.dd.getInnerMostAxes(l.length,c)),o.dd.assertAxesAreInnerMostDims("any",l,c);var f,m=o.dd.computeOutAndReduceShapes(p.shape,l),v=Object(s.a)(m,2),b=v[0],g=v[1],y=Rn({inputs:{x:p},backend:n,attrs:{shape:[-1,o.Md.sizeFromShape(g)]}}),x=Fn(y,y.dtype,"any",n);return f=Rn(u?{inputs:{x:x},backend:n,attrs:{shape:o.dd.expandShapeToKeepDim(b,d)}}:{inputs:{x:x},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),null!=h&&n.disposeIntermediateTensorInfo(p),f}},or=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["A"];var a=e.windowSize,i=e.batchSize,o=e.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")},sr=function t(e,n,r,a){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,o.Md.assert(e.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=e[e.length-1],s=Math.ceil(i/n);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),a||this.variableNames.push("bestIndicesA");var u,c,d=this.outputShape,l=d.length,p=jt(l),f=Ve("coords",l);if(1===s){var m=jt(c=l+1);u="\n        ".concat(m," sourceLocR = ").concat(m,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(m," sourceLocG = ").concat(m,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(m," sourceLocA = ").concat(m,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(m," sourceLocB = ").concat(m,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else c=l,u="\n        ".concat(p," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(p," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(p," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(p," sourceLocB = coords;\n        --").concat(f[l-2],";");var v=["x","y","z","w","u","v"].slice(0,c),b="."+v[c-1],g=v.map((function(t){return"int "+t})),y=Ve("sourceLocR",c-1).concat("inIdx.r"),x=Ve("sourceLocG",c-1).concat("inIdx.g"),O=Ve("sourceLocB",c-1).concat("inIdx.b"),w=Ve("sourceLocA",c-1).concat("inIdx.a"),_="max"===r?"greaterThan":"lessThan",T=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(O.join(),"),\n                             getBestIndicesAChannel(").concat(w.join(),")));"),E="vec4(\n            getAChannel(".concat(y.join(),"),\n            hasNextCol ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(O.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(w.join(),") : 0.)"),k=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(v.join(),"),\n                                          vec2(").concat(v.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(v.join(),"),\n                               vec2(").concat(v.slice(-2).join(),"));\n      }\n      ").concat(k,"\n      void main() {\n        ").concat(p," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(d[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(d[l-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(b,", sourceLocG").concat(b,",\n          sourceLocB").concat(b,", sourceLocA").concat(b,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(E,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(T,"\n          vec4 candidate = ").concat(E,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(_,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")};function ur(t,e,n,r){var a=[n];if(o.dd.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,e.shape.length),!Object(o.nd)().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){var i=[],u=o.dd.computeOutAndReduceShapes(e.shape,a),c=Object(s.a)(u,2),d=c[0],l=c[1],h=o.Md.sizeFromShape(l),p=Rn({inputs:{x:e},backend:t,attrs:{shape:[-1,h]}});i.push(p);var f=function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=n.shape[0],s=n.shape[1];null!=a&&(i=a.shape[0],s=a.shape[1]);var u=o.dd.computeOptimalWindowSize(s),c={windowSize:u,inSize:s,batchSize:i,outSize:Math.ceil(s/u)},d=new or(c,r,null==a),l=[n];null!=a&&l.push(a);var h=e.runWebGLProgram(d,l,"int32");if(1===h.shape[1])return h;var p=t(e,n,r,h);return e.disposeIntermediateTensorInfo(h),p}(t,p,r);i.push(f);var m=Rn({inputs:{x:f},backend:t,attrs:{shape:d}});return i.forEach((function(e){return t.disposeIntermediateTensorInfo(e)})),m}return function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=null!=a?a.shape:n.shape,s=i[i.length-1],u=o.dd.computeOptimalWindowSize(s),c=new sr(i,u,r,null==a),d=null==a?[n]:[n,a],l=e.runWebGLProgram(c,d,"int32");if(l.shape.length===n.shape.length){var h=t(e,n,r,l);return e.disposeIntermediateTensorInfo(l),h}return l}(t,e,r)}var cr={kernelName:o.h,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.axis,s=o.Md.parseAxisParam(i,a.shape),u=o.dd.getAxesPermutation(s,a.shape.length),c=a,d=[];null!=u&&(c=Wn({inputs:{x:a},backend:n,attrs:{perm:u}}),d.push(c),s=o.dd.getInnerMostAxes(s.length,c.shape.length)),o.dd.assertAxesAreInnerMostDims("argMax",[s[0]],c.shape.length);var l=ur(n,c,s[0],"max");return d.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),l}};var dr={kernelName:o.i,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.axis,s=o.Md.parseAxisParam(i,a.shape),u=o.dd.getAxesPermutation(s,a.shape.length),c=a,d=[];null!=u&&(c=Wn({inputs:{x:a},backend:n,attrs:{perm:u}}),d.push(c),s=o.dd.getInnerMostAxes(s.length,c.shape.length)),o.dd.assertAxesAreInnerMostDims("argMin",[s[0]],c.shape.length);var l=ur(n,c,s[0],"min");return d.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),l}},lr=_n({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),hr={kernelName:o.j,backendName:"webgl",kernelFunc:lr},pr=_n({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),fr={kernelName:o.k,backendName:"webgl",kernelFunc:pr},mr=_n({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),vr={kernelName:o.l,backendName:"webgl",kernelFunc:mr},br=Tn({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),gr={kernelName:o.m,backendName:"webgl",kernelFunc:br},yr=_n({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),xr={kernelName:o.n,backendName:"webgl",kernelFunc:yr},Or=function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(h.a)(this,t),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=e.filterWidth,s=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,l=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var v="avg"===n,b="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),y="0.0";if(v||(y="-1.0 / 1e-20"),r){var x=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(f,", ").concat(m,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(d,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(x," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?b:g:"wR * ".concat(p," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var O="max",w="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(w="avgValue / count");var _=4*Math.floor(o/4),T=o%4,E="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(O,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(m,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(l,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(_,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(d,", d),\n              getValue(batch, xR, xC + 2 * ").concat(d,", d),\n              getValue(batch, xR, xC + 3 * ").concat(d,", d)\n            );\n\n            ").concat(E,"\n          }\n\n          int xC = xCCorner + ").concat(_,";\n          if (").concat(1===T,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(E,"\n          } else if (").concat(2===T,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(d,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(E,"\n          } else if (").concat(3===T,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(d,", d),\n              getValue(batch, xR, xC + 2 * ").concat(d,", d),\n              initializationValue\n            );\n\n            ").concat(E,"\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}},wr=function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(h.a)(this,t),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=e.filterWidth,s=e.strideDepth,u=e.strideHeight,c=e.strideWidth,d=e.dilationDepth,l=e.dilationHeight,p=e.dilationWidth,f=e.effectiveFilterDepth,m=e.effectiveFilterHeight,v=e.effectiveFilterWidth,b=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;var x="avg"===n,O="0.0";if(x||(O="-1.0 / 1e-20"),r){var w=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(b,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(f,";\n              wD += ").concat(d,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(m,";\n                wR += ").concat(l,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(p,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(w," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(m," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var _="max",T="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(T="avgValue / count");var E=4*Math.floor(o/4),k=o%4,I="\n      if (".concat(x,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(_,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(b,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(O,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(O,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(d,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(m,";\n            wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(E,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(p,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(p,", ch)\n              );\n\n              ").concat(I,"\n            }\n\n            int xC = xCCorner + ").concat(E,";\n            if (").concat(1===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(2===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(3===k,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(p,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(p,", ch),\n                initializationValue\n              );\n\n              ").concat(I,"\n            }\n          }\n          setOutput(").concat(T,");\n        }\n      }\n    ")}};var _r={kernelName:o.o,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x;Z(a,"avgPool");var i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;o.Md.assert(o.dd.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")}));var d=o.dd.computePool2DInfo(a.shape,i,s,1,u,c);if(1===d.filterWidth&&1===d.filterHeight&&o.Md.arraysEqual(d.inShape,d.outShape))return pn({inputs:{x:a},backend:n});var l=new Or(d,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var Tr={kernelName:o.p,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,d=r.dataFormat,l=o.dd.computePool3DInfo(a.shape,i,s,[1,1,1],u,c,d),h=new wr(l,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}},Er=function t(e){Object(h.a)(this,t),this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=u-1-e.padInfo.top,l=c-1-e.padInfo.left,p=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(d,", ").concat(l,");\n      const float avgMultiplier = float(").concat(p,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},kr=function t(e){Object(h.a)(this,t),this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,l=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=l-1-e.padInfo.front,v=p-1-e.padInfo.top,b=f-1-e.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(m,", ").concat(v,", ").concat(b,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(l,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(p,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(d,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var Ir={kernelName:o.q,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.dy,i=e.input,s=r.filterSize,u=r.strides,c=r.pad,d=r.dimRoundingMode,l=o.dd.computePool3DInfo(i.shape,s,u,[1,1,1],c,d),h=new kr(l);return n.runWebGLProgram(h,[a],i.dtype)}};var Sr={kernelName:o.r,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.dy,i=e.input,s=i;Z([a,i],"avgPoolGrad");var u=r.filterSize,c=r.strides,d=r.pad,l=o.dd.computePool2DInfo(s.shape,u,c,1,d),h=new Er(l);return n.runWebGLProgram(h,[a],s.dtype)}};var Cr={kernelName:o.s,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;return Hn({a:e.a,b:e.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},Nr=function t(e,n,r,a,i,s){Object(h.a)(this,t),this.outputShape=[],this.variableNames=["x","mean","variance"],o.dd.assertAndGetBroadcastShape(e,n),o.dd.assertAndGetBroadcastShape(e,r);var u="0.0";null!=a&&(o.dd.assertAndGetBroadcastShape(e,a),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var c="1.0";null!=i&&(o.dd.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(u,";\n        float scale = ").concat(c,";\n        float inv = scale * inversesqrt(variance + float(").concat(s,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},jr=function t(e,n,r,a,i,s){Object(h.a)(this,t),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],o.dd.assertAndGetBroadcastShape(e,n),o.dd.assertAndGetBroadcastShape(e,r);var u="vec4(0.0)";null!=a&&(o.dd.assertAndGetBroadcastShape(e,a),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var c="vec4(1.0)";null!=i&&(o.dd.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(u,";\n        vec4 scale = ").concat(c,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(s,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},Ar={kernelName:o.ib,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.mean,s=e.variance,u=e.offset,c=e.scale;o.Md.assert(i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),o.Md.assert(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),o.Md.assert(null==c||i.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d=r.varianceEpsilon;null==d&&(d=.001);var l=[a,i,s],h=null;null!=u&&(h=u.shape,l.push(u));var p=null;null!=c&&(p=c.shape,l.push(c));var f=Object(o.nd)().getBool("WEBGL_PACK_NORMALIZATION")?new jr(a.shape,i.shape,s.shape,h,p,d):new Nr(a.shape,i.shape,s.shape,h,p,d);return n.runWebGLProgram(f,l,l[0].dtype)}},Rr=function(){function t(e){Object(h.a)(this,t),this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=jt(this.rank),a="uniform int start[".concat(this.rank,"];"),i=function(t){if(1===t)return"sourceLoc";if(t<=6)return Mr.slice(0,t).map((function(t){return"sourceLoc."+t})).join(",");throw Error("Slicing for rank ".concat(t," is not yet supported"))}(this.rank),o=e.map((function(t,e){return"sourceLoc.".concat(Mr[e]," = start[").concat(e,"] + coords.").concat(Mr[e],";")}));n="\n        ".concat(r," sourceLoc;\n        ").concat(r," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      ".concat(a,"\n      void main() {\n        ").concat(n,"\n        setOutput(getSource(").concat(i,"));\n      }\n    ")}return Object(p.a)(t,[{key:"getCustomSetupFunc",value:function(t){var e=this;if(t.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(t.length,")"));return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}}}]),t}(),Mr=["x","y","z","w","u","v"];var Pr=function(){function t(e){Object(h.a)(this,t),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=jt(this.rank),r=Ve("coords",this.rank),a=Ve("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(e.map((function(t,e){return"start[".concat(e,"]")})).join(),");"):e.map((function(t,e){return"".concat(a[e]," = ").concat(r[e]," + start[").concat(e,"];")})).join("\n");this.userCode="\n      uniform int start[".concat(this.rank,"];\n      void main() {\n        ").concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}return Object(p.a)(t,[{key:"getCustomSetupFunc",value:function(t){var e=this;if(t.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(t.length,")"));return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}}}]),t}();function Dr(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.begin,u=r.size,c=o.Bd.parseSliceParams(a,i,u),d=Object(s.a)(c,2),l=d[0],h=d[1];if(o.Bd.assertParamsValid(a,l,h),0===o.Md.sizeFromShape(h))return n.makeTensorInfo(h,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var p=n.texData.get(a.dataId),f=Me(p.values,l,h,a.shape,a.dtype);return n.makeTensorInfo(h,a.dtype,f)}var m=n.texData.get(a.dataId).isPacked,v=o.Bd.isSliceContinous(a.shape,l,h);if(m||!v){var b=Object(o.nd)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Pr(h):new Rr(h),g=b.getCustomSetupFunc(l);return n.runWebGLProgram(b,[a],a.dtype,g)}return n.uploadToGPU(a.dataId),function(t,e,n,r){var a=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),s=r.texData.get(i.dataId);Object.assign(s,a),s.refCount=1,s.shape=n,s.dtype=t.dtype;var u=o.Bd.computeFlatOffset(e,o.Md.computeStrides(t.shape));a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||t.dataId};var c=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,c+1),i}(a,l,h,n)}var Fr={kernelName:o.Dc,backendName:"webgl",kernelFunc:Dr},Lr={kernelName:o.t,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.blockShape,s=r.crops;o.Md.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var u=i.reduce((function(t,e){return t*e})),c=o.dd.getReshaped(a.shape,i,u),d=o.dd.getPermuted(c.length,i.length),l=o.dd.getReshapedPermuted(a.shape,i,u),h=o.dd.getSliceBeginCoords(s,i.length),p=o.dd.getSliceSize(l,s,i.length),f=[],m=Rn({inputs:{x:a},backend:n,attrs:{shape:c}}),v=Wn({inputs:{x:m},backend:n,attrs:{perm:d}}),b=Rn({inputs:{x:v},backend:n,attrs:{shape:l}}),g=Dr({inputs:{x:b},backend:n,attrs:{begin:h,size:p}});return f.push(m),f.push(v),f.push(b),f.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),g}};var Br={kernelName:o.u,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=pe(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}},Ur=Tn({opSnippet:"return float(a != b);",dtype:"bool"}),zr={kernelName:o.Zb,backendName:"webgl",kernelFunc:Ur};function Vr(t){var e=t.inputs,n=t.backend,r=e.input;return pn({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Wr={kernelName:o.ic,backendName:"webgl",kernelFunc:Vr};var Gr={kernelName:o.v,backendName:"webgl",kernelFunc:function t(e){var n=e.inputs,r=e.backend,a=e.attrs,i=n.x,s=a.dtype;if("complex64"===s){if("complex64"===i.dtype)return pn({inputs:{x:i},backend:r});var u=o.Nd(i.shape),c=t({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),d=mn({inputs:{real:c,imag:u},backend:r});return u.dispose(),r.disposeIntermediateTensorInfo(c),d}if("complex64"===i.dtype){var l=Vr({inputs:{input:i},backend:r}),h=t({inputs:{x:l},backend:r,attrs:{dtype:s}});return r.disposeIntermediateTensorInfo(l),h}if(!o.Md.hasEncodingLoss(i.dtype,s)){var p=pn({inputs:{x:i},backend:r});return{dataId:p.dataId,shape:p.shape,dtype:s}}if("int32"===s)return function(t,e){var n=new Ke(t.shape,"return float(int(x));"),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===s){var f=r.makeTensorInfo([],"bool",o.Md.getTypedArrayFromDType("bool",1)),m=Ur({inputs:{a:i,b:f},backend:r});return r.disposeIntermediateTensorInfo(f),m}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(s))}},Hr="return ceil(x);",Xr=_n({opSnippet:Hr,packedOpSnippet:Hr,cpuKernelImpl:me}),Yr={kernelName:o.w,backendName:"webgl",kernelFunc:Xr},qr=function(){function t(e){Object(h.a)(this,t),this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return Object(p.a)(t,[{key:"getCustomSetupFunc",value:function(t,e){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}}}]),t}(),Kr=function(){function t(e){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return Object(p.a)(t,[{key:"getCustomSetupFunc",value:function(t,e){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}}}]),t}();var Zr={kernelName:o.x,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,r=t.backend,a=t.attrs,i=n.x,s=a.clipValueMin,u=a.clipValueMax,c=(e=Object(o.nd)().getBool("WEBGL_PACK_CLIP")?new Kr(i.shape):new qr(i.shape)).getCustomSetupFunc(s,u);return r.runWebGLProgram(e,[i],i.dtype,c)}},Jr=function t(e){Object(h.a)(this,t),this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};function Qr(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}var $r={kernelName:o.z,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,a=n.texData.get(r.dataId),i=new Jr(r.shape),o=[Qr(r,a.complexTensorInfos.real),Qr(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},ta=function t(e){Object(h.a)(this,t),this.outputShape=[],this.outputShape=o.dd.computeOutShape(e,1),this.variableNames=e.map((function(t,e){return"T".concat(e)}));var n=new Array(e.length-1);n[0]=e[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+e[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var s=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(s,"));"))}var u=n.length,c=n[n.length-1];a.push("else setOutput(getT".concat(u,"(yR, yC-").concat(c,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")},ea=function t(e,n){Object(h.a)(this,t),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=o.dd.computeOutShape(e,n);var r=this.outputShape,a=r.length,i=jt(a),s=Ve("coords",a),u=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map((function(t,e){return"T".concat(e)}));var c=new Array(e.length-1);c[0]=e[0][n];for(var d=1;d<c.length;d++)c[d]=c[d-1]+e[d][n];for(var l=u[n],p=u.slice(-2),f=u.join(),m="if (".concat(l," < ").concat(c[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(p.join(),"));\n        }"),v=1;v<c.length;v++){var b=c[v-1];m+="\n        if (".concat(l," < ").concat(c[v],"  && ").concat(l," >= ").concat(c[v-1],") {\n          return getChannel(\n            getT").concat(v,"(").concat(na(u,l,b),"),\n            vec2(").concat(na(p,l,b),"));\n        }")}var g=c.length,y=c[c.length-1];m+="\n        return getChannel(\n          getT".concat(g,"(").concat(na(u,l,y),"),\n          vec2(").concat(na(p,l,y),"));"),this.userCode="\n      float getValue(".concat(u.map((function(t){return"int "+t})),") {\n        ").concat(m,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(s,"), 0., 0., 0.);\n\n        ").concat(s[a-1]," = ").concat(s[a-1]," + 1;\n        if (").concat(s[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(s,");\n        }\n\n        ").concat(s[a-2]," = ").concat(s[a-2]," + 1;\n        if (").concat(s[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(s,");\n        }\n\n        ").concat(s[a-1]," = ").concat(s[a-1]," - 1;\n        if (").concat(s[a-2]," < ").concat(r[a-2]," &&\n            ").concat(s[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(s,");\n        }\n        setOutput(result);\n      }\n    ")};function na(t,e,n){var r=t.indexOf(e);return t.map((function(t,e){return e===r?"".concat(t," - ").concat(n):t})).join()}function ra(t){var e=t.inputs,n=t.backend,r=e.input;return pn({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var aa={kernelName:o.rb,backendName:"webgl",kernelFunc:ra};function ia(t,e,n){var r=o.dd.computeOutShape(t.map((function(t){return t.shape})),e);return{tensors2D:t.map((function(t){return Rn({inputs:{x:t},attrs:{shape:[-1,o.Md.sizeFromShape(t.shape.slice(e))]},backend:n})})),outShape:r}}function oa(t){var e=t.inputs,n=t.backend,r=t.attrs.axis,a=o.Md.parseAxisParam(r,e[0].shape)[0],i=o.dd.computeOutShape(e.map((function(t){return t.shape})),a);if(0===o.Md.sizeFromShape(i))return n.makeTensorInfo(i,e[0].dtype,[]);var s=e.filter((function(t){return o.Md.sizeFromShape(t.shape)>0}));if(1===s.length)return pn({inputs:{x:s[0]},backend:n});var u=s.map((function(t){return t.shape}));return o.dd.assertParamsConsistent(u,a),function t(e,n,r){var a=e[0].dtype;if("complex64"===a){var i=e.map((function(t){return Vr({inputs:{input:t},backend:r})})),s=e.map((function(t){return ra({inputs:{input:t},backend:r})})),u=t(i,n,r),c=t(s,n,r),d=mn({inputs:{real:u,imag:c},backend:r});return i.forEach((function(t){return r.disposeIntermediateTensorInfo(t)})),s.forEach((function(t){return r.disposeIntermediateTensorInfo(t)})),r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(c),d}if("string"===a){var l=ia(e,n,r),h=l.tensors2D,p=l.outShape,f=h.map((function(t){return{vals:r.readSync(t.dataId),shape:t.shape}})),m=1===h[0].shape[0],v=ve(f,p,a,m),b=o.dd.computeOutShape(e.map((function(t){return t.shape})),n),g=r.makeTensorInfo(b,a,v);return h.forEach((function(t){return r.disposeIntermediateTensorInfo(t)})),g}if(e.length>Object(o.nd)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var y=Math.floor(e.length/2),x=t(e.slice(0,y),n,r),O=t(e.slice(y),n,r),w=t([x,O],n,r);return r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(O),w}if(Object(o.nd)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var _=new ea(e.map((function(t){return t.shape})),n);return r.runWebGLProgram(_,e,a)}var T=ia(e,n,r),E=T.tensors2D,k=T.outShape,I=new ta(E.map((function(t){return t.shape}))),S=r.runWebGLProgram(I,E,a);E.forEach((function(t){return r.disposeIntermediateTensorInfo(t)}));var C=Rn({inputs:{x:S},attrs:{shape:k},backend:r});return r.disposeIntermediateTensorInfo(S),C}(s,a,n)}var sa={kernelName:o.A,backendName:"webgl",kernelFunc:oa},ua=function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(h.a)(this,t),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,c=e.strideWidth,d=e.dilationHeight,l=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,m=4*Math.floor(e.inChannels/4),v=e.inChannels%4,b="channelsLast"===e.dataFormat,g=b?1:2,y=b?2:3,x=b?3:1,O="",w="";r&&(O=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),w="result = activation(result);");var _=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(O,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(x,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(p,"; wR++) {\n          int xR = xRCorner + wR * ").concat(d,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(f,"; wC++) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(m,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(b,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(b,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(m,") *\n                    getW(wR, wC, ").concat(m,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(m,", xR, xC) *\n                    getW(wR, wC, ").concat(m,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(m,", d2),\n                getW(wR, wC, ").concat(m," + 1, d2)\n              );\n\n              if (").concat(b,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(m,"),\n                  getX(batch, xR, xC, ").concat(m," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(m,", xR, xC),\n                  getX(batch, ").concat(m," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(m,", d2),\n                getW(wR, wC, ").concat(m," + 1, d2),\n                getW(wR, wC, ").concat(m," + 2, d2)\n              );\n\n              if (").concat(b,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(m,"),\n                  getX(batch, xR, xC, ").concat(m," + 1),\n                  getX(batch, xR, xC, ").concat(m," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(m,", xR, xC),\n                  getX(batch, ").concat(m," + 1, xR, xC),\n                  getX(batch, ").concat(m," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(_,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")},ca=function t(e){Object(h.a)(this,t),this.variableNames=["x","W"],this.outputShape=e.outShape;var n=e.padInfo.front,r=e.padInfo.top,a=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,l=e.filterDepth,p=e.filterHeight,f=e.filterWidth,m=4*Math.floor(e.inChannels/4),v=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(l,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,"; wC++) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(m,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(m,") *\n                  getW(wF, wR, wC, ").concat(m,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(m,"),\n                  getX(batch, xF, xR, xC, ").concat(m," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(m,", d2),\n                  getW(wF, wR, wC, ").concat(m," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(m,"),\n                  getX(batch, xF, xR, xC, ").concat(m," + 1),\n                  getX(batch, xF, xR, xC, ").concat(m," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(m,", d2),\n                  getW(wF, wR, wC, ").concat(m," + 1, d2),\n                  getW(wF, wR, wC, ").concat(m," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},da=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var a=r.filterWidth,i=r.inChannels,o=r.strideWidth,s=r.strideHeight,u=r.padInfo,c=r.outWidth,d=r.dilationWidth,l=r.dilationHeight,p=r.dataFormat,f=u.left,m=u.top,v=i*a,b=Q(),g="channelsLast"===p,y=g?0:1,x=g?1:2,O="",w=0;w<=1;w++)for(var _=0;_<=1;_++)O+="\n          blockIndex = rc.y + ".concat(_,";\n          pos = rc.x + ").concat(w,";\n\n          if(blockIndex < ").concat(e[1]," && pos < ").concat(e[0],") {\n            offsetY = int(blockIndex / (").concat(c,")) * ").concat(s," - ").concat(m,";\n            d0 = offsetY + ").concat(l," * (pos / ").concat(v,");\n\n            if(d0 < ").concat(n[y]," && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ").concat(c,".) * ").concat(o,". - ").concat(f,".);\n              d1 = offsetX + ").concat(d," * (int(mod(float(pos), ").concat(v,".) / ").concat(i,".));\n\n              if(d1 < ").concat(n[x]," && d1 >= 0) {\n\n                ch = int(mod(float(pos), ").concat(i,".));\n\n                if (").concat(g,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*w+_,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*w+_,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(O,"\n\n        ").concat(b.output," = result;\n      }\n    ")};function la(t){var e,n=t.x,r=t.filter,a=t.convInfo,i=t.backend,s=t.bias,u=void 0===s?null:s,c=t.preluActivationWeights,d=void 0===c?null:c,l=t.leakyreluAlpha,h=void 0===l?0:l,p=t.activation,f=void 0===p?null:p,m=n.shape,v=i.texData.get(n.dataId),b=a.inChannels,g=m[0]*m[1]*m[2],y=a.outChannels,x="channelsLast"===a.dataFormat,O=[],w=(1===g||1===y)&&b>1e3,_=m[2]%2!==0&&!!v.isPacked;if(!w&&Object(o.nd)().getBool("WEBGL_LAZILY_UNPACK")&&Object(o.nd)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&_){var T=x?m[0]*m[1]*(m[2]+1):m[0]*m[2]*(m[3]+1),E={dataId:n.dataId,shape:[1,T,a.inChannels],dtype:n.dtype},k=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,o.Md.assert(H(v.shape,E.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(E.shape," isn't free")}));var I=Rn({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});O.push(I);var S=Hn({a:E,b:I,backend:i,transposeA:!1,transposeB:!1,bias:u,activation:f,preluActivationWeights:d,leakyreluAlpha:h}),C=i.texData.get(S.dataId);o.Md.assert(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=k,C.shape=a.outShape,(e=pn({inputs:{x:S},backend:i})).shape=a.outShape,O.push(S)}else{var N=Rn({inputs:{x:n},backend:i,attrs:{shape:[1,x?m[0]*m[1]*m[2]:m[0]*m[2]*m[3],a.inChannels]}}),j=Rn({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),A=Hn({a:N,b:j,transposeA:!1,transposeB:!1,backend:i,bias:u,activation:f,preluActivationWeights:d,leakyreluAlpha:h});e=Rn({inputs:{x:A},backend:i,attrs:{shape:a.outShape}}),O.push(N),O.push(j),O.push(A)}for(var R=0,M=O;R<M.length;R++){var P=M[R];i.disposeIntermediateTensorInfo(P)}return e}function ha(t){var e=t.x,n=t.filter,r=t.convInfo,a=t.backend,i=t.bias,s=void 0===i?null:i,u=t.preluActivationWeights,c=void 0===u?null:u,d=t.leakyreluAlpha,l=void 0===d?0:d,h=t.activation,p=void 0===h?null:h,f=r.filterWidth,m=r.filterHeight,v=r.inChannels,b=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,x=f*m*v,O=g*b,w=[x,O],_=[],T=Rn({inputs:{x:e},backend:a,attrs:{shape:e.shape.slice(1)}}),E=Rn({inputs:{x:n},backend:a,attrs:{shape:[1,x,o.Md.sizeFromShape(n.shape)/x]}});_.push(T),_.push(E);var k=new da(w,T.shape,r),I=a.runWebGLProgram(k,[T],"float32"),S=Rn({inputs:{x:I},backend:a,attrs:{shape:[1,w[0],w[1]]}});_.push(I),_.push(S);var C=null!=s,N=null!=c,j="leakyrelu"===p,A=p?En(p,!0):null,R=new kn(S.shape,E.shape,[1,O,r.outChannels],!0,!1,C,A,N,j),M=[S,E];if(s&&M.push(s),N&&M.push(c),j){var P=a.makeTensorInfo([],"float32",o.Md.createScalarValue(l,"float32"));M.push(P),_.push(P)}var D=a.runWebGLProgram(R,M,"float32"),F=Rn({inputs:{x:D},backend:a,attrs:{shape:y?[1,g,b,r.outChannels]:[1,r.outChannels,g,b]}});_.push(D);for(var L=0,B=_;L<B.length;L++){var U=B[L];a.disposeIntermediateTensorInfo(U)}return F}var pa={kernelName:o.B,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,r=t.backend,a=t.attrs,i=n.x,s=n.filter,u=a.strides,c=a.pad,d=a.dataFormat,l=a.dilations,h=a.dimRoundingMode,p=o.dd.convertConv2DDataFormat(d),f=o.dd.computeConv2DInfo(i.shape,s.shape,u,l,c,h,!1,p);if(1!==f.filterHeight||1!==f.filterWidth||1!==f.dilationHeight||1!==f.dilationWidth||1!==f.strideHeight||1!==f.strideWidth||"SAME"!==f.padInfo.type&&"VALID"!==f.padInfo.type)if(Object(o.nd)().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])e=ha({x:i,filter:s,convInfo:f,backend:r});else{var m=new ua(f);e=r.runWebGLProgram(m,[i,s],"float32")}else e=la({x:i,filter:s,convInfo:f,backend:r});var v=Rn({inputs:{x:e},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(e),v}},fa=function t(e){Object(h.a)(this,t),this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},ma=function t(e){Object(h.a)(this,t),this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o="channelsLast"===e.dataFormat,s=n-1-e.padInfo.top,u=r-1-e.padInfo.left,c=o?1:2,d=o?2:3,l=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(l,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(d,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},va=function t(e){Object(h.a)(this,t),this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},ba=function t(e){Object(h.a)(this,t),this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterDepth,r=e.filterHeight,a=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,u=n-1-e.padInfo.front,c=r-1-e.padInfo.top,d=a-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var ga={kernelName:o.C,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.dy,s=r.strides,u=r.pad,c=r.dataFormat,d=r.dimRoundingMode,l=r.filterShape,h=o.dd.convertConv2DDataFormat(c),p=o.dd.computeConv2DInfo(a.shape,l,s,1,u,d,!1,h),f=new fa(p);return n.runWebGLProgram(f,[a,i],"float32")}};var ya={kernelName:o.D,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.dy,i=e.filter,s=r.inputShape,u=r.strides,c=r.pad,d=r.dataFormat,l=r.dimRoundingMode,h=o.dd.convertConv2DDataFormat(d),p=o.dd.computeConv2DInfo(s,i.shape,u,1,c,l,!1,h),f=new ma(p);return n.runWebGLProgram(f,[a,i],"float32")}};var xa={kernelName:o.E,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.filter,s=r.strides,u=r.pad,c=r.dilations,d=o.dd.computeConv3DInfo(a.shape,i.shape,s,c,u),l=new ca(d);return n.runWebGLProgram(l,[a,i],"float32")}};var Oa={kernelName:o.F,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.dy,s=r.strides,u=r.pad,c=r.filterShape,d=o.dd.computeConv3DInfo(a.shape,c,s,1,u),l=new va(d);return n.runWebGLProgram(l,[a,i],"float32")}};var wa={kernelName:o.G,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.dy,i=e.filter,s=r.pad,u=r.strides,c=r.inputShape,d=o.dd.computeConv3DInfo(c,i.shape,u,1,s),l=new ba(d);return n.runWebGLProgram(l,[a,i],"float32")}},_a=_n({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),Ta={kernelName:o.H,backendName:"webgl",kernelFunc:_a},Ea=_n({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),ka={kernelName:o.I,backendName:"webgl",kernelFunc:Ea},Ia=function t(e,n,r,a,i){Object(h.a)(this,t),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=Object(s.a)(e,4),u=o[0],c=o[1],d=o[2],l=o[3],p=Object(s.a)(n,1)[0],f=Object(s.a)(r,2),m=f[0],v=f[1];this.outputShape=[p,m,v,l];var b="bilinear"===a?1:0,g="".concat(c-1,".0"),y="".concat(d-1,".0"),x=m>1?["".concat((c-1)/(m-1)),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],O=Object(s.a)(x,3),w=O[0],_=O[1],T=O[2],E=v>1?["".concat((d-1)/(v-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],k=Object(s.a)(E,3),I=k[0],S=k[1],C=k[2];this.userCode="\n      const float height_ratio = float(".concat(w,");\n      const float width_ratio = float(").concat(I,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(u,") {\n          return;\n        }\n\n        float height_scale = ").concat(_,";\n        float width_scale = ").concat(S,";\n\n        float in_y = ").concat(T,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(C,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(b," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},Sa={kernelName:o.J,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.image,i=e.boxes,o=e.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,d=new Ia(a.shape,i.shape,s,u,c);return n.runWebGLProgram(d,[a,i,o],"float32")}},Ca=function(){function t(e,n,r){Object(h.a)(this,t),this.variableNames=["x"],this.outputShape=e;var a=e.length,i=n?"0.0":"getX(".concat(Na(a,"coords"),")"),o=e[e.length-1],s="",u="";n?(s=r?"end != ".concat(o-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(o):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      uniform float index;\n      void main() {\n        ".concat(jt(a)," coords = getOutputCoords();\n        int end = ").concat(ja(a,"coords"),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(ja(a,"coords")," = idx;\n          val += getX(").concat(Na(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}return Object(p.a)(t,[{key:"getCustomSetupFunc",value:function(t){var e=this;return function(n,r){null==e.index&&(e.index=n.getUniformLocation(r,"index")),n.gl.uniform1f(e.index,t)}}}]),t}();function Na(t,e){if(1===t)return"".concat(e);if(2===t)return"".concat(e,".x, ").concat(e,".y");if(3===t)return"".concat(e,".x, ").concat(e,".y, ").concat(e,".z");if(4===t)return"".concat(e,".x, ").concat(e,".y, ").concat(e,".z, ").concat(e,".w");throw Error("Cumulative sum for rank ".concat(t," is not yet supported"))}function ja(t,e){if(1===t)return"".concat(e);if(2===t)return"".concat(e,".y");if(3===t)return"".concat(e,".z");if(4===t)return"".concat(e,".w");throw Error("Cumulative sum for rank ".concat(t," is not yet supported"))}var Aa={kernelName:o.K,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.axis,s=r.exclusive,u=r.reverse,c=a.shape.length,d=o.dd.getAxesPermutation([i],c),l=a;null!=d&&(l=Wn({inputs:{x:a},backend:n,attrs:{perm:d}}));var h=o.dd.getInnerMostAxes(1,c)[0];if(h!==c-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(i));for(var p=l.shape[h],f=pn({inputs:{x:l},backend:n}),m=0;m<=Math.ceil(Math.log2(p))-1;m++){var v=new Ca(l.shape,!1,u),b=v.getCustomSetupFunc(m),g=f;f=n.runWebGLProgram(v,[f],f.dtype,b),n.disposeIntermediateTensorInfo(g)}if(s){var y=new Ca(l.shape,s,u),x=f;f=n.runWebGLProgram(y,[f],f.dtype),n.disposeIntermediateTensorInfo(x)}if(null!=d){var O=Wn({inputs:{x:f},backend:n,attrs:{perm:o.dd.getUndoAxesPermutation(d)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),O}return f}};var Ra={kernelName:o.M,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),d=pe(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,d)}if(2===a.shape.length){var l=n.bufferSync(a),h=n.bufferSync(i),p=fe(l,h,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},Ma=function(){function t(e,n,r){Object(h.a)(this,t),this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Object(p.a)(t,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),t}();var Pa={kernelName:o.N,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.blockSize,s=r.dataFormat;o.Md.assert(i>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(i)}));var u=a.shape[0],c="NHWC"===s?a.shape[1]:a.shape[2],d="NHWC"===s?a.shape[2]:a.shape[3],l="NHWC"===s?a.shape[3]:a.shape[1],h=c*i,p=d*i,f=l/(i*i),m=new Ma("NHWC"===s?[u,h,p,f]:[u,f,h,p],i,s);return n.runWebGLProgram(m,[a],a.dtype)}},Da=function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(h.a)(this,t),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,s=e.inWidth,u=e.padInfo.top,c=e.padInfo.left,d=e.strideHeight,l=e.strideWidth,p=e.dilationHeight,f=e.dilationWidth,m=e.filterHeight,v=e.filterWidth,b=e.outChannels/e.inChannels,g="",y="";r&&(g=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),y="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(g,"\n\n      const ivec2 strides = ivec2(").concat(d,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(b,";\n        int q = d2 - d1 * ").concat(b,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(m,"; wR++) {\n          int xR = xRCorner + wR * ").concat(p,";\n\n          if (xR < 0 || xR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(v,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(s,") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(x,"\n        ").concat(y,"\n        setOutput(result);\n      }\n    ")},Fa=function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(h.a)(this,t),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var s=e.inHeight,u=e.inWidth,c=e.padInfo.top,d=e.padInfo.left,l=e.strideHeight,p=e.strideWidth,f=e.dilationHeight,m=e.dilationWidth,v=e.filterHeight,b=e.filterWidth,g=b,y="int xR; int xC; int xCOffset;",x=0;x<v;x++)for(var O=0;O<b;O++)y+="\n          vec4 xTexelR".concat(x,"C").concat(2*O," = vec4(0.);\n          vec4 wR").concat(x,"C").concat(O," = vec4(0.);\n          vec4 xR").concat(x,"C").concat(O," = vec4(0.);");for(var w=0;w<v;w++)for(var _=0;_<g;_++){var T=2*_;if(y+="\n          xR = xRCorner + ".concat(w*f,";\n          xC = xCCorner + ").concat(T*m,";\n        "),1===p){if(T<b&&(y+=d%2===1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ".concat(s," && xCOffset >= 0 && xCOffset < ").concat(u,") {\n                  xTexelR").concat(w,"C").concat(T," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(u,") {\n                    xTexelR").concat(w,"C").concat(T,".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR").concat(w,"C").concat(T," = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ").concat(s," && xCOffset >= 0 && xCOffset < ").concat(u,") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(u,") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR").concat(w,"C").concat(T," = vec4(previous.zw, xTexelR").concat(w,"C").concat(T,".xy);\n                } else {\n                  xR").concat(w,"C").concat(T," = vec4(0, 0, xTexelR").concat(w,"C").concat(T,".xy);\n                }\n              "):"\n                if(xR >= 0 && xR < ".concat(s," && xC >= 0 && xC < ").concat(u,") {\n                  xTexelR").concat(w,"C").concat(T," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(w,"C").concat(T," = vec4(0.);\n                }\n\n                xR").concat(w,"C").concat(T," = xTexelR").concat(w,"C").concat(T,";\n              "),T+1<b)){var E=d%2===0?o.Md.nearestLargerEven(m):m;m%2===0&&d%2===1||m%2!==0&&d%2!==1?(y+="\n                  xCOffset = xC + ".concat(d%2," + ").concat(E,";\n\n                  if(xR >= 0 && xR < ").concat(s," &&\n                    xCOffset >= 0 && xCOffset < ").concat(u,") {\n                    xTexelR").concat(w,"C").concat(T+2," = getX(batch, xR, xCOffset, d1);\n                  }\n                "),m>1&&(y+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ".concat(s," &&\n                      xCOffset >= 0 && xCOffset < ").concat(u,") {\n                      xTexelR").concat(w,"C").concat(T," = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR").concat(w,"C").concat(T," = vec4(0.);\n                    }\n                  ")),y+="\n                  xR".concat(w,"C").concat(T+1," = vec4(\n                    xTexelR").concat(w,"C").concat(T,".zw, xTexelR").concat(w,"C").concat(T+2,".xy);\n                ")):y+="\n                  xCOffset = xC + ".concat(E,";\n\n                  if(xR >= 0 && xR < ").concat(s," &&\n                    xCOffset >= 0 && xCOffset < ").concat(u,") {\n                    xTexelR").concat(w,"C").concat(T+2," = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR").concat(w,"C").concat(T+1," = xTexelR").concat(w,"C").concat(T+2,";\n                ")}}else T<b&&(y+="\n              if(xR >= 0 && xR < ".concat(s,") {\n            "),d%2===1?(y+="\n                xCOffset = xC + 1 - ".concat(p,";\n                if(xCOffset >= 0 && xCOffset < ").concat(u,") {\n                  xTexelR").concat(w,"C").concat(T," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(w,"C").concat(T," = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ").concat(u,") {\n                  xTexelR").concat(w,"C").concat(T+2," = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR").concat(w,"C").concat(T+2," = vec4(0.);\n                }\n\n                xR").concat(w,"C").concat(T," = vec4(\n                  xTexelR").concat(w,"C").concat(T,".zw, xTexelR").concat(w,"C").concat(T+2,".zw);\n              "),T+1<b&&(y+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ".concat(p,";\n                  if(xCOffset >= 0 && xCOffset < ").concat(u,") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR").concat(w,"C").concat(T+1," = vec4(xTexelR").concat(w,"C").concat(T+2,".xy, final.xy);\n                "))):(y+="\n                if(xC >= 0 && xC < ".concat(u,") {\n                  xTexelR").concat(w,"C").concat(T," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(w,"C").concat(T," = vec4(0.);\n                }\n\n                xCOffset = xC + ").concat(p,";\n                if(xCOffset >= 0 && xCOffset < ").concat(u,") {\n                  xTexelR").concat(w,"C").concat(T+2," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(w,"C").concat(T+2," = vec4(0.);\n                }\n\n                xR").concat(w,"C").concat(T," = vec4(\n                  xTexelR").concat(w,"C").concat(T,".xy, xTexelR").concat(w,"C").concat(T+2,".xy);\n              "),T+1<b&&(y+="\n                  xR".concat(w,"C").concat(T+1," = vec4(\n                    xTexelR").concat(w,"C").concat(T,".zw, xTexelR").concat(w,"C").concat(T+2,".zw);\n                "))),y+="}");T<b&&(y+="\n            vec4 wTexelR".concat(w,"C").concat(T," = getW(").concat(w,", ").concat(T,", d1, q);\n            wR").concat(w,"C").concat(T," = vec4(wTexelR").concat(w,"C").concat(T,".xz, wTexelR").concat(w,"C").concat(T,".xz);\n          "),T+1<b&&(y+="\n              vec4 wTexelR".concat(w,"C").concat(T+1," = getW(").concat(w,", ").concat(T+1,", d1, q);\n              wR").concat(w,"C").concat(T+1," =\n                vec4(wTexelR").concat(w,"C").concat(T+1,".xz, wTexelR").concat(w,"C").concat(T+1,".xz);")))}for(var k=0;k<v;k++)for(var I=0;I<b;I++)y+="dotProd += xR".concat(k,"C").concat(I," * wR").concat(k,"C").concat(I,";");var S="",C="";r&&(S=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),C="result = activation(result);");var N=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(S,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(p,");\n      const ivec2 pads = ivec2(").concat(c,", ").concat(d,");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ").concat(y,"\n\n        vec4 result = dotProd;\n        ").concat(N,"\n        ").concat(C,"\n        setOutput(result);\n      }\n    ")};var La={kernelName:o.O,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.filter,s=r.strides,u=r.pad,c=r.dilations,d=r.dimRoundingMode,l=c;null==l&&(l=[1,1]),o.Md.assert(o.dd.eitherStridesOrDilationsAreOne(s,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(l,"'")}));var h,p=o.dd.computeConv2DInfo(a.shape,i.shape,s,l,u,d,!0);return h=Object(o.nd)().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels===1?new Fa(p):new Da(p),n.runWebGLProgram(h,[a,i],"float32")}},Ba=function t(e){Object(h.a)(this,t),this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,r=e.strideWidth,a=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Ua=function t(e){Object(h.a)(this,t),this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var za={kernelName:o.P,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.dy,s=r.strides,u=r.dilations,c=r.pad,d=r.dimRoundingMode,l=r.filterShape,h=o.dd.computeConv2DInfo(a.shape,l,s,u,c,d,!0),p=new Ba(h);return n.runWebGLProgram(p,[a,i],"float32")}};var Va={kernelName:o.Q,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.dy,i=e.filter,s=r.strides,u=r.dilations,c=r.pad,d=r.dimRoundingMode,l=r.inputShape,h=o.dd.computeConv2DInfo(l,i.shape,s,u,c,d,!0),p=new Ua(h);return n.runWebGLProgram(p,[a,i],"float32")}},Wa=function t(e){Object(h.a)(this,t),this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "};var Ga={kernelName:o.R,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,a=[].concat(Object(d.a)(r.shape),Object(d.a)(r.shape)),i=o.Md.sizeFromShape(r.shape),s=Rn({inputs:{x:r},backend:n,attrs:{shape:[i]}}),u=new Wa(i),c=n.runWebGLProgram(u,[s],s.dtype),l=Rn({inputs:{x:c},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),l}},Ha=function t(e){Object(h.a)(this,t),this.variableNames=["x","W"],this.outputShape=e.outShape;var n=e.inHeight,r=e.inWidth,a=e.padInfo,i=e.strideHeight,o=e.strideWidth,s=e.filterHeight,u=e.filterWidth,c=e.dilationHeight,d=e.dilationWidth,l=a.top,p=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(l,", ").concat(p,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(d,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")};var Xa={kernelName:o.S,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,r=t.backend,a=t.attrs,i=n.x,s=n.filter,u=a.strides,c=a.pad,d=a.dilations,l=o.dd.computeDilation2DInfo(i.shape,s.shape,u,c,"NHWC",d),h=new Ha(l),p=Rn({inputs:{x:e=r.runWebGLProgram(h,[i,s],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(e),p}},Ya=_n({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),qa={kernelName:o.V,backendName:"webgl",kernelFunc:Ya},Ka={kernelName:o.W,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.dy,a=e.y,i=Object(o.nd)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hn("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new ln("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},Za=Tn({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool"}),Ja={kernelName:o.X,backendName:"webgl",kernelFunc:Za},Qa=_n({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(o.dd.ERF_P,";\n  float a1 = ").concat(o.dd.ERF_A1,";\n  float a2 = ").concat(o.dd.ERF_A2,";\n  float a3 = ").concat(o.dd.ERF_A3,";\n  float a4 = ").concat(o.dd.ERF_A4,";\n  float a5 = ").concat(o.dd.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),$a={kernelName:o.Y,backendName:"webgl",kernelFunc:Qa},ti="return exp(x);",ei=_n({opSnippet:ti,packedOpSnippet:ti,cpuKernelImpl:be}),ni={kernelName:o.Z,backendName:"webgl",kernelFunc:ei};function ri(t){var e=t.inputs,n=t.attrs,r=t.backend,a=n.dim,i=e.input,s=i.shape.length,u=i.shape.slice(),c=a;return a<0&&(o.Md.assert(-(s+1)<=a,(function(){return"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")})),c=s+a+1),u.splice(c,0,1),Rn({inputs:{x:i},backend:r,attrs:{shape:u}})}var ai={kernelName:o.ab,backendName:"webgl",kernelFunc:ri},ii="return exp(x) - 1.0;",oi=_n({opSnippet:ii,packedOpSnippet:ii,cpuKernelImpl:ge}),si={kernelName:o.bb,backendName:"webgl",kernelFunc:oi},ui=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")};function ci(t,e,n){var r=n.texData.get(t.dataId),a=o.Md.sizeFromShape(t.shape),i=t.shape[t.shape.length-1],s=Rn({inputs:{x:t},backend:n,attrs:{shape:[a/i,i]}}),u=s.shape,c=new ui("real",u,e),d=new ui("imag",u,e),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],h=n.runWebGLProgram(c,l,"float32"),p=n.runWebGLProgram(d,l,"float32"),f=mn({inputs:{real:h,imag:p},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p);var m=Rn({inputs:{x:f},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(f),m}var di={kernelName:o.cb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend;return ci(e.input,!1,n)}},li=function(){function t(e,n){Object(h.a)(this,t),this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return Object(p.a)(t,[{key:"getCustomSetupFunc",value:function(t){var e=this;return function(n,r){null==e.valueLoc&&(e.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(e.valueLoc,t)}}}]),t}();function hi(t){var e=t.backend,n=t.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||o.Md.inferDtype(a))){var s=o.Md.getArrayFromDType(i,o.Md.sizeFromShape(r));return s.fill(a),e.makeTensorInfo(r,i,s)}var u=new li(r,a),c=u.getCustomSetupFunc(a);return e.runWebGLProgram(u,[],i,c)}var pi,fi={kernelName:o.db,backendName:"webgl",kernelFunc:hi},mi=function t(e){Object(h.a)(this,t),this.variableNames=["Image"],this.outputShape=[];var n=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},vi={kernelName:o.eb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.image,a=n,i=new mi(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},bi="return floor(x);",gi=_n({opSnippet:bi,packedOpSnippet:bi,cpuKernelImpl:ye}),yi={kernelName:o.fb,backendName:"webgl",kernelFunc:gi},xi=Tn({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Oi={kernelName:o.gb,backendName:"webgl",kernelFunc:xi},wi=function t(e){Object(h.a)(this,t),this.variableNames=["A"];var n=Q(),r=Object(s.a)(e,2),a=r[0],i=r[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},_i=function t(e){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Q(),r=Object(s.a)(e,2),a=r[0],i=r[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},Ti={kernelName:o.hb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.pixels,u=r.numChannels,c="undefined"!==typeof HTMLVideoElement&&i instanceof HTMLVideoElement,d="undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement,l="undefined"!==typeof ImageBitmap&&i instanceof ImageBitmap,h=c?[i.videoWidth,i.videoHeight]:[i.width,i.height],p=Object(s.a)(h,2),f=p[0],m=p[1],v=[m,f],b=[m,f,u];(d||c||l)&&(null==pi&&(pi=document.createElement("canvas").getContext("2d")),pi.canvas.width=f,pi.canvas.height=m,pi.drawImage(i,0,0,f,m),i=pi.canvas);var g=n.makeTensorInfo(v,"int32");n.texData.get(g.dataId).usage=a.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(g.dataId),i);var y=Object(o.nd)().getBool("WEBGL_PACK")?new _i(b):new wi(b),x=n.runWebGLProgram(y,[g],"int32");return n.disposeData(g.dataId),x}};var Ei={kernelName:o.jb,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,r=t.backend,a=t.attrs,i=n.x,s=n.filter,u=n.bias,c=n.preluActivationWeights,d=a.strides,l=a.pad,h=a.dataFormat,p=a.dilations,f=a.dimRoundingMode,m=a.activation,v=a.leakyreluAlpha,b=o.dd.convertConv2DDataFormat(h),g=o.dd.computeConv2DInfo(i.shape,s.shape,d,p,l,f,!1,b),y=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(Object(o.nd)().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])e=ha({x:i,filter:s,convInfo:g,backend:r,bias:u,activation:m,preluActivationWeights:c,leakyreluAlpha:v});else{var x=null!=u,O=null!=c,w="leakyrelu"===m,_=m?En(m,!1):null,T=new ua(g,x,_,O,w),E=[i,s];if(u&&E.push(u),c&&E.push(c),w){var k=r.makeTensorInfo([],"float32",o.Md.createScalarValue(v,"float32"));E.push(k),y.push(k)}e=r.runWebGLProgram(T,E,"float32")}else e=la({x:i,filter:s,convInfo:g,backend:r,bias:u,activation:m,preluActivationWeights:c,leakyreluAlpha:v});var I=Rn({inputs:{x:e},backend:r,attrs:{shape:g.outShape}});return y.push(e),y.forEach((function(t){return r.disposeIntermediateTensorInfo(t)})),I}};var ki={kernelName:o.kb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.filter,s=e.bias,u=e.preluActivationWeights,c=r.strides,d=r.pad,l=r.dilations,h=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,m=[],v=l;null==v&&(v=[1,1]),o.Md.assert(o.dd.eitherStridesOrDilationsAreOne(c,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(v,"'")}));var b,g=o.dd.computeConv2DInfo(a.shape,i.shape,c,v,d,h,!0),y=Object(o.nd)().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,x=p?En(p,y):null,O=[a,i],w=null!=s,_=null!=u,T="leakyrelu"===p;if(w&&O.push(s),_&&O.push(u),T){var E=n.makeTensorInfo([],"float32",o.Md.createScalarValue(f,"float32"));O.push(E),m.push(E)}b=y?new Fa(g,w,x,_,T):new Da(g,w,x,_,T);var k=n.runWebGLProgram(b,O,"float32");return m.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),k}},Ii=function t(e,n,r){Object(h.a)(this,t),this.sliceDim=e,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=jt(n.length),i=jt(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")};var Si={kernelName:o.lb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.params,a=e.indices,i=a.shape,u=i[i.length-1],c=o.dd.prepareAndValidate(r,a),d=Object(s.a)(c,4),l=d[0],h=d[1],p=d[2],f=d[3],m=Rn({inputs:{x:a},backend:n,attrs:{shape:[h,u]}}),v=Rn({inputs:{x:r},backend:n,attrs:{shape:[o.Md.sizeFromShape(r.shape)/p,p]}}),b=new Ii(u,f,[h,p]),g=n.runWebGLProgram(b,[v,m],v.dtype),y=Rn({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),y}},Ci=function t(e,n){Object(h.a)(this,t),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=jt(this.rank),a=function(t,e){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<t.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push("".concat(n[a]));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")};var Ni={kernelName:o.mb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.indices,s=r.axis,u=r.batchDims,c=o.Md.parseAxisParam(s,a.shape)[0],d=o.dd.segment_util.collectGatherOpShapeInfo(a,i,c,u),l=o.Md.sizeFromShape(i.shape),h=[],p=Rn({inputs:{x:a},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),f=Rn({inputs:{x:i},backend:n,attrs:{shape:[d.batchSize,l/d.batchSize]}});h.push(p),h.push(f);var m=[d.batchSize,d.outerSize,l/d.batchSize,d.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(f),b=n.bufferSync(p),g=xe(b,v,m);return h.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.makeTensorInfo(d.outputShape,g.dtype,g.values)}var y=new Ci(p.shape,m),x=n.runWebGLProgram(y,[p,f],p.dtype);h.push(x);var O=Rn({inputs:{x:x},backend:n,attrs:{shape:d.outputShape}});return h.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),O}},ji=Tn({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:Oe,dtype:"bool"}),Ai={kernelName:o.nb,backendName:"webgl",kernelFunc:ji},Ri=Tn({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool"}),Mi={kernelName:o.ob,backendName:"webgl",kernelFunc:Ri};var Pi={kernelName:o.pb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend;return ci(e.input,!0,n)}},Di=_n({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Fi={kernelName:o.sb,backendName:"webgl",kernelFunc:Di},Li=_n({opSnippet:"return float(isinf(x));",dtype:"bool"}),Bi={kernelName:o.tb,backendName:"webgl",kernelFunc:Li},Ui=_n({opSnippet:"return float(isnan(x));",dtype:"bool"}),zi={kernelName:o.ub,backendName:"webgl",kernelFunc:Ui},Vi=Tn({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:we,dtype:"bool"}),Wi={kernelName:o.zb,backendName:"webgl",kernelFunc:Vi},Gi=Tn({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",dtype:"bool"}),Hi={kernelName:o.Ab,backendName:"webgl",kernelFunc:Gi};var Xi={kernelName:o.Bb,backendName:"webgl",kernelFunc:function(t){var e=t.backend,n=t.attrs,r=n.start,a=n.stop,i=n.num,o=_e(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}},Yi=_n({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Te}),qi={kernelName:o.Cb,backendName:"webgl",kernelFunc:Yi},Ki=_n({opSnippet:"return log(1.0 + x);"}),Zi={kernelName:o.Db,backendName:"webgl",kernelFunc:Ki},Ji=Tn({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),Qi={kernelName:o.Eb,backendName:"webgl",kernelFunc:Ji},$i=_n({opSnippet:"return float(!(x >= 1.0));"}),to={kernelName:o.Fb,backendName:"webgl",kernelFunc:$i},eo=Tn({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),no={kernelName:o.Gb,backendName:"webgl",kernelFunc:eo},ro=function t(e,n,r,a,i){Object(h.a)(this,t),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=e[3]-1;this.outputShape=e;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")},ao=function t(e,n,r,a,i){Object(h.a)(this,t),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=e[3]-1;this.outputShape=e;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")},io={kernelName:o.wb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.depthRadius,s=r.bias,u=r.alpha,c=r.beta,d=Object(o.nd)().getBool("WEBGL_PACK_NORMALIZATION")?new ao(a.shape,i,s,u,c):new ro(a.shape,i,s,u,c);return n.runWebGLProgram(d,[a],a.dtype)}},oo=function t(e,n,r,a,i){Object(h.a)(this,t),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},so={kernelName:o.xb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.y,o=e.dy,s=r.depthRadius,u=r.bias,c=r.alpha,d=r.beta,l=new oo(a.shape,s,u,c,d);return n.runWebGLProgram(l,[a,i,o],a.dtype)}};function uo(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.reductionIndices,u=r.keepDims,c=a.shape.length,d=o.Md.parseAxisParam(i,a.shape),l=d,h=o.dd.getAxesPermutation(l,c),p=null!=h,f=n.shouldExecuteOnCPU([a]),m=a;if(p){if(f){for(var v=n.texData.get(m.dataId).values,b=new Array(c),g=0;g<b.length;g++)b[g]=a.shape[h[g]];var y=Be(v,a.shape,a.dtype,h,b);m=n.makeTensorInfo(b,a.dtype),n.texData.get(m.dataId).values=y}else m=Un(a,h,n);l=o.dd.getInnerMostAxes(l.length,c)}o.dd.assertAxesAreInnerMostDims("max",l,c);var x,O=o.dd.computeOutAndReduceShapes(m.shape,l),w=Object(s.a)(O,2),_=w[0],T=w[1],E=_;if(u&&(E=o.dd.expandShapeToKeepDim(_,d)),f){var k=n.texData.get(m.dataId).values,I=Ee(k,o.Md.sizeFromShape(T),E,a.dtype);x=n.makeTensorInfo(E,a.dtype),n.texData.get(x.dataId).values=I}else x=function(t,e,n,r){var a=o.Md.sizeFromShape(e),i=Rn({inputs:{x:t},attrs:{shape:[o.Md.sizeFromShape(t.shape)/a,a]},backend:r}),s=Fn(i,t.dtype,"max",r),u=Rn({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),u}(m,T,E,n);return p&&n.disposeIntermediateTensorInfo(m),x}var co={kernelName:o.Hb,backendName:"webgl",kernelFunc:uo},lo=Tn({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:ke}),ho={kernelName:o.Nb,backendName:"webgl",kernelFunc:lo};var po={kernelName:o.Ib,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x;Z(a,"maxPool");var i=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;o.Md.assert(o.dd.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")}));var d=o.dd.computePool2DInfo(a.shape,i,s,1,u,c);if(1===d.filterWidth&&1===d.filterHeight&&o.Md.arraysEqual(d.inShape,d.outShape))return pn({inputs:{x:a},backend:n});var l=new Or(d,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var fo={kernelName:o.Jb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.filterSize,s=r.strides,u=r.pad,c=r.dataFormat,d=r.dimRoundingMode,l=o.dd.computePool3DInfo(a.shape,i,s,[1,1,1],u,d,c),h=new wr(l,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}},mo=function t(e){Object(h.a)(this,t),this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideHeight,r=e.strideWidth,a=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=i-1-e.padInfo.top,u=o-1-e.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},vo=function t(e){Object(h.a)(this,t),this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideDepth,r=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,l=u-1-e.padInfo.front,p=c-1-e.padInfo.top,f=d-1-e.padInfo.left,m=u*c*d-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(l,", ").concat(p,", ").concat(f,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(m," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(d," +\n                  wR * ").concat(d," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var bo={kernelName:o.Kb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.dy,i=e.input,s=r.filterSize,u=r.strides,c=r.pad,d=r.dimRoundingMode,l=o.dd.computePool3DInfo(i.shape,s,u,[1,1,1],c,d),h=new wr(l,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),f=new vo(l),m=n.runWebGLProgram(f,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}};var go={kernelName:o.Lb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.dy,i=e.input,s=i;Z([i,e.output],"maxPoolGrad");var u=r.filterSize,c=r.strides,d=r.pad,l=r.dimRoundingMode,h=o.dd.computePool2DInfo(s.shape,u,c,1,d,l),p=new Or(h,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),m=new mo(h),v=n.runWebGLProgram(m,[a,f],s.dtype);return n.disposeIntermediateTensorInfo(f),v}};var yo={kernelName:o.Mb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,a=e.x,i=n.filterSize,u=n.strides,c=n.pad,d=n.includeBatchInIndex,l=r;o.Md.assert(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var h=[1,1];o.Md.assert(o.dd.eitherStridesOrDilationsAreOne(u,h),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(h,"'")}));var p=o.dd.computePool2DInfo(a.shape,i,u,h,c),f=function(t,e,n,r){var a=new Or(n,"max",!1),i=r.runWebGLProgram(a,[t],"float32");return a=new Or(n,"max",!0,!0,e),[i,r.runWebGLProgram(a,[t],"float32")]}(a,d,p,l),m=Object(s.a)(f,2);return[m[0],m[1]]}};var xo={kernelName:o.Ob,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,a=e.x,i=n.keepDims,u=n.axis,c=r,d=a.shape.length,l=o.Md.parseAxisParam(u,a.shape),h=l,p=o.dd.getAxesPermutation(h,d),f=null!=p,m=c.shouldExecuteOnCPU([a]),v=[],b=a;if(f){if(m){for(var g=c.texData.get(b.dataId).values,y=new Array(d),x=0;x<y.length;x++)y[x]=a.shape[p[x]];var O=Be(g,a.shape,a.dtype,p,y);b=c.makeTensorInfo(y,a.dtype),c.texData.get(b.dataId).values=O}else b=Un(a,p,c);v.push(b),h=o.dd.getInnerMostAxes(h.length,d)}o.dd.assertAxesAreInnerMostDims("sum",h,d);var w=o.dd.computeOutAndReduceShapes(b.shape,h),_=Object(s.a)(w,2),T=_[0],E=_[1],k=T;i&&(k=o.dd.expandShapeToKeepDim(T,l));for(var I=function(t,e,n,r){var a=o.Md.sizeFromShape(e),i=Rn({inputs:{x:t},attrs:{shape:[o.Md.sizeFromShape(t.shape)/a,a]},backend:r}),s=Fn(i,"float32","mean",r),u=Rn({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),u}(b,E,k,c),S=0,C=v;S<C.length;S++){var N=C[S];c.disposeIntermediateTensorInfo(N)}return I}};var Oo={kernelName:o.Pb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.axis,u=r.keepDims,c=a.shape.length,d=o.Md.parseAxisParam(i,a.shape),l=d,h=o.dd.getAxesPermutation(l,c),p=a;null!=h&&(p=Wn({inputs:{x:a},backend:n,attrs:{perm:h}}),l=o.dd.getInnerMostAxes(l.length,a.shape.length)),o.dd.assertAxesAreInnerMostDims("min",l,c);var f,m=o.dd.computeOutAndReduceShapes(p.shape,l),v=Object(s.a)(m,2),b=v[0],g=v[1],y=Rn({inputs:{x:p},backend:n,attrs:{shape:[-1,o.Md.sizeFromShape(g)]}}),x=Fn(y,y.dtype,"min",n);return f=Rn(u?{inputs:{x:x},backend:n,attrs:{shape:o.dd.expandShapeToKeepDim(b,d)}}:{inputs:{x:x},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),null!=h&&n.disposeIntermediateTensorInfo(p),f}},wo=Tn({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Ie}),_o={kernelName:o.Qb,backendName:"webgl",kernelFunc:wo},To=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["x"],this.outputShape=n.map((function(t,n){return t[0]+e[n]+t[1]}));var a=e.length,i=jt(a),o=n.map((function(t){return t[0]})).join(","),s=n.map((function(t,n){return t[0]+e[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")},Eo=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(t,n){return t[0]+e[n]+t[1]}));var a=e.length,i=jt(a),o=n.map((function(t){return t[0]})).join(","),s=n.map((function(t,n){return t[0]+e[n]})).join(","),u=Ve("rc",a),c=Ve("source",a),d="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),l=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p="reflect"===r?0:1,f="";if(1===a){var m="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(p,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(p,";\n        }\n        source -= start;\n      ");f="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(d,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(p,") +\n                gte * ((end - 1) * 2 - source + ").concat(p,");\n        source -= start;\n      ");f="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(d,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(d,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")},ko={kernelName:o.Rb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.paddings,s=r.mode,u=Object(o.nd)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Eo(a.shape,i,s):new To(a.shape,i,s);return n.runWebGLProgram(u,[a],a.dtype)}},Io=Tn({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),So={kernelName:o.Sb,backendName:"webgl",kernelFunc:Io},Co=function(){function t(e,n,r){Object(h.a)(this,t),this.variableNames=["probs"],this.outputShape=[e,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")}return Object(p.a)(t,[{key:"getCustomSetupFunc",value:function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}}}]),t}(),No=Tn({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),jo={kernelName:o.jc,backendName:"webgl",kernelFunc:No},Ao="return a - b;",Ro=Tn({opSnippet:Ao,packedOpSnippet:Ao,supportsComplex:!0,cpuKernelImpl:De}),Mo={kernelName:o.Oc,backendName:"webgl",kernelFunc:Ro};function Po(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.logits,i=r.dim,s=o.Md.parseAxisParam([i],a.shape),u=uo({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),c=o.dd.expandShapeToKeepDim(u.shape,s),d=Rn({inputs:{x:u},backend:n,attrs:{shape:c}}),l=Ro({inputs:{a:a,b:d},backend:n}),h=ei({inputs:{x:l},backend:n}),p=zn({inputs:{x:h},backend:n,attrs:{axis:s,keepDims:!1}}),f=Rn({inputs:{x:p},backend:n,attrs:{shape:c}}),m=No({inputs:{a:h,b:f},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}var Do={kernelName:o.Ec,backendName:"webgl",kernelFunc:Po};var Fo={kernelName:o.Tb,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:Po({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],d=u.shape[1],l=new Co(c,d,i),h=l.getCustomSetupFunc(o),p=n.runWebGLProgram(l,[u],"int32",h);return s||n.disposeIntermediateTensorInfo(u),p}},Lo="return -x;";var Bo={kernelName:o.Vb,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,r=t.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),u=Ce(i.values,a.shape,a.dtype),c=Object(s.a)(u,2),d=c[0],l=c[1];return r.makeTensorInfo(l,a.dtype,d)}return e=Object(o.nd)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new on(a.shape,Lo):new Ke(a.shape,Lo),r.runWebGLProgram(e,[a],a.dtype)}},Uo=o.td.nonMaxSuppressionV3Impl;var zo={kernelName:o.Wb,backendName:"webgl",kernelFunc:function(t){o.dd.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var e=t.inputs,n=t.backend,r=t.attrs,a=e.boxes,i=e.scores,s=r.maxOutputSize,u=r.iouThreshold,c=r.scoreThreshold,d=n.readSync(a.dataId),l=n.readSync(i.dataId),h=Uo(d,l,s,u,c).selectedIndices;return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},Vo=o.td.nonMaxSuppressionV4Impl;var Wo={kernelName:o.Xb,backendName:"webgl",kernelFunc:function(t){o.dd.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var e=t.inputs,n=t.backend,r=t.attrs,a=e.boxes,i=e.scores,s=r.maxOutputSize,u=r.iouThreshold,c=r.scoreThreshold,d=r.padToMaxOutputSize,l=n.readSync(a.dataId),h=n.readSync(i.dataId),p=Vo(l,h,s,u,c,d),f=p.selectedIndices,m=p.validOutputs;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}},Go=o.td.nonMaxSuppressionV5Impl;var Ho={kernelName:o.Yb,backendName:"webgl",kernelFunc:function(t){o.dd.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var e=t.inputs,n=t.backend,r=t.attrs,a=e.boxes,i=e.scores,s=r.maxOutputSize,u=r.iouThreshold,c=r.scoreThreshold,d=r.softNmsSigma,l=n.readSync(a.dataId),h=n.readSync(i.dataId),p=Go(l,h,s,u,c,d),f=p.selectedIndices,m=p.selectedScores;return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}},Xo=function t(e,n,r,a){Object(h.a)(this,t),this.variableNames=["indices"],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")},Yo={kernelName:o.ac,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.indices,i=r.depth,s=r.onValue,u=r.offValue,c=o.Md.sizeFromShape(a.shape),l=new Xo(c,i,s,u),h=Rn({inputs:{x:a},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(l,[h],a.dtype);n.disposeIntermediateTensorInfo(h);var f=Rn({inputs:{x:p},backend:n,attrs:{shape:[].concat(Object(d.a)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(p),f}};function qo(t){var e=t.inputs,n=t.backend,r=e.x;if("complex64"===r.dtype){var a=Vr({inputs:{input:r},backend:n}),i=qo({inputs:{x:a},backend:n}),o=ra({inputs:{input:r},backend:n}),s=qo({inputs:{x:o},backend:n}),u=mn({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return hi({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var Ko={kernelName:o.ad,backendName:"webgl",kernelFunc:qo};var Zo={kernelName:o.bc,backendName:"webgl",kernelFunc:function t(e){var n=e.inputs,r=e.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=Vr({inputs:{input:a},backend:r}),o=t({inputs:{x:i},backend:r}),s=ra({inputs:{input:a},backend:r}),u=qo({inputs:{x:s},backend:r}),c=mn({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return hi({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var Jo={kernelName:o.cc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs.axis;if(1===e.length)return ri({inputs:{input:e[0]},backend:n,attrs:{dim:r}});var a=e[0].shape,i=e[0].dtype;e.forEach((function(t){o.Md.assertShapesMatch(a,t.shape,"All tensors passed to stack must have matching shapes"),o.Md.assert(i===t.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var s=[],u=oa({inputs:e.map((function(t){var e=ri({inputs:{input:t},backend:n,attrs:{dim:r}});return s.push(e),e})),backend:n,attrs:{axis:r}});return s.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),u}},Qo=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["x"],this.outputShape=n.map((function(t,n){return t[0]+e[n]+t[1]}));var a=e.length,i=jt(a),o=n.map((function(t){return t[0]})).join(","),s=n.map((function(t,n){return t[0]+e[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(").concat(r,"));\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(").concat(r,"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")},$o=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(t,n){return t[0]+e[n]+t[1]}));for(var a=e.length,i=jt(a),o=n.map((function(t){return t[0]})).join(","),s=n.map((function(t,n){return t[0]+e[n]})).join(","),u=Ve("rc",a),c=Ve("source",a),d="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),l=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),p=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(d,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(d,") {")],f=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="",v=0,b=1===a?2:4;v<b;v++)m+="\n        ".concat(p[v],"\n        if (").concat(f,") {\n          result[").concat(v,"] = float(").concat(r,");\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(l,");\n        }\n      ");m+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(m,"\n        setOutput(result);\n      }\n    ")},ts=function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.paddings,s=r.constantValue,u=Object(o.nd)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $o(a.shape,i,s):new Qo(a.shape,i,s);return n.runWebGLProgram(u,[a],a.dtype)},es={kernelName:o.dc,backendName:"webgl",kernelFunc:ts},ns=Tn({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),rs={kernelName:o.ec,backendName:"webgl",kernelFunc:ns};var as={kernelName:o.gc,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,r=t.backend,a=t.attrs,i=n.x,u=a.axis,c=a.keepDims,d=i.shape.length,l=[],h=o.Md.parseAxisParam(u,i.shape),p=h,f=o.dd.getAxesPermutation(p,d),m=i;if(null!=f&&(m=Wn({inputs:{x:i},backend:r,attrs:{perm:f}}),p=o.dd.getInnerMostAxes(p.length,d),l.push(m)),o.dd.assertAxesAreInnerMostDims("prod",p,d),r.shouldExecuteOnCPU([m])){var v=r.texData.get(m.dataId).values,b=Ne(m.shape,m.dtype,v,p),g=b.outVals,y=b.outShape,x=b.outDtype;e=r.makeTensorInfo(y,x,g)}else{var O=o.dd.computeOutAndReduceShapes(m.shape,p),w=Object(s.a)(O,2),_=w[0],T=w[1],E=o.Md.sizeFromShape(T),k=Rn({inputs:{x:m},backend:r,attrs:{shape:[-1,E]}}),I=Fn(k,Object(o.Fd)(i.dtype),"prod",r);e=Rn({inputs:{x:I},backend:r,attrs:{shape:_}}),l.push(k),l.push(I)}if(c){l.push(e);var S=o.dd.expandShapeToKeepDim(e.shape,h);e=Rn({inputs:{x:e},backend:r,attrs:{shape:S}})}return l.forEach((function(t){return r.disposeIntermediateTensorInfo(t)})),e}},is=function(t){var e=t.backend,n=t.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=je(r,a,i,o);return e.makeTensorInfo([s.length],o,s)},os={kernelName:o.hc,backendName:"webgl",kernelFunc:is},ss=_n({opSnippet:"return 1.0 / x;"}),us={kernelName:o.kc,backendName:"webgl",kernelFunc:ss},cs=_n({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),ds={kernelName:o.lc,backendName:"webgl",kernelFunc:cs},ls=_n({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),hs={kernelName:o.mc,backendName:"webgl",kernelFunc:ls},ps=function t(e,n,r,a,i){Object(h.a)(this,t),this.variableNames=["A"],this.outputShape=[];var o=Object(s.a)(e,4),u=o[0],c=o[1],d=o[2],l=o[3];this.outputShape=[u,n,r,l];var p,f=[a&&n>1?c-1:c,a&&r>1?d-1:d],m=[a&&n>1?n-1:n,a&&r>1?r-1:r];p=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/m[0],",\n          ").concat(f[1]/m[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(d,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},fs=function t(e,n,r,a,i){Object(h.a)(this,t),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=Object(s.a)(e,4),u=o[0],c=o[1],d=o[2],l=o[3];this.outputShape=[u,n,r,l];var p,f=[a&&n>1?c-1:c,a&&r>1?d-1:d],m=[a&&n>1?n-1:n,a&&r>1?r-1:r];p=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/m[0],",\n          ").concat(f[1]/m[1],",\n          ").concat(f[1]/m[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(d,".0,\n                                     ").concat(d,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")};var ms={kernelName:o.oc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.images,i=r.alignCorners,u=r.halfPixelCenters,c=r.size,d=Object(s.a)(c,2),l=d[0],h=d[1],p=Object(o.nd)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new fs(a.shape,l,h,i,u):new ps(a.shape,l,h,i,u);return n.runWebGLProgram(p,[a],"float32")}},vs=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Object(s.a)(n,3),i=a[1],o=a[2],u=Object(s.a)(e,3),c=u[1],d=u[2],l=[r&&c>1?i-1:i,r&&d>1?o-1:o],p=[r&&c>1?c-1:c,r&&d>1?d-1:d],f=l[0]/p[0],m=l[1]/p[1],v=1/f,b=1/m,g=2*Math.ceil(v)+2,y=2*Math.ceil(b)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(m,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(b,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(d,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var bs={kernelName:o.pc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.images,i=e.dy,o=r.alignCorners,s=new vs(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},gs=function t(e,n,r,a,i){Object(h.a)(this,t),this.variableNames=["A"],this.outputShape=[];var o=Object(s.a)(e,4),u=o[0],c=o[1],d=o[2],l=o[3];this.outputShape=[u,n,r,l];var p,f=[a&&n>1?c-1:c,a&&r>1?d-1:d],m=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";p=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/m[0],",\n          ").concat(f[1]/m[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(d,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(p,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")};var ys={kernelName:o.qc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.images,i=r.alignCorners,o=r.halfPixelCenters,u=r.size,c=Object(s.a)(u,2),d=c[0],l=c[1],h=new gs(a.shape,d,l,i,o);return n.runWebGLProgram(h,[a],a.dtype)}},xs=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Object(s.a)(n,3),i=a[1],o=a[2],u=Object(s.a)(e,3),c=u[1],d=u[2],l=[r&&c>1?i-1:i,r&&d>1?o-1:o],p=[r&&c>1?c-1:c,r&&d>1?d-1:d],f=l[0]/p[0],m=l[1]/p[1],v=1/f,b=1/m,g=2*Math.ceil(v)+2,y=2*Math.ceil(b)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(m,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(b,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(d,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(p[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(p[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var Os={kernelName:o.rc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.images,i=e.dy,o=r.alignCorners,s=new xs(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},ws=function t(e,n){Object(h.a)(this,t),this.variableNames=["x"];var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=e,1!==r){var a=e.map((function(t,r){return function(t){return-1!==n.indexOf(t)&&1!==e[t]?"".concat(e[t]," - coords[").concat(t,"] - 1"):"coords[".concat(t,"]")}(r)})).join(","),i=jt(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      ")},_s=function t(e,n){Object(h.a)(this,t),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=e;var a=Ve("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=jt(r);function u(t){var r=e.map((function(r,a){return function(t,r){return-1!==n.indexOf(t)&&1!==e[t]?"".concat(e[t]," - ").concat(r[t]," - 1"):"".concat(r[t])}(a,t)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(t){return u(t)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(t){return t[r-1]="("+t[r-1]+" + 1)",u(t)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(t){return t[r-2]="("+t[r-2]+" + 1)",u(t)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(t){return t[r-1]="("+t[r-1]+" + 1)",t[r-2]="("+t[r-2]+" + 1)",u(t)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")};var Ts={kernelName:o.sc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.dims,s=a.shape.length,u=o.Md.parseAxisParam(i,a.shape);if(0===s)return pn({inputs:{x:a},backend:n});var c=Object(o.nd)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _s(a.shape,u):new ws(a.shape,u);return n.runWebGLProgram(c,[a],a.dtype)}},Es=function t(e,n,r,a){Object(h.a)(this,t),this.variableNames=["Image"],this.outputShape=[];var i=e[1],u=e[2],c=Math.sin(n).toFixed(3),d=Math.cos(n).toFixed(3);this.outputShape=e;var l=o.dd.getImageCenter(a,i,u),p=Object(s.a)(l,2),f=p[0],m=p[1],v=f.toFixed(3),b=m.toFixed(3),g="";g="number"===typeof r?"float outputValue = ".concat(r.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(r.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ".concat(v,") * ").concat(d," - (float(y) - ").concat(b,") * ").concat(c,";\n          float coordYFloat = (float(x) - ").concat(v,") * ").concat(c," + (float(y) - ").concat(b,") * ").concat(d,";\n          int coordX = int(round(coordXFloat + ").concat(v,"));\n          int coordY = int(round(coordYFloat + ").concat(b,"));\n          ").concat(g,"\n          if(coordX >= 0 && coordX < ").concat(u," && coordY >= 0 && coordY < ").concat(i,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},ks={kernelName:o.tc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,a=e.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new Es(a.shape,i,o,s);return u.runWebGLProgram(c,[a],a.dtype)}},Is=_n({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Ss={kernelName:o.uc,backendName:"webgl",kernelFunc:Is},Cs=_n({opSnippet:"return inversesqrt(x);",cpuKernelImpl:Ae}),Ns={kernelName:o.vc,backendName:"webgl",kernelFunc:Cs},js=function t(e,n,r,a,i,o){Object(h.a)(this,t),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=jt(i.length),u=jt(o.length),c="";1===r?c="i":2===r&&(c="i, j");var d="getIndices(".concat(c,")"),l="";1===a?l="i":2===a&&(l="i, coords[1]");var p="getUpdates(".concat(l,")"),f=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(d,");\n              flattenedIndex += index * ").concat(f,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(p,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")};var As={kernelName:o.wc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.indices,i=e.updates,s=r.shape,u=o.dd.calculateShapes(i,a,s),c=u.sliceRank,d=u.numUpdates,l=u.sliceSize,h=u.strides,p=u.outputSize,f=[p/l,l];if(0===p)return n.makeTensorInfo(s,a.dtype);var m=Rn({inputs:{x:a},backend:n,attrs:{shape:[d,c]}}),v=Rn({inputs:{x:i},backend:n,attrs:{shape:[d,l]}}),b=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new js(d,c,m.shape.length,v.shape.length,h,f),y=n.runWebGLProgram(g,[v,m,b],v.dtype),x=Rn({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}},Rs=function t(e,n,r){var a,i;if(Object(h.a)(this,t),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<e&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var d=jt(r);this.userCode="\n      void main() {\n        ".concat(d," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")};var Ms={kernelName:o.xc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.condition,a=e.t,i=e.e,s=new Rs(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(s,[r,a,i],Object(o.Ld)(a.dtype,i.dtype))}},Ps=_n({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(o.dd.SELU_SCALEALPHA,";\n  float scale = ").concat(o.dd.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),Ds={kernelName:o.yc,backendName:"webgl",kernelFunc:Ps},Fs=_n({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"}),Ls={kernelName:o.zc,backendName:"webgl",kernelFunc:Fs},Bs=_n({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Us={kernelName:o.Ac,backendName:"webgl",kernelFunc:Bs},zs=_n({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),Vs={kernelName:o.Bc,backendName:"webgl",kernelFunc:zs},Ws=_n({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Gs={kernelName:o.Cc,backendName:"webgl",kernelFunc:Ws},Hs=_n({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Xs={kernelName:o.Fc,backendName:"webgl",kernelFunc:Hs},Ys={kernelName:o.Gc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.blockShape,s=r.paddings;o.Md.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var u=i.reduce((function(t,e){return t*e})),c=[[0,0]];c.push.apply(c,Object(d.a)(s));for(var l=1+i.length;l<a.shape.length;++l)c.push([0,0]);var h=[],p=ts({inputs:{x:a},backend:n,attrs:{paddings:c,constantValue:0}}),f=o.dd.getReshaped(p.shape,i,u,!1),m=o.dd.getPermuted(f.length,i.length,!1),v=o.dd.getReshapedPermuted(p.shape,i,u,!1),b=Rn({inputs:{x:p},backend:n,attrs:{shape:f}}),g=Wn({inputs:{x:b},backend:n,attrs:{perm:m}}),y=Rn({inputs:{x:g},backend:n,attrs:{shape:v}});return h.push(p),h.push(b),h.push(g),h.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),y}};var qs={kernelName:o.Hc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.sparseIndices,i=e.sparseValues,s=e.defaultValue,u=r.outputShape,c=o.dd.calculateShapes(i,a,u),d=c.sliceRank,l=c.numUpdates,h=c.strides,p=c.outputSize,f=new js(l,d,a.shape.length,i.shape.length,h,[p,1],!1),m=n.runWebGLProgram(f,[i,a,s],i.dtype),v=Rn({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(m),v}};var Ks={kernelName:o.Ic,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.numOrSizeSplits,s=r.axis,u=o.Md.parseAxisParam(s,a.shape)[0],c=o.dd.prepareSplitSize(a,i,u),l=a.shape.length,h=new Array(l).fill(0),p=a.shape.slice();return c.map((function(t){var e=Object(d.a)(p);e[u]=t;var r=Dr({inputs:{x:a},backend:n,attrs:{begin:h,size:e}});return h[u]+=t,r}))}},Zs=_n({opSnippet:"return sqrt(x);"}),Js={kernelName:o.Jc,backendName:"webgl",kernelFunc:Zs},Qs=_n({opSnippet:"return x * x;"}),$s={kernelName:o.Kc,backendName:"webgl",kernelFunc:Qs},tu=Tn({opSnippet:"return (a - b) * (a - b);",packedOpSnippet:"return (a - b) * (a - b);"}),eu={kernelName:o.Lc,backendName:"webgl",kernelFunc:tu};var nu={kernelName:o.Mc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,a=e.x,i=Ze+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new Ke(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},ru=function t(e,n,r){Object(h.a)(this,t),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=jt(r.length),o=jt(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(t,e){return u++,1===r.length?"coords * strides[".concat(e,"] + begin[").concat(e,"]"):"coords[".concat(u-1,"] * strides[").concat(e,"] + begin[").concat(e,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(e,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")};var au={kernelName:o.Nc,backendName:"webgl",kernelFunc:function(t){var e,n=t.inputs,r=t.backend,a=t.attrs,i=n.x,s=a.begin,u=a.end,c=a.strides,d=a.beginMask,l=a.endMask,h=a.ellipsisMask,p=a.newAxisMask,f=a.shrinkAxisMask,m=o.Bd.sliceInfo(i.shape,s,u,c,d,l,h,p,f),v=m.nonStrided,b=m.$begin,g=m.$strides,y=m.size,x=m.newShape,O=m.outShape,w=Rn({inputs:{x:i},backend:r,attrs:{shape:x}});if(v){var _=Dr({inputs:{x:w},backend:r,attrs:{begin:b,size:y}});e=Rn({inputs:{x:_},backend:r,attrs:{shape:O}}),r.disposeIntermediateTensorInfo(_)}else if(O.some((function(t){return 0===t})))e=r.makeTensorInfo(O,i.dtype,[]);else{if(r.shouldExecuteOnCPU([w])){var T=r.texData.get(w.dataId).values,E=Object(o.fd)(w.shape,w.dtype,T),k=Pe(O,E,g,b);e=r.makeTensorInfo(O,w.dtype,k.values)}else{var I=new ru(b,g,O);e=r.runWebGLProgram(I,[w],w.dtype)}}var S=Rn({inputs:{x:e},backend:r,attrs:{shape:O}});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(e),S}},iu=_n({opSnippet:"return tan(x);"}),ou={kernelName:o.Qc,backendName:"webgl",kernelFunc:iu},su=_n({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),uu={kernelName:o.Rc,backendName:"webgl",kernelFunc:su},cu=function t(e,n){Object(h.a)(this,t),this.variableNames=["A"];for(var r=new Array(e.length),a=0;a<r.length;a++)r[a]=e[a]*n[a];this.outputShape=r,this.rank=r.length;var i=jt(this.rank),o=function(t){var e=t.length;if(e>5)throw Error("Tile for rank ".concat(e," is not yet supported"));if(1===e)return"imod(resRC, ".concat(t[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<t.length;a++)r.push("imod(".concat(n[a],", ").concat(t[a],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")};function du(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.reps;if("string"===a.dtype){var s=n.readSync(a.dataId).map((function(t){return o.Md.decodeString(t)})),u=Object(o.fd)(a.shape,a.dtype,s),c=Fe(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var d=new cu(a.shape,i);return n.runWebGLProgram(d,[a],a.dtype)}var lu={kernelName:o.Uc,backendName:"webgl",kernelFunc:du};var hu={kernelName:o.Vc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.k,o=r.sorted,u=n.readSync(a.dataId),c=Le(u,a.shape,a.dtype,i,o),d=Object(s.a)(c,2),l=d[0],h=d[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(h.shape,h.dtype,h.values)]}};var pu={kernelName:o.Xc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,a=n.axis,i=e.x;Z(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=Ue(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,d=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([d.length],"int32",d)]}};var fu={kernelName:o.Yc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),d=0,l=0;l<s;l++)l!==i&&(c[d++]=o.shape[l]);var h=[],p=new Array(s).fill(0),f=o.shape.slice();f[i]=1;for(var m=new Array(u),v=0;v<m.length;v++){p[i]=v;var b=Dr({inputs:{x:o},backend:n,attrs:{begin:p,size:f}}),g=Rn({inputs:{x:b},backend:n,attrs:{shape:c}});m[v]=g,h.push(b)}return h.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),m}},mu=function t(e,n){Object(h.a)(this,t),this.variableNames=["x","segmentIds"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=e.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,d="\n        sumValue += dot(values, segFilter);\n    ",l="";i%r>0&&(l="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(l,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(p,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")};for(var vu=0,bu=[io,so,Xn,Yn,Kn,Jn,tr,rr,ar,ir,cr,dr,hr,fr,gr,vr,xr,Tr,_r,Ir,Sr,Cr,Ar,Lr,Br,Gr,Yr,Zr,$r,vn,sa,ga,ya,pa,Oa,wa,xa,Ta,ka,Sa,Aa,Ra,Pa,za,Va,La,Ga,Xa,qa,Ka,Ja,$a,ni,ai,si,di,fi,vi,yi,Oi,Ti,Ei,ki,Si,Ni,Ai,Mi,fn,Pi,aa,Fi,Bi,zi,yn,Wi,Hi,Xi,Zi,qi,Qi,to,no,co,fo,po,bo,go,yo,ho,xo,Oo,_o,ko,So,Fo,An,Bo,zo,Wo,Ho,zr,Yo,Zo,Jo,es,rs,wn,as,os,Wr,jo,us,hs,ds,Mn,ms,bs,ys,Os,Ts,ks,Ss,Ns,As,Ms,Ds,Ls,Us,Vs,Gs,Fr,Do,Xs,Ys,qs,Ks,Js,$s,eu,nu,au,Mo,Vn,ou,uu,lu,hu,Gn,pu,fu,{kernelName:o.Zc,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.segmentIds,s=r.numSegments,u=a.shape.length,c=[],d=0,l=o.dd.getAxesPermutation([d],u),h=a;null!=l&&(h=Wn({inputs:{x:a},backend:n,attrs:{perm:l}}),c.push(h),d=o.dd.getInnerMostAxes(1,u)[0]);var p=o.dd.segment_util.computeOutShape(h.shape,d,s),f=o.Md.sizeFromShape([h.shape[d]]),m=Rn({inputs:{x:h},backend:n,attrs:{shape:[-1,f]}});c.push(m);var v=Rn({inputs:{x:function t(e,r,a,i,s){var u=e.shape[0],d=e.shape[1],l=o.dd.segment_util.segOpComputeOptimalWindowSize(d,s),h=new mu({windowSize:l,inSize:d,batchSize:u,numSegments:s},r),p=n.compileAndRun(h,[e,a],i);if(c.push(p),p.shape[1]===s)return p;var f=is({backend:n,attrs:{start:0,stop:s,step:1,dtype:"float32"}}),m=du({inputs:{x:f},backend:n,attrs:{reps:[d/l]}});return c.push(f),c.push(m),t(p,r,m,i,s)}(m,"unsortedSegmentSum",i,Object(o.Fd)(a.dtype),s)},backend:n,attrs:{shape:p}}),b=v;if(null!=l){c.push(v);var g=o.dd.getUndoAxesPermutation(l);b=Wn({inputs:{x:b},backend:n,attrs:{perm:g}})}return c.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),b}},Ko];vu<bu.length;vu++){var gu=bu[vu];Object(o.wd)(gu)}},function(t,e,n){"use strict";var r=n(0),a=n(10),i=n.n(a),o=n(17),s=n(7),u=n(18),c=n(100),d=n(89);function l(t,e,n){return(l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(d.a)(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}var h=n(84),p=n(83),f=n(12),m=r.td.whereImpl,v=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).blockSize=48,t.firstUse=!0,t.data=new r.L(Object(c.a)(t),Object(r.md)()),t}return Object(u.a)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(t,e,n){this.firstUse&&(this.firstUse=!1,Object(r.nd)().get("IS_NODE")&&r.dd.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var a={id:this.nextDataId()};return this.data.set(a,{values:t,dtype:n,refCount:1}),a}},{key:"makeTensorInfo",value:function(t,e,n){var a;if("string"===e&&null!=n&&n.length>0&&r.Md.isString(n[0])){var i=n.map((function(t){return r.Md.encodeString(t)}));a=this.write(i,t,e)}else a=this.write(n,t,e);return{dataId:a,shape:t,dtype:e}}},{key:"refCount",value:function(t){return this.data.has(t)?this.data.get(t).refCount:0}},{key:"incRef",value:function(t){this.data.get(t).refCount++}},{key:"decRef",value:function(t){this.data.has(t)&&this.data.get(t).refCount--}},{key:"move",value:function(t,e,n,r,a){this.data.set(t,{values:e,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var t=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readSync(e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"readSync",value:function(t){var e=this.data.get(t),n=e.dtype,a=e.complexTensorInfos;if("complex64"===n){var i=this.readSync(a.real.dataId),o=this.readSync(a.imag.dataId);return r.dd.mergeRealAndImagArrays(i,o)}return this.data.get(t).values}},{key:"bufferSync",value:function(t){var e=this.readSync(t.dataId),n=e;if("string"===t.dtype)try{n=e.map((function(t){return r.Md.decodeString(t)}))}catch(a){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(r.fd)(t.shape,t.dtype,n)}},{key:"makeOutput",value:function(t,e,n){var a=this.write(t,e,n);return Object(r.md)().makeTensorFromDataId(a,e,n,this)}},{key:"disposeData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(t)){if(this.data.get(t).refCount--,!e&&this.data.get(t).refCount>0)return!1;var n=this.data.get(t),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(t)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(t){this.disposeData(t.dataId)}},{key:"time",value:function(){var t=Object(o.a)(i.a.mark((function t(e){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.Md.now(),e(),a=r.Md.now()-n,t.abrupt("return",{kernelMs:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(t){Object(f.a)([t],"where");var e=this.readSync(t.dataId);return m(t.shape,e)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return l(Object(d.a)(n.prototype),"epsilon",this).call(this)}}]),n}(r.vb);v.nextDataId=0,Object(r.vd)("cpu",(function(){return new v}),1);var b=n(20),g=Object(b.a)(r.V,(function(t){return t>=0?t:Math.exp(t)-1})),y={kernelName:r.V,backendName:"cpu",kernelFunc:g},x=n(46);function O(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.alpha;Object(f.a)([i],"leakyRelu");for(var s=r.Md.sizeFromShape(i.shape),u=n.data.get(i.dataId).values,c=r.Md.getTypedArrayFromDType("float32",s),d=0;d<u.length;d++)c[d]=u[d]<0?o*u[d]:u[d];return n.makeTensorInfo(i.shape,"float32",c)}var w={kernelName:r.yb,backendName:"cpu",kernelFunc:O},_=n(6),T=n(24),E=Object(T.a)((function(t,e){return t<0?e*t:t}));function k(t){var e=t.inputs,n=t.backend,r=e.x,a=e.alpha;Object(f.a)([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=E(r.shape,a.shape,i,o,r.dtype),u=Object(_.a)(s,2),c=u[0],d=u[1];return n.makeTensorInfo(d,r.dtype,c)}var I={kernelName:r.fc,backendName:"cpu",kernelFunc:k},S=Object(b.a)(r.lc,(function(t){return Math.max(0,t)})),C={kernelName:r.lc,backendName:"cpu",kernelFunc:S},N=Object(b.a)(r.mc,(function(t){return Math.min(Math.max(0,t),6)})),j={kernelName:r.mc,backendName:"cpu",kernelFunc:N};function A(t,e,n,r,a){if("linear"===n)return Object(x.a)({inputs:{x:e},backend:t});if("relu"===n)return S({inputs:{x:e},backend:t});if("elu"===n)return g({inputs:{x:e},backend:t});if("relu6"===n)return N({inputs:{x:e},backend:t});if("prelu"===n)return k({inputs:{x:e,alpha:r},backend:t});if("leakyrelu"===n)return O({inputs:{x:e},backend:t,attrs:{alpha:a}});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}var R=n(70);function M(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.shape,s=r.Md.sizeFromShape(i.shape),u=r.Md.inferFromImplicitShape(o,s),c=r.Md.sizeFromShape(u);r.Md.assert(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(i.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(i.dataId);var d=n.data.get(i.dataId);if(null!=d.complexTensorInfos){var l=d.complexTensorInfos.real,h=d.complexTensorInfos.imag;l.shape=u,h.shape=u}return{dataId:i.dataId,shape:u,dtype:i.dtype}}var P={kernelName:r.nc,backendName:"cpu",kernelFunc:M};function D(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.a,o=e.b,s=a.transposeA,u=a.transposeB;Object(f.a)([i,o],"matMul");var c=i.shape.length,d=o.shape.length,l=s?i.shape[c-2]:i.shape[c-1],h=u?o.shape[d-1]:o.shape[d-2],p=s?i.shape[c-1]:i.shape[c-2],m=u?o.shape[d-2]:o.shape[d-1],v=i.shape.slice(0,-2),b=o.shape.slice(0,-2),g=r.Md.sizeFromShape(v),y=r.Md.sizeFromShape(b),x=g===y||1===g||1===y;r.Md.assert(c>=2&&d>=2&&x,(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(v,") and (").concat(b,").")}));var O=(g>y?i.shape.slice(0,-2):o.shape.slice(0,-2)).concat([p,m]);r.Md.assert(l===h,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(h,") of Tensors with shapes ").concat(i.shape," and ")+"".concat(o.shape," and transposeA=").concat(s)+" and transposeB=".concat(u," must match.")}));for(var w=u?[y,m,h]:[y,h,m],T=M({inputs:{x:i},backend:n,attrs:{shape:s?[g,l,p]:[g,p,l]}}),E=M({inputs:{x:o},backend:n,attrs:{shape:w}}),k=s?T.shape[1]:T.shape[2],I=s?T.shape[2]:T.shape[1],S=u?E.shape[1]:E.shape[2],C=Math.max(g,y),N=n.data.get(T.dataId).values,j=n.data.get(E.dataId).values,A=r.Md.computeStrides(T.shape),R=r.Md.computeStrides(E.shape),P=s?[A[0],1,A[1]]:[A[0],A[1],1],D=Object(_.a)(P,3),F=D[0],L=D[1],B=D[2],U=u?[1,R[1],R[0]]:[R[1],1,R[0]],z=Object(_.a)(U,3),V=z[0],W=z[1],G=z[2],H=I*S,X=Object(r.fd)([C,I,S],T.dtype),Y=X.values,q=n.blockSize,K=0;K<C;K++)for(var Z=0;Z<I;Z+=q)for(var J=0;J<S;J+=q)for(var Q=0;Q<k;Q+=q)for(var $=Math.min(Z+q,I),tt=Math.min(J+q,S),et=Math.min(Q+q,k),nt=Z;nt<$;nt++)for(var rt=J;rt<tt;rt++){for(var at=0,it=Q;it<et;it++){var ot=Math.min(K,g-1)*F,st=Math.min(K,y-1)*G;at+=N[ot+nt*L+it*B]*j[it*V+rt*W+st]}Y[K*H+(nt*S+rt)]+=at}return n.disposeIntermediateTensorInfo(T),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(O,X.dtype,X.values)}var F={kernelName:r.s,backendName:"cpu",kernelFunc:D};var L={kernelName:r.bd,backendName:"cpu",kernelFunc:function(t){var e,n,r,a=t.inputs,i=t.backend,o=t.attrs,s=a.a,u=a.b,c=a.bias,d=a.preluActivationWeights,l=o.transposeA,h=o.transposeB,p=o.activation,f=o.leakyreluAlpha,m=[];e=D({inputs:{a:s,b:u},attrs:{transposeA:l,transposeB:h},backend:i}),c&&(n=Object(R.a)({inputs:{a:e,b:c},backend:i}),m.push(e),e=n),p&&(r=A(i,e,p,d,f),m.push(e),e=r);for(var v=0,b=m;v<b.length;v++){var g=b[v];i.disposeIntermediateTensorInfo(g)}return e}},B=n(257),U=Object(b.a)(r.b,(function(t){return Math.acos(t)})),z={kernelName:r.b,backendName:"cpu",kernelFunc:U},V=Object(b.a)(r.c,(function(t){return Math.acosh(t)})),W={kernelName:r.c,backendName:"cpu",kernelFunc:V};var G={kernelName:r.e,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e;Object(f.a)(e,"addN");for(var i=a.map((function(t){return n.data.get(t.dataId).values})),o=Object(r.fd)(a[0].shape,a[0].dtype),s=o.values,u=0;u<a.length;u++)for(var c=i[u],d=0;d<s.length;d++)s[d]+=c[d];return n.makeTensorInfo(o.shape,o.dtype,o.values)}},H=n(37);var X={kernelName:r.f,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.axis,s=a.keepDims;Object(f.a)(i,"all");var u=r.Md.parseAxisParam(o,i.shape),c=u,d=r.dd.getAxesPermutation(c,i.shape.length),l=i;null!=d&&(l=Object(H.a)({inputs:{x:i},backend:n,attrs:{perm:d}}),c=r.dd.getInnerMostAxes(c.length,i.shape.length)),r.dd.assertAxesAreInnerMostDims("all",c,l.shape.length);for(var h=r.dd.computeOutAndReduceShapes(l.shape,c),p=Object(_.a)(h,2),m=p[0],v=p[1],b=r.Md.sizeFromShape(v),g=r.Md.makeZerosTypedArray(r.Md.sizeFromShape(m),l.dtype),y=n.data.get(l.dataId).values,x=0;x<g.length;++x){for(var O=x*b,w=y[O],T=0;T<b;++T){var E=y[O+T];w=w&&E}g[x]=w}null!=d&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(m,l.dtype,g);if(s){var I=M({inputs:{x:k},backend:n,attrs:{shape:r.dd.expandShapeToKeepDim(m,u)}});return n.disposeIntermediateTensorInfo(k),I}return k}};var Y={kernelName:r.g,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.axis,s=a.keepDims;Object(f.a)(i,"any");var u=r.Md.parseAxisParam(o,i.shape),c=u,d=r.dd.getAxesPermutation(c,i.shape.length),l=i;null!=d&&(l=Object(H.a)({inputs:{x:i},backend:n,attrs:{perm:d}}),c=r.dd.getInnerMostAxes(c.length,i.shape.length)),r.dd.assertAxesAreInnerMostDims("any",c,l.shape.length);for(var h=r.dd.computeOutAndReduceShapes(l.shape,c),p=Object(_.a)(h,2),m=p[0],v=p[1],b=r.Md.sizeFromShape(v),g=r.Md.makeZerosTypedArray(r.Md.sizeFromShape(m),l.dtype),y=n.data.get(l.dataId).values,x=0;x<g.length;++x){for(var O=x*b,w=y[O],T=0;T<b;++T){var E=y[O+T];w=w||E}g[x]=w}null!=d&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(m,l.dtype,g);if(s){var I=M({inputs:{x:k},backend:n,attrs:{shape:r.dd.expandShapeToKeepDim(m,u)}});return n.disposeIntermediateTensorInfo(k),I}return k}};var q={kernelName:r.h,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.axis;Object(f.a)(i,"argMax");var s=r.Md.parseAxisParam(o,i.shape),u=r.dd.getAxesPermutation(s,i.shape.length),c=i,d=[];null!=u&&(c=Object(H.a)({inputs:{x:i},backend:n,attrs:{perm:u}}),d.push(c),s=r.dd.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],r.dd.assertAxesAreInnerMostDims("argMax",s,c.shape.length);for(var l=r.dd.computeOutAndReduceShapes(c.shape,s),h=Object(_.a)(l,2),p=h[0],m=h[1],v=r.Md.sizeFromShape(p),b=r.Md.makeZerosTypedArray(v,"int32"),g=r.Md.sizeFromShape(m),y=n.data.get(c.dataId).values,x=0;x<b.length;++x){for(var O=x*g,w=y[O],T=0,E=0;E<g;++E){var k=y[O+E];k>w&&(w=k,T=E)}b[x]=T}return d.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.makeTensorInfo(p,"int32",b)}};var K={kernelName:r.i,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.axis;Object(f.a)(i,"argMin");var s=r.Md.parseAxisParam(o,i.shape),u=r.dd.getAxesPermutation(s,i.shape.length),c=i,d=[];null!=u&&(c=Object(H.a)({inputs:{x:i},backend:n,attrs:{perm:u}}),d.push(c),s=r.dd.getInnerMostAxes(s.length,c.shape.length)),s=[s[0]],r.dd.assertAxesAreInnerMostDims("argMin",s,c.shape.length);for(var l=r.dd.computeOutAndReduceShapes(c.shape,s),h=Object(_.a)(l,2),p=h[0],m=h[1],v=r.Md.sizeFromShape(p),b=r.Md.makeZerosTypedArray(v,"int32"),g=r.Md.sizeFromShape(m),y=n.data.get(c.dataId).values,x=0;x<b.length;++x){for(var O=x*g,w=y[O],T=0,E=0;E<g;++E){var k=y[O+E];k<w&&(w=k,T=E)}b[x]=T}return d.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.makeTensorInfo(p,"int32",b)}},Z=Object(b.a)(r.j,(function(t){return Math.asin(t)})),J={kernelName:r.j,backendName:"cpu",kernelFunc:Z},Q=Object(b.a)(r.k,(function(t){return Math.asinh(t)})),$={kernelName:r.k,backendName:"cpu",kernelFunc:Q},tt=Object(b.a)(r.l,(function(t){return Math.atan(t)})),et={kernelName:r.l,backendName:"cpu",kernelFunc:tt},nt=n(25),rt=Object(T.a)((function(t,e){return Math.atan2(t,e)})),at=Object(nt.a)(r.m,rt),it={kernelName:r.m,backendName:"cpu",kernelFunc:at},ot=Object(b.a)(r.n,(function(t){return Math.atanh(t)})),st={kernelName:r.n,backendName:"cpu",kernelFunc:ot};function ut(t,e,n,a,i,o){for(var s=i.strideHeight,u=i.strideWidth,c=i.dilationHeight,d=i.dilationWidth,l=i.effectiveFilterHeight,h=i.effectiveFilterWidth,p=i.padInfo.top,f=i.padInfo.left,m="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Object(r.fd)(i.outShape,n),b=v.values,g=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],x=i.outShape[3],O=0;O<i.batchSize;++O)for(var w=O*g,_=O*a[0],T=0;T<i.inChannels;++T)for(var E=0;E<i.outHeight;++E)for(var k=E*s-p,I=Math.max(0,k),S=Math.min(i.inHeight,l+k),C=w+E*y,N=0;N<i.outWidth;++N){for(var j=N*u-f,A=Math.max(0,j),R=Math.min(i.inWidth,h+j),M=m,P=0,D=0,F=I;F<S;F+=c){for(var L=_+F*a[1],B=A;B<R;B+=d){var U=t[L+B*a[2]+T];"max"===o&&U>M?M=U:"avg"===o&&(P+=U,D++)}if(isNaN(M))break}b[C+N*x+T]="avg"===o?P/D:M}return v}function ct(t,e,n,a){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=Object(r.fd)(a.outShape,"int32"),u=a.strideHeight,c=a.strideWidth,d=a.dilationHeight,l=a.dilationWidth,h=a.effectiveFilterHeight,p=a.effectiveFilterWidth,f=a.padInfo.top,m=a.padInfo.left,v=Object(r.fd)(e,n,t),b=0;b<a.batchSize;++b)for(var g=0;g<a.inChannels;++g)for(var y=0;y<a.outHeight;++y){for(var x=y*u-f,O=x;O<0;)O+=d;for(var w=Math.min(a.inHeight,h+x),_=0;_<a.outWidth;++_){for(var T=_*c-m,E=T;E<0;)E+=l;for(var k=Math.min(a.inWidth,p+T),I=Number.NEGATIVE_INFINITY,S=-1,C=O;C<w;C+=d)for(var N=C-x,j=E;j<k;j+=l){var A=j-T,R=v.get(b,C,j,g);R>I&&(I=R,S=i?o?((b*a.inHeight+C)*a.inWidth+j)*a.inChannels+g:(C*a.inWidth+j)*a.inChannels+g:N*p+A)}s.set(S,b,y,_,g)}}return s}function dt(t,e,n,a,i,o){for(var s=i.strideDepth,u=i.strideHeight,c=i.strideWidth,d=i.dilationDepth,l=i.dilationHeight,h=i.dilationWidth,p=i.effectiveFilterDepth,f=i.effectiveFilterHeight,m=i.effectiveFilterWidth,v=i.padInfo.front,b=i.padInfo.top,g=i.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Object(r.fd)(i.outShape,n),O=x.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],_=i.outShape[2]*i.outShape[3]*i.outShape[4],T=i.outShape[3]*i.outShape[4],E=i.outShape[4],k=0;k<i.batchSize;++k)for(var I=k*w,S=k*a[0],C=0;C<i.inChannels;++C)for(var N=0;N<i.outDepth;++N){for(var j=N*s-v,A=j;A<0;)A+=d;for(var R=Math.min(i.inDepth,p+j),M=I+N*_,P=0;P<i.outHeight;++P){for(var D=P*u-b,F=D;F<0;)F+=l;for(var L=Math.min(i.inHeight,f+D),B=M+P*T,U=0;U<i.outWidth;++U){for(var z=U*c-g,V=z;V<0;)V+=h;for(var W=Math.min(i.inWidth,m+z),G=B+U*E,H=y,X=0,Y=0,q=A;q<R;q+=d){for(var K=S+q*a[1],Z=F;Z<L;Z+=l){for(var J=K+Z*a[2],Q=V;Q<W;Q+=h){var $=t[J+Q*a[3]+C];if("max"===o&&$>H?H=$:"avg"===o&&(X+=$,Y++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}O[G+C]="avg"===o?X/Y:H}}}return x}var lt={kernelName:r.o,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x;Object(f.a)(i,"avgPool");var o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode;r.Md.assert(r.dd.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")}));var d,l=r.dd.computePool2DInfo(i.shape,o,s,1,u,c);if(1===l.filterWidth&&1===l.filterHeight&&r.Md.arraysEqual(l.inShape,l.outShape))d=Object(x.a)({inputs:{x:i},backend:n});else{var h=n.data.get(i.dataId).values,p=r.Md.computeStrides(i.shape),m=ut(h,i.shape,i.dtype,p,l,"avg");d=n.makeTensorInfo(l.outShape,i.dtype,m.values)}return d}};var ht={kernelName:r.p,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode,d=a.dataFormat;Object(f.a)(i,"avgPool3d");var l=r.dd.computePool3DInfo(i.shape,o,s,1,u,c,d),h=dt(n.data.get(i.dataId).values,i.shape,i.dtype,r.Md.computeStrides(i.shape),l,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};var pt={kernelName:r.q,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.dy,o=e.input,s=a.filterSize,u=a.strides,c=a.pad,d=a.dimRoundingMode;Object(f.a)([i,o],"avgPool3DGrad");for(var l=r.dd.computePool3DInfo(o.shape,s,u,1,c,d),h=l.strideDepth,p=l.strideHeight,m=l.strideWidth,v=l.filterDepth,b=l.filterHeight,g=l.filterWidth,y=l.dilationDepth,x=l.dilationHeight,O=l.dilationWidth,w=l.effectiveFilterDepth,_=l.effectiveFilterHeight,T=l.effectiveFilterWidth,E=w-1-l.padInfo.front,k=T-1-l.padInfo.left,I=_-1-l.padInfo.top,S=Object(r.fd)(o.shape,"float32"),C=1/(v*b*g),N=n.bufferSync(i),j=0;j<l.batchSize;++j)for(var A=0;A<l.inChannels;++A)for(var R=0;R<l.inDepth;++R)for(var M=0;M<l.inHeight;++M)for(var P=0;P<l.inWidth;++P){for(var D=R-E,F=M-I,L=P-k,B=0,U=0;U<w;U+=y){var z=(D+U)/h;if(!(z<0||z>=l.outDepth||Math.floor(z)!==z))for(var V=0;V<_;V+=x){var W=(F+V)/p;if(!(W<0||W>=l.outHeight||Math.floor(W)!==W))for(var G=0;G<T;G+=O){var H=(L+G)/m;if(!(H<0||H>=l.outWidth||Math.floor(H)!==H))B+=N.get(j,z,W,H,A)}}}S.set(B*C,j,R,M,P,A)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};var ft={kernelName:r.r,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.dy,o=e.input,s=o;Object(f.a)([i,o],"avgPoolGrad");for(var u=a.filterSize,c=a.strides,d=a.pad,l=r.dd.computePool2DInfo(s.shape,u,c,1,d),h=l.strideHeight,p=l.strideWidth,m=l.filterHeight,v=l.filterWidth,b=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterHeight,x=l.effectiveFilterWidth,O=x-1-l.padInfo.left,w=y-1-l.padInfo.top,_=Object(r.fd)(s.shape,"float32"),T=1/(m*v),E=n.data.get(i.dataId).values,k=Object(r.fd)(i.shape,"float32",E),I=0;I<l.batchSize;++I)for(var S=0;S<l.inChannels;++S)for(var C=0;C<l.inHeight;++C)for(var N=0;N<l.inWidth;++N){for(var j=C-w,A=N-O,R=0,M=0;M<y;M+=b){var P=(j+M)/h;if(!(P<0||P>=l.outHeight||Math.floor(P)!==P))for(var D=0;D<x;D+=g){var F=(A+D)/p;if(!(F<0||F>=l.outWidth||Math.floor(F)!==F))R+=k.get(I,P,F,S)}}_.set(R*T,I,C,N,S)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var mt={kernelName:r.ib,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.scale,s=e.offset,u=e.mean,c=e.variance;r.Md.assert(u.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),r.Md.assert(null==s||u.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),r.Md.assert(null==o||u.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),Object(f.a)([i,u,c,o,s],"batchNorm");var d=a.varianceEpsilon;null==d&&(d=.001);for(var l=n.data.get(i.dataId).values,h=n.data.get(u.dataId).values,p=n.data.get(c.dataId).values,m=o?n.data.get(o.dataId).values:new Float32Array([1]),v=s?n.data.get(s.dataId).values:new Float32Array([0]),b=new Float32Array(l.length),g=v.length,y=m.length,x=p.length,O=h.length,w=0,_=0,T=0,E=0,k=0;k<l.length;++k)b[k]=v[w++]+(l[k]-h[_++])*m[T++]/Math.sqrt(p[E++]+d),w>=g&&(w=0),_>=O&&(_=0),T>=y&&(T=0),E>=x&&(E=0);return n.makeTensorInfo(i.shape,i.dtype,b)}},vt=n(59);var bt={kernelName:r.t,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.blockShape,s=a.crops;Object(f.a)([i],"batchToSpaceND");var u=o.reduce((function(t,e){return t*e})),c=r.dd.getReshaped(i.shape,o,u),d=r.dd.getPermuted(c.length,o.length),l=r.dd.getReshapedPermuted(i.shape,o,u),h=r.dd.getSliceBeginCoords(s,o.length),p=r.dd.getSliceSize(l,s,o.length),m=M({inputs:{x:i},backend:n,attrs:{shape:c}}),v=Object(H.a)({inputs:{x:m},backend:n,attrs:{perm:d}}),b=M({inputs:{x:v},backend:n,attrs:{shape:l}}),g=Object(vt.a)({inputs:{x:b},backend:n,attrs:{begin:h,size:p}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),g}},gt=n(115);var yt={kernelName:r.u,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.weights,o=r.size,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=Object(gt.a)(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}},xt=n(64),Ot=n(241),wt=Object(b.a)(r.x,(function(t,e){var n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t})),_t={kernelName:r.x,backendName:"cpu",kernelFunc:wt},Tt=n(38),Et={kernelName:r.z,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs.x,n=t.backend,a=new Float32Array(r.Md.sizeFromShape(e.shape)),i=n.data.get(e.dataId),o=i.complexTensorInfos.real,s=i.complexTensorInfos.imag,u=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,d=0;d<u.length;d++){var l=u[d],h=c[d];a[d]=Math.hypot(l,h)}return n.makeOutput(a,e.shape,"float32")}},kt=n(242);function It(t){var e=t.inputs,n=t.backend,r=e.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var St={kernelName:r.rb,backendName:"cpu",kernelFunc:It},Ct=n(58);function Nt(t){var e=t.inputs,n=t.backend,a=t.attrs.axis,i=r.Md.parseAxisParam(a,e[0].shape)[0],o=r.dd.computeOutShape(e.map((function(t){return t.shape})),i);if(0===r.Md.sizeFromShape(o))return n.makeTensorInfo(o,e[0].dtype,[]);var s=e.filter((function(t){return r.Md.sizeFromShape(t.shape)>0}));if(1===s.length)return Object(x.a)({inputs:{x:s[0]},backend:n});var u=s.map((function(t){return t.shape}));if(r.dd.assertParamsConsistent(u,i),"complex64"===s[0].dtype){var c=s.map((function(t){return Object(Ct.a)({inputs:{input:t},backend:n})})),d=s.map((function(t){return It({inputs:{input:t},backend:n})})),l=Nt({inputs:c,backend:n,attrs:{axis:i}}),h=Nt({inputs:d,backend:n,attrs:{axis:i}}),p=Object(Tt.a)({inputs:{real:l,imag:h},backend:n});return c.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),d.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),p}var f=s.map((function(t){var e=r.Md.sizeFromShape(t.shape.slice(i));return M({inputs:{x:t},backend:n,attrs:{shape:[-1,e]}})})),m=f.map((function(t){return{vals:n.data.get(t.dataId).values,shape:t.shape}}));o=r.dd.computeOutShape(f.map((function(t){return t.shape})),1);var v=1===f[0].shape[0],b=Object(kt.a)(m,o,e[0].dtype,v),g=r.dd.computeOutShape(s.map((function(t){return t.shape})),i),y=n.makeTensorInfo(g,e[0].dtype,b);return f.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),y}var jt={kernelName:r.A,backendName:"cpu",kernelFunc:Nt};function At(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.filter,s=a.strides,u=a.pad,c=a.dataFormat,d=a.dilations,l=a.dimRoundingMode;Object(f.a)([i,o],"conv2d");for(var h=r.dd.convertConv2DDataFormat(c),p=r.dd.computeConv2DInfo(i.shape,o.shape,s,d,u,l,!1,h),m=p.filterHeight,v=p.filterWidth,b=p.dilationHeight,g=p.dilationWidth,y=p.padInfo.left,x=p.padInfo.top,O="channelsLast"===p.dataFormat,w=new r.Tc(p.outShape,i.dtype),_=r.Md.computeStrides(i.shape),T=r.Md.computeStrides(o.shape),E=_[0],k=O?_[1]:_[2],I=O?_[2]:1,S=O?1:_[1],C=w.strides[0],N=O?w.strides[1]:w.strides[2],j=O?w.strides[2]:1,A=O?1:w.strides[1],R=n.data.get(i.dataId).values,M=n.data.get(o.dataId).values,P=w.values,D=0;D<p.batchSize;++D)for(var F=D*E,L=D*C,B=0;B<p.outHeight;++B)for(var U=L+B*N,z=B*p.strideHeight-x,V=0;V<m;++V){var W=z+V*b;if(!(W<0||W>=p.inHeight))for(var G=V*T[0],H=F+W*k,X=0;X<p.outWidth;++X)for(var Y=U+X*j,q=X*p.strideWidth-y,K=0;K<v;++K){var Z=q+K*g;if(!(Z<0||Z>=p.inWidth))for(var J=H+Z*I,Q=G+K*T[1],$=0;$<p.inChannels;++$){for(var tt=R[J+$*S],et=0;et<p.outChannels;++et)P[Y+et*A]+=tt*M[Q+et];Q+=p.outChannels}}}return n.makeTensorInfo(w.shape,w.dtype,P)}var Rt={kernelName:r.B,backendName:"cpu",kernelFunc:At};var Mt={kernelName:r.C,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.dy,s=a.strides,u=a.pad,c=a.dataFormat,d=a.dimRoundingMode,l=a.filterShape;Object(f.a)([i,o],"conv2dBackpropFilter");for(var h=r.dd.convertConv2DDataFormat(c),p=r.dd.computeConv2DInfo(i.shape,l,s,1,u,d,!1,h),m=p.strideHeight,v=p.strideWidth,b=p.filterHeight,g=p.filterWidth,y="channelsLast"===p.dataFormat,x=new r.Tc(p.filterShape,"float32"),O=p.padInfo.left,w=p.padInfo.top,_=n.data.get(i.dataId).values,T=n.data.get(o.dataId).values,E=new r.Tc(i.shape,i.dtype,_),k=new r.Tc(o.shape,o.dtype,T),I=0;I<b;++I)for(var S=Math.max(0,Math.ceil((w-I)/m)),C=Math.min(p.outHeight,(p.inHeight+w-I)/m),N=0;N<g;++N)for(var j=Math.max(0,Math.ceil((O-N)/v)),A=Math.min(p.outWidth,(p.inWidth+O-N)/v),R=0;R<p.inChannels;++R)for(var M=0;M<p.outChannels;++M){for(var P=0,D=0;D<p.batchSize;++D)for(var F=S;F<C;++F)for(var L=I+F*m-w,B=j;B<A;++B){var U=N+B*v-O;P+=y?E.get(D,L,U,R)*k.get(D,F,B,M):E.get(D,R,L,U)*k.get(D,M,F,B)}x.set(P,I,N,R,M)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var Pt={kernelName:r.D,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.dy,o=e.filter,s=a.inputShape,u=a.strides,c=a.pad,d=a.dataFormat,l=a.dimRoundingMode;Object(f.a)([i,o],"conv2dBackpropInput");var h=r.Md.computeStrides(o.shape),p=r.Md.computeStrides(i.shape),m=r.dd.convertConv2DDataFormat(d),v=r.dd.computeConv2DInfo(s,o.shape,u,1,c,l,!1,m),b=new r.Tc(v.inShape,"float32"),g=b.values,y=n.data.get(i.dataId).values,x=n.data.get(o.dataId).values,O=Object(_.a)(h,3),w=O[0],T=O[1],E=O[2],k=v.batchSize,I=v.filterHeight,S=v.filterWidth,C=v.inChannels,N=v.inHeight,j=v.inWidth,A=v.outChannels,R=v.outHeight,M=v.outWidth,P=v.strideHeight,D=v.strideWidth;m=v.dataFormat;for(var F=I-1-v.padInfo.top,L=S-1-v.padInfo.left,B="channelsLast"===m,U=b.strides[0],z=B?b.strides[1]:b.strides[2],V=B?b.strides[2]:1,W=B?1:b.strides[1],G=p[0],H=B?p[1]:p[2],X=B?p[2]:1,Y=B?1:p[1],q=0;q<k;++q)for(var K=0;K<C;++K)for(var Z=0;Z<N;++Z)for(var J=Z-F,Q=Math.max(0,Math.ceil(J/P)),$=Math.min(R,(I+J)/P),tt=0;tt<j;++tt){for(var et=tt-L,nt=Math.max(0,Math.ceil(et/D)),rt=Math.min(M,(S+et)/D),at=0,it=Q;it<$;++it)for(var ot=it*P-J,st=nt;st<rt;++st)for(var ut=G*q+H*it+X*st,ct=w*(I-1-ot)+T*(S-1-(st*D-et))+E*K,dt=0;dt<A;++dt){at+=y[ut+Y*dt]*x[ct+dt]}g[U*q+z*Z+V*tt+W*K]=at}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var Dt={kernelName:r.E,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.filter,s=a.strides,u=a.pad,c=a.dilations;Object(f.a)([i,o],"conv3d");for(var d=r.dd.computeConv3DInfo(i.shape,o.shape,s,c,u),l=d.filterDepth,h=d.filterHeight,p=d.filterWidth,m=d.dilationDepth,v=d.dilationHeight,b=d.dilationWidth,g=d.padInfo,y=g.front,x=g.left,O=g.top,w=new r.Tc(d.outShape,i.dtype),_=n.data.get(i.dataId).values,T=n.data.get(o.dataId).values,E=w.values,k=r.Md.computeStrides(i.shape),I=r.Md.computeStrides(o.shape),S=0;S<d.batchSize;++S)for(var C=S*k[0],N=S*w.strides[0],j=0;j<d.outDepth;++j)for(var A=N+j*w.strides[1],R=j*d.strideDepth-y,M=0;M<l;++M){var P=R+M*m;if(!(P<0||P>=d.inDepth))for(var D=M*I[0],F=C+P*k[1],L=0;L<d.outHeight;++L)for(var B=A+L*w.strides[2],U=L*d.strideHeight-O,z=0;z<h;++z){var V=U+z*v;if(!(V<0||V>=d.inHeight))for(var W=D+z*I[1],G=F+V*k[2],H=0;H<d.outWidth;++H)for(var X=B+H*d.outChannels,Y=H*d.strideWidth-x,q=0;q<p;++q){var K=Y+q*b;if(!(K<0||K>=d.inWidth))for(var Z=W+q*I[2],J=G+K*d.inChannels,Q=Z,$=0;$<d.inChannels;++$){for(var tt=_[J+$],et=0;et<d.outChannels;++et)E[X+et]+=tt*T[Q+et];Q+=d.outChannels}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var Ft={kernelName:r.F,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.dy,s=a.strides,u=a.pad,c=a.filterShape;Object(f.a)([i,o],"conv3dBackpropFilterV2");for(var d=r.Md.computeStrides(i.shape),l=r.Md.computeStrides(o.shape),h=r.dd.computeConv3DInfo(i.shape,c,s,1,u),p=h.strideDepth,m=h.strideHeight,v=h.strideWidth,b=h.filterDepth,g=h.filterHeight,y=h.filterWidth,x=new r.Tc(h.filterShape,"float32"),O=x.values,w=Object(_.a)(x.strides,4),T=w[0],E=w[1],k=w[2],I=w[3],S=n.data.get(o.dataId).values,C=Object(_.a)(l,4),N=C[0],j=C[1],A=C[2],R=C[3],M=n.data.get(i.dataId).values,P=Object(_.a)(d,4),D=P[0],F=P[1],L=P[2],B=P[3],U=h.padInfo.front,z=h.padInfo.left,V=h.padInfo.top,W=0;W<b;++W)for(var G=Math.max(0,Math.ceil((U-W)/p)),H=Math.min(h.outDepth,(h.inDepth+U-W)/p),X=W*T,Y=0;Y<g;++Y)for(var q=Math.max(0,Math.ceil((V-Y)/m)),K=Math.min(h.outHeight,(h.inHeight+V-Y)/m),Z=Y*E+X,J=0;J<y;++J)for(var Q=Math.max(0,Math.ceil((z-J)/v)),$=Math.min(h.outWidth,(h.inWidth+z-J)/v),tt=J*k+Z,et=0;et<h.inChannels;++et)for(var nt=et*I+tt,rt=0;rt<h.outChannels;++rt){for(var at=0,it=0;it<h.batchSize;++it)for(var ot=it*D,st=it*N,ut=G;ut<H;++ut)for(var ct=(W+ut*p-U)*F+ot,dt=ut*j+st,lt=q;lt<K;++lt)for(var ht=(Y+lt*m-V)*L+ct,pt=lt*A+dt,ft=Q;ft<$;++ft){var mt=ft*R+pt;at+=M[(J+ft*v-z)*B+ht+et]*S[mt+rt]}O[nt+rt]=at}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var Lt={kernelName:r.G,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.dy,o=e.filter,s=a.pad,u=a.strides,c=a.inputShape;Object(f.a)([i],"conv3dBackpropInputV2");for(var d=r.Md.computeStrides(i.shape),l=r.Md.computeStrides(o.shape),h=r.dd.computeConv3DInfo(c,o.shape,u,1,s),p=new r.Tc(h.inShape,"float32"),m=p.values,v=Object(_.a)(p.strides,4),b=v[0],g=v[1],y=v[2],x=v[3],O=n.data.get(i.dataId).values,w=Object(_.a)(d,4),T=w[0],E=w[1],k=w[2],I=w[3],S=n.data.get(o.dataId).values,C=Object(_.a)(l,4),N=C[0],j=C[1],A=C[2],R=C[3],M=h.batchSize,P=h.filterDepth,D=h.filterHeight,F=h.filterWidth,L=h.inChannels,B=h.inDepth,U=h.inHeight,z=h.inWidth,V=h.outChannels,W=h.outDepth,G=h.outHeight,H=h.outWidth,X=h.strideDepth,Y=h.strideHeight,q=h.strideWidth,K=P-1-h.padInfo.front,Z=D-1-h.padInfo.top,J=F-1-h.padInfo.left,Q=0;Q<M;++Q)for(var $=0;$<L;++$)for(var tt=0;tt<B;++tt)for(var et=tt-K,nt=Math.max(0,Math.ceil(et/X)),rt=Math.min(W,(P+et)/X),at=0;at<U;++at)for(var it=at-Z,ot=Math.max(0,Math.ceil(it/Y)),st=Math.min(G,(D+it)/Y),ut=0;ut<z;++ut){for(var ct=ut-J,dt=Math.max(0,Math.ceil(ct/q)),lt=Math.min(H,(F+ct)/q),ht=0,pt=nt;pt<rt;++pt)for(var ft=pt*X-et,mt=ot;mt<st;++mt)for(var vt=mt*Y-it,bt=dt;bt<lt;++bt)for(var gt=T*Q+E*pt+k*mt+I*bt,yt=N*(P-1-ft)+j*(D-1-vt)+A*(F-1-(bt*q-ct))+R*$,xt=0;xt<V;++xt){ht+=O[gt+xt]*S[yt+xt]}m[b*Q+g*tt+y*at+x*ut+$]=ht}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},Bt=Object(b.a)(r.H,(function(t){return Math.cos(t)})),Ut={kernelName:r.H,backendName:"cpu",kernelFunc:Bt},zt=Object(b.a)(r.I,(function(t){return Math.cosh(t)})),Vt={kernelName:r.I,backendName:"cpu",kernelFunc:zt};var Wt={kernelName:r.J,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=t.backend,a=t.attrs,i=e.image,o=e.boxes,s=e.boxInd,u=a.cropSize,c=a.method,d=a.extrapolationValue,l=Object(_.a)(i.shape,4),h=l[0],p=l[1],f=l[2],m=l[3],v=o.shape[0],b=Object(_.a)(u,2),g=b[0],y=b[1],x=Object(r.fd)([v,g,y,m],"float32"),O=n.data.get(o.dataId).values,w=n.data.get(s.dataId).values,T=n.data.get(i.dataId).values,E=r.Md.computeStrides(i.shape),k=r.Md.computeStrides(x.shape),I=0;I<v;I++){var S=4*I,C=O[S],N=O[S+1],j=O[S+2],A=O[S+3],R=w[I];if(!(R>=h))for(var M=g>1?(j-C)*(p-1)/(g-1):0,P=y>1?(A-N)*(f-1)/(y-1):0,D=0;D<g;D++){var F=g>1?C*(p-1)+D*M:.5*(C+j)*(p-1);if(F<0||F>p-1)for(var L=0;L<y;L++)for(var B=0;B<m;B++){var U=B+L*k[2]+D*k[1]+I*k[0];x.values[U]=d}else if("bilinear"===c)for(var z=Math.floor(F),V=Math.ceil(F),W=F-z,G=0;G<y;G++){var H=y>1?N*(f-1)+G*P:.5*(N+A)*(f-1);if(H<0||H>f-1)for(var X=0;X<m;X++){var Y=X+G*k[2]+D*k[1]+I*k[0];x.values[Y]=d}else for(var q=Math.floor(H),K=Math.ceil(H),Z=H-q,J=0;J<m;J++){var Q=J+q*E[2]+z*E[1]+R*E[0],$=T[Q],tt=T[Q=J+K*E[2]+z*E[1]+R*E[0]],et=T[Q=J+q*E[2]+V*E[1]+R*E[0]],nt=$+(tt-$)*Z,rt=et+(T[Q=J+K*E[2]+V*E[1]+R*E[0]]-et)*Z;Q=J+G*k[2]+D*k[1]+I*k[0],x.values[Q]=nt+(rt-nt)*W}}else for(var at=0;at<y;++at){var it=y>1?N*(f-1)+at*P:.5*(N+A)*(f-1);if(it<0||it>f-1)for(var ot=0;ot<m;ot++){var st=ot+at*k[2]+D*k[1]+I*k[0];x.values[st]=d}else for(var ut=Math.round(it),ct=Math.round(F),dt=0;dt<m;dt++){var lt=dt+ut*E[2]+ct*E[1]+R*E[0],ht=dt+at*k[2]+D*k[1]+I*k[0];x.values[ht]=T[lt]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var Gt={kernelName:r.K,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.axis,s=a.exclusive,u=a.reverse;Object(f.a)(i,"cumsum");var c=r.dd.getAxesPermutation([o],i.shape.length),d=i;null!=c&&(d=Object(H.a)({inputs:{x:i},backend:n,attrs:{perm:c}}));var l=r.dd.getInnerMostAxes(1,i.shape.length)[0];if(l!==d.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(d.shape.length-1," but got axis=").concat(l));for(var h=Object(r.Ld)(d.dtype,"int32"),p=r.Md.makeZerosTypedArray(r.Md.sizeFromShape(d.shape),h),m=n.data.get(d.dataId).values,v=d.shape[d.shape.length-1],b=u?function(t,e){return t+v-e-1}:function(t,e){return t+e},g=0;g<m.length;g+=v)for(var y=0;y<v;y++){var x=b(g,y);if(0===y)p[x]=s?0:m[x];else{var O=b(g,y-1);p[x]=s?m[O]+p[O]:m[x]+p[O]}}var w=n.makeTensorInfo(d.shape,h,p);if(null!=c){var _=r.dd.getUndoAxesPermutation(c),T=Object(H.a)({inputs:{x:w},backend:n,attrs:{perm:_}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(d),T}return w}};var Ht={kernelName:r.M,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=Object(gt.a)(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,d)}if(2===a.shape.length){var l=n.bufferSync(a),h=n.bufferSync(i),p=Object(gt.b)(l,h,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var Xt={kernelName:r.N,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.blockSize,s=a.dataFormat;r.Md.assert("NHWC"===s,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s)})),r.Md.assert(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));for(var u=i.shape[0],c=i.shape[1],d=i.shape[2],l=i.shape[3],h=c*o,p=d*o,f=l/(o*o),m=n.data.get(i.dataId).values,v=new Float32Array(u*h*p*f),b=0,g=0;g<u;++g)for(var y=0;y<h;++y)for(var x=Math.floor(y/o),O=y%o,w=0;w<p;++w)for(var _=Math.floor(w/o),T=(O*o+w%o)*f,E=0;E<f;++E){var k=E+T+l*(_+d*(x+c*g));v[b++]=m[k]}return n.makeTensorInfo([u,h,p,f],i.dtype,v)}};function Yt(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.filter,s=a.strides,u=a.pad,c=a.dilations,d=a.dimRoundingMode;Object(f.a)([i,o],"depthwiseConv2DNative");var l=r.Md.computeStrides(i.shape),h=r.Md.computeStrides(o.shape),p=c;null==p&&(p=[1,1]),r.Md.assert(r.dd.eitherStridesOrDilationsAreOne(s,p),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(p,"'")}));for(var m=r.dd.computeConv2DInfo(i.shape,o.shape,s,p,u,d,!0),v=m.filterHeight,b=m.filterWidth,g=m.dilationHeight,y=m.dilationWidth,x=m.padInfo,O=x.left,w=x.top,_=m.outChannels/m.inChannels,T=new r.Tc(m.outShape,i.dtype),E=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,I=T.values,S=0;S<m.batchSize;++S)for(var C=S*l[0],N=S*T.strides[0],j=0;j<m.outHeight;++j)for(var A=N+j*T.strides[1],R=j*m.strideHeight-O,M=0;M<v;++M){var P=R+M*g;if(!(P<0||P>=m.inHeight))for(var D=M*h[0],F=C+P*l[1],L=0;L<m.outWidth;++L)for(var B=A+L*T.strides[2],U=L*m.strideWidth-w,z=0;z<b;++z){var V=U+z*y;if(!(V<0||V>=m.inWidth))for(var W=D+z*h[1],G=F+V*m.inChannels,H=B,X=W,Y=0;Y<m.inChannels;++Y){for(var q=E[G+Y],K=0;K<_;++K)I[H+K]+=q*k[X+K];H+=_,X+=_}}}return n.makeTensorInfo(T.shape,T.dtype,T.values)}var qt={kernelName:r.O,backendName:"cpu",kernelFunc:Yt};var Kt={kernelName:r.P,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.dy,s=a.strides,u=a.dilations,c=a.pad,d=a.dimRoundingMode,l=a.filterShape;Object(f.a)([i,o],"depthwiseConv2dNativeBackpropFilter");for(var h=r.dd.computeConv2DInfo(i.shape,l,s,u,c,d,!0),p=h.strideHeight,m=h.strideWidth,v=h.filterHeight,b=h.filterWidth,g=new r.Tc(h.filterShape,"float32"),y=h.padInfo.left,x=h.padInfo.top,O=h.outChannels/h.inChannels,w=n.data.get(i.dataId).values,_=new r.Tc(i.shape,i.dtype,w),T=n.data.get(o.dataId).values,E=new r.Tc(o.shape,o.dtype,T),k=0;k<v;++k)for(var I=Math.max(0,Math.ceil((x-k)/p)),S=Math.min(h.outHeight,(h.inHeight+x-k)/p),C=0;C<b;++C)for(var N=Math.max(0,Math.ceil((y-C)/m)),j=Math.min(h.outWidth,(h.inWidth+y-C)/m),A=0;A<h.outChannels;++A){for(var R=Math.trunc(A/O),M=A%O,P=0,D=0;D<h.batchSize;++D)for(var F=I;F<S;++F)for(var L=k+F*p-x,B=N;B<j;++B){var U=C+B*m-y;P+=_.get(D,L,U,R)*E.get(D,F,B,A)}g.set(P,k,C,R,M)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var Zt={kernelName:r.Q,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.dy,o=e.filter,s=a.strides,u=a.dilations,c=a.pad,d=a.dimRoundingMode,l=a.inputShape;Object(f.a)([i,o],"depthwiseConv2DNativeBackpropInput");for(var h=r.Md.computeStrides(i.shape),p=r.Md.computeStrides(o.shape),m=r.dd.computeConv2DInfo(l,o.shape,s,u,c,d,!0),v=new r.Tc(m.inShape,"float32"),b=v.values,g=Object(_.a)(v.strides,3),y=g[0],x=g[1],O=g[2],w=n.data.get(i.dataId).values,T=Object(_.a)(h,3),E=T[0],k=T[1],I=T[2],S=n.data.get(o.dataId).values,C=Object(_.a)(p,3),N=C[0],j=C[1],A=C[2],R=m.batchSize,M=m.filterHeight,P=m.filterWidth,D=m.inChannels,F=m.inHeight,L=m.inWidth,B=m.outChannels,U=m.outHeight,z=m.outWidth,V=m.strideHeight,W=m.strideWidth,G=M-1-m.padInfo.top,H=P-1-m.padInfo.left,X=B/D,Y=0;Y<R;++Y)for(var q=0;q<D;++q)for(var K=0;K<F;++K)for(var Z=K-G,J=Math.max(0,Math.ceil(Z/V)),Q=Math.min(U,(M+Z)/V),$=0;$<L;++$){for(var tt=$-H,et=Math.max(0,Math.ceil(tt/W)),nt=Math.min(z,(P+tt)/W),rt=0,at=J;at<Q;++at)for(var it=at*V-Z,ot=et;ot<nt;++ot)for(var st=E*Y+k*at+I*ot,ut=N*(M-1-it)+j*(P-1-(ot*W-tt))+A*q,ct=0;ct<X;++ct){rt+=w[st+(q*X+ct)]*S[ut+ct]}b[y*Y+x*K+O*$+q]=rt}return n.makeTensorInfo(v.shape,v.dtype,v.values)}},Jt=n(19);var Qt={kernelName:r.R,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=t.backend,a=e.x,i=r.Md.sizeFromShape(a.shape),o=n.data.get(a.dataId).values,s=Object(r.fd)([i,i],a.dtype),u=s.values,c=0;c<o.length;c++)u[c*i+c]=o[c];var d=[].concat(Object(Jt.a)(a.shape),Object(Jt.a)(a.shape));return n.makeTensorInfo(d,s.dtype,s.values)}},$t={kernelName:r.S,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.filter,s=a.strides,u=a.pad,c=a.dilations,d=n,l=d.data.get(i.dataId).values,h=i.shape.length,p=d.data.get(o.dataId).values,f=o.shape.length,m=r.dd.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",c),v=m.batchSize,b=m.inHeight,g=m.inWidth,y=m.inChannels,x=m.outHeight,O=m.outWidth,w=m.padInfo,_=m.strideHeight,T=m.strideWidth,E=m.filterHeight,k=m.filterWidth,I=m.dilationHeight,S=m.dilationWidth,C=m.outShape,N=r.Md.sizeFromShape(C),j=C.length,A=r.Md.getArrayFromDType(i.dtype,N),R=0;R<v;++R)for(var M=0;M<x;++M)for(var P=M*_-w.top,D=0;D<O;++D)for(var F=D*T-w.left,L=0;L<y;++L){for(var B=Number.MIN_SAFE_INTEGER,U=0;U<E;++U){var z=P+U*I;if(z>=0&&z<b)for(var V=0;V<k;++V){var W=F+V*S;if(W>=0&&W<g){var G=r.Md.locToIndex([R,z,W,L],h,r.Md.computeStrides(i.shape)),H=r.Md.locToIndex([U,V,L],f,r.Md.computeStrides(o.shape)),X=l[G]+p[H];X>B&&(B=X)}}}A[r.Md.locToIndex([R,M,D,L],j,r.Md.computeStrides(C))]=B}return{dataId:d.write(r.Md.toTypedArray(A,i.dtype),C,i.dtype),shape:C,dtype:i.dtype}}},te={kernelName:r.T,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.filter,s=e.dy,u=a.strides,c=a.pad,d=a.dilations,l=n,h=r.Md.toNestedArray(i.shape,l.data.get(i.dataId).values),p=r.Md.toNestedArray(o.shape,l.data.get(o.dataId).values),f=r.dd.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",d),m=f.batchSize,v=f.inHeight,b=f.inWidth,g=f.inChannels,y=f.outHeight,x=f.outWidth,O=f.padInfo,w=f.strideHeight,_=f.strideWidth,T=f.filterHeight,E=f.filterWidth,k=f.dilationHeight,I=f.dilationWidth,S=f.outShape;r.Md.assert(s.rank===S.length,(function(){return"Error in ".concat(r.T,", dy ")+"must have the same rank as output ".concat(S.length,", but got ")+"".concat(s.rank)}));for(var C=r.Md.toNestedArray(S,l.data.get(s.dataId).values),N=r.Md.makeZerosNestedTypedArray(o.shape,o.dtype),j=0;j<m;++j)for(var A=0;A<y;++A)for(var R=A*w-O.top,M=0;M<x;++M)for(var P=M*_-O.left,D=0;D<g;++D){for(var F=Number.MIN_SAFE_INTEGER,L=0,B=0,U=0;U<T;++U){var z=R+U*k;if(z>=0&&z<v)for(var V=0;V<E;++V){var W=P+V*I;if(W>=0&&W<b){var G=h[j][z][W][D]+p[U][V][D];G>F&&(F=G,L=U,B=V)}}}N[L][B][D]+=C[j][A][M][D]}return{dataId:l.write(r.Md.toTypedArray(N,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},ee={kernelName:r.U,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.filter,s=e.dy,u=a.strides,c=a.pad,d=a.dilations,l=n,h=r.Md.toNestedArray(i.shape,l.data.get(i.dataId).values),p=r.Md.toNestedArray(o.shape,l.data.get(o.dataId).values),f=r.dd.computeDilation2DInfo(i.shape,o.shape,u,c,"NHWC",d),m=f.batchSize,v=f.inHeight,b=f.inWidth,g=f.inChannels,y=f.outHeight,x=f.outWidth,O=f.padInfo,w=f.strideHeight,_=f.strideWidth,T=f.filterHeight,E=f.filterWidth,k=f.dilationHeight,I=f.dilationWidth,S=f.outShape;r.Md.assert(s.rank===S.length,(function(){return"Error in ".concat(r.U,", dy ")+"must have the same rank as output ".concat(S.length,", but got ")+"".concat(s.rank)}));for(var C=r.Md.toNestedArray(S,l.data.get(s.dataId).values),N=r.Md.makeZerosNestedTypedArray(i.shape,i.dtype),j=0;j<m;++j)for(var A=0;A<y;++A)for(var R=A*w-O.top,M=0;M<x;++M)for(var P=M*_-O.left,D=0;D<g;++D){for(var F=Number.MIN_SAFE_INTEGER,L=R<0?0:R,B=P<0?0:P,U=0;U<T;++U){var z=R+U*k;if(z>=0&&z<v)for(var V=0;V<E;++V){var W=P+V*I;if(W>=0&&W<b){var G=h[j][z][W][D]+p[U][V][D];G>F&&(F=G,L=z,B=W)}}}N[j][L][B][D]+=C[j][A][M][D]}return{dataId:l.write(r.Md.toTypedArray(N,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};var ne={kernelName:r.W,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.dy,i=e.y;Object(f.a)([a,i],"eluGrad");for(var o=new Float32Array(r.Md.sizeFromShape(i.shape)),s=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=0;c<s.length;++c){var d=s[c];o[c]=d>=1?u[c]:u[c]*(d+1)}return n.makeTensorInfo(i.shape,"float32",o)}},re=Object(T.a)((function(t,e){return t===e?1:0})),ae=Object(nt.a)(r.X,re,null,"bool"),ie={kernelName:r.X,backendName:"cpu",kernelFunc:ae},oe=r.dd.ERF_P,se=r.dd.ERF_A1,ue=r.dd.ERF_A2,ce=r.dd.ERF_A3,de=r.dd.ERF_A4,le=r.dd.ERF_A5,he=Object(b.a)(r.Y,(function(t){var e=Math.sign(t),n=Math.abs(t),r=1/(1+oe*n);return e*(1-((((le*r+de)*r+ce)*r+ue)*r+se)*r*Math.exp(-n*n))})),pe={kernelName:r.Y,backendName:"cpu",kernelFunc:he},fe=n(151);function me(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.input,o=a.dim,s=i.shape.length,u=i.shape.slice(),c=o;return o<0&&(r.Md.assert(-(s+1)<=o,(function(){return"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")})),c=s+o+1),u.splice(c,0,1),M({inputs:{x:i},backend:n,attrs:{shape:u}})}var ve={kernelName:r.ab,backendName:"cpu",kernelFunc:me},be=n(243),ge=n(82),ye=Object(T.a)((function(t,e){return t/e})),xe=Object(nt.a)(r.jc,ye),Oe={kernelName:r.jc,backendName:"cpu",kernelFunc:xe},we=n(103);function _e(t,e,n){for(var a=t.shape,i=a[0],o=a[1],s=n.data.get(t.dataId),u=s.complexTensorInfos.real,c=s.complexTensorInfos.imag,d=[i,o],l=r.Md.sizeFromShape(d),h=r.Md.getTypedArrayFromDType("float32",l),p=r.Md.getTypedArrayFromDType("float32",l),f=0;f<i;f++){for(var m=Object(vt.a)({inputs:{x:u},backend:n,attrs:{begin:[f,0],size:[1,o]}}),v=Object(vt.a)({inputs:{x:c},backend:n,attrs:{begin:[f,0],size:[1,o]}}),b=Object(Tt.a)({inputs:{real:m,imag:v},backend:n}),g=Te(b,e,n),y=g.real,x=g.imag,O=r.dd.mergeRealAndImagArrays(y,x),w=0;w<o;w++){var _=r.dd.getComplexWithIndex(O,w);h[f*o+w]=_.real,p[f*o+w]=_.imag}n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b)}var T=n.makeTensorInfo(d,"float32",h),E=n.makeTensorInfo(d,"float32",p),k=Object(Tt.a)({inputs:{real:T,imag:E},backend:n});return n.disposeIntermediateTensorInfo(T),n.disposeIntermediateTensorInfo(E),k}function Te(t,e,n){var a=r.Md.sizeFromShape(t.shape),i=n.data.get(t.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,s=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0===((g=a)&g-1)){var u=function t(e,n,a,i,o){if(1===a)return{real:e,imag:n};var s=r.dd.mergeRealAndImagArrays(e,n),u=a/2,c=r.dd.complexWithEvenIndex(s),d=c.real,l=c.imag,h=[d.length],p=o.makeTensorInfo(h,"float32",d),f=o.makeTensorInfo(h,"float32",l),m=Object(Tt.a)({inputs:{real:p,imag:f},backend:o}),v=r.dd.complexWithOddIndex(s),b=v.real,g=v.imag,y=[b.length],x=o.makeTensorInfo(y,"float32",b),O=o.makeTensorInfo(y,"float32",g),w=Object(Tt.a)({inputs:{real:x,imag:O},backend:o}),_=t(d,l,u,i,o),T=_.real,E=_.imag,k=[T.length],I=o.makeTensorInfo(k,"float32",T),S=o.makeTensorInfo(k,"float32",E),C=Object(Tt.a)({inputs:{real:I,imag:S},backend:o}),N=t(b,g,u,i,o),j=N.real,A=N.imag,M=[j.length],P=o.makeTensorInfo(M,"float32",j),D=o.makeTensorInfo(M,"float32",A),F=Object(Tt.a)({inputs:{real:P,imag:D},backend:o}),L=r.dd.exponents(a,i),B=[L.real.length],U=o.makeTensorInfo(B,"float32",L.real),z=o.makeTensorInfo(B,"float32",L.imag),V=Object(Tt.a)({inputs:{real:U,imag:z},backend:o}),W=Object(ge.a)({inputs:{a:V,b:F},backend:o}),G=Object(R.a)({inputs:{a:C,b:W},backend:o}),H=Object(we.a)({inputs:{a:C,b:W},backend:o}),X=Object(Ct.a)({inputs:{input:G},backend:o}),Y=Object(Ct.a)({inputs:{input:H},backend:o}),q=It({inputs:{input:G},backend:o}),K=It({inputs:{input:H},backend:o}),Z=Nt({inputs:[X,Y],backend:o,attrs:{axis:0}}),J=Nt({inputs:[q,K],backend:o,attrs:{axis:0}}),Q=o.data.get(Z.dataId).values,$=o.data.get(J.dataId).values;return o.disposeIntermediateTensorInfo(p),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(m),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(O),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(S),o.disposeIntermediateTensorInfo(C),o.disposeIntermediateTensorInfo(P),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(F),o.disposeIntermediateTensorInfo(U),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(X),o.disposeIntermediateTensorInfo(q),o.disposeIntermediateTensorInfo(Y),o.disposeIntermediateTensorInfo(K),o.disposeIntermediateTensorInfo(Z),o.disposeIntermediateTensorInfo(J),{real:Q,imag:$}}(o,s,a,e,n),c=[t.shape[0],t.shape[1]];if(e){var d=n.makeTensorInfo(c,"float32",u.real),l=n.makeTensorInfo(c,"float32",u.imag),h=n.makeTensorInfo([],"float32",r.Md.createScalarValue(a,"float32")),p=Object(x.a)({inputs:{x:h},backend:n}),f=Oe.kernelFunc({inputs:{a:d,b:h},backend:n}),m=Oe.kernelFunc({inputs:{a:l,b:p},backend:n}),v=n.data.get(f.dataId).values,b=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),{real:v,imag:b}}return u}var g,y=function(t,e,n){for(var a=new Float32Array(2*e),i=0;i<e;i++){for(var o=0,s=0,u=0;u<e;u++){var c=r.dd.exponent(i*u,e,n),d=r.dd.getComplexWithIndex(t,u);o+=d.real*c.real-d.imag*c.imag,s+=d.real*c.imag+d.imag*c.real}n&&(o/=e,s/=e),r.dd.assignToTypedArray(a,o,s,i)}return a}(r.dd.mergeRealAndImagArrays(o,s),a,e);return r.dd.splitRealAndImagArrays(y)}var Ee={kernelName:r.cb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.input,i=r.Md.sizeFromShape(a.shape),o=a.shape[a.shape.length-1],s=M({inputs:{x:a},backend:n,attrs:{shape:[i/o,o]}}),u=_e(s,!1,n),c=M({inputs:{x:u},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}};function ke(t){var e=t.backend,n=t.attrs,a=n.shape,i=n.value,o=n.dtype||r.Md.inferDtype(i),s=r.Md.getArrayFromDType(o,r.Md.sizeFromShape(a));return function(t,e,n){t.fill(e)}(s,i),e.makeTensorInfo(a,o,s)}var Ie={kernelName:r.db,backendName:"cpu",kernelFunc:ke};var Se={kernelName:r.eb,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=(t.attrs,t.backend),a=e.image,i=n,o=r.Md.getTypedArrayFromDType(a.dtype,r.Md.sizeFromShape(a.shape)),s=Object(_.a)(a.shape,4),u=s[0],c=s[1],d=s[2],l=s[3],h=i.data.get(a.dataId).values,p=0;p<u;p++)for(var f=p*d*c*l,m=0;m<c;m++)for(var v=m*(d*l),b=0;b<d;b++)for(var g=b*l,y=0;y<l;y++){var x=[u,m,b,y][2],O=Math.round(d-x),w=f+v+g+y,T=h[w];if(O>=0&&O<d)T=h[f+v+O*l+y];o[w]=T}return{dataId:i.write(o,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},Ce=n(244),Ne=Object(T.a)((function(t,e){return Math.floor(t/e)})),je=Object(nt.a)(r.gb,Ne,null,"int32"),Ae={kernelName:r.gb,backendName:"cpu",kernelFunc:je};var Re={kernelName:r.jb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.filter,o=e.bias,s=e.preluActivationWeights,u=r.strides,c=r.pad,d=r.dataFormat,l=r.dilations,h=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,m=At({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:d,dilations:l,dimRoundingMode:h}});if(o){var v=m;m=Object(R.a)({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var b=m;m=A(n,m,p,s,f),n.disposeIntermediateTensorInfo(b)}return m}};var Me={kernelName:r.kb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=e.filter,o=e.bias,s=e.preluActivationWeights,u=r.strides,c=r.pad,d=r.dataFormat,l=r.dilations,h=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,m=Yt({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:d,dilations:l,dimRoundingMode:h}});if(o){var v=m;m=Object(R.a)({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var b=m;m=A(n,m,p,s,f),n.disposeIntermediateTensorInfo(b)}return m}};var Pe={kernelName:r.lb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.params,i=e.indices,o=r.Md.sizeFromShape(a.shape),s=i.shape,u=s[s.length-1],c=r.dd.prepareAndValidate(a,i),d=Object(_.a)(c,4),l=d[0],h=d[1],p=d[2],f=d[3];if(0===h)return n.makeTensorInfo(l,a.dtype,[]);for(var m=Object(r.fd)([h,p],a.dtype),v=n.data.get(i.dataId).values,b=n.data.get(a.dataId).values,g=0;g<h;g++){for(var y=[],x=0,O=0;O<u;O++){var w=v[g*u+O];x+=w*f[O],y.push(w)}if(x<0||x>=o/p)throw new Error("Invalid indices: ".concat(y," does not index into ").concat(a.shape));for(var T=0;T<p;T++)m.values[g*p+T]=b[x*p+T]}return n.makeTensorInfo(l,m.dtype,m.values)}},De=n(245);var Fe={kernelName:r.mb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.indices,s=a.axis,u=a.batchDims;Object(f.a)([i,o],"gatherV2");var c=u;null==u&&(c=0);var d=r.Md.sizeFromShape(o.shape),l=r.Md.parseAxisParam(s,i.shape)[0],h=r.dd.segment_util.collectGatherOpShapeInfo(i,o,l,c),p=M({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=M({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),v=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],b=n.bufferSync(m),g=n.bufferSync(p),y=Object(De.a)(g,b,v);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,y.dtype,y.values)}},Le=n(246),Be=Object(T.a)((function(t,e){return t>=e?1:0})),Ue=Object(nt.a)(r.ob,Be,null,"bool"),ze={kernelName:r.ob,backendName:"cpu",kernelFunc:Ue};var Ve={kernelName:r.pb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.input,i=r.Md.sizeFromShape(a.shape),o=a.shape[a.shape.length-1],s=M({inputs:{x:a},backend:n,attrs:{shape:[i/o,o]}}),u=_e(s,!0,n),c=M({inputs:{x:u},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),c}},We=Object(b.a)(r.sb,(function(t){return Number.isFinite(t)?1:0}),"bool"),Ge={kernelName:r.sb,backendName:"cpu",kernelFunc:We},He=Object(b.a)(r.tb,(function(t){return Math.abs(t)===1/0?1:0}),"bool"),Xe={kernelName:r.tb,backendName:"cpu",kernelFunc:He},Ye=Object(b.a)(r.ub,(function(t){return Number.isNaN(t)?1:0}),"bool"),qe={kernelName:r.ub,backendName:"cpu",kernelFunc:Ye},Ke=n(247),Ze=Object(T.a)((function(t,e){return t<=e?1:0})),Je=Object(nt.a)(r.Ab,Ze,null,"bool"),Qe={kernelName:r.Ab,backendName:"cpu",kernelFunc:Je},$e=n(248);var tn={kernelName:r.Bb,backendName:"cpu",kernelFunc:function(t){var e=t.backend,n=t.attrs,r=n.start,a=n.stop,i=n.num,o=Object($e.a)(r,a,i);return e.makeTensorInfo([o.length],"float32",o)}},en=n(249),nn=Object(b.a)(r.Db,(function(t){return Math.log1p(t)})),rn={kernelName:r.Db,backendName:"cpu",kernelFunc:nn},an=Object(T.a)((function(t,e){return t&&e})),on=Object(nt.a)(r.Eb,an,null,"bool"),sn={kernelName:r.Eb,backendName:"cpu",kernelFunc:on},un=Object(b.a)(r.Fb,(function(t){return t?0:1}),"bool"),cn={kernelName:r.Fb,backendName:"cpu",kernelFunc:un},dn=Object(T.a)((function(t,e){return t||e})),ln=Object(nt.a)(r.Gb,dn,null,"bool"),hn={kernelName:r.Gb,backendName:"cpu",kernelFunc:ln};var pn={kernelName:r.wb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.depthRadius,s=a.bias,u=a.alpha,c=a.beta;Object(f.a)(i,"LRN");var d=i.shape[3],l=d-1,h=n.data.get(i.dataId).values,p=r.Md.sizeFromShape(i.shape),m=new Float32Array(p);function v(t){for(var e=t%d,n=t-e+Math.max(0,e-o),r=t-e+Math.min(e+o,l),a=0;n<=r;n++){var i=h[n];a+=i*i}return a}for(var b=0;b<p;b++){var g=v(b),y=h[b]*Math.pow(s+u*g,-c);m[b]=y}return n.makeTensorInfo(i.shape,i.dtype,m)}};var fn={kernelName:r.xb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.y,s=e.dy,u=a.depthRadius,c=a.bias,d=a.alpha,l=a.beta;Object(f.a)(s,"LRNGrad");for(var h=r.Md.sizeFromShape(s.shape),p=s.shape[3],m=n.data.get(s.dataId).values,v=n.data.get(i.dataId).values,b=n.data.get(o.dataId).values,g=new Float32Array(h),y=h,x=0;x<y;x++){for(var O=x%p,w=x-O+Math.max(0,O-u),_=x-O+Math.min(p,O+u+1),T=0,E=w;E<_;E++)T+=Math.pow(v[E],2);T=d*T+c;for(var k=w;k<_;k++){var I=-2*d*l*v[k]*b[x]/T;x===k&&(I+=Math.pow(T,-l)),I*=m[x],g[k]+=I}}return n.makeTensorInfo(s.shape,i.dtype,g)}},mn=n(250),vn=n(152);function bn(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.reductionIndices,s=a.keepDims,u=n,c=i.shape,d=c.length,l=r.Md.parseAxisParam(o,c),h=l,p=r.dd.getAxesPermutation(h,d),m=u.data.get(i.dataId).values;if(null!=p){for(var v=new Array(d),b=0;b<v.length;b++)v[b]=c[p[b]];m=Object(vn.a)(m,c,i.dtype,p,v),h=r.dd.getInnerMostAxes(h.length,d),c=v}Object(f.a)(i,"max"),r.dd.assertAxesAreInnerMostDims("max",h,d);var g=r.dd.computeOutAndReduceShapes(c,h),y=Object(_.a)(g,2),x=y[0],O=y[1],w=r.Md.sizeFromShape(O),T=Object(mn.a)(m,w,x,i.dtype),E=u.write(T,x,i.dtype),k=x;s&&(k=r.dd.expandShapeToKeepDim(x,l));return{dataId:E,shape:k,dtype:i.dtype}}var gn={kernelName:r.Hb,backendName:"cpu",kernelFunc:bn},yn=n(251);var xn={kernelName:r.Ib,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x;Object(f.a)(i,"maxPool");var o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode;r.Md.assert(r.dd.eitherStridesOrDilationsAreOne(s,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'")}));var d,l=r.dd.computePool2DInfo(i.shape,o,s,1,u,c);if(1===l.filterWidth&&1===l.filterHeight&&r.Md.arraysEqual(l.inShape,l.outShape))d=Object(x.a)({inputs:{x:i},backend:n});else{var h=n.data.get(i.dataId).values,p=r.Md.computeStrides(i.shape),m=ut(h,i.shape,i.dtype,p,l,"max");d=n.makeTensorInfo(l.outShape,i.dtype,m.values)}return d}};var On={kernelName:r.Jb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode,d=a.dataFormat;Object(f.a)(i,"maxPool3d");var l=r.dd.computePool3DInfo(i.shape,o,s,1,u,c,d),h=dt(n.data.get(i.dataId).values,i.shape,i.dtype,r.Md.computeStrides(i.shape),l,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};var wn={kernelName:r.Kb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.dy,o=e.input,s=a.filterSize,u=a.strides,c=a.pad,d=a.dimRoundingMode;Object(f.a)([i,o],"maxPool3DGrad");for(var l=r.dd.computePool3DInfo(o.shape,s,u,1,c,d),h=function(t,e){for(var n=Object(r.fd)(e.outShape,"int32"),a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,l=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,m=e.padInfo.left,v=0;v<e.batchSize;++v)for(var b=0;b<e.inChannels;++b)for(var g=0;g<e.outDepth;++g){for(var y=g*a-p,x=y;x<0;)x+=s;for(var O=Math.min(e.inDepth,d+y),w=0;w<e.outHeight;++w){for(var _=w*i-f,T=_;T<0;)T+=u;for(var E=Math.min(e.inHeight,l+_),k=0;k<e.outWidth;++k){for(var I=k*o-m,S=I;S<0;)S+=c;for(var C=Math.min(e.inWidth,h+I),N=Number.NEGATIVE_INFINITY,j=-1,A=x;A<O;A+=s)for(var R=A-y,M=T;M<E;M+=u)for(var P=M-_,D=S;D<C;D+=c){var F=D-I,L=t.get(v,A,M,D,b);L>=N&&(N=L,j=R*l*h+P*l+F)}n.set(j,v,g,w,k,b)}}}return n}(n.bufferSync(o),l),p=l.strideDepth,m=l.strideHeight,v=l.strideWidth,b=l.dilationDepth,g=l.dilationHeight,y=l.dilationWidth,x=l.effectiveFilterDepth,O=l.effectiveFilterHeight,w=l.effectiveFilterWidth,_=x-1-l.padInfo.front,T=w-1-l.padInfo.left,E=O-1-l.padInfo.top,k=Object(r.fd)(o.shape,"float32"),I=n.bufferSync(i),S=0;S<l.batchSize;++S)for(var C=0;C<l.inChannels;++C)for(var N=0;N<l.inDepth;++N)for(var j=0;j<l.inHeight;++j)for(var A=0;A<l.inWidth;++A){for(var R=N-_,M=j-E,P=A-T,D=0,F=0;F<x;F+=b){var L=(R+F)/p;if(!(L<0||L>=l.outDepth||Math.floor(L)!==L))for(var B=0;B<O;B+=g){var U=(M+B)/m;if(!(U<0||U>=l.outHeight||Math.floor(U)!==U))for(var z=0;z<w;z+=y){var V=(P+z)/v;if(!(V<0||V>=l.outWidth||Math.floor(V)!==V)){var W=x*O*w-1-h.get(S,L,U,V,C)===F*O*w+B*w+z?1:0;if(0!==W)D+=I.get(S,L,U,V,C)*W}}}}k.set(D,S,N,j,A,C)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var _n={kernelName:r.Lb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.dy,o=e.input,s=e.output,u=o;Object(f.a)([o,s],"maxPoolGrad");for(var c=a.filterSize,d=a.strides,l=a.pad,h=a.dimRoundingMode,p=r.dd.computePool2DInfo(u.shape,c,d,1,l,h),m=n.data.get(u.dataId).values,v=Object(r.fd)(p.outShape,u.dtype,ct(m,u.shape,u.dtype,p).values),b=p.strideHeight,g=p.strideWidth,y=p.dilationHeight,x=p.dilationWidth,O=p.effectiveFilterHeight,w=p.effectiveFilterWidth,_=w-1-p.padInfo.left,T=O-1-p.padInfo.top,E=Object(r.fd)(u.shape,"float32"),k=n.data.get(i.dataId).values,I=Object(r.fd)(i.shape,"float32",k),S=0;S<p.batchSize;++S)for(var C=0;C<p.inChannels;++C)for(var N=0;N<p.inHeight;++N)for(var j=0;j<p.inWidth;++j){for(var A=N-T,R=j-_,M=0,P=0;P<O;P+=y){var D=(A+P)/b;if(!(D<0||D>=p.outHeight||Math.floor(D)!==D))for(var F=0;F<w;F+=x){var L=(R+F)/g;if(!(L<0||L>=p.outWidth||Math.floor(L)!==L)){var B=O*w-1-v.get(S,D,L,C)===P*w+F?1:0;if(0!==B)M+=I.get(S,D,L,C)*B}}}E.set(M,S,N,j,C)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var Tn={kernelName:r.Mb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,a=t.backend,i=e.x,o=n.filterSize,s=n.strides,u=n.pad,c=n.includeBatchInIndex,d=a;Object(f.a)(i,"MaxPoolWithArgmax");var l=d.data.get(i.dataId).values,h=r.dd.computePool2DInfo(i.shape,o,s,[1,1],u),p=function(t,e,n,a,i){var o=ut(t,0,n,r.Md.computeStrides(e),i,"max"),s=ct(t,e,n,i,!0,a);return[o.values,s.values]}(l,i.shape,i.dtype,c,h),m=Object(_.a)(p,2),v=m[0],b=m[1],g=d.write(v,h.outShape,i.dtype),y=d.write(b,h.outShape,i.dtype);return[{dataId:g,shape:h.outShape,dtype:i.dtype},{dataId:y,shape:h.outShape,dtype:"int32"}]}},En=n(150);function kn(t){var e,n=t.inputs,a=t.backend,i=t.attrs,o=n.x,s=i.axis,u=i.keepDims;Object(f.a)(o,"sum");var c=(e="bool"===o.dtype?Object(xt.a)({inputs:{x:o},backend:a,attrs:{dtype:"int32"}}):Object(x.a)({inputs:{x:o},backend:a})).shape.length,d=r.Md.parseAxisParam(s,e.shape),l=r.dd.getAxesPermutation(d,c),h=d,p=e;null!=l&&(p=Object(H.a)({inputs:{x:e},backend:a,attrs:{perm:l}}),h=r.dd.getInnerMostAxes(h.length,c)),r.dd.assertAxesAreInnerMostDims("sum",h,p.shape.length);for(var m=r.dd.computeOutAndReduceShapes(p.shape,h),v=Object(_.a)(m,2),b=v[0],g=v[1],y=r.dd.upcastType(p.dtype,"int32"),O=Object(En.a)(a,b,y),w=r.Md.sizeFromShape(g),T=a.data.get(O.dataId).values,E=a.data.get(p.dataId).values,k=0;k<T.length;++k){for(var I=k*w,S=0,C=0;C<w;++C)S+=E[I+C];T[k]=S}if(u){var N=O;O=M({inputs:{x:O},backend:a,attrs:{shape:r.dd.expandShapeToKeepDim(O.shape,d)}}),a.disposeIntermediateTensorInfo(N)}return a.disposeIntermediateTensorInfo(e),null!=l&&a.disposeIntermediateTensorInfo(p),O}var In={kernelName:r.Pc,backendName:"cpu",kernelFunc:kn};var Sn={kernelName:r.Ob,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.axis,s=a.keepDims,u=r.Md.parseAxisParam(o,i.shape),c=r.dd.computeOutAndReduceShapes(i.shape,u)[1],d=r.Md.sizeFromShape(c),l=[],h=n.makeTensorInfo([],"float32",new Float32Array([d]));l.push(h);var p=Object(xt.a)({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});l.push(p);var f=xe({inputs:{a:p,b:h},backend:n});l.push(f);var m=kn({inputs:{x:f},backend:n,attrs:{axis:o,keepDims:s}});return l.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),m}};var Cn={kernelName:r.Pb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.axis,s=a.keepDims;Object(f.a)(i,"min");var u=r.Md.parseAxisParam(o,i.shape),c=u,d=r.dd.getAxesPermutation(c,i.shape.length),l=i;null!=d&&(l=Object(H.a)({inputs:{x:i},backend:n,attrs:{perm:d}}),c=r.dd.getInnerMostAxes(c.length,i.shape.length)),r.dd.assertAxesAreInnerMostDims("min",c,l.shape.length);for(var h=r.dd.computeOutAndReduceShapes(l.shape,c),p=Object(_.a)(h,2),m=p[0],v=p[1],b=r.Md.sizeFromShape(v),g=r.Md.makeZerosTypedArray(r.Md.sizeFromShape(m),l.dtype),y=n.data.get(l.dataId).values,x=0;x<g.length;++x){for(var O=x*b,w=y[O],T=0;T<b;++T){var E=y[O+T];E<w&&(w=E)}g[x]=w}null!=d&&n.disposeIntermediateTensorInfo(l);var k=n.makeTensorInfo(m,l.dtype,g);if(s){var I=M({inputs:{x:k},backend:n,attrs:{shape:r.dd.expandShapeToKeepDim(m,u)}});return n.disposeIntermediateTensorInfo(k),I}return k}},Nn=n(252);var jn={kernelName:r.Rb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.paddings,s=a.mode;Object(f.a)(i,"mirrorPad");for(var u=o.map((function(t,e){return t[0]+i.shape[e]+t[1]})),c=o.map((function(t){return t[0]})),d=o.map((function(t,e){return t[0]+i.shape[e]})),l="reflect"===s?0:1,h=n.data.get(i.dataId).values,p=i.shape.length,m=r.Md.computeStrides(i.shape),v=r.Md.sizeFromShape(u),b=u.length,g=r.Md.computeStrides(u),y=r.Md.getTypedArrayFromDType(i.dtype,v),x=0;x<v;x++){for(var O=r.Md.indexToLoc(x,b,g),w=0;w<b;w++)O[w]<c[w]?O[w]=2*c[w]-O[w]-l:O[w]>=d[w]&&(O[w]=2*(d[w]-1)-O[w]+l);O=O.map((function(t,e){return t-c[e]}));var _=r.Md.locToIndex(O,p,m);y[x]=h[_]}return{dataId:n.write(y,u,i.dtype),shape:u,dtype:i.dtype}}},An=Object(T.a)((function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})),Rn=Object(nt.a)(r.Sb,An),Mn={kernelName:r.Sb,backendName:"cpu",kernelFunc:Rn},Pn=n(262);function Dn(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.logits,o=a.dim,s=i.shape.length,u=o;if(-1===u&&(u=s-1),u!==s-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(s," and dim was ").concat(u));var c=r.Md.parseAxisParam([u],i.shape),d=bn({inputs:{x:i},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),l=r.dd.expandShapeToKeepDim(d.shape,c),h=M({inputs:{x:d},backend:n,attrs:{shape:l}}),p=Object(we.a)({inputs:{a:i,b:h},backend:n}),f=Object(fe.a)({inputs:{x:p},backend:n}),m=kn({inputs:{x:f},backend:n,attrs:{axis:c,keepDims:!1}}),v=M({inputs:{x:m},backend:n,attrs:{shape:l}}),b=xe({inputs:{a:f,b:v},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),b}var Fn={kernelName:r.Ec,backendName:"cpu",kernelFunc:Dn};var Ln={kernelName:r.Tb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.logits,o=a.numSamples,s=a.seed,u=a.normalized;Object(f.a)(i,"multinomial");for(var c=u?i:Dn({inputs:{logits:i},backend:n,attrs:{dim:-1}}),d=c.shape[0],l=c.shape[1],h=n.data.get(c.dataId).values,p=[d,o],m=r.Md.makeZerosTypedArray(r.Md.sizeFromShape(p),"int32"),v=0;v<d;++v){var b=v*l,g=new Float32Array(l-1);g[0]=h[b];for(var y=1;y<g.length;++y)g[y]=g[y-1]+h[b+y];for(var x=Pn.alea(s.toString()),O=v*o,w=0;w<o;++w){var _=x();m[O+w]=g.length;for(var T=0;T<g.length;T++)if(_<g[T]){m[O+w]=T;break}}}return u||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(p,"int32",m)}},Bn=n(253),Un=r.td.nonMaxSuppressionV3Impl;var zn={kernelName:r.Wb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.boxes,i=e.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;Object(f.a)(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,l=Un(c,d,o,s,u).selectedIndices;return n.makeTensorInfo([l.length],"int32",new Int32Array(l))}},Vn=r.td.nonMaxSuppressionV4Impl;var Wn={kernelName:r.Xb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.boxes,i=e.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;Object(f.a)(a,"NonMaxSuppressionPadded");var d=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,h=Vn(d,l,o,s,u,c),p=h.selectedIndices,m=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}},Gn=r.td.nonMaxSuppressionV5Impl;var Hn={kernelName:r.Yb,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.boxes,i=e.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;Object(f.a)(a,"NonMaxSuppressionWithScore");var d=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,h=Gn(d,l,o,s,u,c),p=h.selectedIndices,m=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}},Xn=Object(T.a)((function(t,e){return t!==e?1:0})),Yn=Object(nt.a)(r.Zb,Xn,null,"bool"),qn={kernelName:r.Zb,backendName:"cpu",kernelFunc:Yn};var Kn={kernelName:r.ac,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.indices,o=a.depth,s=a.onValue,u=a.offValue;Object(f.a)(i,"oneHot");var c=r.Md.sizeFromShape(i.shape),d=new Float32Array(c*o);d.fill(u);for(var l=n.data.get(i.dataId).values,h=0;h<c;++h)l[h]>=0&&l[h]<o&&(d[h*o+l[h]]=s);return n.makeTensorInfo([].concat(Object(Jt.a)(i.shape),[o]),"int32",d)}};function Zn(t){var e=t.inputs,n=t.backend,r=e.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=Object(Ct.a)({inputs:{input:r},backend:n}),i=Zn({inputs:{x:a},backend:n}),o=It({inputs:{input:r},backend:n}),s=Zn({inputs:{x:o},backend:n}),u=Object(Tt.a)({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return ke({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var Jn={kernelName:r.ad,backendName:"cpu",kernelFunc:Zn};var Qn={kernelName:r.bc,backendName:"cpu",kernelFunc:function t(e){var n=e.inputs,r=e.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=Object(Ct.a)({inputs:{input:a},backend:r}),o=t({inputs:{x:i},backend:r}),s=It({inputs:{input:a},backend:r}),u=Zn({inputs:{x:s},backend:r}),c=Object(Tt.a)({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return ke({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function $n(t){var e=t.inputs,n=t.backend,a=t.attrs.axis;if(1===e.length)return me({inputs:{input:e[0]},backend:n,attrs:{dim:a}});var i=e[0].shape,o=e[0].dtype;e.forEach((function(t){r.Md.assertShapesMatch(i,t.shape,"All tensors passed to stack must have matching shapes"),r.Md.assert(o===t.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var s=[],u=Nt({inputs:e.map((function(t){var e=me({inputs:{input:t},backend:n,attrs:{dim:a}});return s.push(e),e})),backend:n,attrs:{axis:a}});return s.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),u}var tr={kernelName:r.cc,backendName:"cpu",kernelFunc:$n};var er={kernelName:r.dc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.paddings,s=a.constantValue;Object(f.a)(i,"pad");var u=o.map((function(t,e){return t[0]+i.shape[e]+t[1]})),c=o.map((function(t){return t[0]})),d=n.data.get(i.dataId).values,l=r.Md.sizeFromShape(i.shape),h=i.shape.length,p=r.Md.computeStrides(i.shape),m=r.Md.sizeFromShape(u),v=u.length,b=r.Md.computeStrides(u),g=r.Md.getTypedArrayFromDType(i.dtype,m);0!==s&&g.fill(s);for(var y=0;y<l;y++){var x=r.Md.indexToLoc(y,h,p).map((function(t,e){return t+c[e]}));g[r.Md.locToIndex(x,v,b)]=d[y]}return{dataId:n.write(g,u,i.dtype),shape:u,dtype:i.dtype}}},nr=Object(T.a)((function(t,e){return Math.pow(t,e)})),rr=Object(nt.a)(r.ec,nr),ar={kernelName:r.ec,backendName:"cpu",kernelFunc:rr},ir=n(254),or=n(255);var sr={kernelName:r.hc,backendName:"cpu",kernelFunc:function(t){var e=t.backend,n=t.attrs,r=n.start,a=n.stop,i=n.dtype,o=n.step,s=Object(or.a)(r,a,o,i);return e.makeTensorInfo([s.length],i,s)}},ur=Object(b.a)(r.kc,(function(t){return 1/t})),cr={kernelName:r.kc,backendName:"cpu",kernelFunc:ur};var dr={kernelName:r.oc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.images,o=a.alignCorners,s=a.halfPixelCenters,u=a.size;Object(f.a)(i,"resizeBilinear");for(var c=r.Md.computeStrides(i.shape),d=Object(_.a)(u,2),l=d[0],h=d[1],p=Object(_.a)(i.shape,4),m=p[0],v=p[1],b=p[2],g=p[3],y=n.data.get(i.dataId).values,x=new Float32Array(r.Md.sizeFromShape([m,l,h,g])),O=[o&&l>1?v-1:v,o&&h>1?b-1:b],w=[o&&l>1?l-1:l,o&&h>1?h-1:h],T=0,E=O[0]/w[0],k=O[1]/w[1],I=0;I<m;I++)for(var S=0;S<l;S++){var C=void 0;C=s?E*(S+.5)-.5:E*S;for(var N=Math.max(0,Math.floor(C)),j=C-N,A=Math.min(v-1,Math.ceil(C)),R=I*c[0]+N*c[1],M=I*c[0]+A*c[1],P=0;P<h;P++){var D=void 0;D=s?k*(P+.5)-.5:k*P;for(var F=Math.max(0,Math.floor(D)),L=D-F,B=Math.min(b-1,Math.ceil(D)),U=R+F*c[2],z=M+F*c[2],V=R+B*c[2],W=M+B*c[2],G=0;G<g;G++){var H=y[U+G],X=y[z+G],Y=H+(y[V+G]-H)*L,q=Y+(X+(y[W+G]-X)*L-Y)*j;x[T++]=q}}}return n.makeTensorInfo([m,l,h,g],"float32",x)}};var lr={kernelName:r.pc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.images,o=e.dy,s=a.alignCorners;Object(f.a)([o,i],"resizeBilinearGrad");for(var u=r.Md.computeStrides(i.shape),c=Object(_.a)(i.shape,4),d=c[0],l=c[1],h=c[2],p=c[3],m=Object(_.a)(o.shape,3),v=m[1],b=m[2],g=new Float32Array(d*l*h*p),y=[s&&v>1?l-1:l,s&&b>1?h-1:h],x=[s&&v>1?v-1:v,s&&b>1?b-1:b],O=y[0]/x[0],w=y[1]/x[1],T=n.data.get(o.dataId).values,E=0,k=0;k<d;k++)for(var I=k*u[0],S=0;S<v;S++)for(var C=S*O,N=Math.floor(C),j=Math.min(Math.ceil(C),l-1),A=I+N*u[1],R=I+j*u[1],M=C-N,P=1-M,D=0;D<b;D++)for(var F=D*w,L=Math.floor(F),B=Math.min(Math.ceil(F),h-1),U=F-L,z=1-U,V=A+L*u[2],W=A+B*u[2],G=R+L*u[2],H=R+B*u[2],X=P*z,Y=P*U,q=M*z,K=M*U,Z=0;Z<p;Z++){var J=T[E++];g[V+Z]+=J*X,g[W+Z]+=J*Y,g[G+Z]+=J*q,g[H+Z]+=J*K}return n.makeTensorInfo([d,h,l,p],"float32",g)}};var hr={kernelName:r.qc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.images,o=a.alignCorners,s=a.halfPixelCenters,u=a.size;Object(f.a)(i,"resizeNearestNeighbor");for(var c=r.Md.computeStrides(i.shape),d=Object(_.a)(u,2),l=d[0],h=d[1],p=Object(_.a)(i.shape,4),m=p[0],v=p[1],b=p[2],g=p[3],y=n.data.get(i.dataId).values,x=new Float32Array(m*l*h*g),O=[o&&l>1?v-1:v,o&&h>1?b-1:b],w=[o&&l>1?l-1:l,o&&h>1?h-1:h],T=O[0]/w[0],E=O[1]/w[1],k=0,I=0;I<m;I++)for(var S=I*c[0],C=0;C<l;C++){var N=s?T*(C+.5):T*C,j=Math.min(v-1,o?Math.round(N):Math.floor(N));s&&(j=Math.max(0,j));for(var A=S+j*c[1],R=0;R<h;R++){var M=s?E*(R+.5):E*R,P=Math.min(b-1,o?Math.round(M):Math.floor(M));s&&(P=Math.max(0,P));for(var D=A+P*c[2],F=0;F<g;F++){var L=y[D+F];x[k++]=L}}}return n.makeTensorInfo([m,l,h,g],i.dtype,x)}};var pr={kernelName:r.rc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.images,o=e.dy,s=a.alignCorners;Object(f.a)([o,i],"resizeNearestNeighborGrad");for(var u=r.Md.computeStrides(i.shape),c=r.Md.computeStrides(o.shape),d=Object(_.a)(i.shape,4),l=d[0],h=d[1],p=d[2],m=d[3],v=Object(_.a)(o.shape,3),b=v[1],g=v[2],y=new Float32Array(l*h*p*m),x=n.data.get(o.dataId).values,O=[s&&b>1?h-1:h,s&&g>1?p-1:p],w=[s&&b>1?b-1:b,s&&g>1?g-1:g],T=O[0]/w[0],E=O[1]/w[1],k=1/T,I=1/E,S=2*Math.ceil(k)+2,C=2*Math.ceil(I)+2,N=0;N<l;N++)for(var j=N*u[0],A=0;A<h;A++)for(var R=j+A*u[1],M=Math.floor(A*k),P=Math.floor(M-S/2),D=0;D<p;D++)for(var F=R+D*u[2],L=Math.floor(D*I),B=Math.floor(L-C/2),U=0;U<m;U++){for(var z=0,V=0;V<S;V++){var W=V+P;if(!(W<0||W>=b)){var G=j+W*c[1],H=W*T;if(A===Math.min(h-1,s?Math.round(H):Math.floor(H)))for(var X=0;X<C;X++){var Y=X+B;if(!(Y<0||Y>=g)){var q=G+Y*c[2],K=Y*E;D===Math.min(p-1,s?Math.round(K):Math.floor(K))&&(z+=x[q+U])}}}}y[F+U]=z}return n.makeTensorInfo(i.shape,i.dtype,y)}};var fr={kernelName:r.sc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.dims;Object(f.a)(i,"reverse");var s=i.shape.length,u=r.Md.parseAxisParam(o,i.shape);if(0===s)return Object(x.a)({inputs:{x:i},backend:n});for(var c=new r.Tc(i.shape,i.dtype),d=n.bufferSync(i),l=function(t){var e=c.indexToLoc(t),n=e.slice();u.forEach((function(t){return n[t]=i.shape[t]-1-n[t]})),c.set.apply(c,[d.get.apply(d,Object(Jt.a)(n))].concat(Object(Jt.a)(e)))},h=0;h<c.size;h++)l(h);return n.makeTensorInfo(c.shape,c.dtype,c.values)}},mr={kernelName:r.tc,backendName:"cpu",kernelFunc:function(t){for(var e=t.inputs,n=t.attrs,a=t.backend,i=e.image,o=n.radians,s=n.fillValue,u=n.center,c=a,d=r.Md.getTypedArrayFromDType(i.dtype,r.Md.sizeFromShape(i.shape)),l=Object(_.a)(i.shape,4),h=l[0],p=l[1],f=l[2],m=l[3],v=r.dd.getImageCenter(u,p,f),b=Object(_.a)(v,2),g=b[0],y=b[1],x=Math.sin(o),O=Math.cos(o),w=c.data.get(i.dataId).values,T=0;T<h;T++)for(var E=T*f*p*m,k=0;k<p;k++)for(var I=k*(f*m),S=0;S<f;S++)for(var C=S*m,N=0;N<m;N++){var j=[h,k,S,N],A=j[2],R=j[1],M=(A-g)*O-(R-y)*x,P=(A-g)*x+(R-y)*O;M=Math.round(M+g),P=Math.round(P+y);var D=s;if("number"!==typeof s&&(D=3===N?255:s[N]),M>=0&&M<f&&P>=0&&P<p)D=w[E+P*(f*m)+M*m+N];d[E+I+C+N]=D}return{dataId:c.write(d,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},vr=Object(b.a)(r.uc,(function(t){var e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1})),br={kernelName:r.uc,backendName:"cpu",kernelFunc:vr},gr=n(256);function yr(t,e,n,a,i,o,s,u,c,d){var l=[a/i,i],h=t.values,p=e.values;if(0===a)return Object(r.fd)(n,e.dtype);var f=Object(r.fd)(l,e.dtype);f.values.fill(c);for(var m=0;m<o;m++){for(var v=[],b=0,g=0;g<s;g++){var y=h[m*s+g];v.push(y),b+=y*u[g]}if(b<0||b>=a/i)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var x=0;x<i;x++)d?f.values[b*i+x]+=p[m*i+x]:f.values[b*i+x]=0===e.rank?p[0]:p[m*i+x]}return f}var xr={kernelName:r.wc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.indices,o=e.updates,s=a.shape,u=r.dd.calculateShapes(o,i,s),c=u.sliceRank,d=u.numUpdates,l=u.sliceSize,h=u.strides,p=u.outputSize,f=yr(n.bufferSync(i),n.bufferSync(o),s,p,l,d,c,h,0,!0);return n.makeTensorInfo(s,f.dtype,f.values)}};var Or={kernelName:r.xc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=e.condition,i=e.t,o=e.e;Object(f.a)([a,i,o],"select");for(var s=a.shape.length,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,l=Object(r.Ld)(i.dtype,o.dtype),h=r.Md.makeZerosTypedArray(r.Md.sizeFromShape(i.shape),l),p=0,m=0===s||s>1||1===i.shape.length?1:r.Md.sizeFromShape(i.shape.slice(1)),v=0;v<u.length;v++)for(var b=0;b<m;b++)1===u[v]?h[p++]=c[v]:h[p++]=d[v];return n.makeTensorInfo(i.shape,l,h)}},wr=r.dd.SELU_SCALEALPHA,_r=r.dd.SELU_SCALE,Tr=Object(b.a)(r.yc,(function(t){return t>=0?_r*t:wr*(Math.exp(t)-1)})),Er={kernelName:r.yc,backendName:"cpu",kernelFunc:Tr},kr=Object(b.a)(r.zc,(function(t){return 1/(1+Math.exp(-t))})),Ir={kernelName:r.zc,backendName:"cpu",kernelFunc:kr},Sr=Object(b.a)(r.Ac,(function(t){return t<0?-1:t>0?1:0})),Cr={kernelName:r.Ac,backendName:"cpu",kernelFunc:Sr},Nr=Object(b.a)(r.Bc,(function(t){return Math.sin(t)})),jr={kernelName:r.Bc,backendName:"cpu",kernelFunc:Nr},Ar=Object(b.a)(r.Cc,(function(t){return Math.sinh(t)})),Rr={kernelName:r.Cc,backendName:"cpu",kernelFunc:Ar},Mr=Math.log(1.1920928955078125e-7)+2,Pr=Object(b.a)(r.Fc,(function(t){var e=t>-Mr,n=t<Mr,r=Math.exp(t);return n?r:e?t:Math.log(1+r)})),Dr={kernelName:r.Fc,backendName:"cpu",kernelFunc:Pr};var Fr={kernelName:r.Gc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.blockShape,s=a.paddings;Object(f.a)([i],"spaceToBatchND");var u=r.Md.sizeFromShape(o),c=[[0,0]];c.push.apply(c,Object(Jt.a)(s));for(var d=1+o.length;d<i.shape.length;++d)c.push([0,0]);var l=er.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),h=r.dd.getReshaped(l.shape,o,u,!1),p=r.dd.getPermuted(h.length,o.length,!1),m=r.dd.getReshapedPermuted(l.shape,o,u,!1),v=M({inputs:{x:l},backend:n,attrs:{shape:h}}),b={x:v},g={perm:p},y=Object(H.a)({inputs:b,backend:n,attrs:g}),x=M({inputs:{x:y},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),x}};var Lr={kernelName:r.Hc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.sparseIndices,o=e.sparseValues,s=e.defaultValue,u=a.outputShape,c=r.dd.calculateShapes(o,i,u),d=c.sliceRank,l=c.numUpdates,h=c.sliceSize,p=c.strides,f=c.outputSize,m=yr(n.bufferSync(i),n.bufferSync(o),u,f,h,l,d,p,n.data.get(s.dataId).values[0],!1);return n.makeTensorInfo(u,m.dtype,m.values)}};var Br={kernelName:r.Ic,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.numOrSizeSplits,s=a.axis,u=r.Md.parseAxisParam(s,i.shape)[0],c=r.dd.prepareSplitSize(i,o,u),d=new Array(i.shape.length).fill(0),l=i.shape.slice();return c.map((function(t){var e=Object(Jt.a)(l);e[u]=t;var r=Object(vt.a)({inputs:{x:i},backend:n,attrs:{begin:d,size:e}});return d[u]+=t,r}))}},Ur=Object(b.a)(r.Jc,(function(t){return Math.sqrt(t)})),zr={kernelName:r.Jc,backendName:"cpu",kernelFunc:Ur},Vr={kernelName:r.Kc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,a=n;Object(f.a)(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Wr=Object(T.a)((function(t,e){var n=t-e;return n*n})),Gr=Object(nt.a)(r.Lc,Wr),Hr={kernelName:r.Lc,backendName:"cpu",kernelFunc:Gr},Xr=Object(b.a)(r.Mc,(function(t,e){var n=e;return isNaN(t)?NaN:t>0?1:n.alpha})),Yr={kernelName:r.Mc,backendName:"cpu",kernelFunc:Xr},qr=n(258);var Kr={kernelName:r.Nc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,d=a.endMask,l=a.ellipsisMask,h=a.newAxisMask,p=a.shrinkAxisMask;Object(f.a)(i,"stridedSlice");var m,v=r.Bd.sliceInfo(i.shape,o,s,u,c,d,l,h,p),b=v.nonStrided,g=v.$begin,y=v.$strides,x=v.size,O=v.newShape,w=v.outShape,_=M({inputs:{x:i},backend:n,attrs:{shape:O}});if(b){var T=Object(vt.a)({inputs:{x:_},backend:n,attrs:{begin:g,size:x}});m=M({inputs:{x:T},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(T)}else if(w.some((function(t){return 0===t})))m=n.makeTensorInfo(w,i.dtype,[]);else{var E=n.bufferSync(_),k=Object(qr.a)(w,E,y,g);m=n.makeTensorInfo(k.shape,k.dtype,k.values)}var I=M({inputs:{x:m},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(m),I}},Zr=Object(b.a)(r.Qc,(function(t){return Math.tan(t)})),Jr={kernelName:r.Qc,backendName:"cpu",kernelFunc:Zr},Qr=Object(b.a)(r.Rc,(function(t){return Math.tanh(t)})),$r={kernelName:r.Rc,backendName:"cpu",kernelFunc:Qr},ta=n(259);var ea={kernelName:r.Uc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.reps;Object(f.a)(a,"tile");var o=Object(ta.a)(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},na=n(260);var ra={kernelName:r.Vc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.x,i=r.k,o=r.sorted;Object(f.a)(a,"topk");var s=n.data.get(a.dataId).values,u=Object(na.a)(s,a.shape,a.dtype,i,o),c=Object(_.a)(u,2),d=c[0],l=c[1];return[n.makeTensorInfo(d.shape,d.dtype,d.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},aa=n(261);var ia={kernelName:r.Xc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,a=n.axis,i=e.x;Object(f.a)(i,"unique");var o=r.data.get(i.dataId).values,s=Object(aa.a)(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,d=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([d.length],"int32",d)]}};var oa={kernelName:r.Yc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,a=e.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,d=0;d<o;d++)d!==i&&(u[c++]=a.shape[d]);var l=new Array(o).fill(0),h=a.shape.slice();h[i]=1;for(var p=new Array(s),f=0;f<p.length;f++){l[i]=f;var m=Object(vt.a)({inputs:{x:a},backend:n,attrs:{begin:l,size:h}});p[f]=M({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}};for(var sa={kernelName:r.Zc,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,a=t.attrs,i=e.x,o=e.segmentIds,s=a.numSegments;Object(f.a)(i,"unsortedSegmentSum");for(var u=[],c=[],d=i.shape.length-o.shape.length,l=o,h=0;h<d;++h){var p=me({inputs:{input:l},backend:n,attrs:{dim:h+1}});l=p,c.push(p)}for(var m=0;m<s;++m){var v=r.Md.createScalarValue(m,"int32"),b=n.makeTensorInfo([],"int32",v),g=ae({inputs:{a:b,b:l},backend:n}),y=Object(xt.a)({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),x=Object(ge.a)({inputs:{a:y,b:i},backend:n}),O=kn({inputs:{x:x},backend:n,attrs:{axis:0,keepDims:!1}});u.push(O),c.push(b),c.push(g),c.push(y),c.push(x),c.push(O)}var w=$n({inputs:u,backend:n,attrs:{axis:0}});return c.forEach((function(t){return n.disposeIntermediateTensorInfo(t)})),w}},ua=0,ca=[L,B.a,z,W,R.b,G,X,Y,q,K,J,$,et,it,st,lt,ht,pt,ft,F,mt,bt,yt,xt.b,Ot.a,_t,Tt.b,Et,jt,Mt,Pt,Rt,Ft,Lt,Dt,Ut,Vt,Wt,Gt,Ht,Xt,qt,Kt,Zt,Qt,$t,ee,te,Oe,y,ne,ie,pe,fe.b,ve,be.a,Ee,Ie,Se,Ce.a,Ae,Re,Me,Pe,Fe,Le.a,ze,x.b,Ve,St,Ge,Xe,qe,w,Ke.a,Qe,tn,en.a,rn,sn,cn,hn,pn,fn,yn.a,xn,On,wn,_n,Tn,gn,Sn,Cn,Nn.a,jn,Mn,Ln,ge.b,Bn.a,zn,Wn,Hn,qn,Kn,Qn,tr,er,ar,I,ir.a,sr,Ct.b,cr,C,j,P,dr,lr,hr,pr,fr,mr,br,gr.a,xr,Or,Er,Ir,Cr,jr,Rr,vt.b,Fn,Dr,Fr,Lr,Br,zr,Vr,Hr,Yr,Kr,we.b,In,Jr,$r,ea,ra,H.b,ia,oa,sa,Jn];ua<ca.length;ua++){var da=ca[ua];Object(r.wd)(da)}}]]);
//# sourceMappingURL=2.46caf131.chunk.js.map